var Ff=Object.defineProperty;var yc=s=>{throw TypeError(s)};var Ef=(s,t,r)=>t in s?Ff(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var gt=(s,t,r)=>Ef(s,typeof t!="symbol"?t+"":t,r),nl=(s,t,r)=>t.has(s)||yc("Cannot "+r);var $=(s,t,r)=>(nl(s,t,"read from private field"),r?r.call(s):t.get(s)),Ae=(s,t,r)=>t.has(s)?yc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,r),Se=(s,t,r,a)=>(nl(s,t,"write to private field"),a?a.call(s,r):t.set(s,r),r),_e=(s,t,r)=>(nl(s,t,"access private method"),r);var xi=(s,t,r,a)=>({set _(n){Se(s,t,n,r)},get _(){return $(s,t,a)}});import{j as e,S as Mf,R as qu,I as _u,F as Wu,a as Ku,b as Yu,P as Of,C as zu,c as Hu,d as Gu,e as Qu,f as Zu,L as Xu,g as Ju,h as Vf,T as Uf,i as em,k as sm,l as Lf,m as tm,n as Bf,o as rm,p as $f,q as am,r as nm,s as qf,t as im,V as _f,u as lm,v as om,w as Wf,x as Kf,y as cm,z as Yf,A as zf,B as Hf,D as dm,E as Gf,G as Qf,H as um,J as Zf,O as mm,K as Xf,M as hm,N as xm,Q as fm,U as pm,W as gm,X as Jf,Y as jm,Z as vm,_ as ym,$ as ep,a0 as Nm,a1 as sp,a2 as bm,a3 as tp,a4 as wm,a5 as Cm,a6 as rp,a7 as ap,a8 as Sm}from"./ui-DiANDsYX.js";import{a as np,r as h,b as Ne}from"./vendor-C733eHZ9.js";import{u as _i,N as qs,L as Ge,a as Ye,O as ip,b as jo,c as Js,B as lp,R as op,d as ve}from"./router-BNTJ6wcV.js";import{$ as cp,u as I}from"./misc-Bq6dlanB.js";import{t as dp,c as up,a as Wi,f as mp}from"./utils-DYszHmjw.js";import{T as Ts,L as Hs,S as Ze,R as Qa,H as vo,a as hp,U as fs,b as Bt,c as ai,G as $t,M as Xe,B as Pm,C as os,D as ps,Z as Tr,d as Jr,e as Ii,f as Il,g as ea,F as ar,h as Ki,X as Wt,i as Yi,j as ni,k as Za,l as Ar,m as xp,n as Nc,o as bc,p as fp,q as Is,K as sr,r as Er,s as pp,t as Ks,u as gp,v as xt,w as jp,A as Ee,x as vp,P as yp,y as Ie,z as gs,E as nr,I as Qs,J as Ms,N as Je,O as Np,Q as Ws,V as ra,W as bp,Y as wc,_ as Cc,$ as qt,a0 as Fe,a1 as ir,a2 as wp,a3 as Cp,a4 as vt,a5 as ct,a6 as zi,a7 as Sc,a8 as km,a9 as Mr,aa as js,ab as Zs,ac as Hi,ad as Xs,ae as Sp,af as Pp,ag as tr,ah as Us,ai as Ls,aj as Nn,ak as yo,al as pn,am as kp,an as No,ao as bo,ap as Ti,aq as Dp,ar as Gi,as as Ip,at as Pc,au as Tp,av as Ap,aw as kc,ax as Rp,ay as Fp}from"./icons-CFhHLZzE.js";import{C as bi,o as Ep,r as Mp,a as Op,b as At,s as ee,c as ot,n as ms,l as Qe,u as ft,d as Ai}from"./forms-CggA3GzN.js";import{R as Qr,P as Dm,a as Vp,C as Im,T as Zr,L as Dc,b as Tm,c as Xa,X as Ja,Y as ma,d as Ri,A as Up,e as Ic,B as Tl,f as wi}from"./charts-1J7qtQ69.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Al={},Tc=np;Al.createRoot=Tc.createRoot,Al.hydrateRoot=Tc.hydrateRoot;var bn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Lp={setTimeout:(s,t)=>setTimeout(s,t),clearTimeout:s=>clearTimeout(s),setInterval:(s,t)=>setInterval(s,t),clearInterval:s=>clearInterval(s)},Br,go,Tu,Bp=(Tu=class{constructor(){Ae(this,Br,Lp);Ae(this,go,!1)}setTimeoutProvider(s){Se(this,Br,s)}setTimeout(s,t){return $(this,Br).setTimeout(s,t)}clearTimeout(s){$(this,Br).clearTimeout(s)}setInterval(s,t){return $(this,Br).setInterval(s,t)}clearInterval(s){$(this,Br).clearInterval(s)}},Br=new WeakMap,go=new WeakMap,Tu),ha=new Bp;function $p(s){setTimeout(s,0)}var Ia=typeof window>"u"||"Deno"in globalThis;function nt(){}function qp(s,t){return typeof s=="function"?s(t):s}function Rl(s){return typeof s=="number"&&s>=0&&s!==1/0}function Am(s,t){return Math.max(s+(t||0)-Date.now(),0)}function Xr(s,t){return typeof s=="function"?s(t):s}function Ct(s,t){return typeof s=="function"?s(t):s}function Ac(s,t){const{type:r="all",exact:a,fetchStatus:n,predicate:i,queryKey:o,stale:l}=s;if(o){if(a){if(t.queryHash!==wo(o,t.options))return!1}else if(!_n(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||i&&!i(t))}function Rc(s,t){const{exact:r,status:a,predicate:n,mutationKey:i}=s;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ta(t.options.mutationKey)!==Ta(i))return!1}else if(!_n(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||n&&!n(t))}function wo(s,t){return((t==null?void 0:t.queryKeyHashFn)||Ta)(s)}function Ta(s){return JSON.stringify(s,(t,r)=>Fl(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function _n(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(r=>_n(s[r],t[r])):!1}var _p=Object.prototype.hasOwnProperty;function Rm(s,t){if(s===t)return s;const r=Fc(s)&&Fc(t);if(!r&&!(Fl(s)&&Fl(t)))return t;const n=(r?s:Object.keys(s)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let u=0;u<o;u++){const d=r?u:i[u],m=s[d],x=t[d];if(m===x){l[d]=m,(r?u<n:_p.call(s,d))&&c++;continue}if(m===null||x===null||typeof m!="object"||typeof x!="object"){l[d]=x;continue}const g=Rm(m,x);l[d]=g,g===m&&c++}return n===o&&c===n?s:l}function Fi(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const r in s)if(s[r]!==t[r])return!1;return!0}function Fc(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Fl(s){if(!Ec(s))return!1;const t=s.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Ec(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function Ec(s){return Object.prototype.toString.call(s)==="[object Object]"}function Wp(s){return new Promise(t=>{ha.setTimeout(t,s)})}function El(s,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(s,t):r.structuralSharing!==!1?Rm(s,t):t}function Kp(s,t,r=0){const a=[...s,t];return r&&a.length>r?a.slice(1):a}function Yp(s,t,r=0){const a=[t,...s];return r&&a.length>r?a.slice(0,-1):a}var Co=Symbol();function Fm(s,t){return!s.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!s.queryFn||s.queryFn===Co?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function Em(s,t){return typeof s=="function"?s(...t):!!s}var ga,$r,rn,Au,zp=(Au=class extends bn{constructor(){super();Ae(this,ga);Ae(this,$r);Ae(this,rn);Se(this,rn,t=>{if(!Ia&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){$(this,$r)||this.setEventListener($(this,rn))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,$r))==null||t.call(this),Se(this,$r,void 0))}setEventListener(t){var r;Se(this,rn,t),(r=$(this,$r))==null||r.call(this),Se(this,$r,t(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(t){$(this,ga)!==t&&(Se(this,ga,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof $(this,ga)=="boolean"?$(this,ga):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ga=new WeakMap,$r=new WeakMap,rn=new WeakMap,Au),So=new zp;function Ml(){let s,t;const r=new Promise((n,i)=>{s=n,t=i});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),s(n)},r.reject=n=>{a({status:"rejected",reason:n}),t(n)},r}var Hp=$p;function Gp(){let s=[],t=0,r=l=>{l()},a=l=>{l()},n=Hp;const i=l=>{t?s.push(l):n(()=>{r(l)})},o=()=>{const l=s;s=[],l.length&&n(()=>{a(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{n=l}}}var Es=Gp(),an,qr,nn,Ru,Qp=(Ru=class extends bn{constructor(){super();Ae(this,an,!0);Ae(this,qr);Ae(this,nn);Se(this,nn,t=>{if(!Ia&&window.addEventListener){const r=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}}})}onSubscribe(){$(this,qr)||this.setEventListener($(this,nn))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,qr))==null||t.call(this),Se(this,qr,void 0))}setEventListener(t){var r;Se(this,nn,t),(r=$(this,qr))==null||r.call(this),Se(this,qr,t(this.setOnline.bind(this)))}setOnline(t){$(this,an)!==t&&(Se(this,an,t),this.listeners.forEach(a=>{a(t)}))}isOnline(){return $(this,an)}},an=new WeakMap,qr=new WeakMap,nn=new WeakMap,Ru),Ei=new Qp;function Zp(s){return Math.min(1e3*2**s,3e4)}function Mm(s){return(s??"online")==="online"?Ei.isOnline():!0}var Ol=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function Om(s){let t=!1,r=0,a;const n=Ml(),i=()=>n.status!=="pending",o=N=>{var f;if(!i()){const S=new Ol(N);x(S),(f=s.onCancel)==null||f.call(s,S)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>So.isFocused()&&(s.networkMode==="always"||Ei.isOnline())&&s.canRun(),d=()=>Mm(s.networkMode)&&s.canRun(),m=N=>{i()||(a==null||a(),n.resolve(N))},x=N=>{i()||(a==null||a(),n.reject(N))},g=()=>new Promise(N=>{var f;a=S=>{(i()||u())&&N(S)},(f=s.onPause)==null||f.call(s)}).then(()=>{var N;a=void 0,i()||(N=s.onContinue)==null||N.call(s)}),p=()=>{if(i())return;let N;const f=r===0?s.initialPromise:void 0;try{N=f??s.fn()}catch(S){N=Promise.reject(S)}Promise.resolve(N).then(m).catch(S=>{var b;if(i())return;const j=s.retry??(Ia?0:3),w=s.retryDelay??Zp,C=typeof w=="function"?w(r,S):w,y=j===!0||typeof j=="number"&&r<j||typeof j=="function"&&j(r,S);if(t||!y){x(S);return}r++,(b=s.onFail)==null||b.call(s,r,S),Wp(C).then(()=>u()?void 0:g()).then(()=>{t?x(S):p()})})};return{promise:n,status:()=>n.status,cancel:o,continue:()=>(a==null||a(),n),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?p():g().then(p),n)}}var ja,Fu,Vm=(Fu=class{constructor(){Ae(this,ja)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rl(this.gcTime)&&Se(this,ja,ha.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(Ia?1/0:5*60*1e3))}clearGcTimeout(){$(this,ja)&&(ha.clearTimeout($(this,ja)),Se(this,ja,void 0))}},ja=new WeakMap,Fu),va,ln,wt,ya,Vs,Jn,Na,Ot,yr,Eu,Xp=(Eu=class extends Vm{constructor(t){super();Ae(this,Ot);Ae(this,va);Ae(this,ln);Ae(this,wt);Ae(this,ya);Ae(this,Vs);Ae(this,Jn);Ae(this,Na);Se(this,Na,!1),Se(this,Jn,t.defaultOptions),this.setOptions(t.options),this.observers=[],Se(this,ya,t.client),Se(this,wt,$(this,ya).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Se(this,va,Oc(this.options)),this.state=t.state??$(this,va),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=$(this,Vs))==null?void 0:t.promise}setOptions(t){if(this.options={...$(this,Jn),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Oc(this.options);r.data!==void 0&&(this.setState(Mc(r.data,r.dataUpdatedAt)),Se(this,va,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,wt).remove(this)}setData(t,r){const a=El(this.state.data,t,this.options);return _e(this,Ot,yr).call(this,{data:a,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),a}setState(t,r){_e(this,Ot,yr).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var a,n;const r=(a=$(this,Vs))==null?void 0:a.promise;return(n=$(this,Vs))==null||n.cancel(t),r?r.then(nt).catch(nt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,va))}isActive(){return this.observers.some(t=>Ct(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Co||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Xr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Am(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=$(this,Vs))==null||r.continue()}onOnline(){var r;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=$(this,Vs))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),$(this,wt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||($(this,Vs)&&($(this,Na)?$(this,Vs).cancel({revert:!0}):$(this,Vs).cancelRetry()),this.scheduleGc()),$(this,wt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_e(this,Ot,yr).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,d,m,x,g,p,N,f,S,j,w;if(this.state.fetchStatus!=="idle"&&((c=$(this,Vs))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if($(this,Vs))return $(this,Vs).continueRetry(),$(this,Vs).promise}if(t&&this.setOptions(t),!this.options.queryFn){const C=this.observers.find(y=>y.options.queryFn);C&&this.setOptions(C.options)}const a=new AbortController,n=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Se(this,Na,!0),a.signal)})},i=()=>{const C=Fm(this.options,r),b=(()=>{const v={client:$(this,ya),queryKey:this.queryKey,meta:this.meta};return n(v),v})();return Se(this,Na,!1),this.options.persister?this.options.persister(C,b,this):C(b)},l=(()=>{const C={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:$(this,ya),state:this.state,fetchFn:i};return n(C),C})();(u=this.options.behavior)==null||u.onFetch(l,this),Se(this,ln,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&_e(this,Ot,yr).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),Se(this,Vs,Om({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:C=>{C instanceof Ol&&C.revert&&this.setState({...$(this,ln),fetchStatus:"idle"}),a.abort()},onFail:(C,y)=>{_e(this,Ot,yr).call(this,{type:"failed",failureCount:C,error:y})},onPause:()=>{_e(this,Ot,yr).call(this,{type:"pause"})},onContinue:()=>{_e(this,Ot,yr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const C=await $(this,Vs).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(g=(x=$(this,wt).config).onSuccess)==null||g.call(x,C,this),(N=(p=$(this,wt).config).onSettled)==null||N.call(p,C,this.state.error,this),C}catch(C){if(C instanceof Ol){if(C.silent)return $(this,Vs).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw _e(this,Ot,yr).call(this,{type:"error",error:C}),(S=(f=$(this,wt).config).onError)==null||S.call(f,C,this),(w=(j=$(this,wt).config).onSettled)==null||w.call(j,this.state.data,C,this),C}finally{this.scheduleGc()}}},va=new WeakMap,ln=new WeakMap,wt=new WeakMap,ya=new WeakMap,Vs=new WeakMap,Jn=new WeakMap,Na=new WeakMap,Ot=new WeakSet,yr=function(t){const r=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...Um(a.data,this.options),fetchMeta:t.meta??null};case"success":const n={...a,...Mc(t.data,t.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Se(this,ln,t.manual?n:void 0),n;case"error":const i=t.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=r(this.state),Es.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),$(this,wt).notify({query:this,type:"updated",action:t})})},Eu);function Um(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Mm(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function Mc(s,t){return{data:s,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Oc(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,r=t!==void 0,a=r?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var mt,He,ei,rt,ba,on,Nr,_r,si,cn,dn,wa,Ca,Wr,un,ns,Mn,Vl,Ul,Ll,Bl,$l,ql,_l,Lm,Mu,Jp=(Mu=class extends bn{constructor(t,r){super();Ae(this,ns);Ae(this,mt);Ae(this,He);Ae(this,ei);Ae(this,rt);Ae(this,ba);Ae(this,on);Ae(this,Nr);Ae(this,_r);Ae(this,si);Ae(this,cn);Ae(this,dn);Ae(this,wa);Ae(this,Ca);Ae(this,Wr);Ae(this,un,new Set);this.options=r,Se(this,mt,t),Se(this,_r,null),Se(this,Nr,Ml()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&($(this,He).addObserver(this),Vc($(this,He),this.options)?_e(this,ns,Mn).call(this):this.updateResult(),_e(this,ns,Bl).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Wl($(this,He),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Wl($(this,He),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,_e(this,ns,$l).call(this),_e(this,ns,ql).call(this),$(this,He).removeObserver(this)}setOptions(t){const r=this.options,a=$(this,He);if(this.options=$(this,mt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ct(this.options.enabled,$(this,He))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");_e(this,ns,_l).call(this),$(this,He).setOptions(this.options),r._defaulted&&!Fi(this.options,r)&&$(this,mt).getQueryCache().notify({type:"observerOptionsUpdated",query:$(this,He),observer:this});const n=this.hasListeners();n&&Uc($(this,He),a,this.options,r)&&_e(this,ns,Mn).call(this),this.updateResult(),n&&($(this,He)!==a||Ct(this.options.enabled,$(this,He))!==Ct(r.enabled,$(this,He))||Xr(this.options.staleTime,$(this,He))!==Xr(r.staleTime,$(this,He)))&&_e(this,ns,Vl).call(this);const i=_e(this,ns,Ul).call(this);n&&($(this,He)!==a||Ct(this.options.enabled,$(this,He))!==Ct(r.enabled,$(this,He))||i!==$(this,Wr))&&_e(this,ns,Ll).call(this,i)}getOptimisticResult(t){const r=$(this,mt).getQueryCache().build($(this,mt),t),a=this.createResult(r,t);return sg(this,a)&&(Se(this,rt,a),Se(this,on,this.options),Se(this,ba,$(this,He).state)),a}getCurrentResult(){return $(this,rt)}trackResult(t,r){return new Proxy(t,{get:(a,n)=>(this.trackProp(n),r==null||r(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&$(this,Nr).status==="pending"&&$(this,Nr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,n))})}trackProp(t){$(this,un).add(t)}getCurrentQuery(){return $(this,He)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=$(this,mt).defaultQueryOptions(t),a=$(this,mt).getQueryCache().build($(this,mt),r);return a.fetch().then(()=>this.createResult(a,r))}fetch(t){return _e(this,ns,Mn).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),$(this,rt)))}createResult(t,r){var P;const a=$(this,He),n=this.options,i=$(this,rt),o=$(this,ba),l=$(this,on),u=t!==a?t.state:$(this,ei),{state:d}=t;let m={...d},x=!1,g;if(r._optimisticResults){const V=this.hasListeners(),R=!V&&Vc(t,r),T=V&&Uc(t,a,r,n);(R||T)&&(m={...m,...Um(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:p,errorUpdatedAt:N,status:f}=m;g=m.data;let S=!1;if(r.placeholderData!==void 0&&g===void 0&&f==="pending"){let V;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(V=i.data,S=!0):V=typeof r.placeholderData=="function"?r.placeholderData((P=$(this,dn))==null?void 0:P.state.data,$(this,dn)):r.placeholderData,V!==void 0&&(f="success",g=El(i==null?void 0:i.data,V,r),x=!0)}if(r.select&&g!==void 0&&!S)if(i&&g===(o==null?void 0:o.data)&&r.select===$(this,si))g=$(this,cn);else try{Se(this,si,r.select),g=r.select(g),g=El(i==null?void 0:i.data,g,r),Se(this,cn,g),Se(this,_r,null)}catch(V){Se(this,_r,V)}$(this,_r)&&(p=$(this,_r),g=$(this,cn),N=Date.now(),f="error");const j=m.fetchStatus==="fetching",w=f==="pending",C=f==="error",y=w&&j,b=g!==void 0,M={status:f,fetchStatus:m.fetchStatus,isPending:w,isSuccess:f==="success",isError:C,isInitialLoading:y,isLoading:y,data:g,dataUpdatedAt:m.dataUpdatedAt,error:p,errorUpdatedAt:N,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:j,isRefetching:j&&!w,isLoadingError:C&&!b,isPaused:m.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:C&&b,isStale:Po(t,r),refetch:this.refetch,promise:$(this,Nr),isEnabled:Ct(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const V=q=>{M.status==="error"?q.reject(M.error):M.data!==void 0&&q.resolve(M.data)},R=()=>{const q=Se(this,Nr,M.promise=Ml());V(q)},T=$(this,Nr);switch(T.status){case"pending":t.queryHash===a.queryHash&&V(T);break;case"fulfilled":(M.status==="error"||M.data!==T.value)&&R();break;case"rejected":(M.status!=="error"||M.error!==T.reason)&&R();break}}return M}updateResult(){const t=$(this,rt),r=this.createResult($(this,He),this.options);if(Se(this,ba,$(this,He).state),Se(this,on,this.options),$(this,ba).data!==void 0&&Se(this,dn,$(this,He)),Fi(r,t))return;Se(this,rt,r);const a=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!$(this,un).size)return!0;const o=new Set(i??$(this,un));return this.options.throwOnError&&o.add("error"),Object.keys($(this,rt)).some(l=>{const c=l;return $(this,rt)[c]!==t[c]&&o.has(c)})};_e(this,ns,Lm).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&_e(this,ns,Bl).call(this)}},mt=new WeakMap,He=new WeakMap,ei=new WeakMap,rt=new WeakMap,ba=new WeakMap,on=new WeakMap,Nr=new WeakMap,_r=new WeakMap,si=new WeakMap,cn=new WeakMap,dn=new WeakMap,wa=new WeakMap,Ca=new WeakMap,Wr=new WeakMap,un=new WeakMap,ns=new WeakSet,Mn=function(t){_e(this,ns,_l).call(this);let r=$(this,He).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(nt)),r},Vl=function(){_e(this,ns,$l).call(this);const t=Xr(this.options.staleTime,$(this,He));if(Ia||$(this,rt).isStale||!Rl(t))return;const a=Am($(this,rt).dataUpdatedAt,t)+1;Se(this,wa,ha.setTimeout(()=>{$(this,rt).isStale||this.updateResult()},a))},Ul=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval($(this,He)):this.options.refetchInterval)??!1},Ll=function(t){_e(this,ns,ql).call(this),Se(this,Wr,t),!(Ia||Ct(this.options.enabled,$(this,He))===!1||!Rl($(this,Wr))||$(this,Wr)===0)&&Se(this,Ca,ha.setInterval(()=>{(this.options.refetchIntervalInBackground||So.isFocused())&&_e(this,ns,Mn).call(this)},$(this,Wr)))},Bl=function(){_e(this,ns,Vl).call(this),_e(this,ns,Ll).call(this,_e(this,ns,Ul).call(this))},$l=function(){$(this,wa)&&(ha.clearTimeout($(this,wa)),Se(this,wa,void 0))},ql=function(){$(this,Ca)&&(ha.clearInterval($(this,Ca)),Se(this,Ca,void 0))},_l=function(){const t=$(this,mt).getQueryCache().build($(this,mt),this.options);if(t===$(this,He))return;const r=$(this,He);Se(this,He,t),Se(this,ei,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Lm=function(t){Es.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r($(this,rt))}),$(this,mt).getQueryCache().notify({query:$(this,He),type:"observerResultsUpdated"})})},Mu);function eg(s,t){return Ct(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function Vc(s,t){return eg(s,t)||s.state.data!==void 0&&Wl(s,t,t.refetchOnMount)}function Wl(s,t,r){if(Ct(t.enabled,s)!==!1&&Xr(t.staleTime,s)!=="static"){const a=typeof r=="function"?r(s):r;return a==="always"||a!==!1&&Po(s,t)}return!1}function Uc(s,t,r,a){return(s!==t||Ct(a.enabled,s)===!1)&&(!r.suspense||s.state.status!=="error")&&Po(s,r)}function Po(s,t){return Ct(t.enabled,s)!==!1&&s.isStaleByTime(Xr(t.staleTime,s))}function sg(s,t){return!Fi(s.getCurrentResult(),t)}function Lc(s){return{onFetch:(t,r)=>{var d,m,x,g,p;const a=t.options,n=(x=(m=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:m.fetchMore)==null?void 0:x.direction,i=((g=t.state.data)==null?void 0:g.pages)||[],o=((p=t.state.data)==null?void 0:p.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let N=!1;const f=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?N=!0:t.signal.addEventListener("abort",()=>{N=!0}),t.signal)})},S=Fm(t.options,t.fetchOptions),j=async(w,C,y)=>{if(N)return Promise.reject();if(C==null&&w.pages.length)return Promise.resolve(w);const v=(()=>{const R={client:t.client,queryKey:t.queryKey,pageParam:C,direction:y?"backward":"forward",meta:t.options.meta};return f(R),R})(),M=await S(v),{maxPages:P}=t.options,V=y?Yp:Kp;return{pages:V(w.pages,M,P),pageParams:V(w.pageParams,C,P)}};if(n&&i.length){const w=n==="backward",C=w?tg:Bc,y={pages:i,pageParams:o},b=C(a,y);l=await j(y,b,w)}else{const w=s??i.length;do{const C=c===0?o[0]??a.initialPageParam:Bc(a,l);if(c>0&&C==null)break;l=await j(l,C),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var N,f;return(f=(N=t.options).persister)==null?void 0:f.call(N,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Bc(s,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?s.getNextPageParam(t[a],t,r[a],r):void 0}function tg(s,{pages:t,pageParams:r}){var a;return t.length>0?(a=s.getPreviousPageParam)==null?void 0:a.call(s,t[0],t,r[0],r):void 0}var ti,Xt,at,Sa,Jt,Ur,Ou,rg=(Ou=class extends Vm{constructor(t){super();Ae(this,Jt);Ae(this,ti);Ae(this,Xt);Ae(this,at);Ae(this,Sa);Se(this,ti,t.client),this.mutationId=t.mutationId,Se(this,at,t.mutationCache),Se(this,Xt,[]),this.state=t.state||Bm(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){$(this,Xt).includes(t)||($(this,Xt).push(t),this.clearGcTimeout(),$(this,at).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Se(this,Xt,$(this,Xt).filter(r=>r!==t)),this.scheduleGc(),$(this,at).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){$(this,Xt).length||(this.state.status==="pending"?this.scheduleGc():$(this,at).remove(this))}continue(){var t;return((t=$(this,Sa))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,d,m,x,g,p,N,f,S,j,w,C,y,b,v,M,P;const r=()=>{_e(this,Jt,Ur).call(this,{type:"continue"})},a={client:$(this,ti),meta:this.options.meta,mutationKey:this.options.mutationKey};Se(this,Sa,Om({fn:()=>this.options.mutationFn?this.options.mutationFn(t,a):Promise.reject(new Error("No mutationFn found")),onFail:(V,R)=>{_e(this,Jt,Ur).call(this,{type:"failed",failureCount:V,error:R})},onPause:()=>{_e(this,Jt,Ur).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,at).canRun(this)}));const n=this.state.status==="pending",i=!$(this,Sa).canStart();try{if(n)r();else{_e(this,Jt,Ur).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=$(this,at).config).onMutate)==null?void 0:l.call(o,t,this,a));const R=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,a));R!==this.state.context&&_e(this,Jt,Ur).call(this,{type:"pending",context:R,variables:t,isPaused:i})}const V=await $(this,Sa).start();return await((m=(d=$(this,at).config).onSuccess)==null?void 0:m.call(d,V,t,this.state.context,this,a)),await((g=(x=this.options).onSuccess)==null?void 0:g.call(x,V,t,this.state.context,a)),await((N=(p=$(this,at).config).onSettled)==null?void 0:N.call(p,V,null,this.state.variables,this.state.context,this,a)),await((S=(f=this.options).onSettled)==null?void 0:S.call(f,V,null,t,this.state.context,a)),_e(this,Jt,Ur).call(this,{type:"success",data:V}),V}catch(V){try{throw await((w=(j=$(this,at).config).onError)==null?void 0:w.call(j,V,t,this.state.context,this,a)),await((y=(C=this.options).onError)==null?void 0:y.call(C,V,t,this.state.context,a)),await((v=(b=$(this,at).config).onSettled)==null?void 0:v.call(b,void 0,V,this.state.variables,this.state.context,this,a)),await((P=(M=this.options).onSettled)==null?void 0:P.call(M,void 0,V,t,this.state.context,a)),V}finally{_e(this,Jt,Ur).call(this,{type:"error",error:V})}}finally{$(this,at).runNext(this)}}},ti=new WeakMap,Xt=new WeakMap,at=new WeakMap,Sa=new WeakMap,Jt=new WeakSet,Ur=function(t){const r=a=>{switch(t.type){case"failed":return{...a,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...a,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:t.error,failureCount:a.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Es.batch(()=>{$(this,Xt).forEach(a=>{a.onMutationUpdate(t)}),$(this,at).notify({mutation:this,type:"updated",action:t})})},Ou);function Bm(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var br,Vt,ri,Vu,ag=(Vu=class extends bn{constructor(t={}){super();Ae(this,br);Ae(this,Vt);Ae(this,ri);this.config=t,Se(this,br,new Set),Se(this,Vt,new Map),Se(this,ri,0)}build(t,r,a){const n=new rg({client:t,mutationCache:this,mutationId:++xi(this,ri)._,options:t.defaultMutationOptions(r),state:a});return this.add(n),n}add(t){$(this,br).add(t);const r=fi(t);if(typeof r=="string"){const a=$(this,Vt).get(r);a?a.push(t):$(this,Vt).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if($(this,br).delete(t)){const r=fi(t);if(typeof r=="string"){const a=$(this,Vt).get(r);if(a)if(a.length>1){const n=a.indexOf(t);n!==-1&&a.splice(n,1)}else a[0]===t&&$(this,Vt).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=fi(t);if(typeof r=="string"){const a=$(this,Vt).get(r),n=a==null?void 0:a.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){var a;const r=fi(t);if(typeof r=="string"){const n=(a=$(this,Vt).get(r))==null?void 0:a.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Es.batch(()=>{$(this,br).forEach(t=>{this.notify({type:"removed",mutation:t})}),$(this,br).clear(),$(this,Vt).clear()})}getAll(){return Array.from($(this,br))}find(t){const r={exact:!0,...t};return this.getAll().find(a=>Rc(r,a))}findAll(t={}){return this.getAll().filter(r=>Rc(t,r))}notify(t){Es.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Es.batch(()=>Promise.all(t.map(r=>r.continue().catch(nt))))}},br=new WeakMap,Vt=new WeakMap,ri=new WeakMap,Vu);function fi(s){var t;return(t=s.options.scope)==null?void 0:t.id}var wr,Kr,ht,Cr,Ir,Ci,Kl,Uu,ng=(Uu=class extends bn{constructor(r,a){super();Ae(this,Ir);Ae(this,wr);Ae(this,Kr);Ae(this,ht);Ae(this,Cr);Se(this,wr,r),this.setOptions(a),this.bindMethods(),_e(this,Ir,Ci).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const a=this.options;this.options=$(this,wr).defaultMutationOptions(r),Fi(this.options,a)||$(this,wr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:$(this,ht),observer:this}),a!=null&&a.mutationKey&&this.options.mutationKey&&Ta(a.mutationKey)!==Ta(this.options.mutationKey)?this.reset():((n=$(this,ht))==null?void 0:n.state.status)==="pending"&&$(this,ht).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=$(this,ht))==null||r.removeObserver(this)}onMutationUpdate(r){_e(this,Ir,Ci).call(this),_e(this,Ir,Kl).call(this,r)}getCurrentResult(){return $(this,Kr)}reset(){var r;(r=$(this,ht))==null||r.removeObserver(this),Se(this,ht,void 0),_e(this,Ir,Ci).call(this),_e(this,Ir,Kl).call(this)}mutate(r,a){var n;return Se(this,Cr,a),(n=$(this,ht))==null||n.removeObserver(this),Se(this,ht,$(this,wr).getMutationCache().build($(this,wr),this.options)),$(this,ht).addObserver(this),$(this,ht).execute(r)}},wr=new WeakMap,Kr=new WeakMap,ht=new WeakMap,Cr=new WeakMap,Ir=new WeakSet,Ci=function(){var a;const r=((a=$(this,ht))==null?void 0:a.state)??Bm();Se(this,Kr,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Kl=function(r){Es.batch(()=>{var a,n,i,o,l,c,u,d;if($(this,Cr)&&this.hasListeners()){const m=$(this,Kr).variables,x=$(this,Kr).context,g={client:$(this,wr),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((n=(a=$(this,Cr)).onSuccess)==null||n.call(a,r.data,m,x,g),(o=(i=$(this,Cr)).onSettled)==null||o.call(i,r.data,null,m,x,g)):(r==null?void 0:r.type)==="error"&&((c=(l=$(this,Cr)).onError)==null||c.call(l,r.error,m,x,g),(d=(u=$(this,Cr)).onSettled)==null||d.call(u,void 0,r.error,m,x,g))}this.listeners.forEach(m=>{m($(this,Kr))})})},Uu),er,Lu,ig=(Lu=class extends bn{constructor(t={}){super();Ae(this,er);this.config=t,Se(this,er,new Map)}build(t,r,a){const n=r.queryKey,i=r.queryHash??wo(n,r);let o=this.get(i);return o||(o=new Xp({client:t,queryKey:n,queryHash:i,options:t.defaultQueryOptions(r),state:a,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){$(this,er).has(t.queryHash)||($(this,er).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=$(this,er).get(t.queryHash);r&&(t.destroy(),r===t&&$(this,er).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Es.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return $(this,er).get(t)}getAll(){return[...$(this,er).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(a=>Ac(r,a))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(a=>Ac(t,a)):r}notify(t){Es.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Es.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Es.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},er=new WeakMap,Lu),bs,Yr,zr,mn,hn,Hr,xn,fn,Bu,lg=(Bu=class{constructor(s={}){Ae(this,bs);Ae(this,Yr);Ae(this,zr);Ae(this,mn);Ae(this,hn);Ae(this,Hr);Ae(this,xn);Ae(this,fn);Se(this,bs,s.queryCache||new ig),Se(this,Yr,s.mutationCache||new ag),Se(this,zr,s.defaultOptions||{}),Se(this,mn,new Map),Se(this,hn,new Map),Se(this,Hr,0)}mount(){xi(this,Hr)._++,$(this,Hr)===1&&(Se(this,xn,So.subscribe(async s=>{s&&(await this.resumePausedMutations(),$(this,bs).onFocus())})),Se(this,fn,Ei.subscribe(async s=>{s&&(await this.resumePausedMutations(),$(this,bs).onOnline())})))}unmount(){var s,t;xi(this,Hr)._--,$(this,Hr)===0&&((s=$(this,xn))==null||s.call(this),Se(this,xn,void 0),(t=$(this,fn))==null||t.call(this),Se(this,fn,void 0))}isFetching(s){return $(this,bs).findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return $(this,Yr).findAll({...s,status:"pending"}).length}getQueryData(s){var r;const t=this.defaultQueryOptions({queryKey:s});return(r=$(this,bs).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),r=$(this,bs).build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(s):(s.revalidateIfStale&&r.isStaleByTime(Xr(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(s){return $(this,bs).findAll(s).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(s,t,r){const a=this.defaultQueryOptions({queryKey:s}),n=$(this,bs).get(a.queryHash),i=n==null?void 0:n.state.data,o=qp(t,i);if(o!==void 0)return $(this,bs).build(this,a).setData(o,{...r,manual:!0})}setQueriesData(s,t,r){return Es.batch(()=>$(this,bs).findAll(s).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(s){var r;const t=this.defaultQueryOptions({queryKey:s});return(r=$(this,bs).get(t.queryHash))==null?void 0:r.state}removeQueries(s){const t=$(this,bs);Es.batch(()=>{t.findAll(s).forEach(r=>{t.remove(r)})})}resetQueries(s,t){const r=$(this,bs);return Es.batch(()=>(r.findAll(s).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...s},t)))}cancelQueries(s,t={}){const r={revert:!0,...t},a=Es.batch(()=>$(this,bs).findAll(s).map(n=>n.cancel(r)));return Promise.all(a).then(nt).catch(nt)}invalidateQueries(s,t={}){return Es.batch(()=>($(this,bs).findAll(s).forEach(r=>{r.invalidate()}),(s==null?void 0:s.refetchType)==="none"?Promise.resolve():this.refetchQueries({...s,type:(s==null?void 0:s.refetchType)??(s==null?void 0:s.type)??"active"},t)))}refetchQueries(s,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=Es.batch(()=>$(this,bs).findAll(s).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(nt)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(nt)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const r=$(this,bs).build(this,t);return r.isStaleByTime(Xr(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(nt).catch(nt)}fetchInfiniteQuery(s){return s.behavior=Lc(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(nt).catch(nt)}ensureInfiniteQueryData(s){return s.behavior=Lc(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Ei.isOnline()?$(this,Yr).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,bs)}getMutationCache(){return $(this,Yr)}getDefaultOptions(){return $(this,zr)}setDefaultOptions(s){Se(this,zr,s)}setQueryDefaults(s,t){$(this,mn).set(Ta(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...$(this,mn).values()],r={};return t.forEach(a=>{_n(s,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(s,t){$(this,hn).set(Ta(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...$(this,hn).values()],r={};return t.forEach(a=>{_n(s,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(s){if(s._defaulted)return s;const t={...$(this,zr).queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=wo(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Co&&(t.enabled=!1),t}defaultMutationOptions(s){return s!=null&&s._defaulted?s:{...$(this,zr).mutations,...(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){$(this,bs).clear(),$(this,Yr).clear()}},bs=new WeakMap,Yr=new WeakMap,zr=new WeakMap,mn=new WeakMap,hn=new WeakMap,Hr=new WeakMap,xn=new WeakMap,fn=new WeakMap,Bu),$m=h.createContext(void 0),ze=s=>{const t=h.useContext($m);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},og=({client:s,children:t})=>(h.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx($m.Provider,{value:s,children:t})),qm=h.createContext(!1),cg=()=>h.useContext(qm);qm.Provider;function dg(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var ug=h.createContext(dg()),mg=()=>h.useContext(ug),hg=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},xg=s=>{h.useEffect(()=>{s.clearReset()},[s])},fg=({result:s,errorResetBoundary:t,throwOnError:r,query:a,suspense:n})=>s.isError&&!t.isReset()&&!s.isFetching&&a&&(n&&s.data===void 0||Em(r,[s.error,a])),pg=s=>{if(s.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),a=s.staleTime;s.staleTime=typeof a=="function"?(...n)=>r(a(...n)):r(a),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},gg=(s,t)=>s.isLoading&&s.isFetching&&!t,jg=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,$c=(s,t,r)=>t.fetchOptimistic(s).catch(()=>{r.clearReset()});function vg(s,t,r){var m,x,g,p,N;const a=cg(),n=mg(),i=ze(),o=i.defaultQueryOptions(s);(x=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||x.call(m,o),o._optimisticResults=a?"isRestoring":"optimistic",pg(o),hg(o,n),xg(n);const l=!i.getQueryCache().get(o.queryHash),[c]=h.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),d=!a&&s.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(f=>{const S=d?c.subscribe(Es.batchCalls(f)):nt;return c.updateResult(),S},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(o)},[o,c]),jg(o,u))throw $c(o,c,n);if(fg({result:u,errorResetBoundary:n,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((p=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||p.call(g,o,u),o.experimental_prefetchInRender&&!Ia&&gg(u,a)){const f=l?$c(o,c,n):(N=i.getQueryCache().get(o.queryHash))==null?void 0:N.promise;f==null||f.catch(nt).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Cs(s,t){return vg(s,Jp)}function Le(s,t){const r=ze(),[a]=h.useState(()=>new ng(r,s));h.useEffect(()=>{a.setOptions(s)},[a,s]);const n=h.useSyncExternalStore(h.useCallback(o=>a.subscribe(Es.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=h.useCallback((o,l)=>{a.mutate(o,l).catch(nt)},[a]);if(n.error&&Em(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}var qc=["light","dark"],yg="(prefers-color-scheme: dark)",Ng=h.createContext(void 0),bg={setTheme:s=>{},themes:[]},wg=()=>{var s;return(s=h.useContext(Ng))!=null?s:bg};h.memo(({forcedTheme:s,storageKey:t,attribute:r,enableSystem:a,enableColorScheme:n,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,m=n?qc.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",x=(p,N=!1,f=!0)=>{let S=o?o[p]:p,j=N?p+"|| ''":`'${S}'`,w="";return n&&f&&!N&&qc.includes(p)&&(w+=`d.style.colorScheme = '${p}';`),r==="class"?N||S?w+=`c.add(${j})`:w+="null":S&&(w+=`d[s](n,${j})`),w},g=s?`!function(){${d}${x(s)}}()`:a?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${yg}',m=window.matchMedia(t);if(m.media!==t||m.matches){${x("dark")}}else{${x("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${x(o?"x[e]":"e",!0)}}${u?"":"else{"+x(i,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${x(o?"x[e]":"e",!0)}}else{${x(i,!1,!1)};}${m}}catch(t){}}();`;return h.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});const Cg=({...s})=>{const{theme:t="system"}=wg();return e.jsx(cp,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})},_m=h.createContext(void 0),Sg=()=>{const s=h.useContext(_m);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s},Pg=({children:s,defaultTheme:t="dark",storageKey:r="fleet-command-theme",...a})=>{const[n,i]=h.useState(()=>typeof window>"u"?t:window.localStorage.getItem(r)??t);h.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),n==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(n)},[n]);const o={theme:n,setTheme:l=>{window.localStorage.setItem(r,l),i(l)}};return e.jsx(_m.Provider,{...a,value:o,children:s})},_c=[{id:"1",name:"Super Admin",email:"admin@aboosto.com",firstName:"Super",lastName:"Admin",role:"super_admin",roleId:"super_admin",roles:["ROLE_SUPER_ADMIN"],status:"active",emailVerified:!0,phoneVerified:!0,permissions:["create_user","read_user","update_user","delete_user","create_country","read_country","update_country","delete_country","create_state","read_state","update_state","delete_state","create_city","read_city","update_city","delete_city","system_settings","view_logs","manage_permissions","create","read","update","delete","read_analytics","read_reports","export_data"],profilePicture:"",phone:"+1234567890",phoneNumber:"+1234567890",dateOfBirth:"1985-01-01",address:"123 Admin St, New York, NY 10001",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",name:"Operations Manager",email:"manager@aboosto.com",firstName:"Operations",lastName:"Manager",role:"admin",roleId:"admin",roles:["ROLE_ADMIN"],status:"active",emailVerified:!0,phoneVerified:!0,permissions:["create_user","read_user","update_user","create_country","read_country","update_country","create_state","read_state","update_state","create_city","read_city","update_city","create","read","update","read_analytics","read_reports"],profilePicture:"",phone:"+1234567891",phoneNumber:"+1234567891",dateOfBirth:"1990-05-15",address:"456 Manager Ave, Los Angeles, CA 90001",createdAt:"2024-01-15T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z"},{id:"3",name:"John Driver",email:"driver@aboosto.com",firstName:"John",lastName:"Driver",role:"driver",roleId:"driver",roles:["ROLE_DRIVER"],status:"active",emailVerified:!0,phoneVerified:!0,permissions:["read","update","read_booking","update_booking","read_user"],profilePicture:"",phone:"+1234567892",phoneNumber:"+1234567892",dateOfBirth:"1992-08-20",address:"789 Driver Rd, Chicago, IL 60007",createdAt:"2024-02-01T00:00:00Z",updatedAt:"2024-02-01T00:00:00Z"},{id:"4",name:"Jane Passenger",email:"passenger@aboosto.com",firstName:"Jane",lastName:"Passenger",role:"passenger",roleId:"passenger",roles:["ROLE_PASSENGER"],status:"active",emailVerified:!0,phoneVerified:!0,permissions:["create","read","update","read_booking","update_booking","read_user"],profilePicture:"",phone:"+1234567893",phoneNumber:"+1234567893",dateOfBirth:"1995-03-10",address:"321 Passenger Blvd, Miami, FL 33101",createdAt:"2024-02-15T00:00:00Z",updatedAt:"2024-02-15T00:00:00Z"}],kg={user:null,isAuthenticated:!1,isLoading:!0,error:null},Dg=(s,t)=>{switch(t.type){case"AUTH_START":return{...s,isLoading:!0,error:null};case"AUTH_SUCCESS":return{...s,user:t.payload,isAuthenticated:!0,isLoading:!1,error:null};case"AUTH_FAILURE":return{...s,user:null,isAuthenticated:!1,isLoading:!1,error:t.payload};case"LOGOUT":return{...s,user:null,isAuthenticated:!1,isLoading:!1,error:null};case"CLEAR_ERROR":return{...s,error:null};case"REFRESH_TOKEN":return{...s,user:t.payload};case"INITIAL_CHECK_COMPLETE":return{...s,isLoading:!1};default:return s}},Wm=h.createContext(void 0),Ig=({children:s})=>{const[t,r]=h.useReducer(Dg,kg);h.useEffect(()=>{const m=localStorage.getItem("auth_user"),x=localStorage.getItem("auth_token");if(m&&x)try{const g=JSON.parse(m);r({type:"AUTH_SUCCESS",payload:g})}catch{localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token"),r({type:"INITIAL_CHECK_COMPLETE"})}else r({type:"INITIAL_CHECK_COMPLETE"})},[]);const d={...t,login:async(m,x)=>{r({type:"AUTH_START"});try{const p="http://123.176.35.22:8082/api/admin/login";let N=await fetch(p,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userName:m,password:x}),credentials:"include"});if(!N.ok&&(N.status===415||N.status===403)){const ne=new URLSearchParams;ne.append("userName",m),ne.append("password",x),N=await fetch(p,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:ne.toString(),credentials:"include"})}if(!N.ok){let ne="Login failed",me=null;try{const Q=N.headers.get("content-type");Q&&Q.includes("application/json")?(me=await N.json(),ne=me.message||me.error||me.details||`HTTP ${N.status}: ${N.statusText}`):ne=await N.text()||`HTTP ${N.status}: ${N.statusText}`}catch{ne=`HTTP ${N.status}: ${N.statusText}`}return r({type:"AUTH_FAILURE",payload:ne}),I.error(`Login failed: ${ne}`),!1}const f=await N.json(),S=f.token;if(!S)return r({type:"AUTH_FAILURE",payload:"No token received from server"}),I.error("Login failed: No authentication token received"),!1;if(!f.email&&!f.userName){const ne="Invalid response from server: missing email or username";return r({type:"AUTH_FAILURE",payload:ne}),I.error(ne),!1}let j=null;try{const ne=S.split(".");if(ne.length===3){const me=ne[1],Q=me+"=".repeat((4-me.length%4)%4),be=atob(Q.replace(/-/g,"+").replace(/_/g,"/"));j=JSON.parse(be)}}catch{}const w=(j==null?void 0:j.sub)||m,C=w.split("@")[0],y=f,b=ne=>ne?Array.isArray(ne)?ne.filter(Boolean).map(String):[String(ne)]:[],v=b(y.roles),M=[...b(j==null?void 0:j.roles),...b(j==null?void 0:j.authorities),...b(j==null?void 0:j.roleNames)],P=[...new Set([...v,...M])],V=ne=>ne?ne.replace(/^ROLE_/,"").toLowerCase():"admin",R=v.length?V(v[0]):null,T=j!=null&&j.role?V(j.role):null,q=j!=null&&j.roleName?V(j.roleName):null,_=R||T||q||"admin",D={id:y.id||(j==null?void 0:j.sub)||(j==null?void 0:j.userId)||String(Date.now()),userName:y.userName||(j==null?void 0:j.userName)||C,email:y.email||w,name:y.contactName||(j==null?void 0:j.name)||C,firstName:y.firstName||(j==null?void 0:j.firstName)||(j==null?void 0:j.first_name)||C,lastName:y.lastName||(j==null?void 0:j.lastName)||(j==null?void 0:j.last_name)||"",role:_,roleId:_,roles:P.length?P:[`ROLE_${_.toUpperCase()}`],status:y.activated?"active":"inactive",activated:y.activated??(j==null?void 0:j.activated)??!0,isGoogleAccount:y.isGoogleAccount??(j==null?void 0:j.isGoogleAccount)??!1,emailVerified:!0,phoneVerified:(j==null?void 0:j.phoneVerified)??!1,permissions:(j==null?void 0:j.permissions)||(j==null?void 0:j.authorities)||[],profilePicture:(j==null?void 0:j.profilePicture)||(j==null?void 0:j.profile_picture)||"",phone:y.contactNumber||(j==null?void 0:j.phone)||(j==null?void 0:j.phoneNumber)||"",phoneNumber:y.contactNumber||(j==null?void 0:j.phoneNumber)||(j==null?void 0:j.phone)||"",dateOfBirth:(j==null?void 0:j.dateOfBirth)||(j==null?void 0:j.date_of_birth)||"",address:(j==null?void 0:j.address)||"",createdAt:y.lastLoginDate||(j!=null&&j.iat?new Date(j.iat*1e3).toISOString():new Date().toISOString()),updatedAt:new Date().toISOString()};if(D.status!=="active")return r({type:"AUTH_FAILURE",payload:"Account is not active"}),I.error("Account is not active. Please contact support."),!1;localStorage.setItem("auth_user",JSON.stringify(D)),localStorage.setItem("auth_token",S),localStorage.setItem("authToken",S),r({type:"AUTH_SUCCESS",payload:D});const X=D.role.replace("_"," ").replace(/\b\w/g,ne=>ne.toUpperCase());return I.success(`Welcome back, ${D.firstName}! Logged in as ${X}`),!0}catch(g){const p=g instanceof Error?g.message:"Login failed";return r({type:"AUTH_FAILURE",payload:p}),I.error(p),!1}},logout:()=>{localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token"),r({type:"LOGOUT"}),I.success("Logged out successfully")},register:async(m,x)=>{r({type:"AUTH_START"});try{if(await new Promise(N=>setTimeout(N,1500)),_c.find(N=>N.email.toLowerCase()===m.email.toLowerCase()))return r({type:"AUTH_FAILURE",payload:"User already exists"}),I.error("An account with this email already exists"),!1;const p={id:Date.now().toString(),email:m.email,userName:m.email,firstName:m.firstName,lastName:m.lastName,role:x,status:"pending",roles:[`ROLE_${String(x).toUpperCase()}`],permissions:[],profilePicture:"",phoneNumber:m.phone||"",dateOfBirth:m.dateOfBirth||"",address:m.homeAddress||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return I.success("Registration successful! Please wait for account approval."),!0}catch(g){const p=g instanceof Error?g.message:"Registration failed";return r({type:"AUTH_FAILURE",payload:p}),I.error(p),!1}},resetPassword:async m=>{try{return await new Promise(g=>setTimeout(g,1e3)),_c.find(g=>g.email.toLowerCase()===m.toLowerCase())?(I.success("Password reset link sent to your email"),!0):(I.error("If an account exists with this email, you will receive a password reset link"),!0)}catch(x){const g=x instanceof Error?x.message:"Failed to send reset email";return I.error(g),!1}},hasPermission:(m,x)=>{if(!t.user)return!1;if(t.user.role==="super_admin")return!0;const g=(t.user.permissions??[]).map(N=>typeof N=="string"?N:"id"in N&&N.id?N.id:"resource"in N&&"action"in N?`${N.action}_${N.resource}`:null).filter(N=>!!N),p=`${x}_${m}`;return!!(g.includes(p)||g.includes(m)||g.includes(x))},hasRole:m=>{if(!t.user)return!1;const x=N=>N.replace(/^ROLE_/,"").toLowerCase(),g=x(m),p=new Set;return t.user.role&&p.add(x(t.user.role)),(t.user.roles??[]).forEach(N=>{N&&p.add(x(N))}),p.has(g)},refreshToken:async()=>{if(!t.user)return!1;try{await new Promise(g=>setTimeout(g,500));const m=`mock_token_${t.user.id}_${Date.now()}`;localStorage.setItem("auth_token",m);const x={...t.user,updatedAt:new Date().toISOString()};return localStorage.setItem("auth_user",JSON.stringify(x)),r({type:"REFRESH_TOKEN",payload:x}),!0}catch{return!1}}};return e.jsx(Wm.Provider,{value:d,children:s})},ko=()=>{const s=h.useContext(Wm);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s};function le(...s){return dp(up(s))}function St(s){const t=s.getFullYear(),r=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0");return`${t}-${r}-${a}`}function lr(s){if(!s)return"N/A";const t=typeof s=="string"?new Date(s):s;if(isNaN(t.getTime()))return"N/A";const r=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();return`${r}/${a}/${n}`}const Km=Ne.forwardRef(({className:s,value:t=0,size:r=40,strokeWidth:a=4,...n},i)=>{const o=(r-a)/2,l=o*2*Math.PI,c=l-t/100*l;return e.jsxs("svg",{ref:i,width:r,height:r,className:le("transform -rotate-90",s),...n,children:[e.jsx("circle",{cx:r/2,cy:r/2,r:o,stroke:"currentColor",strokeWidth:a,fill:"none",className:"text-muted opacity-20"}),e.jsx("circle",{cx:r/2,cy:r/2,r:o,stroke:"currentColor",strokeWidth:a,fill:"none",strokeDasharray:l,strokeDashoffset:c,className:"text-primary transition-all duration-300 ease-in-out",strokeLinecap:"round"})]})});Km.displayName="CircularProgress";const Tg=Wi("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),en=h.forwardRef(({className:s,variant:t,...r},a)=>e.jsx("div",{ref:a,role:"alert",className:le(Tg({variant:t}),s),...r}));en.displayName="Alert";const Ag=h.forwardRef(({className:s,...t},r)=>e.jsx("h5",{ref:r,className:le("mb-1 font-medium leading-none tracking-tight",s),...t}));Ag.displayName="AlertTitle";const sn=h.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:le("text-sm [&_p]:leading-relaxed",s),...t}));sn.displayName="AlertDescription";const Ft=({children:s,requiredRole:t,requiredPermission:r,fallbackPath:a="/login",requireAll:n=!1})=>{var m,x;const{isAuthenticated:i,user:o,isLoading:l,hasPermission:c,hasRole:u}=ko(),d=_i();if(l)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Km,{className:"w-12 h-12 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-foreground",children:"Loading..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Verifying your credentials"})]})]})});if(!i)return e.jsx(qs,{to:a,state:{from:d,requiredRole:t,requiredPermission:r},replace:!0});if((o==null?void 0:o.status)!=="active")return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs(en,{className:"border-warning/50 bg-warning/5",children:[e.jsx(Ts,{className:"h-4 w-4 text-warning"}),e.jsx(sn,{className:"text-warning",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Account Not Active"}),e.jsxs("p",{className:"text-sm",children:["Your account is currently ",o==null?void 0:o.status,". Please contact support or check your email for activation instructions."]})]})})]})})});if(t){const g=Array.isArray(t)?t:[t];if(!(n?g.every(N=>u(N)):g.some(N=>u(N)))){const N=g.join(" or ");return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-warning/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Hs,{className:"w-8 h-8 text-warning"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"You don't have the required role to access this page."})]})]}),e.jsxs(en,{className:"border-warning/50 bg-warning/5",children:[e.jsx(Ze,{className:"h-4 w-4 text-warning"}),e.jsx(sn,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Required Role:"}),e.jsx("p",{className:"text-sm",children:N}),e.jsxs("p",{className:"text-sm",children:["Your current role: ",g.join(", ")]})]})})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:opacity-90 transition-opacity",children:"Go Back"}),e.jsx("button",{onClick:()=>window.location.href="/admin/dashboard",className:"w-full px-4 py-2 bg-muted text-muted-foreground rounded-lg hover:bg-muted/80 transition-colors",children:"Go to Dashboard"})]})]})})}}return r&&!c(r.resource,r.action)?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Hs,{className:"w-8 h-8 text-destructive"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Permission Denied"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"You don't have the required permission to access this resource."})]})]}),e.jsxs(en,{className:"border-destructive/50 bg-destructive/5",children:[e.jsx(Ts,{className:"h-4 w-4 text-destructive"}),e.jsx(sn,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Required Permission:"}),e.jsxs("p",{className:"text-sm",children:[r.action," ",r.resource]}),e.jsxs("p",{className:"text-sm",children:["Your role: ",(x=(m=o==null?void 0:o.role)==null?void 0:m.replace("_"," "))==null?void 0:x.replace(/\b\w/g,g=>g.toUpperCase())]})]})})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:opacity-90 transition-opacity",children:"Go Back"}),e.jsx("button",{onClick:()=>window.location.href="/admin/dashboard",className:"w-full px-4 py-2 bg-muted text-muted-foreground rounded-lg hover:bg-muted/80 transition-colors",children:"Go to Dashboard"})]})]})}):e.jsx(e.Fragment,{children:s})},Wn=Wi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),E=h.forwardRef(({className:s,variant:t,size:r,asChild:a=!1,...n},i)=>{const o=a?Mf:"button";return e.jsx(o,{className:le(Wn({variant:t,size:r,className:s})),ref:i,...n})});E.displayName="Button";const L=h.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:le("rounded-xl border bg-card text-card-foreground shadow",s),...t}));L.displayName="Card";const Y=h.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:le("flex flex-col space-y-1.5 p-6",s),...t}));Y.displayName="CardHeader";const H=h.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:le("font-semibold leading-none tracking-tight",s),...t}));H.displayName="CardTitle";const $e=h.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:le("text-sm text-muted-foreground",s),...t}));$e.displayName="CardDescription";const B=h.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:le("p-6 pt-0",s),...t}));B.displayName="CardContent";const Pa=h.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:le("flex items-center p-6 pt-0",s),...t}));Pa.displayName="CardFooter";class Rg extends h.Component{constructor(r){super(r);gt(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});gt(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,a){this.setState({error:r,errorInfo:a})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs(L,{className:"w-full max-w-2xl",children:[e.jsxs(Y,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ts,{className:"w-8 h-8 text-red-600"})}),e.jsx(H,{className:"text-2xl font-bold text-gray-900",children:"Oops! Something went wrong"}),e.jsx($e,{className:"text-gray-600",children:"We're sorry, but an unexpected error occurred. Our team has been notified."})]}),e.jsxs(B,{className:"space-y-4",children:[!1,e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-blue-900 mb-2",children:"What you can do:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Try refreshing the page"}),e.jsx("li",{children:" Go back to the previous page"}),e.jsx("li",{children:" Return to the dashboard"}),e.jsx("li",{children:" If the problem persists, contact support"})]})]})]}),e.jsxs(Pa,{className:"flex gap-3 justify-center",children:[e.jsxs(E,{onClick:this.handleReset,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-4 h-4"}),"Try Again"]}),e.jsxs(E,{onClick:this.handleGoHome,className:"flex items-center gap-2",children:[e.jsx(vo,{className:"w-4 h-4"}),"Go Home"]})]})]})}):this.props.children}}const Wc=[{name:"Dashboard",href:"/admin/dashboard",icon:hp},{name:"User Management",href:"/admin/users",icon:ai,children:[{name:"Users",href:"/admin/users/list",icon:fs},{name:"Roles",href:"/admin/users/roles",icon:Ze},{name:"Permissions",href:"/admin/users/permissions",icon:Bt}]},{name:"Config Management",href:"/admin/config",icon:$t,children:[{name:"Countries",href:"/admin/config/countries",icon:$t},{name:"States",href:"/admin/config/states",icon:Xe},{name:"Cities",href:"/admin/config/cities",icon:Pm}]},{name:"Drivers",href:"/admin/drivers",icon:os},{name:"Riders",href:"/admin/riders",icon:fs},{name:"Pricing",href:"/admin/base-pricing",icon:ps,children:[{name:"Vehicle Categories",href:"/admin/vehicle-categories",icon:os},{name:"Base Pricing",href:"/admin/base-pricing",icon:ps},{name:"Surge Pricing",href:"/admin/surge-pricing",icon:Tr}]},{name:"Promotions",href:"/admin/promotions",icon:Jr},{name:"Referral Campaigns",href:"/admin/referral-campaigns",icon:Ii},{name:"Disputes",href:"/admin/disputes",icon:Il},{name:"Analytics",href:"/admin/analytics",icon:ea},{name:"Reports",href:"/admin/reports",icon:ar},{name:"Security",href:"/admin/security",icon:Ze,children:[{name:"Change Password",href:"/admin/security/change-password",icon:Ze}]}],Fg=({sidebarOpen:s,setSidebarOpen:t,isCollapsed:r,setIsCollapsed:a})=>{const n=_i(),[i,o]=Ne.useState([]),l=u=>{o(d=>d.includes(u)?d.filter(m=>m!==u):[...d,u])},c=u=>n.pathname===u.href?!0:u.children?u.children.some(d=>n.pathname===d.href):!1;return Ne.useEffect(()=>{Wc.filter(d=>d.children).forEach(d=>{var m;(m=d.children)!=null&&m.some(x=>n.pathname===x.href)&&o(x=>[...x.filter(g=>g!==d.name),d.name])})},[n.pathname]),e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>t(!1)}),e.jsx("div",{className:le("fixed inset-y-0 left-0 z-50 bg-sidebar/95 backdrop-blur-sm border-r border-sidebar-border transform transition-all duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 lg:bg-sidebar lg:backdrop-blur-none",r?"w-16":"w-64",s?"translate-x-0":"-translate-x-full"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:le("flex items-center justify-between border-b border-sidebar-border",r?"px-4 py-6":"p-6"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:"/assets/logo/Aboosto-03.svg",alt:"Aboosto Logo",className:le("transition-all duration-300",r?"w-8 h-8":"w-16 h-16"),onError:u=>{const d=u.target;d.src="/assets/logo/Aboosto-03.png"}}),!r&&e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Aboosto"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin Portal"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{variant:"ghost",size:"sm",className:"hidden lg:flex",onClick:()=>a(!r),title:r?"Expand sidebar":"Collapse sidebar",children:r?e.jsx("span",{className:"text-sm font-bold",children:">"}):e.jsx(Ki,{className:"w-4 h-4"})}),e.jsx(E,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>t(!1),children:e.jsx(Wt,{className:"w-4 h-4"})})]})]}),e.jsx("nav",{className:le("flex-1 py-6 space-y-2 overflow-y-auto",r?"px-2":"px-4"),children:Wc.map(u=>{const d=c(u),m=i.includes(u.name);return u.children?r?e.jsx("div",{children:e.jsx("button",{onClick:()=>{l(u.name),a(!1)},className:le("w-full group flex items-center justify-center px-2 py-3 text-sm font-medium rounded-lg transition-all duration-200 relative",d?"bg-primary text-primary-foreground shadow-glow":"text-muted-foreground hover:text-foreground hover:bg-sidebar-accent"),title:u.name,children:e.jsx(u.icon,{className:le("h-5 w-5 transition-colors",d?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground")})})},u.name):e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>l(u.name),className:le("w-full group flex items-center justify-between px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-200",d?"bg-primary text-primary-foreground shadow-glow":"text-muted-foreground hover:text-foreground hover:bg-sidebar-accent"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(u.icon,{className:le("mr-3 h-5 w-5 transition-colors",d?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground")}),u.name]}),m?e.jsx(Yi,{className:"h-4 w-4"}):e.jsx(ni,{className:"h-4 w-4"})]}),m&&e.jsx("div",{className:"mt-1 ml-8 space-y-1",children:u.children.map(x=>{const g=n.pathname===x.href;return e.jsxs(Ge,{to:x.href,className:le("group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200",g?"bg-primary text-primary-foreground shadow-glow":"text-muted-foreground hover:text-foreground hover:bg-sidebar-accent"),onClick:()=>t(!1),children:[e.jsx(x.icon,{className:le("mr-3 h-4 w-4 transition-colors",g?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground")}),x.name]},x.name)})})]},u.name):r?e.jsx(Ge,{to:u.href,className:le("group flex items-center justify-center px-2 py-3 text-sm font-medium rounded-lg transition-all duration-200",d?"bg-primary text-primary-foreground shadow-glow":"text-muted-foreground hover:text-foreground hover:bg-sidebar-accent"),onClick:()=>t(!1),title:u.name,children:e.jsx(u.icon,{className:le("h-5 w-5 transition-colors",d?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground")})},u.name):e.jsxs(Ge,{to:u.href,className:le("group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-200",d?"bg-primary text-primary-foreground shadow-glow":"text-muted-foreground hover:text-foreground hover:bg-sidebar-accent"),onClick:()=>t(!1),children:[e.jsx(u.icon,{className:le("mr-3 h-5 w-5 transition-colors",d?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground")}),u.name]},u.name)})}),e.jsx("div",{className:le("border-t border-sidebar-border",r?"px-2 py-4":"p-4"),children:r?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",title:"Admin User",children:e.jsx(Za,{className:"w-4 h-4 text-primary-foreground"})})}):e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-sidebar-accent",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:e.jsx(Za,{className:"w-4 h-4 text-primary-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:"Admin User"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"admin@aboosto.com"})]})]})})]})})]})},O=h.forwardRef(({className:s,type:t="text",...r},a)=>e.jsx("input",{type:t,className:le("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r}));O.displayName="Input";const Eg=Wi("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function we({className:s,variant:t,...r}){return e.jsx("div",{className:le(Eg({variant:t}),s),...r})}const Kt=h.forwardRef(({className:s,...t},r)=>e.jsx(qu,{ref:r,className:le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));Kt.displayName=qu.displayName;const Kn=h.forwardRef(({className:s,...t},r)=>e.jsx(_u,{ref:r,className:le("aspect-square h-full w-full",s),...t}));Kn.displayName=_u.displayName;const Yt=h.forwardRef(({className:s,...t},r)=>e.jsx(Wu,{ref:r,className:le("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));Yt.displayName=Wu.displayName;const ks=Vf,Ds=Uf,Mg=h.forwardRef(({className:s,inset:t,children:r,...a},n)=>e.jsxs(Ku,{ref:n,className:le("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...a,children:[r,e.jsx(ni,{className:"ml-auto"})]}));Mg.displayName=Ku.displayName;const Og=h.forwardRef(({className:s,...t},r)=>e.jsx(Yu,{ref:r,className:le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...t}));Og.displayName=Yu.displayName;const Ss=h.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(Of,{children:e.jsx(zu,{ref:a,sideOffset:t,className:le("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...r})}));Ss.displayName=zu.displayName;const Pe=h.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(Hu,{ref:a,className:le("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",s),...r}));Pe.displayName=Hu.displayName;const Vg=h.forwardRef(({className:s,children:t,checked:r,...a},n)=>e.jsxs(Gu,{ref:n,className:le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Qu,{children:e.jsx(Ar,{className:"h-4 w-4"})})}),t]}));Vg.displayName=Gu.displayName;const Ug=h.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(Zu,{ref:a,className:le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Qu,{children:e.jsx(xp,{className:"h-2 w-2 fill-current"})})}),t]}));Ug.displayName=Zu.displayName;const Ym=h.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(Xu,{ref:a,className:le("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...r}));Ym.displayName=Xu.displayName;const ka=h.forwardRef(({className:s,...t},r)=>e.jsx(Ju,{ref:r,className:le("-mx-1 my-1 h-px bg-muted",s),...t}));ka.displayName=Ju.displayName;const Lg=()=>{const{setTheme:s,theme:t}=Sg();return e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsxs(E,{variant:"ghost",size:"sm",children:[e.jsx(Nc,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(bc,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(Ss,{align:"end",children:[e.jsxs(Pe,{onSelect:()=>s("light"),children:[e.jsx(Nc,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Light"})]}),e.jsxs(Pe,{onSelect:()=>s("dark"),children:[e.jsx(bc,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Dark"})]}),e.jsxs(Pe,{onSelect:()=>s("system"),children:[e.jsx(fp,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"System"})]})]})]})},Bg=({setSidebarOpen:s})=>{const t=Ye(),{user:r,logout:a,hasPermission:n}=ko(),i=(d,m)=>!d||!m?"U":`${d.charAt(0)}${m.charAt(0)}`.toUpperCase(),o=d=>d?d.replace("_"," ").replace(/\b\w/g,m=>m.toUpperCase()):"User",l=d=>{switch(d){case"super_admin":return"bg-gradient-to-r from-purple-500 to-pink-500 text-white";case"admin":return"bg-gradient-to-r from-blue-500 to-cyan-500 text-white";case"driver":return"bg-gradient-to-r from-green-500 to-emerald-500 text-white";case"passenger":return"bg-gradient-to-r from-orange-500 to-yellow-500 text-white";default:return"bg-muted text-muted-foreground"}},c=()=>{a(),t("/login")},u=[{icon:e.jsx(Is,{className:"w-4 h-4"}),label:"Profile",action:()=>t("/admin/profile"),show:!0},{icon:e.jsx(sr,{className:"w-4 h-4"}),label:"Security Settings",action:()=>t("/admin/security/change-password"),show:!0},{icon:e.jsx(Za,{className:"w-4 h-4"}),label:"User Management",action:()=>t("/admin/users/list"),show:n("user","read")},{icon:e.jsx(Er,{className:"w-4 h-4"}),label:"Billing",action:()=>t("/admin/billing"),show:n("financial","read_transactions")},{icon:e.jsx(Bt,{className:"w-4 h-4"}),label:"Settings",action:()=>t("/admin/settings"),show:n("system","system_settings")}].filter(d=>d.show);return e.jsx("header",{className:"bg-card border-b border-border px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(E,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>s(!0),children:e.jsx(pp,{className:"w-5 h-5"})}),e.jsx("div",{className:"lg:hidden flex items-center cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>t("/admin/dashboard"),children:e.jsx("img",{src:"/assets/logo/Aboosto-03.svg",alt:"Aboosto",className:"h-8 w-8",onError:d=>{const m=d.target;m.src="/assets/logo/Aboosto-03.png"}})}),e.jsx("div",{className:"hidden sm:flex items-center space-x-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>t("/admin/dashboard"),children:e.jsx("div",{className:"relative",children:e.jsx("img",{src:"/assets/logo/Aboosto-03.svg",alt:"Aboosto",className:"h-10 w-10",onError:d=>{const m=d.target;m.src="/assets/logo/Aboosto-03.png"}})})}),e.jsxs("div",{className:"relative hidden sm:block",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search drivers, passengers, trips...",className:"pl-10 w-64 lg:w-80"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Lg,{}),e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsxs(E,{variant:"ghost",size:"sm",className:"relative",children:[e.jsx(gp,{className:"w-5 h-5"}),e.jsx(we,{variant:"destructive",className:"absolute -top-1 -right-1 w-5 h-5 flex items-center justify-center p-0 text-xs",children:"3"})]})}),e.jsx(Ss,{align:"end",className:"w-80",children:e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Notifications"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start space-x-2 p-2 rounded-lg bg-muted/50 cursor-pointer hover:bg-muted transition-colors",children:[e.jsx(xt,{className:"w-4 h-4 text-warning mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium",children:"Driver License Expiring"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"John Smith's license expires in 3 days"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"2 hours ago"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2 p-2 rounded-lg bg-muted/50 cursor-pointer hover:bg-muted transition-colors",children:[e.jsx(xt,{className:"w-4 h-4 text-destructive mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium",children:"New Dispute Filed"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Passenger complaint about ride #12345"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"5 hours ago"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2 p-2 rounded-lg bg-muted/50 cursor-pointer hover:bg-muted transition-colors",children:[e.jsx(xt,{className:"w-4 h-4 text-success mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium",children:"Peak Hours Alert"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"High demand detected in downtown area"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"1 day ago"})]})]})]}),e.jsx("div",{className:"mt-3 pt-2 border-t",children:e.jsx(E,{variant:"ghost",size:"sm",className:"w-full justify-start",children:"View all notifications"})})]})})]}),e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsxs(E,{variant:"ghost",size:"sm",className:"flex items-center space-x-2 h-auto p-1",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Kt,{className:"w-8 h-8",children:[e.jsx(Kn,{src:r==null?void 0:r.profilePicture,alt:r==null?void 0:r.firstName}),e.jsx(Yt,{className:"bg-primary text-primary-foreground text-sm",children:i(r==null?void 0:r.firstName,r==null?void 0:r.lastName)})]}),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-background ${(r==null?void 0:r.status)==="active"?"bg-green-500":(r==null?void 0:r.status)==="inactive"?"bg-gray-400":(r==null?void 0:r.status)==="suspended"?"bg-red-500":"bg-yellow-500"}`})]}),e.jsxs("div",{className:"hidden sm:block text-left",children:[e.jsxs("div",{className:"text-sm font-medium text-foreground",children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(we,{className:`text-xs ${l(r==null?void 0:r.role)}`,children:o(r==null?void 0:r.role)})})]})]})}),e.jsxs(Ss,{align:"end",className:"w-56",children:[e.jsxs(Ym,{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Account"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r==null?void 0:r.email})]})]}),e.jsx(ka,{}),u.map((d,m)=>e.jsxs(Pe,{onClick:d.action,className:"cursor-pointer",children:[d.icon,e.jsx("span",{className:"ml-2",children:d.label})]},m)),u.length>0&&e.jsx(ka,{}),e.jsxs(Pe,{onClick:()=>window.open("/help","_blank"),className:"cursor-pointer",children:[e.jsx(xt,{className:"w-4 h-4 mr-2"}),"Help & Support"]}),e.jsx(ka,{}),e.jsxs(Pe,{onClick:c,className:"cursor-pointer text-red-600 focus:text-red-600",children:[e.jsx(jp,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})]})]})})},Kc=()=>{const[s,t]=h.useState(!1),[r,a]=h.useState(!1);return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsx(Fg,{sidebarOpen:s,setSidebarOpen:t,isCollapsed:r,setIsCollapsed:a}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx(Bg,{setSidebarOpen:t}),e.jsx("main",{className:"flex-1 overflow-y-auto bg-gradient-subtle p-6",children:e.jsx(ip,{})})]})]})},$g=()=>{const s=Ye(),t=()=>{s(-1)},r=()=>{s("/")},a=()=>{s("/dashboard")};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs(L,{className:"w-full max-w-lg",children:[e.jsxs(Y,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-4xl font-bold text-blue-600",children:"404"})}),e.jsx(H,{className:"text-2xl font-bold text-gray-900",children:"Page Not Found"}),e.jsx($e,{className:"text-gray-600",children:"The page you're looking for doesn't exist or has been moved."})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900 mb-2",children:"Possible reasons:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" The URL might be misspelled"}),e.jsx("li",{children:" The page might have been removed or relocated"}),e.jsx("li",{children:" You might not have access to this page"}),e.jsx("li",{children:" The link you followed might be broken"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sm text-blue-900 mb-2",children:"Helpful suggestions:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Check the URL for typos"}),e.jsx("li",{children:" Use the navigation menu to find what you need"}),e.jsx("li",{children:" Go back to the previous page"}),e.jsx("li",{children:" Return to the dashboard"})]})]})]}),e.jsxs(Pa,{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsxs(E,{onClick:t,variant:"outline",className:"flex-1 flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),"Go Back"]}),e.jsxs(E,{onClick:r,className:"flex-1 flex items-center gap-2",children:[e.jsx(vo,{className:"w-4 h-4"}),"Dashboard"]})]}),e.jsxs(E,{onClick:a,variant:"secondary",className:"w-full flex items-center gap-2",children:[e.jsx(Ks,{className:"w-4 h-4"}),"Browse Navigation"]})]})]})})},zm=h.createContext({});function qg(s){const t=h.useRef(null);return t.current===null&&(t.current=s()),t.current}const Do=typeof window<"u",_g=Do?h.useLayoutEffect:h.useEffect,Io=h.createContext(null);function To(s,t){s.indexOf(t)===-1&&s.push(t)}function Ao(s,t){const r=s.indexOf(t);r>-1&&s.splice(r,1)}const cr=(s,t,r)=>r>t?t:r<s?s:r;let Ro=()=>{};const Rr={},Hm=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function Gm(s){return typeof s=="object"&&s!==null}const Qm=s=>/^0[^.\s]+$/u.test(s);function Fo(s){let t;return()=>(t===void 0&&(t=s()),t)}const kt=s=>s,Wg=(s,t)=>r=>t(s(r)),ii=(...s)=>s.reduce(Wg),Yn=(s,t,r)=>{const a=t-s;return a===0?1:(r-s)/a};class Eo{constructor(){this.subscriptions=[]}add(t){return To(this.subscriptions,t),()=>Ao(this.subscriptions,t)}notify(t,r,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,r,a);else for(let i=0;i<n;i++){const o=this.subscriptions[i];o&&o(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Dr=s=>s*1e3,Pt=s=>s/1e3;function Zm(s,t){return t?s*(1e3/t):0}const Xm=(s,t,r)=>(((1-3*r+3*t)*s+(3*r-6*t))*s+3*t)*s,Kg=1e-7,Yg=12;function zg(s,t,r,a,n){let i,o,l=0;do o=t+(r-t)/2,i=Xm(o,a,n)-s,i>0?r=o:t=o;while(Math.abs(i)>Kg&&++l<Yg);return o}function li(s,t,r,a){if(s===t&&r===a)return kt;const n=i=>zg(i,0,1,s,r);return i=>i===0||i===1?i:Xm(n(i),t,a)}const Jm=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,eh=s=>t=>1-s(1-t),sh=li(.33,1.53,.69,.99),Mo=eh(sh),th=Jm(Mo),rh=s=>(s*=2)<1?.5*Mo(s):.5*(2-Math.pow(2,-10*(s-1))),Oo=s=>1-Math.sin(Math.acos(s)),ah=eh(Oo),nh=Jm(Oo),Hg=li(.42,0,1,1),Gg=li(0,0,.58,1),ih=li(.42,0,.58,1),Qg=s=>Array.isArray(s)&&typeof s[0]!="number",lh=s=>Array.isArray(s)&&typeof s[0]=="number",Zg={linear:kt,easeIn:Hg,easeInOut:ih,easeOut:Gg,circIn:Oo,circInOut:nh,circOut:ah,backIn:Mo,backInOut:th,backOut:sh,anticipate:rh},Xg=s=>typeof s=="string",Yc=s=>{if(lh(s)){Ro(s.length===4);const[t,r,a,n]=s;return li(t,r,a,n)}else if(Xg(s))return Zg[s];return s},pi=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Jg(s,t){let r=new Set,a=new Set,n=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),s()),d(l)}const u={schedule:(d,m=!1,x=!1)=>{const p=x&&n?r:a;return m&&o.add(d),p.has(d)||p.add(d),d},cancel:d=>{a.delete(d),o.delete(d)},process:d=>{if(l=d,n){i=!0;return}n=!0,[r,a]=[a,r],r.forEach(c),r.clear(),n=!1,i&&(i=!1,u.process(d))}};return u}const ej=40;function oh(s,t){let r=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=pi.reduce((w,C)=>(w[C]=Jg(i),w),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:m,preRender:x,render:g,postRender:p}=o,N=()=>{const w=Rr.useManualTiming?n.timestamp:performance.now();r=!1,Rr.useManualTiming||(n.delta=a?1e3/60:Math.max(Math.min(w-n.timestamp,ej),1)),n.timestamp=w,n.isProcessing=!0,l.process(n),c.process(n),u.process(n),d.process(n),m.process(n),x.process(n),g.process(n),p.process(n),n.isProcessing=!1,r&&t&&(a=!1,s(N))},f=()=>{r=!0,a=!0,n.isProcessing||s(N)};return{schedule:pi.reduce((w,C)=>{const y=o[C];return w[C]=(b,v=!1,M=!1)=>(r||f(),y.schedule(b,v,M)),w},{}),cancel:w=>{for(let C=0;C<pi.length;C++)o[pi[C]].cancel(w)},state:n,steps:o}}const{schedule:xs,cancel:sa,state:_s,steps:il}=oh(typeof requestAnimationFrame<"u"?requestAnimationFrame:kt,!0);let Si;function sj(){Si=void 0}const it={now:()=>(Si===void 0&&it.set(_s.isProcessing||Rr.useManualTiming?_s.timestamp:performance.now()),Si),set:s=>{Si=s,queueMicrotask(sj)}},ch=s=>t=>typeof t=="string"&&t.startsWith(s),dh=ch("--"),tj=ch("var(--"),Vo=s=>tj(s)?rj.test(s.split("/*")[0].trim()):!1,rj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function zc(s){return typeof s!="string"?!1:s.split("/*")[0].includes("var(--")}const wn={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},zn={...wn,transform:s=>cr(0,1,s)},gi={...wn,default:1},Ln=s=>Math.round(s*1e5)/1e5,Uo=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function aj(s){return s==null}const nj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Lo=(s,t)=>r=>!!(typeof r=="string"&&nj.test(r)&&r.startsWith(s)||t&&!aj(r)&&Object.prototype.hasOwnProperty.call(r,t)),uh=(s,t,r)=>a=>{if(typeof a!="string")return a;const[n,i,o,l]=a.match(Uo);return{[s]:parseFloat(n),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},ij=s=>cr(0,255,s),ll={...wn,transform:s=>Math.round(ij(s))},xa={test:Lo("rgb","red"),parse:uh("red","green","blue"),transform:({red:s,green:t,blue:r,alpha:a=1})=>"rgba("+ll.transform(s)+", "+ll.transform(t)+", "+ll.transform(r)+", "+Ln(zn.transform(a))+")"};function lj(s){let t="",r="",a="",n="";return s.length>5?(t=s.substring(1,3),r=s.substring(3,5),a=s.substring(5,7),n=s.substring(7,9)):(t=s.substring(1,2),r=s.substring(2,3),a=s.substring(3,4),n=s.substring(4,5),t+=t,r+=r,a+=a,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const Yl={test:Lo("#"),parse:lj,transform:xa.transform},oi=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),Lr=oi("deg"),or=oi("%"),De=oi("px"),oj=oi("vh"),cj=oi("vw"),Hc={...or,parse:s=>or.parse(s)/100,transform:s=>or.transform(s*100)},_a={test:Lo("hsl","hue"),parse:uh("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(s)+", "+or.transform(Ln(t))+", "+or.transform(Ln(r))+", "+Ln(zn.transform(a))+")"},Ps={test:s=>xa.test(s)||Yl.test(s)||_a.test(s),parse:s=>xa.test(s)?xa.parse(s):_a.test(s)?_a.parse(s):Yl.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?xa.transform(s):_a.transform(s),getAnimatableNone:s=>{const t=Ps.parse(s);return t.alpha=0,Ps.transform(t)}},dj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uj(s){var t,r;return isNaN(s)&&typeof s=="string"&&(((t=s.match(Uo))==null?void 0:t.length)||0)+(((r=s.match(dj))==null?void 0:r.length)||0)>0}const mh="number",hh="color",mj="var",hj="var(",Gc="${}",xj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hn(s){const t=s.toString(),r=[],a={color:[],number:[],var:[]},n=[];let i=0;const l=t.replace(xj,c=>(Ps.test(c)?(a.color.push(i),n.push(hh),r.push(Ps.parse(c))):c.startsWith(hj)?(a.var.push(i),n.push(mj),r.push(c)):(a.number.push(i),n.push(mh),r.push(parseFloat(c))),++i,Gc)).split(Gc);return{values:r,split:l,indexes:a,types:n}}function xh(s){return Hn(s).values}function fh(s){const{split:t,types:r}=Hn(s),a=t.length;return n=>{let i="";for(let o=0;o<a;o++)if(i+=t[o],n[o]!==void 0){const l=r[o];l===mh?i+=Ln(n[o]):l===hh?i+=Ps.transform(n[o]):i+=n[o]}return i}}const fj=s=>typeof s=="number"?0:Ps.test(s)?Ps.getAnimatableNone(s):s;function pj(s){const t=xh(s);return fh(s)(t.map(fj))}const ta={test:uj,parse:xh,createTransformer:fh,getAnimatableNone:pj};function ol(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function gj({hue:s,saturation:t,lightness:r,alpha:a}){s/=360,t/=100,r/=100;let n=0,i=0,o=0;if(!t)n=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;n=ol(c,l,s+1/3),i=ol(c,l,s),o=ol(c,l,s-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:a}}function Mi(s,t){return r=>r>0?t:s}const ys=(s,t,r)=>s+(t-s)*r,cl=(s,t,r)=>{const a=s*s,n=r*(t*t-a)+a;return n<0?0:Math.sqrt(n)},jj=[Yl,xa,_a],vj=s=>jj.find(t=>t.test(s));function Qc(s){const t=vj(s);if(!t)return!1;let r=t.parse(s);return t===_a&&(r=gj(r)),r}const Zc=(s,t)=>{const r=Qc(s),a=Qc(t);if(!r||!a)return Mi(s,t);const n={...r};return i=>(n.red=cl(r.red,a.red,i),n.green=cl(r.green,a.green,i),n.blue=cl(r.blue,a.blue,i),n.alpha=ys(r.alpha,a.alpha,i),xa.transform(n))},zl=new Set(["none","hidden"]);function yj(s,t){return zl.has(s)?r=>r<=0?s:t:r=>r>=1?t:s}function Nj(s,t){return r=>ys(s,t,r)}function Bo(s){return typeof s=="number"?Nj:typeof s=="string"?Vo(s)?Mi:Ps.test(s)?Zc:Cj:Array.isArray(s)?ph:typeof s=="object"?Ps.test(s)?Zc:bj:Mi}function ph(s,t){const r=[...s],a=r.length,n=s.map((i,o)=>Bo(i)(i,t[o]));return i=>{for(let o=0;o<a;o++)r[o]=n[o](i);return r}}function bj(s,t){const r={...s,...t},a={};for(const n in r)s[n]!==void 0&&t[n]!==void 0&&(a[n]=Bo(s[n])(s[n],t[n]));return n=>{for(const i in a)r[i]=a[i](n);return r}}function wj(s,t){const r=[],a={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const i=t.types[n],o=s.indexes[i][a[i]],l=s.values[o]??0;r[n]=l,a[i]++}return r}const Cj=(s,t)=>{const r=ta.createTransformer(t),a=Hn(s),n=Hn(t);return a.indexes.var.length===n.indexes.var.length&&a.indexes.color.length===n.indexes.color.length&&a.indexes.number.length>=n.indexes.number.length?zl.has(s)&&!n.values.length||zl.has(t)&&!a.values.length?yj(s,t):ii(ph(wj(a,n),n.values),r):Mi(s,t)};function gh(s,t,r){return typeof s=="number"&&typeof t=="number"&&typeof r=="number"?ys(s,t,r):Bo(s)(s,t)}const Sj=s=>{const t=({timestamp:r})=>s(r);return{start:(r=!0)=>xs.update(t,r),stop:()=>sa(t),now:()=>_s.isProcessing?_s.timestamp:it.now()}},jh=(s,t,r=10)=>{let a="";const n=Math.max(Math.round(t/r),2);for(let i=0;i<n;i++)a+=Math.round(s(i/(n-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},Oi=2e4;function $o(s){let t=0;const r=50;let a=s.next(t);for(;!a.done&&t<Oi;)t+=r,a=s.next(t);return t>=Oi?1/0:t}function Pj(s,t=100,r){const a=r({...s,keyframes:[0,t]}),n=Math.min($o(a),Oi);return{type:"keyframes",ease:i=>a.next(n*i).value/t,duration:Pt(n)}}const kj=5;function vh(s,t,r){const a=Math.max(t-kj,0);return Zm(r-s(a),t-a)}const ws={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dl=.001;function Dj({duration:s=ws.duration,bounce:t=ws.bounce,velocity:r=ws.velocity,mass:a=ws.mass}){let n,i,o=1-t;o=cr(ws.minDamping,ws.maxDamping,o),s=cr(ws.minDuration,ws.maxDuration,Pt(s)),o<1?(n=u=>{const d=u*o,m=d*s,x=d-r,g=Hl(u,o),p=Math.exp(-m);return dl-x/g*p},i=u=>{const m=u*o*s,x=m*r+r,g=Math.pow(o,2)*Math.pow(u,2)*s,p=Math.exp(-m),N=Hl(Math.pow(u,2),o);return(-n(u)+dl>0?-1:1)*((x-g)*p)/N}):(n=u=>{const d=Math.exp(-u*s),m=(u-r)*s+1;return-dl+d*m},i=u=>{const d=Math.exp(-u*s),m=(r-u)*(s*s);return d*m});const l=5/s,c=Tj(n,i,l);if(s=Dr(s),isNaN(c))return{stiffness:ws.stiffness,damping:ws.damping,duration:s};{const u=Math.pow(c,2)*a;return{stiffness:u,damping:o*2*Math.sqrt(a*u),duration:s}}}const Ij=12;function Tj(s,t,r){let a=r;for(let n=1;n<Ij;n++)a=a-s(a)/t(a);return a}function Hl(s,t){return s*Math.sqrt(1-t*t)}const Aj=["duration","bounce"],Rj=["stiffness","damping","mass"];function Xc(s,t){return t.some(r=>s[r]!==void 0)}function Fj(s){let t={velocity:ws.velocity,stiffness:ws.stiffness,damping:ws.damping,mass:ws.mass,isResolvedFromDuration:!1,...s};if(!Xc(s,Rj)&&Xc(s,Aj))if(s.visualDuration){const r=s.visualDuration,a=2*Math.PI/(r*1.2),n=a*a,i=2*cr(.05,1,1-(s.bounce||0))*Math.sqrt(n);t={...t,mass:ws.mass,stiffness:n,damping:i}}else{const r=Dj(s);t={...t,...r,mass:ws.mass},t.isResolvedFromDuration=!0}return t}function Vi(s=ws.visualDuration,t=ws.bounce){const r=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:a,restDelta:n}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:m,velocity:x,isResolvedFromDuration:g}=Fj({...r,velocity:-Pt(r.velocity||0)}),p=x||0,N=u/(2*Math.sqrt(c*d)),f=o-i,S=Pt(Math.sqrt(c/d)),j=Math.abs(f)<5;a||(a=j?ws.restSpeed.granular:ws.restSpeed.default),n||(n=j?ws.restDelta.granular:ws.restDelta.default);let w;if(N<1){const y=Hl(S,N);w=b=>{const v=Math.exp(-N*S*b);return o-v*((p+N*S*f)/y*Math.sin(y*b)+f*Math.cos(y*b))}}else if(N===1)w=y=>o-Math.exp(-S*y)*(f+(p+S*f)*y);else{const y=S*Math.sqrt(N*N-1);w=b=>{const v=Math.exp(-N*S*b),M=Math.min(y*b,300);return o-v*((p+N*S*f)*Math.sinh(M)+y*f*Math.cosh(M))/y}}const C={calculatedDuration:g&&m||null,next:y=>{const b=w(y);if(g)l.done=y>=m;else{let v=y===0?p:0;N<1&&(v=y===0?Dr(p):vh(w,y,b));const M=Math.abs(v)<=a,P=Math.abs(o-b)<=n;l.done=M&&P}return l.value=l.done?o:b,l},toString:()=>{const y=Math.min($o(C),Oi),b=jh(v=>C.next(y*v).value,y,30);return y+"ms "+b},toTransition:()=>{}};return C}Vi.applyToOptions=s=>{const t=Pj(s,100,Vi);return s.ease=t.ease,s.duration=Dr(t.duration),s.type="keyframes",s};function Gl({keyframes:s,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const m=s[0],x={done:!1,value:m},g=M=>l!==void 0&&M<l||c!==void 0&&M>c,p=M=>l===void 0?c:c===void 0||Math.abs(l-M)<Math.abs(c-M)?l:c;let N=r*t;const f=m+N,S=o===void 0?f:o(f);S!==f&&(N=S-m);const j=M=>-N*Math.exp(-M/a),w=M=>S+j(M),C=M=>{const P=j(M),V=w(M);x.done=Math.abs(P)<=u,x.value=x.done?S:V};let y,b;const v=M=>{g(x.value)&&(y=M,b=Vi({keyframes:[x.value,p(x.value)],velocity:vh(w,M,x.value),damping:n,stiffness:i,restDelta:u,restSpeed:d}))};return v(0),{calculatedDuration:null,next:M=>{let P=!1;return!b&&y===void 0&&(P=!0,C(M),v(M)),y!==void 0&&M>=y?b.next(M-y):(!P&&C(M),x)}}}function Ej(s,t,r){const a=[],n=r||Rr.mix||gh,i=s.length-1;for(let o=0;o<i;o++){let l=n(s[o],s[o+1]);if(t){const c=Array.isArray(t)?t[o]||kt:t;l=ii(c,l)}a.push(l)}return a}function Mj(s,t,{clamp:r=!0,ease:a,mixer:n}={}){const i=s.length;if(Ro(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=s[0]===s[1];s[0]>s[i-1]&&(s=[...s].reverse(),t=[...t].reverse());const l=Ej(t,a,n),c=l.length,u=d=>{if(o&&d<s[0])return t[0];let m=0;if(c>1)for(;m<s.length-2&&!(d<s[m+1]);m++);const x=Yn(s[m],s[m+1],d);return l[m](x)};return r?d=>u(cr(s[0],s[i-1],d)):u}function Oj(s,t){const r=s[s.length-1];for(let a=1;a<=t;a++){const n=Yn(0,t,a);s.push(ys(r,1,n))}}function Vj(s){const t=[0];return Oj(t,s.length-1),t}function Uj(s,t){return s.map(r=>r*t)}function Lj(s,t){return s.map(()=>t||ih).splice(0,s.length-1)}function Bn({duration:s=300,keyframes:t,times:r,ease:a="easeInOut"}){const n=Qg(a)?a.map(Yc):Yc(a),i={done:!1,value:t[0]},o=Uj(r&&r.length===t.length?r:Vj(t),s),l=Mj(o,t,{ease:Array.isArray(n)?n:Lj(t,n)});return{calculatedDuration:s,next:c=>(i.value=l(c),i.done=c>=s,i)}}const Bj=s=>s!==null;function qo(s,{repeat:t,repeatType:r="loop"},a,n=1){const i=s.filter(Bj),l=n<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||a===void 0?i[l]:a}const $j={decay:Gl,inertia:Gl,tween:Bn,keyframes:Bn,spring:Vi};function yh(s){typeof s.type=="string"&&(s.type=$j[s.type])}class _o{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const qj=s=>s/100;class Wo extends _o{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var a,n;const{motionValue:r}=this.options;r&&r.updatedAt!==it.now()&&this.tick(it.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(a=this.options).onStop)==null||n.call(a))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;yh(t);const{type:r=Bn,repeat:a=0,repeatDelay:n=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=r||Bn;c!==Bn&&typeof l[0]!="number"&&(this.mixKeyframes=ii(qj,gh(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=$o(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+n,this.totalDuration=this.resolvedDuration*(a+1)-n,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:a,totalDuration:n,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return a.next(0);const{delay:u=0,keyframes:d,repeat:m,repeatType:x,repeatDelay:g,type:p,onUpdate:N,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-n/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),j=this.playbackSpeed>=0?S<0:S>n;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let w=this.currentTime,C=a;if(m){const M=Math.min(this.currentTime,n)/l;let P=Math.floor(M),V=M%1;!V&&M>=1&&(V=1),V===1&&P--,P=Math.min(P,m+1),!!(P%2)&&(x==="reverse"?(V=1-V,g&&(V-=g/l)):x==="mirror"&&(C=o)),w=cr(0,1,V)*l}const y=j?{done:!1,value:d[0]}:C.next(w);i&&(y.value=i(y.value));let{done:b}=y;!j&&c!==null&&(b=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const v=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return v&&p!==Gl&&(y.value=qo(d,this.options,f,this.speed)),N&&N(y.value),v&&this.finish(),y}then(t,r){return this.finished.then(t,r)}get duration(){return Pt(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Pt(t)}get time(){return Pt(this.currentTime)}set time(t){var r;t=Dr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(it.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Pt(this.currentTime))}play(){var n,i;if(this.isStopped)return;const{driver:t=Sj,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(n=this.options).onPlay)==null||i.call(n);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(it.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function _j(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const fa=s=>s*180/Math.PI,Ql=s=>{const t=fa(Math.atan2(s[1],s[0]));return Zl(t)},Wj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:Ql,rotateZ:Ql,skewX:s=>fa(Math.atan(s[1])),skewY:s=>fa(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},Zl=s=>(s=s%360,s<0&&(s+=360),s),Jc=Ql,ed=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),sd=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),Kj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ed,scaleY:sd,scale:s=>(ed(s)+sd(s))/2,rotateX:s=>Zl(fa(Math.atan2(s[6],s[5]))),rotateY:s=>Zl(fa(Math.atan2(-s[2],s[0]))),rotateZ:Jc,rotate:Jc,skewX:s=>fa(Math.atan(s[4])),skewY:s=>fa(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function Xl(s){return s.includes("scale")?1:0}function Jl(s,t){if(!s||s==="none")return Xl(t);const r=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,n;if(r)a=Kj,n=r;else{const l=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=Wj,n=l}if(!n)return Xl(t);const i=a[t],o=n[1].split(",").map(zj);return typeof i=="function"?i(o):o[i]}const Yj=(s,t)=>{const{transform:r="none"}=getComputedStyle(s);return Jl(r,t)};function zj(s){return parseFloat(s.trim())}const Cn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Sn=new Set(Cn),td=s=>s===wn||s===De,Hj=new Set(["x","y","z"]),Gj=Cn.filter(s=>!Hj.has(s));function Qj(s){const t=[];return Gj.forEach(r=>{const a=s.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t}const Gr={width:({x:s},{paddingLeft:t="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),height:({y:s},{paddingTop:t="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>Jl(t,"x"),y:(s,{transform:t})=>Jl(t,"y")};Gr.translateX=Gr.x;Gr.translateY=Gr.y;const Da=new Set;let eo=!1,so=!1,to=!1;function Nh(){if(so){const s=Array.from(Da).filter(a=>a.needsMeasurement),t=new Set(s.map(a=>a.element)),r=new Map;t.forEach(a=>{const n=Qj(a);n.length&&(r.set(a,n),a.render())}),s.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const n=r.get(a);n&&n.forEach(([i,o])=>{var l;(l=a.getValue(i))==null||l.set(o)})}),s.forEach(a=>a.measureEndState()),s.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}so=!1,eo=!1,Da.forEach(s=>s.complete(to)),Da.clear()}function bh(){Da.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(so=!0)})}function Zj(){to=!0,bh(),Nh(),to=!1}class Ko{constructor(t,r,a,n,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=a,this.motionValue=n,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Da.add(this),eo||(eo=!0,xs.read(bh),xs.resolveKeyframes(Nh))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:a,motionValue:n}=this;if(t[0]===null){const i=n==null?void 0:n.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(a&&r){const l=a.readValue(r,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),n&&i===void 0&&n.set(t[0])}_j(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Da.delete(this)}cancel(){this.state==="scheduled"&&(Da.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Xj=s=>s.startsWith("--");function Jj(s,t,r){Xj(t)?s.style.setProperty(t,r):s.style[t]=r}const ev=Fo(()=>window.ScrollTimeline!==void 0),sv={};function tv(s,t){const r=Fo(s);return()=>sv[t]??r()}const wh=tv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),On=([s,t,r,a])=>`cubic-bezier(${s}, ${t}, ${r}, ${a})`,rd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:On([0,.65,.55,1]),circOut:On([.55,0,1,.45]),backIn:On([.31,.01,.66,-.59]),backOut:On([.33,1.53,.69,.99])};function Ch(s,t){if(s)return typeof s=="function"?wh()?jh(s,t):"ease-out":lh(s)?On(s):Array.isArray(s)?s.map(r=>Ch(r,t)||rd.easeOut):rd[s]}function rv(s,t,r,{delay:a=0,duration:n=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:r};c&&(d.offset=c);const m=Ch(l,n);Array.isArray(m)&&(d.easing=m);const x={delay:a,duration:n,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(x.pseudoElement=u),s.animate(d,x)}function Sh(s){return typeof s=="function"&&"applyToOptions"in s}function av({type:s,...t}){return Sh(s)&&wh()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class nv extends _o{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:r,name:a,keyframes:n,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Ro(typeof t.type!="string");const u=av(t);this.animation=rv(r,a,n,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=qo(n,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):Jj(r,a,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,a;const t=((a=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:a.call(r).duration)||0;return Pt(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Pt(t)}get time(){return Pt(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Dr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&ev()?(this.animation.timeline=t,kt):r(this)}}const Ph={anticipate:rh,backInOut:th,circInOut:nh};function iv(s){return s in Ph}function lv(s){typeof s.ease=="string"&&iv(s.ease)&&(s.ease=Ph[s.ease])}const ul=10;class ov extends nv{constructor(t){lv(t),yh(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:a,onComplete:n,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const l=new Wo({...o,autoplay:!1}),c=Math.max(ul,it.now()-this.startTime),u=cr(0,ul,c-ul);r.setWithVelocity(l.sample(Math.max(0,c-u)).value,l.sample(c).value,u),l.stop()}}const ad=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(ta.test(s)||s==="0")&&!s.startsWith("url("));function cv(s){const t=s[0];if(s.length===1)return!0;for(let r=0;r<s.length;r++)if(s[r]!==t)return!0}function dv(s,t,r,a){const n=s[0];if(n===null)return!1;if(t==="display"||t==="visibility")return!0;const i=s[s.length-1],o=ad(n,t),l=ad(i,t);return!o||!l?!1:cv(s)||(r==="spring"||Sh(r))&&a}function ro(s){s.duration=0,s.type="keyframes"}const uv=new Set(["opacity","clipPath","filter","transform"]),mv=Fo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hv(s){var d;const{motionValue:t,name:r,repeatDelay:a,repeatType:n,damping:i,type:o}=s;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return mv()&&r&&uv.has(r)&&(r!=="transform"||!u)&&!c&&!a&&n!=="mirror"&&i!==0&&o!=="inertia"}const xv=40;class fv extends _o{constructor({autoplay:t=!0,delay:r=0,type:a="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...m}){var p;super(),this.stop=()=>{var N,f;this._animation&&(this._animation.stop(),(N=this.stopTimeline)==null||N.call(this)),(f=this.keyframeResolver)==null||f.cancel()},this.createdAt=it.now();const x={autoplay:t,delay:r,type:a,repeat:n,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:d,...m},g=(d==null?void 0:d.KeyframeResolver)||Ko;this.keyframeResolver=new g(l,(N,f,S)=>this.onKeyframesResolved(N,f,x,!S),c,u,d),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(t,r,a,n){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=a;this.resolvedAt=it.now(),dv(t,i,o,l)||((Rr.instantAnimations||!c)&&(d==null||d(qo(t,a,r))),t[0]=t[t.length-1],ro(a),a.repeat=0);const x={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>xv?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:t},g=!u&&hv(x)?new ov({...x,element:x.motionValue.owner.current}):new Wo(x);g.finished.then(()=>this.notifyFinished()).catch(kt),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),Zj()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const pv=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function gv(s){const t=pv.exec(s);if(!t)return[,];const[,r,a,n]=t;return[`--${r??a}`,n]}function kh(s,t,r=1){const[a,n]=gv(s);if(!a)return;const i=window.getComputedStyle(t).getPropertyValue(a);if(i){const o=i.trim();return Hm(o)?parseFloat(o):o}return Vo(n)?kh(n,t,r+1):n}function Yo(s,t){return(s==null?void 0:s[t])??(s==null?void 0:s.default)??s}const Dh=new Set(["width","height","top","left","right","bottom",...Cn]),jv={test:s=>s==="auto",parse:s=>s},Ih=s=>t=>t.test(s),Th=[wn,De,or,Lr,cj,oj,jv],nd=s=>Th.find(Ih(s));function vv(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||Qm(s):!0}const yv=new Set(["brightness","contrast","saturate","opacity"]);function Nv(s){const[t,r]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[a]=r.match(Uo)||[];if(!a)return s;const n=r.replace(a,"");let i=yv.has(t)?1:0;return a!==r&&(i*=100),t+"("+i+n+")"}const bv=/\b([a-z-]*)\(.*?\)/gu,ao={...ta,getAnimatableNone:s=>{const t=s.match(bv);return t?t.map(Nv).join(" "):s}},id={...wn,transform:Math.round},wv={rotate:Lr,rotateX:Lr,rotateY:Lr,rotateZ:Lr,scale:gi,scaleX:gi,scaleY:gi,scaleZ:gi,skew:Lr,skewX:Lr,skewY:Lr,distance:De,translateX:De,translateY:De,translateZ:De,x:De,y:De,z:De,perspective:De,transformPerspective:De,opacity:zn,originX:Hc,originY:Hc,originZ:De},zo={borderWidth:De,borderTopWidth:De,borderRightWidth:De,borderBottomWidth:De,borderLeftWidth:De,borderRadius:De,radius:De,borderTopLeftRadius:De,borderTopRightRadius:De,borderBottomRightRadius:De,borderBottomLeftRadius:De,width:De,maxWidth:De,height:De,maxHeight:De,top:De,right:De,bottom:De,left:De,inset:De,insetBlock:De,insetBlockStart:De,insetBlockEnd:De,insetInline:De,insetInlineStart:De,insetInlineEnd:De,padding:De,paddingTop:De,paddingRight:De,paddingBottom:De,paddingLeft:De,paddingBlock:De,paddingBlockStart:De,paddingBlockEnd:De,paddingInline:De,paddingInlineStart:De,paddingInlineEnd:De,margin:De,marginTop:De,marginRight:De,marginBottom:De,marginLeft:De,marginBlock:De,marginBlockStart:De,marginBlockEnd:De,marginInline:De,marginInlineStart:De,marginInlineEnd:De,backgroundPositionX:De,backgroundPositionY:De,...wv,zIndex:id,fillOpacity:zn,strokeOpacity:zn,numOctaves:id},Cv={...zo,color:Ps,backgroundColor:Ps,outlineColor:Ps,fill:Ps,stroke:Ps,borderColor:Ps,borderTopColor:Ps,borderRightColor:Ps,borderBottomColor:Ps,borderLeftColor:Ps,filter:ao,WebkitFilter:ao},Ah=s=>Cv[s];function Rh(s,t){let r=Ah(s);return r!==ao&&(r=ta),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Sv=new Set(["auto","none","0"]);function Pv(s,t,r){let a=0,n;for(;a<s.length&&!n;){const i=s[a];typeof i=="string"&&!Sv.has(i)&&Hn(i).values.length&&(n=s[a]),a++}if(n&&r)for(const i of t)s[i]=Rh(r,n)}class kv extends Ko{constructor(t,r,a,n,i){super(t,r,a,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let m=t[d];if(typeof m=="string"&&(m=m.trim(),Vo(m))){const x=kh(m,r.current);x!==void 0&&(t[d]=x),d===t.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!Dh.has(a)||t.length!==2)return;const[n,i]=t,o=nd(n),l=nd(i),c=zc(n),u=zc(i);if(c!==u&&Gr[a]){this.needsMeasurement=!0;return}if(o!==l)if(td(o)&&td(l))for(let d=0;d<t.length;d++){const m=t[d];typeof m=="string"&&(t[d]=parseFloat(m))}else Gr[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,a=[];for(let n=0;n<t.length;n++)(t[n]===null||vv(t[n]))&&a.push(n);a.length&&Pv(t,a,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Gr[a](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const n=r[r.length-1];n!==void 0&&t.getValue(a,n).jump(n,!1)}measureEndState(){var l;const{element:t,name:r,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const n=t.getValue(r);n&&n.jump(this.measuredOrigin,!1);const i=a.length-1,o=a[i];a[i]=Gr[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function Dv(s,t,r){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let a=document;const n=(r==null?void 0:r[s])??a.querySelectorAll(s);return n?Array.from(n):[]}return Array.from(s)}const Fh=(s,t)=>t&&typeof s=="number"?t.transform(s):s;function Iv(s){return Gm(s)&&"offsetHeight"in s}const ld=30,Tv=s=>!isNaN(parseFloat(s));class Av{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{var i;const n=it.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=it.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Tv(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Eo);const a=this.events[t].add(r);return t==="change"?()=>{a(),xs.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=it.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ld)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,ld);return Zm(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gn(s,t){return new Av(s,t)}const{schedule:Ho}=oh(queueMicrotask,!1),Mt={x:!1,y:!1};function Eh(){return Mt.x||Mt.y}function Rv(s){return s==="x"||s==="y"?Mt[s]?null:(Mt[s]=!0,()=>{Mt[s]=!1}):Mt.x||Mt.y?null:(Mt.x=Mt.y=!0,()=>{Mt.x=Mt.y=!1})}function Mh(s,t){const r=Dv(s),a=new AbortController,n={passive:!0,...t,signal:a.signal};return[r,n,()=>a.abort()]}function od(s){return!(s.pointerType==="touch"||Eh())}function Fv(s,t,r={}){const[a,n,i]=Mh(s,r),o=l=>{if(!od(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=m=>{od(m)&&(u(m),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,n)};return a.forEach(l=>{l.addEventListener("pointerenter",o,n)}),i}const Oh=(s,t)=>t?s===t?!0:Oh(s,t.parentElement):!1,Go=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,Ev=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Vh(s){return Ev.has(s.tagName)||s.isContentEditable===!0}const Pi=new WeakSet;function cd(s){return t=>{t.key==="Enter"&&s(t)}}function ml(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Mv=(s,t)=>{const r=s.currentTarget;if(!r)return;const a=cd(()=>{if(Pi.has(r))return;ml(r,"down");const n=cd(()=>{ml(r,"up")}),i=()=>ml(r,"cancel");r.addEventListener("keyup",n,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",a,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),t)};function dd(s){return Go(s)&&!Eh()}function Ov(s,t,r={}){const[a,n,i]=Mh(s,r),o=l=>{const c=l.currentTarget;if(!dd(l))return;Pi.add(c);const u=t(c,l),d=(g,p)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",x),Pi.has(c)&&Pi.delete(c),dd(g)&&typeof u=="function"&&u(g,{success:p})},m=g=>{d(g,c===window||c===document||r.useGlobalTarget||Oh(c,g.target))},x=g=>{d(g,!1)};window.addEventListener("pointerup",m,n),window.addEventListener("pointercancel",x,n)};return a.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,n),Iv(l)&&(l.addEventListener("focus",u=>Mv(u,n)),!Vh(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function Uh(s){return Gm(s)&&"ownerSVGElement"in s}function Vv(s){return Uh(s)&&s.tagName==="svg"}const Gs=s=>!!(s&&s.getVelocity),Uv=[...Th,Ps,ta],Lv=s=>Uv.find(Ih(s)),Lh=h.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function Bv(s=!0){const t=h.useContext(Io);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:n}=t,i=h.useId();h.useEffect(()=>{if(s)return n(i)},[s]);const o=h.useCallback(()=>s&&a&&a(i),[i,a,s]);return!r&&a?[!1,o]:[!0]}const Bh=h.createContext({strict:!1}),ud={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jn={};for(const s in ud)jn[s]={isEnabled:t=>ud[s].some(r=>!!t[r])};function $v(s){for(const t in s)jn[t]={...jn[t],...s[t]}}const qv=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ui(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||qv.has(s)}let $h=s=>!Ui(s);function _v(s){typeof s=="function"&&($h=t=>t.startsWith("on")?!Ui(t):s(t))}try{_v(require("@emotion/is-prop-valid").default)}catch{}function Wv(s,t,r){const a={};for(const n in s)n==="values"&&typeof s.values=="object"||($h(n)||r===!0&&Ui(n)||!t&&!Ui(n)||s.draggable&&n.startsWith("onDrag"))&&(a[n]=s[n]);return a}const Qi=h.createContext({});function Zi(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function Gn(s){return typeof s=="string"||Array.isArray(s)}const Qo=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zo=["initial",...Qo];function Xi(s){return Zi(s.animate)||Zo.some(t=>Gn(s[t]))}function qh(s){return!!(Xi(s)||s.variants)}function Kv(s,t){if(Xi(s)){const{initial:r,animate:a}=s;return{initial:r===!1||Gn(r)?r:void 0,animate:Gn(a)?a:void 0}}return s.inherit!==!1?t:{}}function Yv(s){const{initial:t,animate:r}=Kv(s,h.useContext(Qi));return h.useMemo(()=>({initial:t,animate:r}),[md(t),md(r)])}function md(s){return Array.isArray(s)?s.join(" "):s}function hd(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const Rn={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(De.test(s))s=parseFloat(s);else return s;const r=hd(s,t.target.x),a=hd(s,t.target.y);return`${r}% ${a}%`}},zv={correct:(s,{treeScale:t,projectionDelta:r})=>{const a=s,n=ta.parse(s);if(n.length>5)return a;const i=ta.createTransformer(s),o=typeof n[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;n[0+o]/=l,n[1+o]/=c;const u=ys(l,c,.5);return typeof n[2+o]=="number"&&(n[2+o]/=u),typeof n[3+o]=="number"&&(n[3+o]/=u),i(n)}},no={borderRadius:{...Rn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rn,borderTopRightRadius:Rn,borderBottomLeftRadius:Rn,borderBottomRightRadius:Rn,boxShadow:zv};function _h(s,{layout:t,layoutId:r}){return Sn.has(s)||s.startsWith("origin")||(t||r!==void 0)&&(!!no[s]||s==="opacity")}const Hv={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Gv=Cn.length;function Qv(s,t,r){let a="",n=!0;for(let i=0;i<Gv;i++){const o=Cn[i],l=s[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=Fh(l,zo[o]);if(!c){n=!1;const d=Hv[o]||o;a+=`${d}(${u}) `}r&&(t[o]=u)}}return a=a.trim(),r?a=r(t,n?"":a):n&&(a="none"),a}function Xo(s,t,r){const{style:a,vars:n,transformOrigin:i}=s;let o=!1,l=!1;for(const c in t){const u=t[c];if(Sn.has(c)){o=!0;continue}else if(dh(c)){n[c]=u;continue}else{const d=Fh(u,zo[c]);c.startsWith("origin")?(l=!0,i[c]=d):a[c]=d}}if(t.transform||(o||r?a.transform=Qv(t,s.transform,r):a.transform&&(a.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;a.transformOrigin=`${c} ${u} ${d}`}}const Jo=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Wh(s,t,r){for(const a in t)!Gs(t[a])&&!_h(a,r)&&(s[a]=t[a])}function Zv({transformTemplate:s},t){return h.useMemo(()=>{const r=Jo();return Xo(r,t,s),Object.assign({},r.vars,r.style)},[t])}function Xv(s,t){const r=s.style||{},a={};return Wh(a,r,s),Object.assign(a,Zv(s,t)),a}function Jv(s,t){const r={},a=Xv(s,t);return s.drag&&s.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(r.tabIndex=0),r.style=a,r}const ey={offset:"stroke-dashoffset",array:"stroke-dasharray"},sy={offset:"strokeDashoffset",array:"strokeDasharray"};function ty(s,t,r=1,a=0,n=!0){s.pathLength=1;const i=n?ey:sy;s[i.offset]=De.transform(-a);const o=De.transform(t),l=De.transform(r);s[i.array]=`${o} ${l}`}const ry=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Kh(s,{attrX:t,attrY:r,attrScale:a,pathLength:n,pathSpacing:i=1,pathOffset:o=0,...l},c,u,d){if(Xo(s,l,u),c){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:m,style:x}=s;m.transform&&(x.transform=m.transform,delete m.transform),(x.transform||m.transformOrigin)&&(x.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),x.transform&&(x.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete m.transformBox);for(const g of ry)m[g]!==void 0&&(x[g]=m[g],delete m[g]);t!==void 0&&(m.x=t),r!==void 0&&(m.y=r),a!==void 0&&(m.scale=a),n!==void 0&&ty(m,n,i,o,!1)}const Yh=()=>({...Jo(),attrs:{}}),zh=s=>typeof s=="string"&&s.toLowerCase()==="svg";function ay(s,t,r,a){const n=h.useMemo(()=>{const i=Yh();return Kh(i,t,zh(a),s.transformTemplate,s.style),{...i.attrs,style:{...i.style}}},[t]);if(s.style){const i={};Wh(i,s.style,s),n.style={...i,...n.style}}return n}const ny=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ec(s){return typeof s!="string"||s.includes("-")?!1:!!(ny.indexOf(s)>-1||/[A-Z]/u.test(s))}function iy(s,t,r,{latestValues:a},n,i=!1,o){const c=(o??ec(s)?ay:Jv)(t,a,n,s),u=Wv(t,typeof s=="string",i),d=s!==h.Fragment?{...u,...c,ref:r}:{},{children:m}=t,x=h.useMemo(()=>Gs(m)?m.get():m,[m]);return h.createElement(s,{...d,children:x})}function xd(s){const t=[{},{}];return s==null||s.values.forEach((r,a)=>{t[0][a]=r.get(),t[1][a]=r.getVelocity()}),t}function sc(s,t,r,a){if(typeof t=="function"){const[n,i]=xd(a);t=t(r!==void 0?r:s.custom,n,i)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[n,i]=xd(a);t=t(r!==void 0?r:s.custom,n,i)}return t}function ki(s){return Gs(s)?s.get():s}function ly({scrapeMotionValuesFromProps:s,createRenderState:t},r,a,n){return{latestValues:oy(r,a,n,s),renderState:t()}}function oy(s,t,r,a){const n={},i=a(s,{});for(const x in i)n[x]=ki(i[x]);let{initial:o,animate:l}=s;const c=Xi(s),u=qh(s);t&&u&&!c&&s.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const m=d?l:o;if(m&&typeof m!="boolean"&&!Zi(m)){const x=Array.isArray(m)?m:[m];for(let g=0;g<x.length;g++){const p=sc(s,x[g]);if(p){const{transitionEnd:N,transition:f,...S}=p;for(const j in S){let w=S[j];if(Array.isArray(w)){const C=d?w.length-1:0;w=w[C]}w!==null&&(n[j]=w)}for(const j in N)n[j]=N[j]}}}return n}const Hh=s=>(t,r)=>{const a=h.useContext(Qi),n=h.useContext(Io),i=()=>ly(s,t,a,n);return r?i():qg(i)};function tc(s,t,r){var i;const{style:a}=s,n={};for(const o in a)(Gs(a[o])||t.style&&Gs(t.style[o])||_h(o,s)||((i=r==null?void 0:r.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(n[o]=a[o]);return n}const cy=Hh({scrapeMotionValuesFromProps:tc,createRenderState:Jo});function Gh(s,t,r){const a=tc(s,t,r);for(const n in s)if(Gs(s[n])||Gs(t[n])){const i=Cn.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;a[i]=s[n]}return a}const dy=Hh({scrapeMotionValuesFromProps:Gh,createRenderState:Yh}),uy=Symbol.for("motionComponentSymbol");function my(s,t,r){const a=h.useRef(r);h.useInsertionEffect(()=>{a.current=r});const n=h.useRef(null);return h.useCallback(i=>{var l;i&&((l=s.onMount)==null||l.call(s,i)),t&&(i?t.mount(i):t.unmount());const o=a.current;if(typeof o=="function")if(i){const c=o(i);typeof c=="function"&&(n.current=c)}else n.current?(n.current(),n.current=null):o(i);else o&&(o.current=i)},[t])}const rc=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hy="framerAppearId",Qh="data-"+rc(hy),Zh=h.createContext({});function Vn(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function xy(s,t,r,a,n,i){var f,S;const{visualElement:o}=h.useContext(Qi),l=h.useContext(Bh),c=h.useContext(Io),u=h.useContext(Lh).reducedMotion,d=h.useRef(null);a=a||l.renderer,!d.current&&a&&(d.current=a(s,{visualState:t,parent:o,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u,isSVG:i}));const m=d.current,x=h.useContext(Zh);m&&!m.projection&&n&&(m.type==="html"||m.type==="svg")&&fy(d.current,r,n,x);const g=h.useRef(!1);h.useInsertionEffect(()=>{m&&g.current&&m.update(r,c)});const p=r[Qh],N=h.useRef(!!p&&!((f=window.MotionHandoffIsComplete)!=null&&f.call(window,p))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,p)));return _g(()=>{m&&(g.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),N.current&&m.animationState&&m.animationState.animateChanges())}),h.useEffect(()=>{m&&(!N.current&&m.animationState&&m.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,p)}),N.current=!1),m.enteringChildren=void 0)}),m}function fy(s,t,r,a){const{layoutId:n,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;s.projection=new r(s.latestValues,t["data-framer-portal-id"]?void 0:Xh(s.parent)),s.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!o||l&&Vn(l),visualElement:s,animationType:typeof i=="string"?i:"both",initialPromotionConfig:a,crossfade:d,layoutScroll:c,layoutRoot:u})}function Xh(s){if(s)return s.options.allowProjection!==!1?s.projection:Xh(s.parent)}function hl(s,{forwardMotionProps:t=!1,type:r}={},a,n){a&&$v(a);const i=r?r==="svg":ec(s),o=i?dy:cy;function l(u,d){let m;const x={...h.useContext(Lh),...u,layoutId:py(u)},{isStatic:g}=x,p=Yv(u),N=o(u,g);if(!g&&Do){gy();const f=jy(x);m=f.MeasureLayout,p.visualElement=xy(s,N,x,n,f.ProjectionNode,i)}return e.jsxs(Qi.Provider,{value:p,children:[m&&p.visualElement?e.jsx(m,{visualElement:p.visualElement,...x}):null,iy(s,u,my(N,p.visualElement,d),N,g,t,i)]})}l.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const c=h.forwardRef(l);return c[uy]=s,c}function py({layoutId:s}){const t=h.useContext(zm).id;return t&&s!==void 0?t+"-"+s:s}function gy(s,t){h.useContext(Bh).strict}function jy(s){const{drag:t,layout:r}=jn;if(!t&&!r)return{};const a={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(s)||r!=null&&r.isEnabled(s)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function vy(s,t){if(typeof Proxy>"u")return hl;const r=new Map,a=(i,o)=>hl(i,o,s,t),n=(i,o)=>a(i,o);return new Proxy(n,{get:(i,o)=>o==="create"?a:(r.has(o)||r.set(o,hl(o,void 0,s,t)),r.get(o))})}function Jh({top:s,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:s,max:a}}}function yy({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function Ny(s,t){if(!t)return s;const r=t({x:s.left,y:s.top}),a=t({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function xl(s){return s===void 0||s===1}function io({scale:s,scaleX:t,scaleY:r}){return!xl(s)||!xl(t)||!xl(r)}function da(s){return io(s)||ex(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function ex(s){return fd(s.x)||fd(s.y)}function fd(s){return s&&s!=="0%"}function Li(s,t,r){const a=s-r,n=t*a;return r+n}function pd(s,t,r,a,n){return n!==void 0&&(s=Li(s,n,a)),Li(s,r,a)+t}function lo(s,t=0,r=1,a,n){s.min=pd(s.min,t,r,a,n),s.max=pd(s.max,t,r,a,n)}function sx(s,{x:t,y:r}){lo(s.x,t.translate,t.scale,t.originPoint),lo(s.y,r.translate,r.scale,r.originPoint)}const gd=.999999999999,jd=1.0000000000001;function by(s,t,r,a=!1){const n=r.length;if(!n)return;t.x=t.y=1;let i,o;for(let l=0;l<n;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(a&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ka(s,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,sx(s,o)),a&&da(i.latestValues)&&Ka(s,i.latestValues))}t.x<jd&&t.x>gd&&(t.x=1),t.y<jd&&t.y>gd&&(t.y=1)}function Wa(s,t){s.min=s.min+t,s.max=s.max+t}function vd(s,t,r,a,n=.5){const i=ys(s.min,s.max,n);lo(s,t,r,i,a)}function Ka(s,t){vd(s.x,t.x,t.scaleX,t.scale,t.originX),vd(s.y,t.y,t.scaleY,t.scale,t.originY)}function tx(s,t){return Jh(Ny(s.getBoundingClientRect(),t))}function wy(s,t,r){const a=tx(s,r),{scroll:n}=t;return n&&(Wa(a.x,n.offset.x),Wa(a.y,n.offset.y)),a}const yd=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ya=()=>({x:yd(),y:yd()}),Nd=()=>({min:0,max:0}),Fs=()=>({x:Nd(),y:Nd()}),oo={current:null},rx={current:!1};function Cy(){if(rx.current=!0,!!Do)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>oo.current=s.matches;s.addEventListener("change",t),t()}else oo.current=!1}const Sy=new WeakMap;function Py(s,t,r){for(const a in t){const n=t[a],i=r[a];if(Gs(n))s.addValue(a,n);else if(Gs(i))s.addValue(a,gn(n,{owner:s}));else if(i!==n)if(s.hasValue(a)){const o=s.getValue(a);o.liveStyle===!0?o.jump(n):o.hasAnimated||o.set(n)}else{const o=s.getStaticValue(a);s.addValue(a,gn(o!==void 0?o:n,{owner:s}))}}for(const a in r)t[a]===void 0&&s.removeValue(a);return t}const bd=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ky{scrapeMotionValuesFromProps(t,r,a){return{}}constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:n,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ko,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=it.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,xs.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Xi(r),this.isVariantNode=qh(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(r,{},this);for(const x in m){const g=m[x];c[x]!==void 0&&Gs(g)&&g.set(c[x])}}mount(t){var r;this.current=t,Sy.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,n)=>this.bindToMotionValue(n,a)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(rx.current||Cy(),this.shouldReduceMotion=oo.current),(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),sa(this.notifyUpdate),sa(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const a=this.features[r];a&&(a.unmount(),a.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=Sn.has(t);a&&this.onBindTransform&&this.onBindTransform();const n=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&xs.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{n(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in jn){const r=jn[t];if(!r)continue;const{isEnabled:a,Feature:n}=r;if(!this.features[t]&&n&&a(this.props)&&(this.features[t]=new n(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Fs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<bd.length;a++){const n=bd[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,o=t[i];o&&(this.propEventSubscriptions[n]=this.on(n,o))}this.prevMotionValues=Py(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const a=this.values.get(t);r!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=gn(r===null?void 0:r,{owner:this}),this.addValue(t,a)),a}readValue(t,r){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(Hm(a)||Qm(a))?a=parseFloat(a):!Lv(a)&&ta.test(r)&&(a=Rh(t,r)),this.setBaseTarget(t,Gs(a)?a.get():a)),Gs(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var i;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const o=sc(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);o&&(a=o[t])}if(r&&a!==void 0)return a;const n=this.getBaseTargetFromProps(this.props,t);return n!==void 0&&!Gs(n)?n:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Eo),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){Ho.render(this.render)}}class ax extends ky{constructor(){super(...arguments),this.KeyframeResolver=kv}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Gs(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function nx(s,{style:t,vars:r},a,n){const i=s.style;let o;for(o in t)i[o]=t[o];n==null||n.applyProjectionStyles(i,a);for(o in r)i.setProperty(o,r[o])}function Dy(s){return window.getComputedStyle(s)}class Iy extends ax{constructor(){super(...arguments),this.type="html",this.renderInstance=nx}readValueFromInstance(t,r){var a;if(Sn.has(r))return(a=this.projection)!=null&&a.isProjecting?Xl(r):Yj(t,r);{const n=Dy(t),i=(dh(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return tx(t,r)}build(t,r,a){Xo(t,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,r,a){return tc(t,r,a)}}const ix=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ty(s,t,r,a){nx(s,t,void 0,a);for(const n in t.attrs)s.setAttribute(ix.has(n)?n:rc(n),t.attrs[n])}class Ay extends ax{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Fs}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Sn.has(r)){const a=Ah(r);return a&&a.default||0}return r=ix.has(r)?r:rc(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,a){return Gh(t,r,a)}build(t,r,a){Kh(t,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,r,a,n){Ty(t,r,a,n)}mount(t){this.isSVGTag=zh(t.tagName),super.mount(t)}}const Ry=(s,t)=>t.isSVG??ec(s)?new Ay(t):new Iy(t,{allowProjection:s!==h.Fragment});function tn(s,t,r){const a=s.getProps();return sc(a,t,r!==void 0?r:a.custom,s)}const co=s=>Array.isArray(s);function Fy(s,t,r){s.hasValue(t)?s.getValue(t).set(r):s.addValue(t,gn(r))}function Ey(s){return co(s)?s[s.length-1]||0:s}function My(s,t){const r=tn(s,t);let{transitionEnd:a={},transition:n={},...i}=r||{};i={...i,...a};for(const o in i){const l=Ey(i[o]);Fy(s,o,l)}}function Oy(s){return!!(Gs(s)&&s.add)}function uo(s,t){const r=s.getValue("willChange");if(Oy(r))return r.add(t);if(!r&&Rr.WillChange){const a=new Rr.WillChange("auto");s.addValue("willChange",a),a.add(t)}}function lx(s){return s.props[Qh]}const Vy=s=>s!==null;function Uy(s,{repeat:t,repeatType:r="loop"},a){const n=s.filter(Vy),i=t&&r!=="loop"&&t%2===1?0:n.length-1;return n[i]}const Ly={type:"spring",stiffness:500,damping:25,restSpeed:10},By=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),$y={type:"keyframes",duration:.8},qy={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_y=(s,{keyframes:t})=>t.length>2?$y:Sn.has(s)?s.startsWith("scale")?By(t[1]):Ly:qy;function Wy({when:s,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:n,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const ac=(s,t,r,a={},n,i)=>o=>{const l=Yo(a,s)||{},c=l.delay||a.delay||0;let{elapsed:u=0}=a;u=u-Dr(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:x=>{t.set(x),l.onUpdate&&l.onUpdate(x)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:s,motionValue:t,element:i?void 0:n};Wy(l)||Object.assign(d,_y(s,d)),d.duration&&(d.duration=Dr(d.duration)),d.repeatDelay&&(d.repeatDelay=Dr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let m=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(ro(d),d.delay===0&&(m=!0)),(Rr.instantAnimations||Rr.skipAnimations)&&(m=!0,ro(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,m&&!i&&t.get()!==void 0){const x=Uy(d.keyframes,l);if(x!==void 0){xs.update(()=>{d.onUpdate(x),d.onComplete()});return}}return l.isSync?new Wo(d):new fv(d)};function Ky({protectedKeys:s,needsAnimating:t},r){const a=s.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function ox(s,t,{delay:r=0,transitionOverride:a,type:n}={}){let{transition:i=s.getDefaultTransition(),transitionEnd:o,...l}=t;a&&(i=a);const c=[],u=n&&s.animationState&&s.animationState.getState()[n];for(const d in l){const m=s.getValue(d,s.latestValues[d]??null),x=l[d];if(x===void 0||u&&Ky(u,d))continue;const g={delay:r,...Yo(i||{},d)},p=m.get();if(p!==void 0&&!m.isAnimating&&!Array.isArray(x)&&x===p&&!g.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const S=lx(s);if(S){const j=window.MotionHandoffAnimation(S,d,xs);j!==null&&(g.startTime=j,N=!0)}}uo(s,d),m.start(ac(d,m,x,s.shouldReduceMotion&&Dh.has(d)?{type:!1}:g,s,N));const f=m.animation;f&&c.push(f)}return o&&Promise.all(c).then(()=>{xs.update(()=>{o&&My(s,o)})}),c}function cx(s,t,r,a=0,n=1){const i=Array.from(s).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),o=s.size,l=(o-1)*a;return typeof r=="function"?r(i,o):n===1?i*a:l-i*a}function mo(s,t,r={}){var c;const a=tn(s,t,r.type==="exit"?(c=s.presenceContext)==null?void 0:c.custom:void 0);let{transition:n=s.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(n=r.transitionOverride);const i=a?()=>Promise.all(ox(s,a,r)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:m,staggerDirection:x}=n;return Yy(s,t,u,d,m,x,r)}:()=>Promise.resolve(),{when:l}=n;if(l){const[u,d]=l==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(r.delay)])}function Yy(s,t,r=0,a=0,n=0,i=1,o){const l=[];for(const c of s.variantChildren)c.notify("AnimationStart",t),l.push(mo(c,t,{...o,delay:r+(typeof a=="function"?0:a)+cx(s.variantChildren,c,a,n,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function zy(s,t,r={}){s.notify("AnimationStart",t);let a;if(Array.isArray(t)){const n=t.map(i=>mo(s,i,r));a=Promise.all(n)}else if(typeof t=="string")a=mo(s,t,r);else{const n=typeof t=="function"?tn(s,t,r.custom):t;a=Promise.all(ox(s,n,r))}return a.then(()=>{s.notify("AnimationComplete",t)})}function dx(s,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==s.length)return!1;for(let a=0;a<r;a++)if(t[a]!==s[a])return!1;return!0}const Hy=Zo.length;function ux(s){if(!s)return;if(!s.isControllingVariants){const r=s.parent?ux(s.parent)||{}:{};return s.props.initial!==void 0&&(r.initial=s.props.initial),r}const t={};for(let r=0;r<Hy;r++){const a=Zo[r],n=s.props[a];(Gn(n)||n===!1)&&(t[a]=n)}return t}const Gy=[...Qo].reverse(),Qy=Qo.length;function Zy(s){return t=>Promise.all(t.map(({animation:r,options:a})=>zy(s,r,a)))}function Xy(s){let t=Zy(s),r=wd(),a=!0;const n=c=>(u,d)=>{var x;const m=tn(s,d,c==="exit"?(x=s.presenceContext)==null?void 0:x.custom:void 0);if(m){const{transition:g,transitionEnd:p,...N}=m;u={...u,...N,...p}}return u};function i(c){t=c(s)}function o(c){const{props:u}=s,d=ux(s.parent)||{},m=[],x=new Set;let g={},p=1/0;for(let f=0;f<Qy;f++){const S=Gy[f],j=r[S],w=u[S]!==void 0?u[S]:d[S],C=Gn(w),y=S===c?j.isActive:null;y===!1&&(p=f);let b=w===d[S]&&w!==u[S]&&C;if(b&&a&&s.manuallyAnimateOnMount&&(b=!1),j.protectedKeys={...g},!j.isActive&&y===null||!w&&!j.prevProp||Zi(w)||typeof w=="boolean")continue;const v=Jy(j.prevProp,w);let M=v||S===c&&j.isActive&&!b&&C||f>p&&C,P=!1;const V=Array.isArray(w)?w:[w];let R=V.reduce(n(S),{});y===!1&&(R={});const{prevResolvedValues:T={}}=j,q={...T,...R},_=ne=>{M=!0,x.has(ne)&&(P=!0,x.delete(ne)),j.needsAnimating[ne]=!0;const me=s.getValue(ne);me&&(me.liveStyle=!1)};for(const ne in q){const me=R[ne],Q=T[ne];if(g.hasOwnProperty(ne))continue;let be=!1;co(me)&&co(Q)?be=!dx(me,Q):be=me!==Q,be?me!=null?_(ne):x.add(ne):me!==void 0&&x.has(ne)?_(ne):j.protectedKeys[ne]=!0}j.prevProp=w,j.prevResolvedValues=R,j.isActive&&(g={...g,...R}),a&&s.blockInitialAnimation&&(M=!1);const D=b&&v;M&&(!D||P)&&m.push(...V.map(ne=>{const me={type:S};if(typeof ne=="string"&&a&&!D&&s.manuallyAnimateOnMount&&s.parent){const{parent:Q}=s,be=tn(Q,ne);if(Q.enteringChildren&&be){const{delayChildren:ke}=be.transition||{};me.delay=cx(Q.enteringChildren,s,ke)}}return{animation:ne,options:me}}))}if(x.size){const f={};if(typeof u.initial!="boolean"){const S=tn(s,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(f.transition=S.transition)}x.forEach(S=>{const j=s.getBaseTarget(S),w=s.getValue(S);w&&(w.liveStyle=!0),f[S]=j??null}),m.push({animation:f})}let N=!!m.length;return a&&(u.initial===!1||u.initial===u.animate)&&!s.manuallyAnimateOnMount&&(N=!1),a=!1,N?t(m):Promise.resolve()}function l(c,u){var m;if(r[c].isActive===u)return Promise.resolve();(m=s.variantChildren)==null||m.forEach(x=>{var g;return(g=x.animationState)==null?void 0:g.setActive(c,u)}),r[c].isActive=u;const d=o(c);for(const x in r)r[x].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=wd()}}}function Jy(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!dx(t,s):!1}function ca(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wd(){return{animate:ca(!0),whileInView:ca(),whileHover:ca(),whileTap:ca(),whileDrag:ca(),whileFocus:ca(),exit:ca()}}class aa{constructor(t){this.isMounted=!1,this.node=t}update(){}}class eN extends aa{constructor(t){super(t),t.animationState||(t.animationState=Xy(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Zi(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let sN=0;class tN extends aa{constructor(){super(...arguments),this.id=sN++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const n=this.node.animationState.setActive("exit",!t);r&&!t&&n.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const rN={animation:{Feature:eN},exit:{Feature:tN}};function Qn(s,t,r,a={passive:!0}){return s.addEventListener(t,r,a),()=>s.removeEventListener(t,r)}function ci(s){return{point:{x:s.pageX,y:s.pageY}}}const aN=s=>t=>Go(t)&&s(t,ci(t));function $n(s,t,r,a){return Qn(s,t,aN(r),a)}const mx=1e-4,nN=1-mx,iN=1+mx,hx=.01,lN=0-hx,oN=0+hx;function lt(s){return s.max-s.min}function cN(s,t,r){return Math.abs(s-t)<=r}function Cd(s,t,r,a=.5){s.origin=a,s.originPoint=ys(t.min,t.max,s.origin),s.scale=lt(r)/lt(t),s.translate=ys(r.min,r.max,s.origin)-s.originPoint,(s.scale>=nN&&s.scale<=iN||isNaN(s.scale))&&(s.scale=1),(s.translate>=lN&&s.translate<=oN||isNaN(s.translate))&&(s.translate=0)}function qn(s,t,r,a){Cd(s.x,t.x,r.x,a?a.originX:void 0),Cd(s.y,t.y,r.y,a?a.originY:void 0)}function Sd(s,t,r){s.min=r.min+t.min,s.max=s.min+lt(t)}function dN(s,t,r){Sd(s.x,t.x,r.x),Sd(s.y,t.y,r.y)}function Pd(s,t,r){s.min=t.min-r.min,s.max=s.min+lt(t)}function Bi(s,t,r){Pd(s.x,t.x,r.x),Pd(s.y,t.y,r.y)}function bt(s){return[s("x"),s("y")]}const xx=({current:s})=>s?s.ownerDocument.defaultView:null,kd=(s,t)=>Math.abs(s-t);function uN(s,t){const r=kd(s.x,t.x),a=kd(s.y,t.y);return Math.sqrt(r**2+a**2)}const Dd=new Set(["auto","scroll"]);class fx{constructor(t,r,{transformPagePoint:a,contextWindow:n=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=g=>{this.handleScroll(g.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=pl(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,N=uN(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!N)return;const{point:f}=g,{timestamp:S}=_s;this.history.push({...f,timestamp:S});const{onStart:j,onMove:w}=this.handlers;p||(j&&j(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,g)},this.handlePointerMove=(g,p)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=fl(p,this.transformPagePoint),xs.update(this.updatePoint,!0)},this.handlePointerUp=(g,p)=>{this.end();const{onEnd:N,onSessionEnd:f,resumeAnimation:S}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=pl(g.type==="pointercancel"?this.lastMoveEventInfo:fl(p,this.transformPagePoint),this.history);this.startEvent&&N&&N(g,j),f&&f(g,j)},!Go(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=a,this.distanceThreshold=o,this.contextWindow=n||window;const c=ci(t),u=fl(c,this.transformPagePoint),{point:d}=u,{timestamp:m}=_s;this.history=[{...d,timestamp:m}];const{onSessionStart:x}=r;x&&x(t,pl(u,this.history)),this.removeListeners=ii($n(this.contextWindow,"pointermove",this.handlePointerMove),$n(this.contextWindow,"pointerup",this.handlePointerUp),$n(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(t){let r=t.parentElement;for(;r;){const a=getComputedStyle(r);(Dd.has(a.overflowX)||Dd.has(a.overflowY))&&this.scrollPositions.set(r,{x:r.scrollLeft,y:r.scrollTop}),r=r.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const r=this.scrollPositions.get(t);if(!r)return;const a=t===window,n=a?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},i={x:n.x-r.x,y:n.y-r.y};i.x===0&&i.y===0||(a?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(t,n),xs.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),sa(this.updatePoint)}}function fl(s,t){return t?{point:t(s.point)}:s}function Id(s,t){return{x:s.x-t.x,y:s.y-t.y}}function pl({point:s},t){return{point:s,delta:Id(s,px(t)),offset:Id(s,mN(t)),velocity:hN(t,.1)}}function mN(s){return s[0]}function px(s){return s[s.length-1]}function hN(s,t){if(s.length<2)return{x:0,y:0};let r=s.length-1,a=null;const n=px(s);for(;r>=0&&(a=s[r],!(n.timestamp-a.timestamp>Dr(t)));)r--;if(!a)return{x:0,y:0};const i=Pt(n.timestamp-a.timestamp);if(i===0)return{x:0,y:0};const o={x:(n.x-a.x)/i,y:(n.y-a.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function xN(s,{min:t,max:r},a){return t!==void 0&&s<t?s=a?ys(t,s,a.min):Math.max(s,t):r!==void 0&&s>r&&(s=a?ys(r,s,a.max):Math.min(s,r)),s}function Td(s,t,r){return{min:t!==void 0?s.min+t:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function fN(s,{top:t,left:r,bottom:a,right:n}){return{x:Td(s.x,r,n),y:Td(s.y,t,a)}}function Ad(s,t){let r=t.min-s.min,a=t.max-s.max;return t.max-t.min<s.max-s.min&&([r,a]=[a,r]),{min:r,max:a}}function pN(s,t){return{x:Ad(s.x,t.x),y:Ad(s.y,t.y)}}function gN(s,t){let r=.5;const a=lt(s),n=lt(t);return n>a?r=Yn(t.min,t.max-a,s.min):a>n&&(r=Yn(s.min,s.max-n,t.min)),cr(0,1,r)}function jN(s,t){const r={};return t.min!==void 0&&(r.min=t.min-s.min),t.max!==void 0&&(r.max=t.max-s.min),r}const ho=.35;function vN(s=ho){return s===!1?s=0:s===!0&&(s=ho),{x:Rd(s,"left","right"),y:Rd(s,"top","bottom")}}function Rd(s,t,r){return{min:Fd(s,t),max:Fd(s,r)}}function Fd(s,t){return typeof s=="number"?s:s[t]||0}const yN=new WeakMap;class NN{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Fs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:a}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=m=>{r?(this.stopAnimation(),this.snapToCursor(ci(m).point)):this.pauseAnimation()},o=(m,x)=>{this.stopAnimation();const{drag:g,dragPropagation:p,onDragStart:N}=this.getProps();if(g&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Rv(g),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bt(S=>{let j=this.getAxisMotionValue(S).get()||0;if(or.test(j)){const{projection:w}=this.visualElement;if(w&&w.layout){const C=w.layout.layoutBox[S];C&&(j=lt(C)*(parseFloat(j)/100))}}this.originPoint[S]=j}),N&&xs.postRender(()=>N(m,x)),uo(this.visualElement,"transform");const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},l=(m,x)=>{this.latestPointerEvent=m,this.latestPanInfo=x;const{dragPropagation:g,dragDirectionLock:p,onDirectionLock:N,onDrag:f}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:S}=x;if(p&&this.currentDirection===null){this.currentDirection=bN(S),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",x.point,S),this.updateAxis("y",x.point,S),this.visualElement.render(),f&&f(m,x)},c=(m,x)=>{this.latestPointerEvent=m,this.latestPanInfo=x,this.stop(m,x),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>bt(m=>{var x;return this.getAnimationState(m)==="paused"&&((x=this.getAxisMotionValue(m).animation)==null?void 0:x.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new fx(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:a,contextWindow:xx(this.visualElement),element:this.visualElement.current})}stop(t,r){const a=t||this.latestPointerEvent,n=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!n||!a)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&xs.postRender(()=>l(a,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:n}=this.getProps();if(!a||!ji(t,n,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=xN(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,n=this.constraints;t&&Vn(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=fN(a.layoutBox,t):this.constraints=!1,this.elastic=vN(r),n!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&bt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=jN(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Vn(t))return!1;const a=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=wy(a,n.root,this.visualElement.getTransformPagePoint());let o=pN(n.layout.layoutBox,i);if(r){const l=r(yy(o));this.hasMutatedConstraints=!!l,l&&(o=Jh(l))}return o}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:n,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=bt(d=>{if(!ji(d,r,this.currentDirection))return;let m=c&&c[d]||{};o&&(m={min:0,max:0});const x=n?200:1e6,g=n?40:1e7,p={type:"inertia",velocity:a?t[d]:0,bounceStiffness:x,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return uo(this.visualElement,t),a.start(ac(t,a,0,r,this.visualElement,!1))}stopAnimation(){bt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){bt(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),n=a[r];return n||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){bt(r=>{const{drag:a}=this.getProps();if(!ji(r,a,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(r);if(n&&n.layout){const{min:o,max:l}=n.layout.layoutBox[r],c=i.get()||0;i.set(t[r]-ys(o,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!Vn(r)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};bt(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();n[o]=gN({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),bt(o=>{if(!ji(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(ys(c,u,n[o]))})}addListeners(){if(!this.visualElement.current)return;yN.set(this.visualElement,this);const t=this.visualElement.current,r=$n(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&!Vh(c.target)&&this.start(c)}),a=()=>{const{dragConstraints:c}=this.getProps();Vn(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),xs.read(a);const o=Qn(window,"resize",()=>this.scalePositionWithinConstraints()),l=n.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(bt(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=c[d].translate,m.set(m.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:o=ho,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:n,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function ji(s,t,r){return(t===!0||t===s)&&(r===null||r===s)}function bN(s,t=10){let r=null;return Math.abs(s.y)>t?r="y":Math.abs(s.x)>t&&(r="x"),r}class wN extends aa{constructor(t){super(t),this.removeGroupControls=kt,this.removeListeners=kt,this.controls=new NN(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kt}update(){const{dragControls:t}=this.node.getProps(),{dragControls:r}=this.node.prevProps||{};t!==r&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ed=s=>(t,r)=>{s&&xs.postRender(()=>s(t,r))};class CN extends aa{constructor(){super(...arguments),this.removePointerDownListener=kt}onPointerDown(t){this.session=new fx(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xx(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:Ed(t),onStart:Ed(r),onMove:a,onEnd:(i,o)=>{delete this.session,n&&xs.postRender(()=>n(i,o))}}}mount(){this.removePointerDownListener=$n(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Di={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let gl=!1;class SN extends h.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:n}=this.props,{projection:i}=t;i&&(r.group&&r.group.add(i),a&&a.register&&n&&a.register(i),gl&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Di.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:n,isPresent:i}=this.props,{projection:o}=a;return o&&(o.isPresent=i,gl=!0,n||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||xs.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Ho.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:n}=t;gl=!0,n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function gx(s){const[t,r]=Bv(),a=h.useContext(zm);return e.jsx(SN,{...s,layoutGroup:a,switchLayoutGroup:h.useContext(Zh),isPresent:t,safeToRemove:r})}function PN(s,t,r){const a=Gs(s)?s:gn(s);return a.start(ac("",a,t,r)),a.animation}const kN=(s,t)=>s.depth-t.depth;class DN{constructor(){this.children=[],this.isDirty=!1}add(t){To(this.children,t),this.isDirty=!0}remove(t){Ao(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(kN),this.isDirty=!1,this.children.forEach(t)}}function IN(s,t){const r=it.now(),a=({timestamp:n})=>{const i=n-r;i>=t&&(sa(a),s(i-t))};return xs.setup(a,!0),()=>sa(a)}const jx=["TopLeft","TopRight","BottomLeft","BottomRight"],TN=jx.length,Md=s=>typeof s=="string"?parseFloat(s):s,Od=s=>typeof s=="number"||De.test(s);function AN(s,t,r,a,n,i){n?(s.opacity=ys(0,r.opacity??1,RN(a)),s.opacityExit=ys(t.opacity??1,0,FN(a))):i&&(s.opacity=ys(t.opacity??1,r.opacity??1,a));for(let o=0;o<TN;o++){const l=`border${jx[o]}Radius`;let c=Vd(t,l),u=Vd(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Od(c)===Od(u)?(s[l]=Math.max(ys(Md(c),Md(u),a),0),(or.test(u)||or.test(c))&&(s[l]+="%")):s[l]=u}(t.rotate||r.rotate)&&(s.rotate=ys(t.rotate||0,r.rotate||0,a))}function Vd(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const RN=vx(0,.5,ah),FN=vx(.5,.95,kt);function vx(s,t,r){return a=>a<s?0:a>t?1:r(Yn(s,t,a))}function Ud(s,t){s.min=t.min,s.max=t.max}function Et(s,t){Ud(s.x,t.x),Ud(s.y,t.y)}function Ld(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function Bd(s,t,r,a,n){return s-=t,s=Li(s,1/r,a),n!==void 0&&(s=Li(s,1/n,a)),s}function EN(s,t=0,r=1,a=.5,n,i=s,o=s){if(or.test(t)&&(t=parseFloat(t),t=ys(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=ys(i.min,i.max,a);s===i&&(l-=t),s.min=Bd(s.min,t,r,l,n),s.max=Bd(s.max,t,r,l,n)}function $d(s,t,[r,a,n],i,o){EN(s,t[r],t[a],t[n],t.scale,i,o)}const MN=["x","scaleX","originX"],ON=["y","scaleY","originY"];function qd(s,t,r,a){$d(s.x,t,MN,r?r.x:void 0,a?a.x:void 0),$d(s.y,t,ON,r?r.y:void 0,a?a.y:void 0)}function _d(s){return s.translate===0&&s.scale===1}function yx(s){return _d(s.x)&&_d(s.y)}function Wd(s,t){return s.min===t.min&&s.max===t.max}function VN(s,t){return Wd(s.x,t.x)&&Wd(s.y,t.y)}function Kd(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function Nx(s,t){return Kd(s.x,t.x)&&Kd(s.y,t.y)}function Yd(s){return lt(s.x)/lt(s.y)}function zd(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class UN{constructor(){this.members=[]}add(t){To(this.members,t),t.scheduleRender()}remove(t){if(Ao(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(n=>t===n);if(r===0)return!1;let a;for(let n=r;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){a=i;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function LN(s,t,r){let a="";const n=s.x.translate/t.x,i=s.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((n||i||o)&&(a=`translate3d(${n}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:m,rotateY:x,skewX:g,skewY:p}=r;u&&(a=`perspective(${u}px) ${a}`),d&&(a+=`rotate(${d}deg) `),m&&(a+=`rotateX(${m}deg) `),x&&(a+=`rotateY(${x}deg) `),g&&(a+=`skewX(${g}deg) `),p&&(a+=`skewY(${p}deg) `)}const l=s.x.scale*t.x,c=s.y.scale*t.y;return(l!==1||c!==1)&&(a+=`scale(${l}, ${c})`),a||"none"}const jl=["","X","Y","Z"],BN=1e3;let $N=0;function vl(s,t,r,a){const{latestValues:n}=t;n[s]&&(r[s]=n[s],t.setStaticValue(s,0),a&&(a[s]=0))}function bx(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const r=lx(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:n,layoutId:i}=s.options;window.MotionCancelOptimisedAnimation(r,"transform",xs,!(n||i))}const{parent:a}=s;a&&!a.hasCheckedOptimisedAppear&&bx(a)}function wx({attachResizeListener:s,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(o={},l=t==null?void 0:t()){this.id=$N++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(WN),this.nodes.forEach(HN),this.nodes.forEach(GN),this.nodes.forEach(KN)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new DN)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Eo),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Uh(o)&&!Vv(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),s){let d,m=0;const x=()=>this.root.updateBlockedByResize=!1;xs.read(()=>{m=window.innerWidth}),s(o,()=>{const g=window.innerWidth;g!==m&&(m=g,this.root.updateBlockedByResize=!0,d&&d(),d=IN(x,250),Di.hasAnimatedSinceResize&&(Di.hasAnimatedSinceResize=!1,this.nodes.forEach(Qd)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:x,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||eb,{onLayoutAnimationStart:N,onLayoutAnimationComplete:f}=u.getProps(),S=!this.targetLayout||!Nx(this.targetLayout,g),j=!m&&x;if(this.options.layoutRoot||this.resumeFrom||j||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...Yo(p,"layout"),onPlay:N,onComplete:f};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(d,j)}else m||Qd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),sa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(QN),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bx(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Hd);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Gd);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(zN),this.nodes.forEach(qN),this.nodes.forEach(_N)):this.nodes.forEach(Gd),this.clearAllSnapshots();const l=it.now();_s.delta=cr(0,1e3/60,l-_s.timestamp),_s.timestamp=l,_s.isProcessing=!0,il.update.process(_s),il.preRender.process(_s),il.render.process(_s),_s.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ho.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YN),this.sharedNodes.forEach(ZN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!lt(this.snapshot.measuredBox.x)&&!lt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Fs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=a(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!yx(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||da(this.latestValues)||d)&&(n(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),sb(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Fs();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(tb))){const{scroll:d}=this.root;d&&(Wa(l.x,d.offset.x),Wa(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=Fs();if(Et(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:m,options:x}=d;d!==this.root&&m&&x.layoutScroll&&(m.wasRoot&&Et(l,o),Wa(l.x,m.offset.x),Wa(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const c=Fs();Et(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ka(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),da(d.latestValues)&&Ka(c,d.latestValues)}return da(this.latestValues)&&Ka(c,this.latestValues),c}removeTransform(o){const l=Fs();Et(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!da(u.latestValues))continue;io(u.latestValues)&&u.updateSnapshot();const d=Fs(),m=u.measurePageBox();Et(d,m),qd(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return da(this.latestValues)&&qd(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_s.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var g;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!this.layout||!(d||m))return;this.resolvedRelativeTargetAt=_s.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Fs(),this.targetWithTransforms=Fs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Et(this.target,this.layout.layoutBox),sx(this.target,this.targetDelta)):Et(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||io(this.parent.latestValues)||ex(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fs(),this.relativeTargetOrigin=Fs(),Bi(this.relativeTargetOrigin,l,c),Et(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var p;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===_s.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Et(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,x=this.treeScale.y;by(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Fs());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ld(this.prevProjectionDelta.x,this.projectionDelta.x),Ld(this.prevProjectionDelta.y,this.projectionDelta.y)),qn(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==x||!zd(this.projectionDelta.x,this.prevProjectionDelta.x)||!zd(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ya(),this.projectionDelta=Ya(),this.projectionDeltaWithTransform=Ya()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},m=Ya();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const x=Fs(),g=c?c.source:void 0,p=this.layout?this.layout.source:void 0,N=g!==p,f=this.getStack(),S=!f||f.members.length<=1,j=!!(N&&!S&&this.options.crossfade===!0&&!this.path.some(JN));this.animationProgress=0;let w;this.mixTargetDelta=C=>{const y=C/1e3;Zd(m.x,o.x,y),Zd(m.y,o.y,y),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bi(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),XN(this.relativeTarget,this.relativeTargetOrigin,x,y),w&&VN(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Fs()),Et(w,this.relativeTarget)),N&&(this.animationValues=d,AN(d,u,this.latestValues,y,j,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=y},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(sa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xs.update(()=>{Di.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=gn(0)),this.currentAnimation=PN(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Cx(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Fs();const m=lt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const x=lt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+x}Et(l,c),Ka(l,d),qn(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new UN),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&vl("z",o,u,this.animationValues);for(let d=0;d<jl.length;d++)vl(`rotate${jl[d]}`,o,u,this.animationValues),vl(`skew${jl[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=ki(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=ki(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!da(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let m=LN(this.projectionDeltaWithTransform,this.treeScale,d);c&&(m=c(d,m)),o.transform=m;const{x,y:g}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${g.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const p in no){if(d[p]===void 0)continue;const{correct:N,applyTo:f,isCSSVariable:S}=no[p],j=m==="none"?d[p]:N(d[p],u);if(f){const w=f.length;for(let C=0;C<w;C++)o[f[C]]=j}else S?this.options.visualElement.renderState.vars[p]=j:o[p]=j}this.options.layoutId&&(o.pointerEvents=u===this?ki(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Hd),this.root.sharedNodes.clear()}}}function qN(s){s.updateLayout()}function _N(s){var r;const t=((r=s.resumeFrom)==null?void 0:r.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=s.layout,{animationType:i}=s.options,o=t.source!==s.layout.source;i==="size"?bt(m=>{const x=o?t.measuredBox[m]:t.layoutBox[m],g=lt(x);x.min=a[m].min,x.max=x.min+g}):Cx(i,t.layoutBox,a)&&bt(m=>{const x=o?t.measuredBox[m]:t.layoutBox[m],g=lt(a[m]);x.max=x.min+g,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[m].max=s.relativeTarget[m].min+g)});const l=Ya();qn(l,a,t.layoutBox);const c=Ya();o?qn(c,s.applyTransform(n,!0),t.measuredBox):qn(c,a,t.layoutBox);const u=!yx(l);let d=!1;if(!s.resumeFrom){const m=s.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:x,layout:g}=m;if(x&&g){const p=Fs();Bi(p,t.layoutBox,x.layoutBox);const N=Fs();Bi(N,a,g.layoutBox),Nx(p,N)||(d=!0),m.options.layoutRoot&&(s.relativeTarget=N,s.relativeTargetOrigin=p,s.relativeParent=m)}}}s.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(s.isLead()){const{onExitComplete:a}=s.options;a&&a()}s.options.transition=void 0}function WN(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function KN(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function YN(s){s.clearSnapshot()}function Hd(s){s.clearMeasurements()}function Gd(s){s.isLayoutDirty=!1}function zN(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function Qd(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function HN(s){s.resolveTargetDelta()}function GN(s){s.calcProjection()}function QN(s){s.resetSkewAndRotation()}function ZN(s){s.removeLeadSnapshot()}function Zd(s,t,r){s.translate=ys(t.translate,0,r),s.scale=ys(t.scale,1,r),s.origin=t.origin,s.originPoint=t.originPoint}function Xd(s,t,r,a){s.min=ys(t.min,r.min,a),s.max=ys(t.max,r.max,a)}function XN(s,t,r,a){Xd(s.x,t.x,r.x,a),Xd(s.y,t.y,r.y,a)}function JN(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const eb={duration:.45,ease:[.4,0,.1,1]},Jd=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),eu=Jd("applewebkit/")&&!Jd("chrome/")?Math.round:kt;function su(s){s.min=eu(s.min),s.max=eu(s.max)}function sb(s){su(s.x),su(s.y)}function Cx(s,t,r){return s==="position"||s==="preserve-aspect"&&!cN(Yd(t),Yd(r),.2)}function tb(s){var t;return s!==s.root&&((t=s.scroll)==null?void 0:t.wasRoot)}const rb=wx({attachResizeListener:(s,t)=>Qn(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yl={current:void 0},Sx=wx({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!yl.current){const s=new rb({});s.mount(window),s.setOptions({layoutScroll:!0}),yl.current=s}return yl.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),ab={pan:{Feature:CN},drag:{Feature:wN,ProjectionNode:Sx,MeasureLayout:gx}};function tu(s,t,r){const{props:a}=s;s.animationState&&a.whileHover&&s.animationState.setActive("whileHover",r==="Start");const n="onHover"+r,i=a[n];i&&xs.postRender(()=>i(t,ci(t)))}class nb extends aa{mount(){const{current:t}=this.node;t&&(this.unmount=Fv(t,(r,a)=>(tu(this.node,a,"Start"),n=>tu(this.node,n,"End"))))}unmount(){}}class ib extends aa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ii(Qn(this.node.current,"focus",()=>this.onFocus()),Qn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ru(s,t,r){const{props:a}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&a.whileTap&&s.animationState.setActive("whileTap",r==="Start");const n="onTap"+(r==="End"?"":r),i=a[n];i&&xs.postRender(()=>i(t,ci(t)))}class lb extends aa{mount(){const{current:t}=this.node;t&&(this.unmount=Ov(t,(r,a)=>(ru(this.node,a,"Start"),(n,{success:i})=>ru(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const xo=new WeakMap,Nl=new WeakMap,ob=s=>{const t=xo.get(s.target);t&&t(s)},cb=s=>{s.forEach(ob)};function db({root:s,...t}){const r=s||document;Nl.has(r)||Nl.set(r,{});const a=Nl.get(r),n=JSON.stringify(t);return a[n]||(a[n]=new IntersectionObserver(cb,{root:s,...t})),a[n]}function ub(s,t,r){const a=db(t);return xo.set(s,r),a.observe(s),()=>{xo.delete(s),a.unobserve(s)}}const mb={some:0,all:1};class hb extends aa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:n="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:mb[n]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),x=u?d:m;x&&x(c)};return ub(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(xb(t,r))&&this.startObserver()}unmount(){}}function xb({viewport:s={}},{viewport:t={}}={}){return r=>s[r]!==t[r]}const fb={inView:{Feature:hb},tap:{Feature:lb},focus:{Feature:ib},hover:{Feature:nb}},pb={layout:{ProjectionNode:Sx,MeasureLayout:gx}},gb={...rN,...fb,...ab,...pb},za=vy(gb,Ry),jb=({slides:s})=>{const[t,r]=h.useState(0);h.useEffect(()=>{const i=setInterval(()=>{r(o=>(o+1)%s.length)},4e3);return()=>clearInterval(i)},[s.length]);const a=()=>r((t-1+s.length)%s.length),n=()=>r((t+1)%s.length);return e.jsxs("div",{className:`relative w-full max-w-7xl mx-auto
                 h-[420px] md:h-[380px] lg:h-[250px]
                 overflow-hidden rounded-2xl shadow-xl bg-blue-200`,children:[s.map((i,o)=>e.jsxs("div",{className:`absolute inset-0 transition-opacity duration-700
            ${o===t?"opacity-100 z-10":"opacity-0 z-0"}`,style:{backgroundImage:`url(${i.image})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:`absolute inset-0 
  bg-gradient-to-r 
  from-black/30 via-black/10 to-transparent`}),e.jsx("div",{className:"relative z-10 h-full flex items-center",children:e.jsx("div",{className:"px-6 md:px-16 max-w-100xl",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-md rounded-xl p-6 shadow-lg",children:[e.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-primary mb-4",children:i.title}),e.jsx("p",{className:"text-lg text-blue-700",children:i.description})]})})})]},o)),e.jsx(E,{variant:"ghost",size:"icon",onClick:a,className:`absolute left-4 top-1/2 -translate-y-1/2
                   bg-black/40 text-white hover:bg-black/60 z-20`,children:e.jsx(Ki,{})}),e.jsx(E,{variant:"ghost",size:"icon",onClick:n,className:`absolute right-4 top-1/2 -translate-y-1/2
                   bg-black/40 text-white hover:bg-black/60 z-20`,children:e.jsx(ni,{})}),e.jsx("div",{className:`absolute bottom-5 left-1/2 -translate-x-1/2
                      flex gap-2 z-20`,children:s.map((i,o)=>e.jsx("span",{onClick:()=>r(o),className:`w-3 h-3 rounded-full cursor-pointer transition
              ${o===t?"bg-white":"bg-white/40"}`},o))})]})},au={hidden:{opacity:0,y:30},visible:{opacity:1,y:0}},vb=()=>{const s=[{title:"Unified Retail Platform",description:"POS billing, online orders, inventory, and delivery tracking in one system."},{title:"Real-Time Operations",description:"Live order status, stock updates, and driver tracking."},{title:"Fast & Reliable POS",description:"High-speed billing with offline support."},{title:"Cloud or On-Premise",description:"Flexible deployment with high availability."},{title:"Scalable for Growth",description:"From single stores to multi-branch retail chains."}],t=[{icon:fs,title:"Customer & Staff Management",desc:"Profiles, roles, permissions, and activity tracking."},{icon:ps,title:"Smart Pricing & Offers",desc:"Dynamic pricing, discounts, and commission tracking."},{icon:ea,title:"Analytics & Reports",desc:"Sales, inventory, and profit insights in real time."},{icon:Xe,title:"Delivery Tracking",desc:"Live driver tracking with optimized routes."},{icon:Ze,title:"Enterprise-Grade Security",desc:"Role-based access and encrypted data."},{icon:gs,title:"24/7 Operations",desc:"Always-on system with alerts and monitoring."}],r=[{name:"Retail Chain Owner",role:"Multi-Store Grocery",text:"RetailNextBox unified our POS, online orders, and delivery in one dashboard."},{name:"Store Manager",role:"Supermarket",text:"Billing is fast, inventory is accurate, and reports are instant."},{name:"Founder",role:"Retail Startup",text:"We launched faster and scaled without tech headaches."}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background to-muted/30",children:[e.jsx("nav",{className:"sticky top-0 z-50 border-b bg-background/80 backdrop-blur",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-1 flex h-16 items-center justify-between",children:[e.jsx("img",{src:"/assets/logo/rnb-logo.png",alt:"RetailNextBox",className:"h-60 w-80"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ge,{to:"/login",children:e.jsx(E,{className:"bg-gradient-primary",children:"Demo Login"})}),e.jsx(Ge,{to:"/requestdemo",children:e.jsx(E,{className:"bg-gradient-primary",children:"Request Demo"})})]})]})}),e.jsx("section",{className:"relative overflow-hidden",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-24 grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs(za.div,{variants:au,initial:"hidden",animate:"visible",transition:{duration:.6},className:"space-y-6",children:[e.jsxs(we,{className:"bg-primary/10 text-primary inline-flex items-center gap-2",children:[e.jsx(Tr,{className:"w-4 h-4"}),"Next-Gen Retail Platform"]}),e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold leading-tight",children:["Run Your Retail Business"," ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-primary",children:"Smarter"})]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"RetailNextBox is an all-in-one POS billing, online grocery ordering, inventory, and delivery tracking platform built for modern retailers."}),e.jsxs(za.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.4},className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full 
                         bg-green-100 text-green-700 text-xs font-medium w-fit`,children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-600"})]}),"Works Offline (POS Safe)"]}),e.jsxs("div",{className:"flex gap-4 pt-2",children:[e.jsx(Ge,{to:"/pricing",children:e.jsxs(E,{size:"lg",className:"bg-gradient-primary",children:[e.jsx(vp,{className:"w-4 h-4 mr-2"}),"View Pricing"]})}),e.jsx(Ge,{to:"/requestdemo",children:e.jsxs(E,{size:"lg",variant:"outline",children:[e.jsx(yp,{className:"w-4 h-4 mr-2"}),"Request Demo"]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-6 pt-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary"}),"POS Billing"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary"}),"Online Orders"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary"}),"Delivery Tracking"]})]})]}),e.jsx(za.div,{variants:au,initial:"hidden",animate:"visible",transition:{delay:.2},children:e.jsx(jb,{slides:s})})]})}),e.jsx("section",{className:"py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-14",children:[e.jsx(we,{className:"bg-primary/10 text-primary",children:"Features"}),e.jsx("h2",{className:"text-3xl font-bold mt-3",children:"Everything You Need to Scale Retail"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Built for speed, reliability, and growth"})]}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((a,n)=>e.jsx(za.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.4,delay:n*.05},whileHover:{y:-6},children:e.jsx(L,{className:"h-full",children:e.jsxs(B,{className:"p-6 space-y-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center text-primary",children:e.jsx(a.icon,{className:"w-6 h-6"})}),e.jsx("h3",{className:"font-semibold text-lg",children:a.title}),e.jsx("p",{className:"text-muted-foreground text-sm",children:a.desc})]})})},n))})]})}),e.jsx("section",{className:"py-20 bg-muted/40",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx(we,{className:"bg-primary/10 text-primary",children:"Testimonials"}),e.jsx("h2",{className:"text-3xl font-bold mt-3",children:"Loved by Retailers"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:r.map((a,n)=>e.jsx(L,{children:e.jsxs(B,{className:"p-6 space-y-4",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((i,o)=>e.jsx(nr,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"},o))}),e.jsxs("p",{className:"text-muted-foreground",children:["",a.text,""]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.role})]})]})},n))})]})}),e.jsxs("section",{className:"py-20 bg-gradient-primary text-primary-foreground text-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Ready to Modernize Your Retail?"}),e.jsx("p",{className:"mt-3 opacity-90",children:"POS  Online Orders  Inventory  Delivery"}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsx(Ge,{to:"/pricing",children:e.jsx(E,{size:"lg",className:"bg-background text-foreground",children:"View Pricing Plans"})}),e.jsx(Ge,{to:"/requestdemo",children:e.jsx(E,{size:"lg",variant:"outline",className:"border-white text-white",children:"Talk to Sales"})})]})]}),e.jsx("footer",{className:"border-t py-8 text-center text-sm text-muted-foreground",children:" 2025 RetailNextBox. Built for the future of retail."})]})},yb=Wi("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),k=h.forwardRef(({className:s,...t},r)=>e.jsx(em,{ref:r,className:le(yb(),s),...t}));k.displayName=em.displayName;const We=h.forwardRef(({className:s,...t},r)=>e.jsx(sm,{ref:r,className:le("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(Lf,{className:le("flex items-center justify-center text-current"),children:e.jsx(Ar,{className:"h-4 w-4"})})}));We.displayName=sm.displayName;const Nb=()=>{const s=Ye(),t=_i(),{login:r,isLoading:a,error:n,isAuthenticated:i,user:o}=ko(),[l,c]=h.useState(!1),[u,d]=h.useState({email:"",password:"",rememberMe:!1});h.useEffect(()=>{if(i&&o){const S=p(o.role);s(S,{replace:!0})}},[i,o,s]);const m=t.state,x=m==null?void 0:m.requiredRole,g=m==null?void 0:m.requiredPermission,p=S=>{switch(S){case"super_admin":case"admin":return"/admin/dashboard";case"driver":return"/driver/dashboard";case"passenger":return"/passenger/dashboard";default:return"/admin/dashboard"}},N=async S=>{if(S.preventDefault(),!u.email||!u.password){I.error("Please fill in all fields");return}await r(u.email,u.password)},f=(S,j)=>{d(w=>({...w,[S]:j}))};return e.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(Ge,{to:"/",className:"inline-flex items-center text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to home"]})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-primary rounded-xl mb-4",children:e.jsx(Ze,{className:"w-8 h-8 text-primary-foreground"})}),e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Welcome to Retailnextbox"}),e.jsx("p",{className:"text-muted-foreground",children:"Sign in to access your dashboard"})]}),x||g?e.jsxs(en,{className:"border-warning/50 bg-warning/5 mb-6",children:[e.jsx(Ts,{className:"h-4 w-4 text-warning"}),e.jsx(sn,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-warning",children:"Access Required"}),x&&e.jsxs("p",{className:"text-sm text-warning/80",children:["This page requires ",Array.isArray(x)?x.join(" or "):x," access."]}),g&&e.jsxs("p",{className:"text-sm text-warning/80",children:["This page requires ",g.action," ",g.resource," permission."]})]})})]}):null,e.jsxs(L,{className:"border-border/50 shadow-elegant",children:[e.jsx(Y,{className:"space-y-4 pb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-foreground mb-2",children:"Sign In"}),e.jsx("p",{className:"text-muted-foreground",children:"Enter your credentials to continue"})]})}),e.jsxs(B,{className:"space-y-6",children:[n&&e.jsxs(en,{className:"border-destructive/50 bg-destructive/5",children:[e.jsx(Ts,{className:"h-4 w-4 text-destructive"}),e.jsx(sn,{className:"text-destructive",children:n})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"email",type:"email",placeholder:"Enter your email",className:"pl-10",value:u.email,onChange:S=>f("email",S.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"password",type:l?"text":"password",placeholder:"Enter your password",className:"pl-10 pr-10",value:u.password,onChange:S=>f("password",S.target.value),required:!0}),e.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"remember",checked:u.rememberMe,onCheckedChange:S=>f("rememberMe",S)}),e.jsx(k,{htmlFor:"remember",className:"text-sm",children:"Remember me"})]})}),e.jsx(E,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90 h-12",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 mr-2"}),"Sign In"]})})]})]})]})]})})},Aa=h.forwardRef(({className:s,value:t,...r},a)=>e.jsx(tm,{ref:a,className:le("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",s),...r,children:e.jsx(Bf,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Aa.displayName=tm.displayName;const ge=Yf,je=zf,fe=h.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(rm,{ref:a,className:le("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx($f,{asChild:!0,children:e.jsx(Yi,{className:"h-4 w-4 opacity-50"})})]}));fe.displayName=rm.displayName;const Px=h.forwardRef(({className:s,...t},r)=>e.jsx(am,{ref:r,className:le("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Np,{className:"h-4 w-4"})}));Px.displayName=am.displayName;const kx=h.forwardRef(({className:s,...t},r)=>e.jsx(nm,{ref:r,className:le("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Yi,{className:"h-4 w-4"})}));kx.displayName=nm.displayName;const pe=h.forwardRef(({className:s,children:t,position:r="popper",...a},n)=>e.jsx(qf,{children:e.jsxs(im,{ref:n,className:le("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...a,children:[e.jsx(Px,{}),e.jsx(_f,{className:le("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(kx,{})]})}));pe.displayName=im.displayName;const bb=h.forwardRef(({className:s,...t},r)=>e.jsx(lm,{ref:r,className:le("px-2 py-1.5 text-sm font-semibold",s),...t}));bb.displayName=lm.displayName;const A=h.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(om,{ref:a,className:le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Wf,{children:e.jsx(Ar,{className:"h-4 w-4"})})}),e.jsx(Kf,{children:t})]}));A.displayName=om.displayName;const wb=h.forwardRef(({className:s,...t},r)=>e.jsx(cm,{ref:r,className:le("-mx-1 my-1 h-px bg-muted",s),...t}));wb.displayName=cm.displayName;const yt=h.forwardRef(({className:s,...t},r)=>e.jsx("textarea",{className:le("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...t}));yt.displayName="Textarea";function Cb(s,t,r="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:s,timeZoneName:r}).format(t).split(/\s/g).slice(2).join(" ")}const bl={},Un={};function pa(s,t){try{const a=(bl[s]||(bl[s]=new Intl.DateTimeFormat("en-US",{timeZone:s,timeZoneName:"longOffset"}).format))(t).split("GMT")[1];return a in Un?Un[a]:nu(a,a.split(":"))}catch{if(s in Un)return Un[s];const r=s==null?void 0:s.match(Sb);return r?nu(s,r.slice(1)):NaN}}const Sb=/([+-]\d\d):?(\d\d)?/;function nu(s,t){const r=+(t[0]||0),a=+(t[1]||0),n=+(t[2]||0)/60;return Un[s]=r*60+a>0?r*60+a+n:r*60-a-n}class rr extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(pa(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),Dx(this),fo(this)):this.setTime(Date.now())}static tz(t,...r){return r.length?new rr(...r,t):new rr(Date.now(),t)}withTimeZone(t){return new rr(+this,t)}getTimezoneOffset(){const t=-pa(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),fo(this),+this}[Symbol.for("constructDateFrom")](t){return new rr(+new Date(t),this.timeZone)}}const iu=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(s=>{if(!iu.test(s))return;const t=s.replace(iu,"$1UTC");rr.prototype[t]&&(s.startsWith("get")?rr.prototype[s]=function(){return this.internal[t]()}:(rr.prototype[s]=function(){return Date.prototype[t].apply(this.internal,arguments),Pb(this),+this},rr.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),fo(this),+this}))});function fo(s){s.internal.setTime(+s),s.internal.setUTCSeconds(s.internal.getUTCSeconds()-Math.round(-pa(s.timeZone,s)*60))}function Pb(s){Date.prototype.setFullYear.call(s,s.internal.getUTCFullYear(),s.internal.getUTCMonth(),s.internal.getUTCDate()),Date.prototype.setHours.call(s,s.internal.getUTCHours(),s.internal.getUTCMinutes(),s.internal.getUTCSeconds(),s.internal.getUTCMilliseconds()),Dx(s)}function Dx(s){const t=pa(s.timeZone,s),r=t>0?Math.floor(t):Math.ceil(t),a=new Date(+s);a.setUTCHours(a.getUTCHours()-1);const n=-new Date(+s).getTimezoneOffset(),i=-new Date(+a).getTimezoneOffset(),o=n-i,l=Date.prototype.getHours.apply(s)!==s.internal.getUTCHours();o&&l&&s.internal.setUTCMinutes(s.internal.getUTCMinutes()+o);const c=n-r;c&&Date.prototype.setUTCMinutes.call(s,Date.prototype.getUTCMinutes.call(s)+c);const u=new Date(+s);u.setUTCSeconds(0);const d=n>0?u.getSeconds():(u.getSeconds()-60)%60,m=Math.round(-(pa(s.timeZone,s)*60))%60;(m||d)&&(s.internal.setUTCSeconds(s.internal.getUTCSeconds()+m),Date.prototype.setUTCSeconds.call(s,Date.prototype.getUTCSeconds.call(s)+m+d));const x=pa(s.timeZone,s),g=x>0?Math.floor(x):Math.ceil(x),N=-new Date(+s).getTimezoneOffset()-g,f=g!==r,S=N-c;if(f&&S){Date.prototype.setUTCMinutes.call(s,Date.prototype.getUTCMinutes.call(s)+S);const j=pa(s.timeZone,s),w=j>0?Math.floor(j):Math.ceil(j),C=g-w;C&&(s.internal.setUTCMinutes(s.internal.getUTCMinutes()+C),Date.prototype.setUTCMinutes.call(s,Date.prototype.getUTCMinutes.call(s)+C))}}class zs extends rr{static tz(t,...r){return r.length?new zs(...r,t):new zs(Date.now(),t)}toISOString(){const[t,r,a]=this.tzComponents(),n=`${t}${r}:${a}`;return this.internal.toISOString().slice(0,-1)+n}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,r,a,n]=this.internal.toUTCString().split(" ");return`${t==null?void 0:t.slice(0,-1)} ${a} ${r} ${n}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[r,a,n]=this.tzComponents();return`${t} GMT${r}${a}${n} (${Cb(this.timeZone,this)})`}toLocaleString(t,r){return Date.prototype.toLocaleString.call(this,t,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}toLocaleDateString(t,r){return Date.prototype.toLocaleDateString.call(this,t,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}toLocaleTimeString(t,r){return Date.prototype.toLocaleTimeString.call(this,t,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),r=t>0?"-":"+",a=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),n=String(Math.abs(t)%60).padStart(2,"0");return[r,a,n]}withTimeZone(t){return new zs(+this,t)}[Symbol.for("constructDateFrom")](t){return new zs(+new Date(t),this.timeZone)}}const Ix=6048e5,kb=864e5,lu=Symbol.for("constructDateFrom");function As(s,t){return typeof s=="function"?s(t):s&&typeof s=="object"&&lu in s?s[lu](t):s instanceof Date?new s.constructor(t):new Date(t)}function cs(s,t){return As(t||s,s)}function Tx(s,t,r){const a=cs(s,r==null?void 0:r.in);return isNaN(t)?As(s,NaN):(t&&a.setDate(a.getDate()+t),a)}function Ax(s,t,r){const a=cs(s,r==null?void 0:r.in);if(isNaN(t))return As(s,NaN);if(!t)return a;const n=a.getDate(),i=As(s,a.getTime());i.setMonth(a.getMonth()+t+1,0);const o=i.getDate();return n>=o?i:(a.setFullYear(i.getFullYear(),i.getMonth(),n),a)}let Db={};function di(){return Db}function vn(s,t){var l,c,u,d;const r=di(),a=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,n=cs(s,t==null?void 0:t.in),i=n.getDay(),o=(i<a?7:0)+i-a;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Zn(s,t){return vn(s,{...t,weekStartsOn:1})}function Rx(s,t){const r=cs(s,t==null?void 0:t.in),a=r.getFullYear(),n=As(r,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const i=Zn(n),o=As(r,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const l=Zn(o);return r.getTime()>=i.getTime()?a+1:r.getTime()>=l.getTime()?a:a-1}function ou(s){const t=cs(s),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+s-+r}function Pn(s,...t){const r=As.bind(null,t.find(a=>typeof a=="object"));return t.map(r)}function Xn(s,t){const r=cs(s,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function Fx(s,t,r){const[a,n]=Pn(r==null?void 0:r.in,s,t),i=Xn(a),o=Xn(n),l=+i-ou(i),c=+o-ou(o);return Math.round((l-c)/kb)}function Ib(s,t){const r=Rx(s,t),a=As(s,0);return a.setFullYear(r,0,4),a.setHours(0,0,0,0),Zn(a)}function Tb(s,t,r){return Tx(s,t*7,r)}function Ab(s,t,r){return Ax(s,t*12,r)}function Rb(s,t){let r,a=t==null?void 0:t.in;return s.forEach(n=>{!a&&typeof n=="object"&&(a=As.bind(null,n));const i=cs(n,a);(!r||r<i||isNaN(+i))&&(r=i)}),As(a,r||NaN)}function Fb(s,t){let r,a=t==null?void 0:t.in;return s.forEach(n=>{!a&&typeof n=="object"&&(a=As.bind(null,n));const i=cs(n,a);(!r||r>i||isNaN(+i))&&(r=i)}),As(a,r||NaN)}function Eb(s,t,r){const[a,n]=Pn(r==null?void 0:r.in,s,t);return+Xn(a)==+Xn(n)}function Ex(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Mb(s){return!(!Ex(s)&&typeof s!="number"||isNaN(+cs(s)))}function Ob(s,t,r){const[a,n]=Pn(r==null?void 0:r.in,s,t),i=a.getFullYear()-n.getFullYear(),o=a.getMonth()-n.getMonth();return i*12+o}function Vb(s,t){const r=cs(s,t==null?void 0:t.in),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}function Mx(s,t){const[r,a]=Pn(s,t.start,t.end);return{start:r,end:a}}function Ub(s,t){const{start:r,end:a}=Mx(t==null?void 0:t.in,s);let n=+r>+a;const i=n?+r:+a,o=n?a:r;o.setHours(0,0,0,0),o.setDate(1);let l=1;const c=[];for(;+o<=i;)c.push(As(r,o)),o.setMonth(o.getMonth()+l);return n?c.reverse():c}function Lb(s,t){const r=cs(s,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Bb(s,t){const r=cs(s,t==null?void 0:t.in),a=r.getFullYear();return r.setFullYear(a+1,0,0),r.setHours(23,59,59,999),r}function Ox(s,t){const r=cs(s,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function $b(s,t){const{start:r,end:a}=Mx(t==null?void 0:t.in,s);let n=+r>+a;const i=n?+r:+a,o=n?a:r;o.setHours(0,0,0,0),o.setMonth(0,1);let l=1;const c=[];for(;+o<=i;)c.push(As(r,o)),o.setFullYear(o.getFullYear()+l);return n?c.reverse():c}function Vx(s,t){var l,c,u,d;const r=di(),a=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,n=cs(s,t==null?void 0:t.in),i=n.getDay(),o=(i<a?-7:0)+6-(i-a);return n.setDate(n.getDate()+o),n.setHours(23,59,59,999),n}function qb(s,t){return Vx(s,{...t,weekStartsOn:1})}const _b={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Wb=(s,t,r)=>{let a;const n=_b[s];return typeof n=="string"?a=n:t===1?a=n.one:a=n.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function wl(s){return(t={})=>{const r=t.width?String(t.width):s.defaultWidth;return s.formats[r]||s.formats[s.defaultWidth]}}const Kb={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Yb={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zb={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hb={date:wl({formats:Kb,defaultWidth:"full"}),time:wl({formats:Yb,defaultWidth:"full"}),dateTime:wl({formats:zb,defaultWidth:"full"})},Gb={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Qb=(s,t,r,a)=>Gb[s];function Fn(s){return(t,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let n;if(a==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,l=r!=null&&r.width?String(r.width):o;n=s.formattingValues[l]||s.formattingValues[o]}else{const o=s.defaultWidth,l=r!=null&&r.width?String(r.width):s.defaultWidth;n=s.values[l]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(t):t;return n[i]}}const Zb={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xb={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Jb={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},e0={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},s0={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},t0={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},r0=(s,t)=>{const r=Number(s),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},a0={ordinalNumber:r0,era:Fn({values:Zb,defaultWidth:"wide"}),quarter:Fn({values:Xb,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Fn({values:Jb,defaultWidth:"wide"}),day:Fn({values:e0,defaultWidth:"wide"}),dayPeriod:Fn({values:s0,defaultWidth:"wide",formattingValues:t0,defaultFormattingWidth:"wide"})};function En(s){return(t,r={})=>{const a=r.width,n=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],i=t.match(n);if(!i)return null;const o=i[0],l=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],c=Array.isArray(l)?i0(l,m=>m.test(o)):n0(l,m=>m.test(o));let u;u=s.valueCallback?s.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function n0(s,t){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&t(s[r]))return r}function i0(s,t){for(let r=0;r<s.length;r++)if(t(s[r]))return r}function l0(s){return(t,r={})=>{const a=t.match(s.matchPattern);if(!a)return null;const n=a[0],i=t.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(n.length);return{value:o,rest:l}}}const o0=/^(\d+)(th|st|nd|rd)?/i,c0=/\d+/i,d0={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u0={any:[/^b/i,/^(a|c)/i]},m0={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},h0={any:[/1/i,/2/i,/3/i,/4/i]},x0={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},f0={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},p0={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},g0={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},j0={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},v0={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},y0={ordinalNumber:l0({matchPattern:o0,parsePattern:c0,valueCallback:s=>parseInt(s,10)}),era:En({matchPatterns:d0,defaultMatchWidth:"wide",parsePatterns:u0,defaultParseWidth:"any"}),quarter:En({matchPatterns:m0,defaultMatchWidth:"wide",parsePatterns:h0,defaultParseWidth:"any",valueCallback:s=>s+1}),month:En({matchPatterns:x0,defaultMatchWidth:"wide",parsePatterns:f0,defaultParseWidth:"any"}),day:En({matchPatterns:p0,defaultMatchWidth:"wide",parsePatterns:g0,defaultParseWidth:"any"}),dayPeriod:En({matchPatterns:j0,defaultMatchWidth:"any",parsePatterns:v0,defaultParseWidth:"any"})},nc={code:"en-US",formatDistance:Wb,formatLong:Hb,formatRelative:Qb,localize:a0,match:y0,options:{weekStartsOn:0,firstWeekContainsDate:1}};function N0(s,t){const r=cs(s,t==null?void 0:t.in);return Fx(r,Ox(r))+1}function Ux(s,t){const r=cs(s,t==null?void 0:t.in),a=+Zn(r)-+Ib(r);return Math.round(a/Ix)+1}function Lx(s,t){var d,m,x,g;const r=cs(s,t==null?void 0:t.in),a=r.getFullYear(),n=di(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(x=n.locale)==null?void 0:x.options)==null?void 0:g.firstWeekContainsDate)??1,o=As((t==null?void 0:t.in)||s,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=vn(o,t),c=As((t==null?void 0:t.in)||s,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const u=vn(c,t);return+r>=+l?a+1:+r>=+u?a:a-1}function b0(s,t){var l,c,u,d;const r=di(),a=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,n=Lx(s,t),i=As((t==null?void 0:t.in)||s,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),vn(i,t)}function Bx(s,t){const r=cs(s,t==null?void 0:t.in),a=+vn(r,t)-+b0(r,t);return Math.round(a/Ix)+1}function is(s,t){const r=s<0?"-":"",a=Math.abs(s).toString().padStart(t,"0");return r+a}const Vr={y(s,t){const r=s.getFullYear(),a=r>0?r:1-r;return is(t==="yy"?a%100:a,t.length)},M(s,t){const r=s.getMonth();return t==="M"?String(r+1):is(r+1,2)},d(s,t){return is(s.getDate(),t.length)},a(s,t){const r=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(s,t){return is(s.getHours()%12||12,t.length)},H(s,t){return is(s.getHours(),t.length)},m(s,t){return is(s.getMinutes(),t.length)},s(s,t){return is(s.getSeconds(),t.length)},S(s,t){const r=t.length,a=s.getMilliseconds(),n=Math.trunc(a*Math.pow(10,r-3));return is(n,t.length)}},Ba={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cu={G:function(s,t,r){const a=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(s,t,r){if(t==="yo"){const a=s.getFullYear(),n=a>0?a:1-a;return r.ordinalNumber(n,{unit:"year"})}return Vr.y(s,t)},Y:function(s,t,r,a){const n=Lx(s,a),i=n>0?n:1-n;if(t==="YY"){const o=i%100;return is(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):is(i,t.length)},R:function(s,t){const r=Rx(s);return is(r,t.length)},u:function(s,t){const r=s.getFullYear();return is(r,t.length)},Q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return is(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return is(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(s,t,r){const a=s.getMonth();switch(t){case"M":case"MM":return Vr.M(s,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(s,t,r){const a=s.getMonth();switch(t){case"L":return String(a+1);case"LL":return is(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(s,t,r,a){const n=Bx(s,a);return t==="wo"?r.ordinalNumber(n,{unit:"week"}):is(n,t.length)},I:function(s,t,r){const a=Ux(s);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):is(a,t.length)},d:function(s,t,r){return t==="do"?r.ordinalNumber(s.getDate(),{unit:"date"}):Vr.d(s,t)},D:function(s,t,r){const a=N0(s);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):is(a,t.length)},E:function(s,t,r){const a=s.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(s,t,r,a){const n=s.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return is(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(s,t,r,a){const n=s.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return is(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(s,t,r){const a=s.getDay(),n=a===0?7:a;switch(t){case"i":return String(n);case"ii":return is(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(s,t,r){const n=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(s,t,r){const a=s.getHours();let n;switch(a===12?n=Ba.noon:a===0?n=Ba.midnight:n=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(s,t,r){const a=s.getHours();let n;switch(a>=17?n=Ba.evening:a>=12?n=Ba.afternoon:a>=4?n=Ba.morning:n=Ba.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(s,t,r){if(t==="ho"){let a=s.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return Vr.h(s,t)},H:function(s,t,r){return t==="Ho"?r.ordinalNumber(s.getHours(),{unit:"hour"}):Vr.H(s,t)},K:function(s,t,r){const a=s.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):is(a,t.length)},k:function(s,t,r){let a=s.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):is(a,t.length)},m:function(s,t,r){return t==="mo"?r.ordinalNumber(s.getMinutes(),{unit:"minute"}):Vr.m(s,t)},s:function(s,t,r){return t==="so"?r.ordinalNumber(s.getSeconds(),{unit:"second"}):Vr.s(s,t)},S:function(s,t){return Vr.S(s,t)},X:function(s,t,r){const a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return uu(a);case"XXXX":case"XX":return ua(a);case"XXXXX":case"XXX":default:return ua(a,":")}},x:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"x":return uu(a);case"xxxx":case"xx":return ua(a);case"xxxxx":case"xxx":default:return ua(a,":")}},O:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+du(a,":");case"OOOO":default:return"GMT"+ua(a,":")}},z:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+du(a,":");case"zzzz":default:return"GMT"+ua(a,":")}},t:function(s,t,r){const a=Math.trunc(+s/1e3);return is(a,t.length)},T:function(s,t,r){return is(+s,t.length)}};function du(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),n=Math.trunc(a/60),i=a%60;return i===0?r+String(n):r+String(n)+t+is(i,2)}function uu(s,t){return s%60===0?(s>0?"-":"+")+is(Math.abs(s)/60,2):ua(s,t)}function ua(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),n=is(Math.trunc(a/60),2),i=is(a%60,2);return r+n+t+i}const mu=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},$x=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},w0=(s,t)=>{const r=s.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return mu(s,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",mu(a,t)).replace("{{time}}",$x(n,t))},C0={p:$x,P:w0},S0=/^D+$/,P0=/^Y+$/,k0=["D","DD","YY","YYYY"];function D0(s){return S0.test(s)}function I0(s){return P0.test(s)}function T0(s,t,r){const a=A0(s,t,r);if(console.warn(a),k0.includes(s))throw new RangeError(a)}function A0(s,t,r){const a=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const R0=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,F0=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,E0=/^'([^]*?)'?$/,M0=/''/g,O0=/[a-zA-Z]/;function V0(s,t,r){var d,m,x,g,p,N,f,S;const a=di(),n=(r==null?void 0:r.locale)??a.locale??nc,i=(r==null?void 0:r.firstWeekContainsDate)??((m=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(x=a.locale)==null?void 0:x.options)==null?void 0:g.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((N=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:N.weekStartsOn)??a.weekStartsOn??((S=(f=a.locale)==null?void 0:f.options)==null?void 0:S.weekStartsOn)??0,l=cs(s,r==null?void 0:r.in);if(!Mb(l))throw new RangeError("Invalid time value");let c=t.match(F0).map(j=>{const w=j[0];if(w==="p"||w==="P"){const C=C0[w];return C(j,n.formatLong)}return j}).join("").match(R0).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const w=j[0];if(w==="'")return{isToken:!1,value:U0(j)};if(cu[w])return{isToken:!0,value:j};if(w.match(O0))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:j}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return c.map(j=>{if(!j.isToken)return j.value;const w=j.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&I0(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&D0(w))&&T0(w,t,String(s));const C=cu[w[0]];return C(l,w,n.localize,u)}).join("")}function U0(s){const t=s.match(E0);return t?t[1].replace(M0,"'"):s}function L0(s,t){const r=cs(s,t==null?void 0:t.in),a=r.getFullYear(),n=r.getMonth(),i=As(r,0);return i.setFullYear(a,n+1,0),i.setHours(0,0,0,0),i.getDate()}function B0(s,t){return cs(s,t==null?void 0:t.in).getMonth()}function $0(s,t){return cs(s,t==null?void 0:t.in).getFullYear()}function q0(s,t){return+cs(s)>+cs(t)}function _0(s,t){return+cs(s)<+cs(t)}function W0(s,t,r){const[a,n]=Pn(r==null?void 0:r.in,s,t);return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()}function K0(s,t,r){const[a,n]=Pn(r==null?void 0:r.in,s,t);return a.getFullYear()===n.getFullYear()}function Y0(s,t,r){const a=cs(s,r==null?void 0:r.in),n=a.getFullYear(),i=a.getDate(),o=As(s,0);o.setFullYear(n,t,15),o.setHours(0,0,0,0);const l=L0(o);return a.setMonth(t,Math.min(i,l)),a}function z0(s,t,r){const a=cs(s,r==null?void 0:r.in);return isNaN(+a)?As(s,NaN):(a.setFullYear(t),a)}const hu=5,H0=4;function G0(s,t){const r=t.startOfMonth(s),a=r.getDay()>0?r.getDay():7,n=t.addDays(s,-a+1),i=t.addDays(n,hu*7-1);return t.getMonth(s)===t.getMonth(i)?hu:H0}function qx(s,t){const r=t.startOfMonth(s),a=r.getDay();return a===1?r:a===0?t.addDays(r,-1*6):t.addDays(r,-1*(a-1))}function Q0(s,t){const r=qx(s,t),a=G0(s,t);return t.addDays(r,a*7-1)}class Nt{constructor(t,r){this.Date=Date,this.today=()=>{var a;return(a=this.overrides)!=null&&a.today?this.overrides.today():this.options.timeZone?zs.tz(this.options.timeZone):new this.Date},this.newDate=(a,n,i)=>{var o;return(o=this.overrides)!=null&&o.newDate?this.overrides.newDate(a,n,i):this.options.timeZone?new zs(a,n,i,this.options.timeZone):new Date(a,n,i)},this.addDays=(a,n)=>{var i;return(i=this.overrides)!=null&&i.addDays?this.overrides.addDays(a,n):Tx(a,n)},this.addMonths=(a,n)=>{var i;return(i=this.overrides)!=null&&i.addMonths?this.overrides.addMonths(a,n):Ax(a,n)},this.addWeeks=(a,n)=>{var i;return(i=this.overrides)!=null&&i.addWeeks?this.overrides.addWeeks(a,n):Tb(a,n)},this.addYears=(a,n)=>{var i;return(i=this.overrides)!=null&&i.addYears?this.overrides.addYears(a,n):Ab(a,n)},this.differenceInCalendarDays=(a,n)=>{var i;return(i=this.overrides)!=null&&i.differenceInCalendarDays?this.overrides.differenceInCalendarDays(a,n):Fx(a,n)},this.differenceInCalendarMonths=(a,n)=>{var i;return(i=this.overrides)!=null&&i.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(a,n):Ob(a,n)},this.eachMonthOfInterval=a=>{var n;return(n=this.overrides)!=null&&n.eachMonthOfInterval?this.overrides.eachMonthOfInterval(a):Ub(a)},this.eachYearOfInterval=a=>{var l;const n=(l=this.overrides)!=null&&l.eachYearOfInterval?this.overrides.eachYearOfInterval(a):$b(a),i=new Set(n.map(c=>this.getYear(c)));if(i.size===n.length)return n;const o=[];return i.forEach(c=>{o.push(new Date(c,0,1))}),o},this.endOfBroadcastWeek=a=>{var n;return(n=this.overrides)!=null&&n.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(a):Q0(a,this)},this.endOfISOWeek=a=>{var n;return(n=this.overrides)!=null&&n.endOfISOWeek?this.overrides.endOfISOWeek(a):qb(a)},this.endOfMonth=a=>{var n;return(n=this.overrides)!=null&&n.endOfMonth?this.overrides.endOfMonth(a):Vb(a)},this.endOfWeek=(a,n)=>{var i;return(i=this.overrides)!=null&&i.endOfWeek?this.overrides.endOfWeek(a,n):Vx(a,this.options)},this.endOfYear=a=>{var n;return(n=this.overrides)!=null&&n.endOfYear?this.overrides.endOfYear(a):Bb(a)},this.format=(a,n,i)=>{var l;const o=(l=this.overrides)!=null&&l.format?this.overrides.format(a,n,this.options):V0(a,n,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(o):o},this.getISOWeek=a=>{var n;return(n=this.overrides)!=null&&n.getISOWeek?this.overrides.getISOWeek(a):Ux(a)},this.getMonth=(a,n)=>{var i;return(i=this.overrides)!=null&&i.getMonth?this.overrides.getMonth(a,this.options):B0(a,this.options)},this.getYear=(a,n)=>{var i;return(i=this.overrides)!=null&&i.getYear?this.overrides.getYear(a,this.options):$0(a,this.options)},this.getWeek=(a,n)=>{var i;return(i=this.overrides)!=null&&i.getWeek?this.overrides.getWeek(a,this.options):Bx(a,this.options)},this.isAfter=(a,n)=>{var i;return(i=this.overrides)!=null&&i.isAfter?this.overrides.isAfter(a,n):q0(a,n)},this.isBefore=(a,n)=>{var i;return(i=this.overrides)!=null&&i.isBefore?this.overrides.isBefore(a,n):_0(a,n)},this.isDate=a=>{var n;return(n=this.overrides)!=null&&n.isDate?this.overrides.isDate(a):Ex(a)},this.isSameDay=(a,n)=>{var i;return(i=this.overrides)!=null&&i.isSameDay?this.overrides.isSameDay(a,n):Eb(a,n)},this.isSameMonth=(a,n)=>{var i;return(i=this.overrides)!=null&&i.isSameMonth?this.overrides.isSameMonth(a,n):W0(a,n)},this.isSameYear=(a,n)=>{var i;return(i=this.overrides)!=null&&i.isSameYear?this.overrides.isSameYear(a,n):K0(a,n)},this.max=a=>{var n;return(n=this.overrides)!=null&&n.max?this.overrides.max(a):Rb(a)},this.min=a=>{var n;return(n=this.overrides)!=null&&n.min?this.overrides.min(a):Fb(a)},this.setMonth=(a,n)=>{var i;return(i=this.overrides)!=null&&i.setMonth?this.overrides.setMonth(a,n):Y0(a,n)},this.setYear=(a,n)=>{var i;return(i=this.overrides)!=null&&i.setYear?this.overrides.setYear(a,n):z0(a,n)},this.startOfBroadcastWeek=(a,n)=>{var i;return(i=this.overrides)!=null&&i.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(a,this):qx(a,this)},this.startOfDay=a=>{var n;return(n=this.overrides)!=null&&n.startOfDay?this.overrides.startOfDay(a):Xn(a)},this.startOfISOWeek=a=>{var n;return(n=this.overrides)!=null&&n.startOfISOWeek?this.overrides.startOfISOWeek(a):Zn(a)},this.startOfMonth=a=>{var n;return(n=this.overrides)!=null&&n.startOfMonth?this.overrides.startOfMonth(a):Lb(a)},this.startOfWeek=(a,n)=>{var i;return(i=this.overrides)!=null&&i.startOfWeek?this.overrides.startOfWeek(a,this.options):vn(a,this.options)},this.startOfYear=a=>{var n;return(n=this.overrides)!=null&&n.startOfYear?this.overrides.startOfYear(a):Ox(a)},this.options={locale:nc,...t},this.overrides=r}getDigitMap(){const{numerals:t="latn"}=this.options,r=new Intl.NumberFormat("en-US",{numberingSystem:t}),a={};for(let n=0;n<10;n++)a[n.toString()]=r.format(n);return a}replaceDigits(t){const r=this.getDigitMap();return t.replace(/\d/g,a=>r[a]||a)}formatNumber(t){return this.replaceDigits(t.toString())}getMonthYearOrder(){var r;const t=(r=this.options.locale)==null?void 0:r.code;return t&&Nt.yearFirstLocales.has(t)?"year-first":"month-first"}formatMonthYear(t){const{locale:r,timeZone:a,numerals:n}=this.options,i=r==null?void 0:r.code;if(i&&Nt.yearFirstLocales.has(i))try{return new Intl.DateTimeFormat(i,{month:"long",year:"numeric",timeZone:a,numberingSystem:n}).format(t)}catch{}const o=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(t,o)}}Nt.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const gr=new Nt;class _x{constructor(t,r,a=gr){this.date=t,this.displayMonth=r,this.outside=!!(r&&!a.isSameMonth(t,r)),this.dateLib=a}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class Z0{constructor(t,r){this.date=t,this.weeks=r}}class X0{constructor(t,r){this.days=r,this.weekNumber=t}}function J0(s){return Ne.createElement("button",{...s})}function ew(s){return Ne.createElement("span",{...s})}function sw(s){const{size:t=24,orientation:r="left",className:a}=s;return Ne.createElement("svg",{className:a,width:t,height:t,viewBox:"0 0 24 24"},r==="up"&&Ne.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),r==="down"&&Ne.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),r==="left"&&Ne.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),r==="right"&&Ne.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function tw(s){const{day:t,modifiers:r,...a}=s;return Ne.createElement("td",{...a})}function rw(s){const{day:t,modifiers:r,...a}=s,n=Ne.useRef(null);return Ne.useEffect(()=>{var i;r.focused&&((i=n.current)==null||i.focus())},[r.focused]),Ne.createElement("button",{ref:n,...a})}var Re;(function(s){s.Root="root",s.Chevron="chevron",s.Day="day",s.DayButton="day_button",s.CaptionLabel="caption_label",s.Dropdowns="dropdowns",s.Dropdown="dropdown",s.DropdownRoot="dropdown_root",s.Footer="footer",s.MonthGrid="month_grid",s.MonthCaption="month_caption",s.MonthsDropdown="months_dropdown",s.Month="month",s.Months="months",s.Nav="nav",s.NextMonthButton="button_next",s.PreviousMonthButton="button_previous",s.Week="week",s.Weeks="weeks",s.Weekday="weekday",s.Weekdays="weekdays",s.WeekNumber="week_number",s.WeekNumberHeader="week_number_header",s.YearsDropdown="years_dropdown"})(Re||(Re={}));var vs;(function(s){s.disabled="disabled",s.hidden="hidden",s.outside="outside",s.focused="focused",s.today="today"})(vs||(vs={}));var Ut;(function(s){s.range_end="range_end",s.range_middle="range_middle",s.range_start="range_start",s.selected="selected"})(Ut||(Ut={}));var jt;(function(s){s.weeks_before_enter="weeks_before_enter",s.weeks_before_exit="weeks_before_exit",s.weeks_after_enter="weeks_after_enter",s.weeks_after_exit="weeks_after_exit",s.caption_after_enter="caption_after_enter",s.caption_after_exit="caption_after_exit",s.caption_before_enter="caption_before_enter",s.caption_before_exit="caption_before_exit"})(jt||(jt={}));function aw(s){const{options:t,className:r,components:a,classNames:n,...i}=s,o=[n[Re.Dropdown],r].join(" "),l=t==null?void 0:t.find(({value:c})=>c===i.value);return Ne.createElement("span",{"data-disabled":i.disabled,className:n[Re.DropdownRoot]},Ne.createElement(a.Select,{className:o,...i},t==null?void 0:t.map(({value:c,label:u,disabled:d})=>Ne.createElement(a.Option,{key:c,value:c,disabled:d},u))),Ne.createElement("span",{className:n[Re.CaptionLabel],"aria-hidden":!0},l==null?void 0:l.label,Ne.createElement(a.Chevron,{orientation:"down",size:18,className:n[Re.Chevron]})))}function nw(s){return Ne.createElement("div",{...s})}function iw(s){return Ne.createElement("div",{...s})}function lw(s){const{calendarMonth:t,displayIndex:r,...a}=s;return Ne.createElement("div",{...a},s.children)}function ow(s){const{calendarMonth:t,displayIndex:r,...a}=s;return Ne.createElement("div",{...a})}function cw(s){return Ne.createElement("table",{...s})}function dw(s){return Ne.createElement("div",{...s})}const Wx=h.createContext(void 0);function ui(){const s=h.useContext(Wx);if(s===void 0)throw new Error("useDayPicker() must be used within a custom component.");return s}function uw(s){const{components:t}=ui();return Ne.createElement(t.Dropdown,{...s})}function mw(s){const{onPreviousClick:t,onNextClick:r,previousMonth:a,nextMonth:n,...i}=s,{components:o,classNames:l,labels:{labelPrevious:c,labelNext:u}}=ui(),d=h.useCallback(x=>{n&&(r==null||r(x))},[n,r]),m=h.useCallback(x=>{a&&(t==null||t(x))},[a,t]);return Ne.createElement("nav",{...i},Ne.createElement(o.PreviousMonthButton,{type:"button",className:l[Re.PreviousMonthButton],tabIndex:a?void 0:-1,"aria-disabled":a?void 0:!0,"aria-label":c(a),onClick:m},Ne.createElement(o.Chevron,{disabled:a?void 0:!0,className:l[Re.Chevron],orientation:"left"})),Ne.createElement(o.NextMonthButton,{type:"button",className:l[Re.NextMonthButton],tabIndex:n?void 0:-1,"aria-disabled":n?void 0:!0,"aria-label":u(n),onClick:d},Ne.createElement(o.Chevron,{disabled:n?void 0:!0,orientation:"right",className:l[Re.Chevron]})))}function hw(s){const{components:t}=ui();return Ne.createElement(t.Button,{...s})}function xw(s){return Ne.createElement("option",{...s})}function fw(s){const{components:t}=ui();return Ne.createElement(t.Button,{...s})}function pw(s){const{rootRef:t,...r}=s;return Ne.createElement("div",{...r,ref:t})}function gw(s){return Ne.createElement("select",{...s})}function jw(s){const{week:t,...r}=s;return Ne.createElement("tr",{...r})}function vw(s){return Ne.createElement("th",{...s})}function yw(s){return Ne.createElement("thead",{"aria-hidden":!0},Ne.createElement("tr",{...s}))}function Nw(s){const{week:t,...r}=s;return Ne.createElement("th",{...r})}function bw(s){return Ne.createElement("th",{...s})}function ww(s){return Ne.createElement("tbody",{...s})}function Cw(s){const{components:t}=ui();return Ne.createElement(t.Dropdown,{...s})}const Sw=Object.freeze(Object.defineProperty({__proto__:null,Button:J0,CaptionLabel:ew,Chevron:sw,Day:tw,DayButton:rw,Dropdown:aw,DropdownNav:nw,Footer:iw,Month:lw,MonthCaption:ow,MonthGrid:cw,Months:dw,MonthsDropdown:uw,Nav:mw,NextMonthButton:hw,Option:xw,PreviousMonthButton:fw,Root:pw,Select:gw,Week:jw,WeekNumber:Nw,WeekNumberHeader:bw,Weekday:vw,Weekdays:yw,Weeks:ww,YearsDropdown:Cw},Symbol.toStringTag,{value:"Module"}));function Sr(s,t,r=!1,a=gr){let{from:n,to:i}=s;const{differenceInCalendarDays:o,isSameDay:l}=a;return n&&i?(o(i,n)<0&&([n,i]=[i,n]),o(t,n)>=(r?1:0)&&o(i,t)>=(r?1:0)):!r&&i?l(i,t):!r&&n?l(n,t):!1}function Kx(s){return!!(s&&typeof s=="object"&&"before"in s&&"after"in s)}function ic(s){return!!(s&&typeof s=="object"&&"from"in s)}function Yx(s){return!!(s&&typeof s=="object"&&"after"in s)}function zx(s){return!!(s&&typeof s=="object"&&"before"in s)}function Hx(s){return!!(s&&typeof s=="object"&&"dayOfWeek"in s)}function Gx(s,t){return Array.isArray(s)&&s.every(t.isDate)}function Pr(s,t,r=gr){const a=Array.isArray(t)?t:[t],{isSameDay:n,differenceInCalendarDays:i,isAfter:o}=r;return a.some(l=>{if(typeof l=="boolean")return l;if(r.isDate(l))return n(s,l);if(Gx(l,r))return l.includes(s);if(ic(l))return Sr(l,s,!1,r);if(Hx(l))return Array.isArray(l.dayOfWeek)?l.dayOfWeek.includes(s.getDay()):l.dayOfWeek===s.getDay();if(Kx(l)){const c=i(l.before,s),u=i(l.after,s),d=c>0,m=u<0;return o(l.before,l.after)?m&&d:d||m}return Yx(l)?i(s,l.after)>0:zx(l)?i(l.before,s)>0:typeof l=="function"?l(s):!1})}function Pw(s,t,r,a,n){const{disabled:i,hidden:o,modifiers:l,showOutsideDays:c,broadcastCalendar:u,today:d}=t,{isSameDay:m,isSameMonth:x,startOfMonth:g,isBefore:p,endOfMonth:N,isAfter:f}=n,S=r&&g(r),j=a&&N(a),w={[vs.focused]:[],[vs.outside]:[],[vs.disabled]:[],[vs.hidden]:[],[vs.today]:[]},C={};for(const y of s){const{date:b,displayMonth:v}=y,M=!!(v&&!x(b,v)),P=!!(S&&p(b,S)),V=!!(j&&f(b,j)),R=!!(i&&Pr(b,i,n)),T=!!(o&&Pr(b,o,n))||P||V||!u&&!c&&M||u&&c===!1&&M,q=m(b,d??n.today());M&&w.outside.push(y),R&&w.disabled.push(y),T&&w.hidden.push(y),q&&w.today.push(y),l&&Object.keys(l).forEach(_=>{const D=l==null?void 0:l[_];D&&Pr(b,D,n)&&(C[_]?C[_].push(y):C[_]=[y])})}return y=>{const b={[vs.focused]:!1,[vs.disabled]:!1,[vs.hidden]:!1,[vs.outside]:!1,[vs.today]:!1},v={};for(const M in w){const P=w[M];b[M]=P.some(V=>V===y)}for(const M in C)v[M]=C[M].some(P=>P===y);return{...b,...v}}}function kw(s,t,r={}){return Object.entries(s).filter(([,n])=>n===!0).reduce((n,[i])=>(r[i]?n.push(r[i]):t[vs[i]]?n.push(t[vs[i]]):t[Ut[i]]&&n.push(t[Ut[i]]),n),[t[Re.Day]])}function Dw(s){return{...Sw,...s}}function Iw(s){const t={"data-mode":s.mode??void 0,"data-required":"required"in s?s.required:void 0,"data-multiple-months":s.numberOfMonths&&s.numberOfMonths>1||void 0,"data-week-numbers":s.showWeekNumber||void 0,"data-broadcast-calendar":s.broadcastCalendar||void 0,"data-nav-layout":s.navLayout||void 0};return Object.entries(s).forEach(([r,a])=>{r.startsWith("data-")&&(t[r]=a)}),t}function lc(){const s={};for(const t in Re)s[Re[t]]=`rdp-${Re[t]}`;for(const t in vs)s[vs[t]]=`rdp-${vs[t]}`;for(const t in Ut)s[Ut[t]]=`rdp-${Ut[t]}`;for(const t in jt)s[jt[t]]=`rdp-${jt[t]}`;return s}function Qx(s,t,r){return(r??new Nt(t)).formatMonthYear(s)}const Tw=Qx;function Aw(s,t,r){return(r??new Nt(t)).format(s,"d")}function Rw(s,t=gr){return t.format(s,"LLLL")}function Fw(s,t,r){return(r??new Nt(t)).format(s,"cccccc")}function Ew(s,t=gr){return s<10?t.formatNumber(`0${s.toLocaleString()}`):t.formatNumber(`${s.toLocaleString()}`)}function Mw(){return""}function Zx(s,t=gr){return t.format(s,"yyyy")}const Ow=Zx,Vw=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:Qx,formatDay:Aw,formatMonthCaption:Tw,formatMonthDropdown:Rw,formatWeekNumber:Ew,formatWeekNumberHeader:Mw,formatWeekdayName:Fw,formatYearCaption:Ow,formatYearDropdown:Zx},Symbol.toStringTag,{value:"Module"}));function Uw(s){return s!=null&&s.formatMonthCaption&&!s.formatCaption&&(s.formatCaption=s.formatMonthCaption),s!=null&&s.formatYearCaption&&!s.formatYearDropdown&&(s.formatYearDropdown=s.formatYearCaption),{...Vw,...s}}function Lw(s,t,r,a,n){const{startOfMonth:i,startOfYear:o,endOfYear:l,eachMonthOfInterval:c,getMonth:u}=n;return c({start:o(s),end:l(s)}).map(x=>{const g=a.formatMonthDropdown(x,n),p=u(x),N=t&&x<i(t)||r&&x>i(r)||!1;return{value:p,label:g,disabled:N}})}function Bw(s,t={},r={}){let a={...t==null?void 0:t[Re.Day]};return Object.entries(s).filter(([,n])=>n===!0).forEach(([n])=>{a={...a,...r==null?void 0:r[n]}}),a}function $w(s,t,r){const a=s.today(),n=t?s.startOfISOWeek(a):s.startOfWeek(a),i=[];for(let o=0;o<7;o++){const l=s.addDays(n,o);i.push(l)}return i}function qw(s,t,r,a,n=!1){if(!s||!t)return;const{startOfYear:i,endOfYear:o,eachYearOfInterval:l,getYear:c}=a,u=i(s),d=o(t),m=l({start:u,end:d});return n&&m.reverse(),m.map(x=>{const g=r.formatYearDropdown(x,a);return{value:c(x),label:g,disabled:!1}})}function Xx(s,t,r,a){let n=(a??new Nt(r)).format(s,"PPPP");return t.today&&(n=`Today, ${n}`),t.selected&&(n=`${n}, selected`),n}const _w=Xx;function Jx(s,t,r){return(r??new Nt(t)).formatMonthYear(s)}const Ww=Jx;function Kw(s,t,r,a){let n=(a??new Nt(r)).format(s,"PPPP");return t!=null&&t.today&&(n=`Today, ${n}`),n}function Yw(s){return"Choose the Month"}function zw(){return""}function Hw(s){return"Go to the Next Month"}function Gw(s){return"Go to the Previous Month"}function Qw(s,t,r){return(r??new Nt(t)).format(s,"cccc")}function Zw(s,t){return`Week ${s}`}function Xw(s){return"Week Number"}function Jw(s){return"Choose the Year"}const eC=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:Ww,labelDay:_w,labelDayButton:Xx,labelGrid:Jx,labelGridcell:Kw,labelMonthDropdown:Yw,labelNav:zw,labelNext:Hw,labelPrevious:Gw,labelWeekNumber:Zw,labelWeekNumberHeader:Xw,labelWeekday:Qw,labelYearDropdown:Jw},Symbol.toStringTag,{value:"Module"})),mi=s=>s instanceof HTMLElement?s:null,Cl=s=>[...s.querySelectorAll("[data-animated-month]")??[]],sC=s=>mi(s.querySelector("[data-animated-month]")),Sl=s=>mi(s.querySelector("[data-animated-caption]")),Pl=s=>mi(s.querySelector("[data-animated-weeks]")),tC=s=>mi(s.querySelector("[data-animated-nav]")),rC=s=>mi(s.querySelector("[data-animated-weekdays]"));function aC(s,t,{classNames:r,months:a,focused:n,dateLib:i}){const o=h.useRef(null),l=h.useRef(a),c=h.useRef(!1);h.useLayoutEffect(()=>{const u=l.current;if(l.current=a,!t||!s.current||!(s.current instanceof HTMLElement)||a.length===0||u.length===0||a.length!==u.length)return;const d=i.isSameMonth(a[0].date,u[0].date),m=i.isAfter(a[0].date,u[0].date),x=m?r[jt.caption_after_enter]:r[jt.caption_before_enter],g=m?r[jt.weeks_after_enter]:r[jt.weeks_before_enter],p=o.current,N=s.current.cloneNode(!0);if(N instanceof HTMLElement?(Cl(N).forEach(w=>{if(!(w instanceof HTMLElement))return;const C=sC(w);C&&w.contains(C)&&w.removeChild(C);const y=Sl(w);y&&y.classList.remove(x);const b=Pl(w);b&&b.classList.remove(g)}),o.current=N):o.current=null,c.current||d||n)return;const f=p instanceof HTMLElement?Cl(p):[],S=Cl(s.current);if(S!=null&&S.every(j=>j instanceof HTMLElement)&&f&&f.every(j=>j instanceof HTMLElement)){c.current=!0,s.current.style.isolation="isolate";const j=tC(s.current);j&&(j.style.zIndex="1"),S.forEach((w,C)=>{const y=f[C];if(!y)return;w.style.position="relative",w.style.overflow="hidden";const b=Sl(w);b&&b.classList.add(x);const v=Pl(w);v&&v.classList.add(g);const M=()=>{c.current=!1,s.current&&(s.current.style.isolation=""),j&&(j.style.zIndex=""),b&&b.classList.remove(x),v&&v.classList.remove(g),w.style.position="",w.style.overflow="",w.contains(y)&&w.removeChild(y)};y.style.pointerEvents="none",y.style.position="absolute",y.style.overflow="hidden",y.setAttribute("aria-hidden","true");const P=rC(y);P&&(P.style.opacity="0");const V=Sl(y);V&&(V.classList.add(m?r[jt.caption_before_exit]:r[jt.caption_after_exit]),V.addEventListener("animationend",M));const R=Pl(y);R&&R.classList.add(m?r[jt.weeks_before_exit]:r[jt.weeks_after_exit]),w.insertBefore(y,w.firstChild)})}})}function nC(s,t,r,a){const n=s[0],i=s[s.length-1],{ISOWeek:o,fixedWeeks:l,broadcastCalendar:c}=r??{},{addDays:u,differenceInCalendarDays:d,differenceInCalendarMonths:m,endOfBroadcastWeek:x,endOfISOWeek:g,endOfMonth:p,endOfWeek:N,isAfter:f,startOfBroadcastWeek:S,startOfISOWeek:j,startOfWeek:w}=a,C=c?S(n,a):o?j(n):w(n),y=c?x(i):o?g(p(i)):N(p(i)),b=d(y,C),v=m(i,n)+1,M=[];for(let R=0;R<=b;R++){const T=u(C,R);if(t&&f(T,t))break;M.push(T)}const V=(c?35:42)*v;if(l&&M.length<V){const R=V-M.length;for(let T=0;T<R;T++){const q=u(M[M.length-1],1);M.push(q)}}return M}function iC(s){const t=[];return s.reduce((r,a)=>{const n=a.weeks.reduce((i,o)=>i.concat(o.days.slice()),t.slice());return r.concat(n.slice())},t.slice())}function lC(s,t,r,a){const{numberOfMonths:n=1}=r,i=[];for(let o=0;o<n;o++){const l=a.addMonths(s,o);if(t&&l>t)break;i.push(l)}return i}function xu(s,t,r,a){const{month:n,defaultMonth:i,today:o=a.today(),numberOfMonths:l=1}=s;let c=n||i||o;const{differenceInCalendarMonths:u,addMonths:d,startOfMonth:m}=a;if(r&&u(r,c)<l-1){const x=-1*(l-1);c=d(r,x)}return t&&u(c,t)<0&&(c=t),m(c)}function oC(s,t,r,a){const{addDays:n,endOfBroadcastWeek:i,endOfISOWeek:o,endOfMonth:l,endOfWeek:c,getISOWeek:u,getWeek:d,startOfBroadcastWeek:m,startOfISOWeek:x,startOfWeek:g}=a,p=s.reduce((N,f)=>{const S=r.broadcastCalendar?m(f,a):r.ISOWeek?x(f):g(f),j=r.broadcastCalendar?i(f):r.ISOWeek?o(l(f)):c(l(f)),w=t.filter(v=>v>=S&&v<=j),C=r.broadcastCalendar?35:42;if(r.fixedWeeks&&w.length<C){const v=t.filter(M=>{const P=C-w.length;return M>j&&M<=n(j,P)});w.push(...v)}const y=w.reduce((v,M)=>{const P=r.ISOWeek?u(M):d(M),V=v.find(T=>T.weekNumber===P),R=new _x(M,f,a);return V?V.days.push(R):v.push(new X0(P,[R])),v},[]),b=new Z0(f,y);return N.push(b),N},[]);return r.reverseMonths?p.reverse():p}function cC(s,t){let{startMonth:r,endMonth:a}=s;const{startOfYear:n,startOfDay:i,startOfMonth:o,endOfMonth:l,addYears:c,endOfYear:u,newDate:d,today:m}=t,{fromYear:x,toYear:g,fromMonth:p,toMonth:N}=s;!r&&p&&(r=p),!r&&x&&(r=t.newDate(x,0,1)),!a&&N&&(a=N),!a&&g&&(a=d(g,11,31));const f=s.captionLayout==="dropdown"||s.captionLayout==="dropdown-years";return r?r=o(r):x?r=d(x,0,1):!r&&f&&(r=n(c(s.today??m(),-100))),a?a=l(a):g?a=d(g,11,31):!a&&f&&(a=u(s.today??m())),[r&&i(r),a&&i(a)]}function dC(s,t,r,a){if(r.disableNavigation)return;const{pagedNavigation:n,numberOfMonths:i=1}=r,{startOfMonth:o,addMonths:l,differenceInCalendarMonths:c}=a,u=n?i:1,d=o(s);if(!t)return l(d,u);if(!(c(t,s)<i))return l(d,u)}function uC(s,t,r,a){if(r.disableNavigation)return;const{pagedNavigation:n,numberOfMonths:i}=r,{startOfMonth:o,addMonths:l,differenceInCalendarMonths:c}=a,u=n?i??1:1,d=o(s);if(!t)return l(d,-u);if(!(c(d,t)<=0))return l(d,-u)}function mC(s){const t=[];return s.reduce((r,a)=>r.concat(a.weeks.slice()),t.slice())}function Ji(s,t){const[r,a]=h.useState(s);return[t===void 0?r:t,a]}function hC(s,t){const[r,a]=cC(s,t),{startOfMonth:n,endOfMonth:i}=t,o=xu(s,r,a,t),[l,c]=Ji(o,s.month?o:void 0);h.useEffect(()=>{const b=xu(s,r,a,t);c(b)},[s.timeZone]);const u=lC(l,a,s,t),d=nC(u,s.endMonth?i(s.endMonth):void 0,s,t),m=oC(u,d,s,t),x=mC(m),g=iC(m),p=uC(l,r,s,t),N=dC(l,a,s,t),{disableNavigation:f,onMonthChange:S}=s,j=b=>x.some(v=>v.days.some(M=>M.isEqualTo(b))),w=b=>{if(f)return;let v=n(b);r&&v<n(r)&&(v=n(r)),a&&v>n(a)&&(v=n(a)),c(v),S==null||S(v)};return{months:m,weeks:x,days:g,navStart:r,navEnd:a,previousMonth:p,nextMonth:N,goToMonth:w,goToDay:b=>{j(b)||w(b.date)}}}var Zt;(function(s){s[s.Today=0]="Today",s[s.Selected=1]="Selected",s[s.LastFocused=2]="LastFocused",s[s.FocusedModifier=3]="FocusedModifier"})(Zt||(Zt={}));function fu(s){return!s[vs.disabled]&&!s[vs.hidden]&&!s[vs.outside]}function xC(s,t,r,a){let n,i=-1;for(const o of s){const l=t(o);fu(l)&&(l[vs.focused]&&i<Zt.FocusedModifier?(n=o,i=Zt.FocusedModifier):a!=null&&a.isEqualTo(o)&&i<Zt.LastFocused?(n=o,i=Zt.LastFocused):r(o.date)&&i<Zt.Selected?(n=o,i=Zt.Selected):l[vs.today]&&i<Zt.Today&&(n=o,i=Zt.Today))}return n||(n=s.find(o=>fu(t(o)))),n}function fC(s,t,r,a,n,i,o){const{ISOWeek:l,broadcastCalendar:c}=i,{addDays:u,addMonths:d,addWeeks:m,addYears:x,endOfBroadcastWeek:g,endOfISOWeek:p,endOfWeek:N,max:f,min:S,startOfBroadcastWeek:j,startOfISOWeek:w,startOfWeek:C}=o;let b={day:u,week:m,month:d,year:x,startOfWeek:v=>c?j(v,o):l?w(v):C(v),endOfWeek:v=>c?g(v):l?p(v):N(v)}[s](r,t==="after"?1:-1);return t==="before"&&a?b=f([a,b]):t==="after"&&n&&(b=S([n,b])),b}function ef(s,t,r,a,n,i,o,l=0){if(l>365)return;const c=fC(s,t,r.date,a,n,i,o),u=!!(i.disabled&&Pr(c,i.disabled,o)),d=!!(i.hidden&&Pr(c,i.hidden,o)),m=c,x=new _x(c,m,o);return!u&&!d?x:ef(s,t,x,a,n,i,o,l+1)}function pC(s,t,r,a,n){const{autoFocus:i}=s,[o,l]=h.useState(),c=xC(t.days,r,a||(()=>!1),o),[u,d]=h.useState(i?c:void 0);return{isFocusTarget:N=>!!(c!=null&&c.isEqualTo(N)),setFocused:d,focused:u,blur:()=>{l(u),d(void 0)},moveFocus:(N,f)=>{if(!u)return;const S=ef(N,f,u,t.navStart,t.navEnd,s,n);S&&(s.disableNavigation&&!t.days.some(w=>w.isEqualTo(S))||(t.goToDay(S),d(S)))}}}function gC(s,t){const{selected:r,required:a,onSelect:n}=s,[i,o]=Ji(r,n?r:void 0),l=n?r:i,{isSameDay:c}=t,u=g=>(l==null?void 0:l.some(p=>c(p,g)))??!1,{min:d,max:m}=s;return{selected:l,select:(g,p,N)=>{let f=[...l??[]];if(u(g)){if((l==null?void 0:l.length)===d||a&&(l==null?void 0:l.length)===1)return;f=l==null?void 0:l.filter(S=>!c(S,g))}else(l==null?void 0:l.length)===m?f=[g]:f=[...f,g];return n||o(f),n==null||n(f,g,p,N),f},isSelected:u}}function jC(s,t,r=0,a=0,n=!1,i=gr){const{from:o,to:l}=t||{},{isSameDay:c,isAfter:u,isBefore:d}=i;let m;if(!o&&!l)m={from:s,to:r>0?void 0:s};else if(o&&!l)c(o,s)?r===0?m={from:o,to:s}:n?m={from:o,to:void 0}:m=void 0:d(s,o)?m={from:s,to:o}:m={from:o,to:s};else if(o&&l)if(c(o,s)&&c(l,s))n?m={from:o,to:l}:m=void 0;else if(c(o,s))m={from:o,to:r>0?void 0:s};else if(c(l,s))m={from:s,to:r>0?void 0:s};else if(d(s,o))m={from:s,to:l};else if(u(s,o))m={from:o,to:s};else if(u(s,l))m={from:o,to:s};else throw new Error("Invalid range");if(m!=null&&m.from&&(m!=null&&m.to)){const x=i.differenceInCalendarDays(m.to,m.from);a>0&&x>a?m={from:s,to:void 0}:r>1&&x<r&&(m={from:s,to:void 0})}return m}function vC(s,t,r=gr){const a=Array.isArray(t)?t:[t];let n=s.from;const i=r.differenceInCalendarDays(s.to,s.from),o=Math.min(i,6);for(let l=0;l<=o;l++){if(a.includes(n.getDay()))return!0;n=r.addDays(n,1)}return!1}function pu(s,t,r=gr){return Sr(s,t.from,!1,r)||Sr(s,t.to,!1,r)||Sr(t,s.from,!1,r)||Sr(t,s.to,!1,r)}function yC(s,t,r=gr){const a=Array.isArray(t)?t:[t];if(a.filter(l=>typeof l!="function").some(l=>typeof l=="boolean"?l:r.isDate(l)?Sr(s,l,!1,r):Gx(l,r)?l.some(c=>Sr(s,c,!1,r)):ic(l)?l.from&&l.to?pu(s,{from:l.from,to:l.to},r):!1:Hx(l)?vC(s,l.dayOfWeek,r):Kx(l)?r.isAfter(l.before,l.after)?pu(s,{from:r.addDays(l.after,1),to:r.addDays(l.before,-1)},r):Pr(s.from,l,r)||Pr(s.to,l,r):Yx(l)||zx(l)?Pr(s.from,l,r)||Pr(s.to,l,r):!1))return!0;const o=a.filter(l=>typeof l=="function");if(o.length){let l=s.from;const c=r.differenceInCalendarDays(s.to,s.from);for(let u=0;u<=c;u++){if(o.some(d=>d(l)))return!0;l=r.addDays(l,1)}}return!1}function NC(s,t){const{disabled:r,excludeDisabled:a,selected:n,required:i,onSelect:o}=s,[l,c]=Ji(n,o?n:void 0),u=o?n:l;return{selected:u,select:(x,g,p)=>{const{min:N,max:f}=s,S=x?jC(x,u,N,f,i,t):void 0;return a&&r&&(S!=null&&S.from)&&S.to&&yC({from:S.from,to:S.to},r,t)&&(S.from=x,S.to=void 0),o||c(S),o==null||o(S,x,g,p),S},isSelected:x=>u&&Sr(u,x,!1,t)}}function bC(s,t){const{selected:r,required:a,onSelect:n}=s,[i,o]=Ji(r,n?r:void 0),l=n?r:i,{isSameDay:c}=t;return{selected:l,select:(m,x,g)=>{let p=m;return!a&&l&&l&&c(m,l)&&(p=void 0),n||o(p),n==null||n(p,m,x,g),p},isSelected:m=>l?c(l,m):!1}}function wC(s,t){const r=bC(s,t),a=gC(s,t),n=NC(s,t);switch(s.mode){case"single":return r;case"multiple":return a;case"range":return n;default:return}}function CC(s){var Qt;let t=s;t.timeZone&&(t={...s},t.today&&(t.today=new zs(t.today,t.timeZone)),t.month&&(t.month=new zs(t.month,t.timeZone)),t.defaultMonth&&(t.defaultMonth=new zs(t.defaultMonth,t.timeZone)),t.startMonth&&(t.startMonth=new zs(t.startMonth,t.timeZone)),t.endMonth&&(t.endMonth=new zs(t.endMonth,t.timeZone)),t.mode==="single"&&t.selected?t.selected=new zs(t.selected,t.timeZone):t.mode==="multiple"&&t.selected?t.selected=(Qt=t.selected)==null?void 0:Qt.map(qe=>new zs(qe,t.timeZone)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?new zs(t.selected.from,t.timeZone):void 0,to:t.selected.to?new zs(t.selected.to,t.timeZone):void 0}));const{components:r,formatters:a,labels:n,dateLib:i,locale:o,classNames:l}=h.useMemo(()=>{const qe={...nc,...t.locale};return{dateLib:new Nt({locale:qe,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib),components:Dw(t.components),formatters:Uw(t.formatters),labels:{...eC,...t.labels},locale:qe,classNames:{...lc(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]),{captionLayout:c,mode:u,navLayout:d,numberOfMonths:m=1,onDayBlur:x,onDayClick:g,onDayFocus:p,onDayKeyDown:N,onDayMouseEnter:f,onDayMouseLeave:S,onNextClick:j,onPrevClick:w,showWeekNumber:C,styles:y}=t,{formatCaption:b,formatDay:v,formatMonthDropdown:M,formatWeekNumber:P,formatWeekNumberHeader:V,formatWeekdayName:R,formatYearDropdown:T}=a,q=hC(t,i),{days:_,months:D,navStart:X,navEnd:ne,previousMonth:me,nextMonth:Q,goToMonth:be}=q,ke=Pw(_,t,X,ne,i),{isSelected:K,select:G,selected:ue}=wC(t,i)??{},{blur:de,focused:xe,isFocusTarget:ce,moveFocus:ae,setFocused:W}=pC(t,q,ke,K??(()=>!1),i),{labelDayButton:F,labelGridcell:te,labelGrid:ye,labelMonthDropdown:se,labelNav:Z,labelPrevious:U,labelNext:he,labelWeekday:Te,labelWeekNumber:ts,labelWeekNumberHeader:z,labelYearDropdown:J}=n,Ce=h.useMemo(()=>$w(i,t.ISOWeek),[i,t.ISOWeek]),Ve=u!==void 0||g!==void 0,hs=h.useCallback(()=>{me&&(be(me),w==null||w(me))},[me,be,w]),Rs=h.useCallback(()=>{Q&&(be(Q),j==null||j(Q))},[be,Q,j]),Os=h.useCallback((qe,Ke)=>Oe=>{Oe.preventDefault(),Oe.stopPropagation(),W(qe),G==null||G(qe.date,Ke,Oe),g==null||g(qe.date,Ke,Oe)},[G,g,W]),ut=h.useCallback((qe,Ke)=>Oe=>{W(qe),p==null||p(qe.date,Ke,Oe)},[p,W]),Ns=h.useCallback((qe,Ke)=>Oe=>{de(),x==null||x(qe.date,Ke,Oe)},[de,x]),jr=h.useCallback((qe,Ke)=>Oe=>{const as={ArrowLeft:[Oe.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[Oe.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[Oe.shiftKey?"year":"week","after"],ArrowUp:[Oe.shiftKey?"year":"week","before"],PageUp:[Oe.shiftKey?"year":"month","before"],PageDown:[Oe.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(as[Oe.key]){Oe.preventDefault(),Oe.stopPropagation();const[pt,rs]=as[Oe.key];ae(pt,rs)}N==null||N(qe.date,Ke,Oe)},[ae,N,t.dir]),Ht=h.useCallback((qe,Ke)=>Oe=>{f==null||f(qe.date,Ke,Oe)},[f]),Ua=h.useCallback((qe,Ke)=>Oe=>{S==null||S(qe.date,Ke,Oe)},[S]),oa=h.useCallback(qe=>Ke=>{const Oe=Number(Ke.target.value),as=i.setMonth(i.startOfMonth(qe),Oe);be(as)},[i,be]),La=h.useCallback(qe=>Ke=>{const Oe=Number(Ke.target.value),as=i.setYear(i.startOfMonth(qe),Oe);be(as)},[i,be]),{className:ie,style:Be}=h.useMemo(()=>({className:[l[Re.Root],t.className].filter(Boolean).join(" "),style:{...y==null?void 0:y[Re.Root],...t.style}}),[l,t.className,t.style,y]),us=Iw(t),$s=h.useRef(null);aC($s,!!t.animate,{classNames:l,months:D,focused:xe,dateLib:i});const Gt={dayPickerProps:t,selected:ue,select:G,isSelected:K,months:D,nextMonth:Q,previousMonth:me,goToMonth:be,getModifiers:ke,components:r,classNames:l,styles:y,labels:n,formatters:a};return Ne.createElement(Wx.Provider,{value:Gt},Ne.createElement(r.Root,{rootRef:t.animate?$s:void 0,className:ie,style:Be,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],...us},Ne.createElement(r.Months,{className:l[Re.Months],style:y==null?void 0:y[Re.Months]},!t.hideNavigation&&!d&&Ne.createElement(r.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[Re.Nav],style:y==null?void 0:y[Re.Nav],"aria-label":Z(),onPreviousClick:hs,onNextClick:Rs,previousMonth:me,nextMonth:Q}),D.map((qe,Ke)=>Ne.createElement(r.Month,{"data-animated-month":t.animate?"true":void 0,className:l[Re.Month],style:y==null?void 0:y[Re.Month],key:Ke,displayIndex:Ke,calendarMonth:qe},d==="around"&&!t.hideNavigation&&Ke===0&&Ne.createElement(r.PreviousMonthButton,{type:"button",className:l[Re.PreviousMonthButton],tabIndex:me?void 0:-1,"aria-disabled":me?void 0:!0,"aria-label":U(me),onClick:hs,"data-animated-button":t.animate?"true":void 0},Ne.createElement(r.Chevron,{disabled:me?void 0:!0,className:l[Re.Chevron],orientation:t.dir==="rtl"?"right":"left"})),Ne.createElement(r.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:l[Re.MonthCaption],style:y==null?void 0:y[Re.MonthCaption],calendarMonth:qe,displayIndex:Ke},c!=null&&c.startsWith("dropdown")?Ne.createElement(r.DropdownNav,{className:l[Re.Dropdowns],style:y==null?void 0:y[Re.Dropdowns]},(()=>{const Oe=c==="dropdown"||c==="dropdown-months"?Ne.createElement(r.MonthsDropdown,{key:"month",className:l[Re.MonthsDropdown],"aria-label":se(),classNames:l,components:r,disabled:!!t.disableNavigation,onChange:oa(qe.date),options:Lw(qe.date,X,ne,a,i),style:y==null?void 0:y[Re.Dropdown],value:i.getMonth(qe.date)}):Ne.createElement("span",{key:"month"},M(qe.date,i)),as=c==="dropdown"||c==="dropdown-years"?Ne.createElement(r.YearsDropdown,{key:"year",className:l[Re.YearsDropdown],"aria-label":J(i.options),classNames:l,components:r,disabled:!!t.disableNavigation,onChange:La(qe.date),options:qw(X,ne,a,i,!!t.reverseYears),style:y==null?void 0:y[Re.Dropdown],value:i.getYear(qe.date)}):Ne.createElement("span",{key:"year"},T(qe.date,i));return i.getMonthYearOrder()==="year-first"?[as,Oe]:[Oe,as]})(),Ne.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},b(qe.date,i.options,i))):Ne.createElement(r.CaptionLabel,{className:l[Re.CaptionLabel],role:"status","aria-live":"polite"},b(qe.date,i.options,i))),d==="around"&&!t.hideNavigation&&Ke===m-1&&Ne.createElement(r.NextMonthButton,{type:"button",className:l[Re.NextMonthButton],tabIndex:Q?void 0:-1,"aria-disabled":Q?void 0:!0,"aria-label":he(Q),onClick:Rs,"data-animated-button":t.animate?"true":void 0},Ne.createElement(r.Chevron,{disabled:Q?void 0:!0,className:l[Re.Chevron],orientation:t.dir==="rtl"?"left":"right"})),Ke===m-1&&d==="after"&&!t.hideNavigation&&Ne.createElement(r.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[Re.Nav],style:y==null?void 0:y[Re.Nav],"aria-label":Z(),onPreviousClick:hs,onNextClick:Rs,previousMonth:me,nextMonth:Q}),Ne.createElement(r.MonthGrid,{role:"grid","aria-multiselectable":u==="multiple"||u==="range","aria-label":ye(qe.date,i.options,i)||void 0,className:l[Re.MonthGrid],style:y==null?void 0:y[Re.MonthGrid]},!t.hideWeekdays&&Ne.createElement(r.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:l[Re.Weekdays],style:y==null?void 0:y[Re.Weekdays]},C&&Ne.createElement(r.WeekNumberHeader,{"aria-label":z(i.options),className:l[Re.WeekNumberHeader],style:y==null?void 0:y[Re.WeekNumberHeader],scope:"col"},V()),Ce.map(Oe=>Ne.createElement(r.Weekday,{"aria-label":Te(Oe,i.options,i),className:l[Re.Weekday],key:String(Oe),style:y==null?void 0:y[Re.Weekday],scope:"col"},R(Oe,i.options,i)))),Ne.createElement(r.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:l[Re.Weeks],style:y==null?void 0:y[Re.Weeks]},qe.weeks.map(Oe=>Ne.createElement(r.Week,{className:l[Re.Week],key:Oe.weekNumber,style:y==null?void 0:y[Re.Week],week:Oe},C&&Ne.createElement(r.WeekNumber,{week:Oe,style:y==null?void 0:y[Re.WeekNumber],"aria-label":ts(Oe.weekNumber,{locale:o}),className:l[Re.WeekNumber],scope:"row",role:"rowheader"},P(Oe.weekNumber,i)),Oe.days.map(as=>{const{date:pt}=as,rs=ke(as);if(rs[vs.focused]=!rs.hidden&&!!(xe!=null&&xe.isEqualTo(as)),rs[Ut.selected]=(K==null?void 0:K(pt))||rs.selected,ic(ue)){const{from:rl,to:al}=ue;rs[Ut.range_start]=!!(rl&&al&&i.isSameDay(pt,rl)),rs[Ut.range_end]=!!(rl&&al&&i.isSameDay(pt,al)),rs[Ut.range_middle]=Sr(ue,pt,!0,i)}const Tf=Bw(rs,y,t.modifiersStyles),Af=kw(rs,l,t.modifiersClassNames),Rf=!Ve&&!rs.hidden?te(pt,rs,i.options,i):void 0;return Ne.createElement(r.Day,{key:`${i.format(pt,"yyyy-MM-dd")}_${i.format(as.displayMonth,"yyyy-MM")}`,day:as,modifiers:rs,className:Af.join(" "),style:Tf,role:"gridcell","aria-selected":rs.selected||void 0,"aria-label":Rf,"data-day":i.format(pt,"yyyy-MM-dd"),"data-month":as.outside?i.format(pt,"yyyy-MM"):void 0,"data-selected":rs.selected||void 0,"data-disabled":rs.disabled||void 0,"data-hidden":rs.hidden||void 0,"data-outside":as.outside||void 0,"data-focused":rs.focused||void 0,"data-today":rs.today||void 0},!rs.hidden&&Ve?Ne.createElement(r.DayButton,{className:l[Re.DayButton],style:y==null?void 0:y[Re.DayButton],type:"button",day:as,modifiers:rs,disabled:rs.disabled||void 0,tabIndex:ce(as)?0:-1,"aria-label":F(pt,rs,i.options,i),onClick:Os(as,rs),onBlur:Ns(as,rs),onFocus:ut(as,rs),onKeyDown:jr(as,rs),onMouseEnter:Ht(as,rs),onMouseLeave:Ua(as,rs)},v(pt,i.options,i)):!rs.hidden&&v(as.date,i.options,i))})))))))),t.footer&&Ne.createElement(r.Footer,{className:l[Re.Footer],style:y==null?void 0:y[Re.Footer],role:"status","aria-live":"polite"},t.footer)))}function sf({className:s,classNames:t,showOutsideDays:r=!0,captionLayout:a="label",buttonVariant:n="ghost",formatters:i,components:o,...l}){const c=lc();return e.jsx(CC,{showOutsideDays:r,className:le("bg-background group/calendar p-3 [--cell-size:theme(spacing.9)]",s),captionLayout:a,formatters:{formatMonthDropdown:u=>u.toLocaleString("default",{month:"short"}),...i},classNames:{root:le("w-fit",c.root),months:le("flex gap-4 flex-col md:flex-row relative",c.months),month:le("flex flex-col w-full gap-4",c.month),nav:le("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",c.nav),button_previous:le(Wn({variant:n}),"size-[--cell-size] aria-disabled:opacity-50 p-0 select-none",c.button_previous),button_next:le(Wn({variant:n}),"size-[--cell-size] aria-disabled:opacity-50 p-0 select-none",c.button_next),month_caption:le("flex items-center justify-center h-[--cell-size] w-full px-[--cell-size]",c.month_caption),dropdowns:le("flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium",c.dropdowns),dropdown_root:le("has-[:focus]:border-ring border-input has-[:focus]:ring-ring/50 has-[:focus]:ring-[3px] relative rounded-md border",c.dropdown_root),dropdown:le("absolute inset-0 opacity-0 cursor-pointer","bg-background text-foreground","[&>option]:bg-background [&>option]:text-foreground","dark:[&>option]:bg-background dark:[&>option]:text-foreground",c.dropdown),caption_label:le("select-none font-medium",a==="label"?"text-sm":"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5",c.caption_label),month_grid:"w-full border-collapse",weekdays:le("flex",c.weekdays),weekday:le("text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal",c.weekday),week:le("mt-2 flex w-full",c.week),week_number_header:le("w-[--cell-size] select-none",c.week_number_header),week_number:le("text-muted-foreground select-none text-[0.8rem]",c.week_number),day:le("relative w-full h-full p-0 text-center [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",l.showWeekNumber?"[&:nth-child(2)[data-selected=true]_button]:rounded-l-md":"[&:first-child[data-selected=true]_button]:rounded-l-md",c.day),range_start:le("bg-accent rounded-l-md",c.range_start),range_middle:le("rounded-none",c.range_middle),range_end:le("bg-accent rounded-r-md",c.range_end),today:le("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",c.today),outside:le("text-muted-foreground aria-selected:text-muted-foreground",c.outside),disabled:le("text-muted-foreground opacity-50",c.disabled),hidden:le("invisible",c.hidden),...t},components:{Root:({className:u,rootRef:d,...m})=>e.jsx("div",{"data-slot":"calendar",ref:d,className:le(u),...m}),Chevron:({className:u,orientation:d,...m})=>d==="left"?e.jsx(Ki,{className:le("size-4",u),...m}):d==="right"?e.jsx(ni,{className:le("size-4",u),...m}):e.jsx(Yi,{className:le("size-4",u),...m}),DayButton:SC,WeekNumber:({children:u,...d})=>e.jsx("td",{...d,children:e.jsx("div",{className:"flex size-[--cell-size] items-center justify-center text-center",children:u})}),...o},...l})}sf.displayName="Calendar";function SC({className:s,day:t,modifiers:r,...a}){const n=lc(),i=h.useRef(null);return h.useEffect(()=>{var o;r.focused&&((o=i.current)==null||o.focus())},[r.focused]),e.jsx(E,{ref:i,variant:"ghost",size:"icon","data-day":t.date.toLocaleDateString(),"data-selected-single":r.selected&&!r.range_start&&!r.range_end&&!r.range_middle,"data-range-start":r.range_start,"data-range-end":r.range_end,"data-range-middle":r.range_middle,className:le("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70",n.day,s),...a})}const PC=Gf,kC=Qf,tf=h.forwardRef(({className:s,align:t="center",sideOffset:r=4,...a},n)=>e.jsx(Hf,{children:e.jsx(dm,{ref:n,align:t,sideOffset:r,className:le("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...a})}));tf.displayName=dm.displayName;function kr({value:s,onChange:t,placeholder:r="MM/DD/YYYY",disabled:a=!1,className:n,id:i,name:o,onBlur:l,required:c}){const[u,d]=h.useState(s),[m,x]=h.useState(!1);h.useEffect(()=>{d(s)},[s]);const g=N=>{d(N),t==null||t(N),x(!1)},p=N=>N?mp(N,"MMM dd, yyyy"):"";return e.jsxs(PC,{open:m,onOpenChange:x,children:[e.jsx(kC,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:le("w-full justify-between text-left font-normal h-9",!u&&"text-muted-foreground",n),disabled:a,id:i,name:o,onBlur:l,children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx(Ws,{className:"mr-2 h-4 w-4 text-muted-foreground shrink-0"}),e.jsx("span",{className:"truncate",children:u?p(u):r})]}),c&&!u&&e.jsx("span",{className:"text-destructive ml-1 shrink-0",children:"*"})]})}),e.jsx(tf,{className:"w-auto p-0",align:"start",children:e.jsx(sf,{mode:"single",selected:u,onSelect:g,initialFocus:!0,disabled:a,captionLayout:"dropdown",fromYear:1900,toYear:new Date().getFullYear()+10})})]})}function hi({control:s,name:t,label:r,placeholder:a,disabled:n=!1,className:i,required:o=!1}){return e.jsx(bi,{control:s,name:t,render:({field:l,fieldState:{error:c}})=>e.jsxs("div",{className:le("space-y-2",i),children:[r&&e.jsxs("label",{htmlFor:t,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[r,o&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx(kr,{value:l.value?new Date(l.value):void 0,onChange:u=>{l.onChange(u?u.toISOString():"")},placeholder:a,disabled:n,id:t,onBlur:l.onBlur,required:o}),c&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:c.message})]})})}const DC=()=>{const s=Ye(),[t,r]=h.useState(!1),[a,n]=h.useState(!1),[i,o]=h.useState(1),[l,c]=h.useState({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",address:"",city:"",state:"",zipCode:"",licenseNumber:"",licenseExpiry:"",licenseIssue:"",licenseIssuingState:"",vehicleType:"",vehicleMake:"",vehicleModel:"",vehicleYear:"",vehicleColor:"",vehiclePlate:"",vehicleVin:"",insuranceNumber:"",insuranceExpiry:"",bankName:"",accountNumber:"",routingNumber:"",preferredServiceAreas:[],workSchedule:"",availability:"",password:"",confirmPassword:"",acceptTerms:!1,acceptBackgroundCheck:!1,acceptMarketing:!1}),u=4,d=i/u*100,m=[{value:"sedan",label:"Sedan",capacity:"4 passengers",earnings:"$$$"},{value:"suv",label:"SUV",capacity:"6 passengers",earnings:"$$$$"},{value:"van",label:"Van",capacity:"8 passengers",earnings:"$$$$"},{value:"motorcycle",label:"Motorcycle",capacity:"1 passenger",earnings:"$$"},{value:"truck",label:"Truck",capacity:"Cargo only",earnings:"$$$$"}],x=["Full-time (40+ hours/week)","Part-time (20-39 hours/week)","Weekends only","Evenings only","Flexible/On-demand"],g=["Downtown","Airport District","University Area","Business District","Suburban Areas","All Areas"],p=(v,M)=>{c(P=>({...P,[v]:M}))},N=v=>{c(M=>({...M,preferredServiceAreas:M.preferredServiceAreas.includes(v)?M.preferredServiceAreas.filter(P=>P!==v):[...M.preferredServiceAreas,v]}))},f=()=>!l.firstName||!l.lastName||!l.email||!l.phone?(I.error("Please fill in all required fields"),!1):l.email.includes("@")?l.dateOfBirth?!0:(I.error("Please enter your date of birth"),!1):(I.error("Please enter a valid email address"),!1),S=()=>!l.licenseNumber||!l.licenseExpiry||!l.licenseIssue?(I.error("Please fill in all license information"),!1):!l.vehicleType||!l.vehicleMake||!l.vehicleModel||!l.vehicleYear?(I.error("Please fill in all vehicle information"),!1):!0,j=()=>!l.vehiclePlate||!l.insuranceNumber||!l.insuranceExpiry?(I.error("Please fill in all vehicle documentation"),!1):!l.bankName||!l.accountNumber||!l.routingNumber?(I.error("Please fill in all banking information"),!1):!0,w=()=>!l.password||!l.confirmPassword?(I.error("Please fill in password fields"),!1):l.password.length<8?(I.error("Password must be at least 8 characters"),!1):l.password!==l.confirmPassword?(I.error("Passwords do not match"),!1):l.acceptTerms?l.acceptBackgroundCheck?!0:(I.error("Please consent to background check"),!1):(I.error("Please accept the Terms of Service"),!1),C=()=>{i===1&&f()?o(2):i===2&&S()?o(3):i===3&&j()&&o(4)},y=async v=>{v.preventDefault(),w()&&(I.success("Driver registration successful! Your application is being reviewed..."),setTimeout(()=>{s("/login")},3e3))},b=[{icon:e.jsx(ps,{className:"w-5 h-5"}),title:"Competitive Earnings",desc:"Earn up to $1500+ weekly with our dynamic pricing"},{icon:e.jsx(gs,{className:"w-5 h-5"}),title:"Flexible Schedule",desc:"Choose when and where you want to drive"},{icon:e.jsx(Ze,{className:"w-5 h-5"}),title:"Insurance Coverage",desc:"Comprehensive insurance while driving"},{icon:e.jsx(nr,{className:"w-5 h-5"}),title:"Driver Rewards",desc:"Bonus programs and loyalty rewards"}];return e.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-6xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(Ge,{to:"/",className:"inline-flex items-center text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to home"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-6 lg:sticky lg:top-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx(os,{className:"w-7 h-7 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Drive with Aboosto"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(we,{className:"bg-success/10 text-success border-success/20",children:[e.jsx(Ie,{className:"w-3 h-3 mr-1"}),"Instant Payouts"]}),e.jsxs(we,{className:"bg-primary/10 text-primary border-primary/20",children:[e.jsx(nr,{className:"w-3 h-3 mr-1"}),"Top Rated"]})]})]})]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Join thousands of drivers earning more with flexible schedules and competitive rates."})]}),e.jsx("div",{className:"space-y-4",children:b.map((v,M)=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 rounded-lg bg-card border border-border/50 hover-lift",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center text-primary",children:v.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:v.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:v.desc})]})]},M))}),e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-primary mb-3",children:[e.jsx(ps,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-lg",children:"Driver Requirements"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-primary/80",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Valid driver's license (21+ years old)"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Smartphone (iOS 12+ or Android 8+)"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Vehicle inspection and insurance"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Background check consent"})]})]})]})]}),e.jsxs(L,{className:"border-border/50 shadow-elegant",children:[e.jsxs(Y,{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Driver Registration"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Step ",i," of ",u]})]}),e.jsx(Aa,{value:d,className:"h-2"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[i===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"firstName",children:"First Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"firstName",type:"text",placeholder:"John",className:"pl-10",value:l.firstName,onChange:v=>p("firstName",v.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(O,{id:"lastName",type:"text",placeholder:"Smith",value:l.lastName,onChange:v=>p("lastName",v.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"email",type:"email",placeholder:"john.smith@email.com",className:"pl-10",value:l.email,onChange:v=>p("email",v.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"phone",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"phone",type:"tel",placeholder:"+1 (555) 123-4567",className:"pl-10",value:l.phone,onChange:v=>p("phone",v.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(kr,{value:l.dateOfBirth?new Date(l.dateOfBirth):void 0,onChange:v=>p("dateOfBirth",v?St(v):""),placeholder:"Select date of birth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"address",children:"Home Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"address",type:"text",placeholder:"123 Main Street",className:"pl-10",value:l.address,onChange:v=>p("address",v.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"city",children:"City *"}),e.jsx(O,{id:"city",type:"text",placeholder:"New York",value:l.city,onChange:v=>p("city",v.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"state",children:"State *"}),e.jsx(O,{id:"state",type:"text",placeholder:"NY",value:l.state,onChange:v=>p("state",v.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"zipCode",children:"ZIP Code *"}),e.jsx(O,{id:"zipCode",type:"text",placeholder:"10001",value:l.zipCode,onChange:v=>p("zipCode",v.target.value)})]})]}),e.jsxs(E,{type:"button",onClick:C,className:"w-full bg-gradient-primary hover:opacity-90",children:["Continue to License Info",e.jsx(Ee,{className:"w-4 h-4 ml-2 rotate-180"})]})]}),i===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{type:"button",variant:"ghost",onClick:()=>o(1),className:"mb-4",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Driver's License"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"licenseNumber",children:"License Number *"}),e.jsx(O,{id:"licenseNumber",type:"text",placeholder:"D1234567",value:l.licenseNumber,onChange:v=>p("licenseNumber",v.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"licenseIssuingState",children:"Issuing State *"}),e.jsx(O,{id:"licenseIssuingState",type:"text",placeholder:"NY",value:l.licenseIssuingState,onChange:v=>p("licenseIssuingState",v.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"licenseIssue",children:"Issue Date *"}),e.jsx(kr,{value:l.licenseIssue?new Date(l.licenseIssue):void 0,onChange:v=>p("licenseIssue",v?St(v):""),placeholder:"Select license issue date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"licenseExpiry",children:"Expiry Date *"}),e.jsx(kr,{value:l.licenseExpiry?new Date(l.licenseExpiry):void 0,onChange:v=>p("licenseExpiry",v?St(v):""),placeholder:"Select license expiry date"})]})]}),e.jsx("h3",{className:"text-lg font-medium text-foreground pt-4",children:"Vehicle Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Vehicle Type *"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:m.map(v=>e.jsx("div",{className:"border rounded-lg p-3 cursor-pointer hover:bg-primary/5 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(We,{checked:l.vehicleType===v.value,onCheckedChange:M=>M&&p("vehicleType",v.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:v.label}),e.jsx("div",{className:"text-sm text-muted-foreground",children:v.capacity}),e.jsxs("div",{className:"text-xs text-success font-medium",children:[v.earnings," potential"]})]})]})},v.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleMake",children:"Make *"}),e.jsx(O,{id:"vehicleMake",type:"text",placeholder:"Toyota",value:l.vehicleMake,onChange:v=>p("vehicleMake",v.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleModel",children:"Model *"}),e.jsx(O,{id:"vehicleModel",type:"text",placeholder:"Camry",value:l.vehicleModel,onChange:v=>p("vehicleModel",v.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleYear",children:"Year *"}),e.jsx(O,{id:"vehicleYear",type:"text",placeholder:"2020",value:l.vehicleYear,onChange:v=>p("vehicleYear",v.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleColor",children:"Color *"}),e.jsx(O,{id:"vehicleColor",type:"text",placeholder:"Black",value:l.vehicleColor,onChange:v=>p("vehicleColor",v.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehiclePlate",children:"Plate Number *"}),e.jsx(O,{id:"vehiclePlate",type:"text",placeholder:"ABC123",value:l.vehiclePlate,onChange:v=>p("vehiclePlate",v.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleVin",children:"VIN (Optional)"}),e.jsx(O,{id:"vehicleVin",type:"text",placeholder:"1HGCM82633A123456",value:l.vehicleVin,onChange:v=>p("vehicleVin",v.target.value)})]}),e.jsxs(E,{type:"button",onClick:C,className:"w-full bg-gradient-primary hover:opacity-90",children:["Continue to Documentation",e.jsx(Ee,{className:"w-4 h-4 ml-2 rotate-180"})]})]}),i===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{type:"button",variant:"ghost",onClick:()=>o(2),className:"mb-4",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Insurance Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"insuranceNumber",children:"Policy Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"insuranceNumber",type:"text",placeholder:"POL123456789",className:"pl-10",value:l.insuranceNumber,onChange:v=>p("insuranceNumber",v.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"insuranceExpiry",children:"Insurance Expiry *"}),e.jsx(kr,{value:l.insuranceExpiry?new Date(l.insuranceExpiry):void 0,onChange:v=>p("insuranceExpiry",v?St(v):""),placeholder:"Select insurance expiry date"})]}),e.jsx("h3",{className:"text-lg font-medium text-foreground pt-4",children:"Banking Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"bankName",children:"Bank Name *"}),e.jsx(O,{id:"bankName",type:"text",placeholder:"Chase Bank",value:l.bankName,onChange:v=>p("bankName",v.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"accountNumber",children:"Account Number *"}),e.jsx(O,{id:"accountNumber",type:"text",placeholder:"123456789",value:l.accountNumber,onChange:v=>p("accountNumber",v.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"routingNumber",children:"Routing Number *"}),e.jsx(O,{id:"routingNumber",type:"text",placeholder:"021000021",value:l.routingNumber,onChange:v=>p("routingNumber",v.target.value)})]})]}),e.jsx("h3",{className:"text-lg font-medium text-foreground pt-4",children:"Service Preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Preferred Service Areas"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.map(v=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:v,checked:l.preferredServiceAreas.includes(v),onCheckedChange:()=>N(v)}),e.jsx(k,{htmlFor:v,className:"text-sm",children:v})]},v))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"workSchedule",children:"Work Schedule *"}),e.jsxs(ge,{value:l.workSchedule,onValueChange:v=>p("workSchedule",v),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select work schedule"})}),e.jsx(pe,{children:x.map(v=>e.jsx(A,{value:v,children:v},v))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"availability",children:"Additional Availability Info"}),e.jsx(yt,{id:"availability",placeholder:"Any specific hours or days you prefer to work...",className:"min-h-20",value:l.availability,onChange:v=>p("availability",v.target.value)})]}),e.jsxs(E,{type:"button",onClick:C,className:"w-full bg-gradient-primary hover:opacity-90",children:["Continue to Security",e.jsx(Ee,{className:"w-4 h-4 ml-2 rotate-180"})]})]}),i===4&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{type:"button",variant:"ghost",onClick:()=>o(3),className:"mb-4",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Account Security"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"password",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"password",type:t?"text":"password",placeholder:"Create a strong password (min 8 chars)",className:"pl-10 pr-10",value:l.password,onChange:v=>p("password",v.target.value)}),e.jsx("button",{type:"button",onClick:()=>r(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:t?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"confirmPassword",type:a?"text":"password",placeholder:"Confirm your password",className:"pl-10 pr-10",value:l.confirmPassword,onChange:v=>p("confirmPassword",v.target.value)}),e.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:a?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"terms",checked:l.acceptTerms,onCheckedChange:v=>p("acceptTerms",v),className:"mt-1"}),e.jsxs(k,{htmlFor:"terms",className:"text-sm leading-5",children:["I agree to the ",e.jsx(Ge,{to:"/terms",className:"text-primary hover:text-primary/80",children:"Driver Terms of Service"})," and ",e.jsx(Ge,{to:"/privacy",className:"text-primary hover:text-primary/80",children:"Privacy Policy"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"background",checked:l.acceptBackgroundCheck,onCheckedChange:v=>p("acceptBackgroundCheck",v),className:"mt-1"}),e.jsx(k,{htmlFor:"background",className:"text-sm leading-5",children:"I consent to a background check and driving record verification"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"marketing",checked:l.acceptMarketing,onCheckedChange:v=>p("acceptMarketing",v),className:"mt-1"}),e.jsx(k,{htmlFor:"marketing",className:"text-sm leading-5",children:"Send me driving tips, promotions, and platform updates"})]})]}),e.jsxs(E,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90 h-12",children:[e.jsx(os,{className:"w-5 h-5 mr-2"}),"Complete Driver Registration"]})]})]}),e.jsxs("div",{className:"text-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Already have an account? "}),e.jsx(Ge,{to:"/login",className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Sign in"})]})]})]})]})]})})},IC=()=>{const s=Ye(),[t,r]=h.useState(!1),[a,n]=h.useState(!1),[i,o]=h.useState(1),[l,c]=h.useState({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",homeAddress:"",workAddress:"",city:"",state:"",zipCode:"",paymentMethod:"",cardNumber:"",cardName:"",cardExpiry:"",cardCVV:"",emergencyName:"",emergencyPhone:"",emergencyRelationship:"",preferredVehicleType:"",rideFrequency:"",purpose:"",accessibilityNeeds:"",additionalNotes:"",password:"",confirmPassword:"",acceptTerms:!1,acceptMarketing:!1,enableLocationServices:!1}),u=3,d=i/u*100,m=[{value:"standard",label:"Standard",desc:"Comfortable and affordable",price:"$"},{value:"comfort",label:"Comfort",desc:"Extra legroom and premium features",price:"$$"},{value:"luxury",label:"Luxury",desc:"High-end vehicles and professional drivers",price:"$$$"},{value:"suv",label:"SUV",desc:"Space for up to 6 passengers",price:"$$"},{value:"wheelchair",label:"Wheelchair Accessible",desc:"Vehicles equipped with ramps/lifts",price:"$$"}],x=["Daily","Few times per week","Once a week","Few times per month","Rarely/First time"],g=["Commuting to work","Airport transfers","Business meetings","Social events","Shopping/errands","Medical appointments","Tourism/leisure","School runs","Other"],p=["Spouse/Partner","Parent","Child","Sibling","Friend","Colleague","Other"],N=(b,v)=>{c(M=>({...M,[b]:v}))},f=()=>!l.firstName||!l.lastName||!l.email||!l.phone?(I.error("Please fill in all required fields"),!1):l.email.includes("@")?l.dateOfBirth?!0:(I.error("Please enter your date of birth"),!1):(I.error("Please enter a valid email address"),!1),S=()=>!l.homeAddress||!l.city||!l.state||!l.zipCode?(I.error("Please fill in all address information"),!1):!l.paymentMethod||!l.cardNumber||!l.cardName?(I.error("Please fill in payment information"),!1):!0,j=()=>!l.password||!l.confirmPassword?(I.error("Please fill in password fields"),!1):l.password.length<6?(I.error("Password must be at least 6 characters"),!1):l.password!==l.confirmPassword?(I.error("Passwords do not match"),!1):l.acceptTerms?!0:(I.error("Please accept the Terms of Service"),!1),w=()=>{i===1&&f()?o(2):i===2&&S()&&o(3)},C=async b=>{b.preventDefault(),j()&&(I.success("Registration successful! Welcome to Aboosto!"),setTimeout(()=>{s("/login")},2e3))},y=[{icon:e.jsx(ps,{className:"w-5 h-5"}),title:"Affordable Rates",desc:"Competitive pricing with no hidden fees"},{icon:e.jsx(gs,{className:"w-5 h-5"}),title:"Quick Pickups",desc:"Average wait time under 5 minutes"},{icon:e.jsx(Ze,{className:"w-5 h-5"}),title:"Safe Rides",desc:"Verified drivers with safety features"},{icon:e.jsx(nr,{className:"w-5 h-5"}),title:"Rewards Program",desc:"Earn points and exclusive discounts"}];return e.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-5xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(Ge,{to:"/",className:"inline-flex items-center text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to home"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-6 lg:sticky lg:top-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx(fs,{className:"w-7 h-7 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Ride with Aboosto"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(we,{className:"bg-success/10 text-success border-success/20",children:[e.jsx(Ie,{className:"w-3 h-3 mr-1"}),"Safe & Reliable"]}),e.jsxs(we,{className:"bg-primary/10 text-primary border-primary/20",children:[e.jsx(nr,{className:"w-3 h-3 mr-1"}),"4.8 Rating"]})]})]})]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Your premium ride-hailing service with professional drivers, comfortable vehicles, and transparent pricing."})]}),e.jsx("div",{className:"space-y-4",children:y.map((b,v)=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 rounded-lg bg-card border border-border/50 hover-lift",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center text-primary",children:b.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:b.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b.desc})]})]},v))}),e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-primary mb-3",children:[e.jsx(bp,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-lg",children:"First Ride Free"})]}),e.jsx("p",{className:"text-sm text-primary/80 mb-4",children:"New users get their first ride up to $15 completely free, no strings attached."}),e.jsxs("ul",{className:"space-y-2 text-sm text-primary/80",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Apply promo code: FIRSTRIDE"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Valid for 30 days after registration"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"No minimum fare requirements"})]})]})]})]}),e.jsxs(L,{className:"border-border/50 shadow-elegant",children:[e.jsxs(Y,{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Passenger Registration"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Step ",i," of ",u]})]}),e.jsx(Aa,{value:d,className:"h-2"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[i===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"firstName",children:"First Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"firstName",type:"text",placeholder:"John",className:"pl-10",value:l.firstName,onChange:b=>N("firstName",b.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(O,{id:"lastName",type:"text",placeholder:"Smith",value:l.lastName,onChange:b=>N("lastName",b.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"email",type:"email",placeholder:"john.smith@email.com",className:"pl-10",value:l.email,onChange:b=>N("email",b.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"phone",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"phone",type:"tel",placeholder:"+1 (555) 123-4567",className:"pl-10",value:l.phone,onChange:b=>N("phone",b.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(kr,{value:l.dateOfBirth?new Date(l.dateOfBirth):void 0,onChange:b=>N("dateOfBirth",b?St(b):""),placeholder:"Select date of birth"})]}),e.jsx("h3",{className:"text-lg font-medium text-foreground pt-4",children:"Ride Preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Preferred Vehicle Type *"}),e.jsx("div",{className:"space-y-2",children:m.map(b=>e.jsx("div",{className:"border rounded-lg p-3 cursor-pointer hover:bg-primary/5 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(We,{checked:l.preferredVehicleType===b.value,onCheckedChange:v=>v&&N("preferredVehicleType",b.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:b.label}),e.jsx("div",{className:"text-sm font-medium text-primary",children:b.price})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:b.desc})]})]})},b.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"rideFrequency",children:"How often do you ride? *"}),e.jsxs(ge,{value:l.rideFrequency,onValueChange:b=>N("rideFrequency",b),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select frequency"})}),e.jsx(pe,{children:x.map(b=>e.jsx(A,{value:b,children:b},b))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"purpose",children:"Primary Purpose *"}),e.jsxs(ge,{value:l.purpose,onValueChange:b=>N("purpose",b),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select purpose"})}),e.jsx(pe,{children:g.map(b=>e.jsx(A,{value:b,children:b},b))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"accessibilityNeeds",children:"Accessibility Requirements"}),e.jsx(yt,{id:"accessibilityNeeds",placeholder:"Any special requirements we should know about (wheelchair access, service animals, etc.)",className:"min-h-20",value:l.accessibilityNeeds,onChange:b=>N("accessibilityNeeds",b.target.value)})]}),e.jsxs(E,{type:"button",onClick:w,className:"w-full bg-gradient-primary hover:opacity-90",children:["Continue to Address & Payment",e.jsx(Ee,{className:"w-4 h-4 ml-2 rotate-180"})]})]}),i===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{type:"button",variant:"ghost",onClick:()=>o(1),className:"mb-4",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Address Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"homeAddress",children:"Home Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"homeAddress",type:"text",placeholder:"123 Main Street, Apt 4B",className:"pl-10",value:l.homeAddress,onChange:b=>N("homeAddress",b.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"workAddress",children:"Work Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"workAddress",type:"text",placeholder:"456 Business Ave, Suite 200",className:"pl-10",value:l.workAddress,onChange:b=>N("workAddress",b.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"city",children:"City *"}),e.jsx(O,{id:"city",type:"text",placeholder:"New York",value:l.city,onChange:b=>N("city",b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"state",children:"State *"}),e.jsx(O,{id:"state",type:"text",placeholder:"NY",value:l.state,onChange:b=>N("state",b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"zipCode",children:"ZIP Code *"}),e.jsx(O,{id:"zipCode",type:"text",placeholder:"10001",value:l.zipCode,onChange:b=>N("zipCode",b.target.value)})]})]}),e.jsx("h3",{className:"text-lg font-medium text-foreground pt-4",children:"Payment Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"paymentMethod",children:"Payment Method *"}),e.jsxs(ge,{value:l.paymentMethod,onValueChange:b=>N("paymentMethod",b),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select payment method"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"credit",children:"Credit Card"}),e.jsx(A,{value:"debit",children:"Debit Card"}),e.jsx(A,{value:"paypal",children:"PayPal"}),e.jsx(A,{value:"apple",children:"Apple Pay"}),e.jsx(A,{value:"google",children:"Google Pay"})]})]})]}),(l.paymentMethod==="credit"||l.paymentMethod==="debit")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"cardNumber",children:"Card Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",className:"pl-10",value:l.cardNumber,onChange:b=>N("cardNumber",b.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"cardName",children:"Cardholder Name *"}),e.jsx(O,{id:"cardName",type:"text",placeholder:"John Smith",value:l.cardName,onChange:b=>N("cardName",b.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"cardExpiry",children:"Expiry Date *"}),e.jsx(O,{id:"cardExpiry",type:"text",placeholder:"MM/YY",value:l.cardExpiry,onChange:b=>N("cardExpiry",b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"cardCVV",children:"CVV *"}),e.jsx(O,{id:"cardCVV",type:"text",placeholder:"123",value:l.cardCVV,onChange:b=>N("cardCVV",b.target.value)})]})]})]}),e.jsx("h3",{className:"text-lg font-medium text-foreground pt-4",children:"Emergency Contact"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"emergencyName",children:"Contact Name *"}),e.jsx(O,{id:"emergencyName",type:"text",placeholder:"Jane Smith",value:l.emergencyName,onChange:b=>N("emergencyName",b.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"emergencyPhone",children:"Phone Number *"}),e.jsx(O,{id:"emergencyPhone",type:"tel",placeholder:"+1 (555) 987-6543",value:l.emergencyPhone,onChange:b=>N("emergencyPhone",b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"emergencyRelationship",children:"Relationship *"}),e.jsxs(ge,{value:l.emergencyRelationship,onValueChange:b=>N("emergencyRelationship",b),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select relationship"})}),e.jsx(pe,{children:p.map(b=>e.jsx(A,{value:b,children:b},b))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"additionalNotes",children:"Additional Notes"}),e.jsx(yt,{id:"additionalNotes",placeholder:"Any other information that would help us serve you better...",className:"min-h-20",value:l.additionalNotes,onChange:b=>N("additionalNotes",b.target.value)})]}),e.jsxs(E,{type:"button",onClick:w,className:"w-full bg-gradient-primary hover:opacity-90",children:["Continue to Security",e.jsx(Ee,{className:"w-4 h-4 ml-2 rotate-180"})]})]}),i===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{type:"button",variant:"ghost",onClick:()=>o(2),className:"mb-4",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Account Security"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"password",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"password",type:t?"text":"password",placeholder:"Create a password (min 6 chars)",className:"pl-10 pr-10",value:l.password,onChange:b=>N("password",b.target.value)}),e.jsx("button",{type:"button",onClick:()=>r(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:t?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"confirmPassword",type:a?"text":"password",placeholder:"Confirm your password",className:"pl-10 pr-10",value:l.confirmPassword,onChange:b=>N("confirmPassword",b.target.value)}),e.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:a?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"terms",checked:l.acceptTerms,onCheckedChange:b=>N("acceptTerms",b),className:"mt-1"}),e.jsxs(k,{htmlFor:"terms",className:"text-sm leading-5",children:["I agree to the ",e.jsx(Ge,{to:"/terms",className:"text-primary hover:text-primary/80",children:"Passenger Terms of Service"})," and ",e.jsx(Ge,{to:"/privacy",className:"text-primary hover:text-primary/80",children:"Privacy Policy"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"location",checked:l.enableLocationServices,onCheckedChange:b=>N("enableLocationServices",b),className:"mt-1"}),e.jsx(k,{htmlFor:"location",className:"text-sm leading-5",children:"Enable location services for faster pickups and accurate ETAs"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"marketing",checked:l.acceptMarketing,onCheckedChange:b=>N("acceptMarketing",b),className:"mt-1"}),e.jsx(k,{htmlFor:"marketing",className:"text-sm leading-5",children:"Send me promotions, ride discounts, and travel tips"})]})]}),e.jsxs(E,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90 h-12",children:[e.jsx(ai,{className:"w-5 h-5 mr-2"}),"Create Passenger Account"]})]})]}),e.jsxs("div",{className:"text-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Already have an account? "}),e.jsx(Ge,{to:"/login",className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Sign in"})]})]})]})]})]})})},TC=()=>{const s=Ye(),[t,r]=h.useState(!1),[a,n]=h.useState(!1),[i,o]=h.useState(1),[l,c]=h.useState({firstName:"",lastName:"",email:"",phone:"",companyName:"",companySize:"",industry:"",website:"",description:"",password:"",confirmPassword:"",acceptTerms:!1,acceptMarketing:!1}),u=3,d=i/u*100,m=["1-10 employees","11-50 employees","51-200 employees","201-500 employees","500+ employees"],x=["Ride-sharing","Food Delivery","Package Delivery","Corporate Transportation","Public Transportation","Logistics & Freight","Other"],g=(C,y)=>{c(b=>({...b,[C]:y}))},p=()=>!l.firstName||!l.lastName||!l.email||!l.phone?(I.error("Please fill in all required fields"),!1):l.email.includes("@")?!0:(I.error("Please enter a valid email address"),!1),N=()=>!l.companyName||!l.companySize||!l.industry?(I.error("Please fill in all company information"),!1):!0,f=()=>!l.password||!l.confirmPassword?(I.error("Please fill in password fields"),!1):l.password.length<8?(I.error("Password must be at least 8 characters for admin accounts"),!1):l.password!==l.confirmPassword?(I.error("Passwords do not match"),!1):l.acceptTerms?!0:(I.error("Please accept the Terms of Service"),!1),S=()=>{i===1&&p()?o(2):i===2&&N()&&o(3)},j=async C=>{C.preventDefault(),f()&&(I.success("Admin registration successful! Setting up your dashboard..."),setTimeout(()=>{s("/dashboard")},2500))},w=[{icon:e.jsx(fs,{className:"w-5 h-5"}),title:"Fleet Management",desc:"Manage drivers, passengers, and vehicles with complete control"},{icon:e.jsx(ea,{className:"w-5 h-5"}),title:"Advanced Analytics",desc:"Real-time insights, KPIs, and comprehensive reporting"},{icon:e.jsx(Ze,{className:"w-5 h-5"}),title:"Security & Compliance",desc:"Enterprise-grade security with role-based access control"},{icon:e.jsx($t,{className:"w-5 h-5"}),title:"Multi-City Operations",desc:"Scale across multiple cities with centralized management"}];return e.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-5xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(Ge,{to:"/",className:"inline-flex items-center text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to home"]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-6 lg:sticky lg:top-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx(Ze,{className:"w-7 h-7 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Admin Portal"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(we,{className:"bg-warning/10 text-warning border-warning/20",children:[e.jsx(wc,{className:"w-3 h-3 mr-1"}),"Enterprise"]}),e.jsxs(we,{className:"bg-primary/10 text-primary border-primary/20",children:[e.jsx(Tr,{className:"w-3 h-3 mr-1"}),"Full Access"]})]})]})]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Get complete control over your transportation network with Aboosto's comprehensive admin dashboard."})]}),e.jsx("div",{className:"space-y-4",children:w.map((C,y)=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 rounded-lg bg-card border border-border/50 hover-lift",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center text-primary",children:C.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:C.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.desc})]})]},y))}),e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-primary mb-3",children:[e.jsx(wc,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold text-lg",children:"30-Day Free Trial"})]}),e.jsx("p",{className:"text-sm text-primary/80 mb-4",children:"Start your free trial with full access to all enterprise features. No credit card required."}),e.jsxs("ul",{className:"space-y-2 text-sm text-primary/80",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Unlimited drivers & passengers"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Advanced analytics & reporting"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"24/7 premium support"})]})]})]})]}),e.jsxs(L,{className:"border-border/50 shadow-elegant",children:[e.jsxs(Y,{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Create Admin Account"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Step ",i," of ",u]})]}),e.jsx(Aa,{value:d,className:"h-2"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[i===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"firstName",children:"First Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"firstName",type:"text",placeholder:"John",className:"pl-10",value:l.firstName,onChange:C=>g("firstName",C.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(O,{id:"lastName",type:"text",placeholder:"Smith",value:l.lastName,onChange:C=>g("lastName",C.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Business Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"email",type:"email",placeholder:"john@company.com",className:"pl-10",value:l.email,onChange:C=>g("email",C.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"phone",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"phone",type:"tel",placeholder:"+1 (555) 123-4567",className:"pl-10",value:l.phone,onChange:C=>g("phone",C.target.value)})]})]}),e.jsxs(E,{type:"button",onClick:S,className:"w-full bg-gradient-primary hover:opacity-90",children:["Continue to Company Info",e.jsx(Ee,{className:"w-4 h-4 ml-2 rotate-180"})]})]}),i===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{type:"button",variant:"ghost",onClick:()=>o(1),className:"mb-4",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"companyName",children:"Company Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"companyName",type:"text",placeholder:"Your Company Inc.",className:"pl-10",value:l.companyName,onChange:C=>g("companyName",C.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Company Size *"}),e.jsxs(ge,{value:l.companySize,onValueChange:C=>g("companySize",C),children:[e.jsx(fe,{"data-testid":"company-size-select",children:e.jsx(je,{placeholder:"Select company size"})}),e.jsx(pe,{children:m.map(C=>e.jsx(A,{value:C,"data-testid":`size-${C}`,children:C},C))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Industry *"}),e.jsxs(ge,{value:l.industry,onValueChange:C=>g("industry",C),children:[e.jsx(fe,{"data-testid":"industry-select",children:e.jsx(je,{placeholder:"Select your industry"})}),e.jsx(pe,{children:x.map(C=>e.jsx(A,{value:C,"data-testid":`industry-${C}`,children:C},C))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"website",children:"Company Website"}),e.jsx(O,{id:"website",type:"url",placeholder:"https://yourcompany.com",value:l.website,onChange:C=>g("website",C.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"description",children:"Brief Description"}),e.jsx(yt,{id:"description",placeholder:"Tell us about your transportation business...",className:"min-h-20",value:l.description,onChange:C=>g("description",C.target.value)})]}),e.jsxs(E,{type:"button",onClick:S,className:"w-full bg-gradient-primary hover:opacity-90",children:["Continue to Security",e.jsx(Ee,{className:"w-4 h-4 ml-2 rotate-180"})]})]}),i===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{type:"button",variant:"ghost",onClick:()=>o(2),className:"mb-4",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"password",children:"Admin Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"password",type:t?"text":"password",placeholder:"Create a strong password (min 8 chars)",className:"pl-10 pr-10",value:l.password,onChange:C=>g("password",C.target.value)}),e.jsx("button",{type:"button",onClick:()=>r(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:t?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"confirmPassword",type:a?"text":"password",placeholder:"Confirm your admin password",className:"pl-10 pr-10",value:l.confirmPassword,onChange:C=>g("confirmPassword",C.target.value)}),e.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:a?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"terms",checked:l.acceptTerms,onCheckedChange:C=>g("acceptTerms",C),className:"mt-1"}),e.jsxs(k,{htmlFor:"terms",className:"text-sm leading-5",children:["I agree to the ",e.jsx(Ge,{to:"/terms",className:"text-primary hover:text-primary/80",children:"Enterprise Terms of Service"})," and ",e.jsx(Ge,{to:"/privacy",className:"text-primary hover:text-primary/80",children:"Privacy Policy"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"marketing",checked:l.acceptMarketing,onCheckedChange:C=>g("acceptMarketing",C),className:"mt-1"}),e.jsx(k,{htmlFor:"marketing",className:"text-sm leading-5",children:"Send me product updates, feature announcements, and exclusive offers"})]})]}),e.jsxs(E,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90 h-12",children:[e.jsx(Ze,{className:"w-5 h-5 mr-2"}),"Create Admin Account & Start Trial"]})]})]}),e.jsxs("div",{className:"text-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Already have an account? "}),e.jsx(Ge,{to:"/login",className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Sign in"})]})]})]})]})]})})};function oc(s,t={}){const{enabled:r=!0,onSuccess:a,onError:n}=t,[i,o]=h.useState(null),[l,c]=h.useState(!1),[u,d]=h.useState(null),m=h.useRef(a),x=h.useRef(n),g=h.useRef(s),p=h.useRef(r),N=h.useRef(!0);h.useEffect(()=>{m.current=a,x.current=n,p.current=r},[a,n,r]);const f=h.useRef(s),[S,j]=h.useState(0);h.useEffect(()=>{f.current!==s&&(g.current=s,f.current=s,j(C=>C+1))},[s]);const w=h.useCallback(async()=>{var C,y;if(!(!p.current||!N.current)){c(!0),d(null);try{const b=await g.current();N.current&&(o(b),(C=m.current)==null||C.call(m,b))}catch(b){if(N.current){const v=b instanceof Error?b:new Error("An error occurred");d(v),(y=x.current)==null||y.call(x,v)}}finally{N.current&&c(!1)}}},[]);return h.useEffect(()=>(N.current=!0,r&&w(),()=>{N.current=!1}),[S,r,w]),{data:i,loading:l,error:u,refetch:w}}function Rt(s,t={}){const{onSuccess:r,onError:a}=t,[n,i]=h.useState(null),[o,l]=h.useState(!1),[c,u]=h.useState(null),d=h.useCallback(async x=>{l(!0),u(null);try{const g=await s(x);return i(g),r==null||r(g,x),g}catch(g){const p=g instanceof Error?g:new Error("An error occurred");throw u(p),a==null||a(p,x),p}finally{l(!1)}},[s,r,a]),m=h.useCallback(()=>{i(null),u(null),l(!1)},[]);return{data:n,loading:o,error:c,mutate:d,reset:m}}var $u;const yn=(($u=import.meta)==null?void 0:$u.env)||{};yn.DEV??yn.MODE;const el=(s,t)=>{const r=(s==null?void 0:s.trim())||"",a=r.length>0?r:t;return/^https?:\/\//i.test(a)&&r.length>0?a:t},Ys=el(yn.VITE_API_URL,"/api"),cc=el(yn.VITE_ADMIN_API_BASE_URL,"/admin-api"),rf=el(yn.VITE_PRICING_API_BASE_URL,"/api"),AC=el(yn.VITE_RIDER_API_BASE_URL,"/rider-api");class RC{constructor(t=cc,r={}){gt(this,"baseURL");gt(this,"defaultHeaders");gt(this,"authToken",null);this.baseURL=t,this.defaultHeaders={"Content-Type":"application/json",...r}}setAuthToken(t){this.authToken=t,this.defaultHeaders.Authorization=`Bearer ${t}`}clearAuthToken(){this.authToken=null,delete this.defaultHeaders.Authorization}getAuthToken(){return this.authToken}buildURL(t,r){const a=/^https?:\/\//i.test(this.baseURL);let n;if(a)n=new URL(t,this.baseURL);else{const i=this.baseURL.endsWith("/")?this.baseURL.slice(0,-1):this.baseURL,o=t.startsWith("/")?t:`/${t}`,l=`${i}${o}`;n=new URL(l,window.location.origin)}return r&&Object.entries(r).forEach(([i,o])=>{o!=null&&(Array.isArray(o)?o.forEach(l=>n.searchParams.append(i,String(l))):n.searchParams.append(i,String(o)))}),a?n.toString():n.pathname+n.search}async request(t,r={}){const{params:a,headers:n,responseType:i="json",...o}=r,l=this.buildURL(t,a);try{const c={...this.defaultHeaders};Object.assign(c,n||{}),o.body instanceof FormData&&delete c["Content-Type"];const u=await fetch(l,{...o,headers:c});if(!u.ok){const m=await u.json().catch(()=>({}));throw new Error(m.message||m.error||`HTTP Error: ${u.status} ${u.statusText}`)}return i==="blob"?await u.blob():await u.json()}catch(c){throw c instanceof Error?c:new Error("An unexpected error occurred")}}async get(t,r,a){return this.request(t,{method:"GET",params:r,...a})}async post(t,r,a){const{params:n,...i}=a||{};return this.request(t,{method:"POST",body:r instanceof FormData?r:r?JSON.stringify(r):void 0,params:n,...i})}async put(t,r,a){const{params:n,...i}=a||{};return this.request(t,{method:"PUT",body:r instanceof FormData?r:r?JSON.stringify(r):void 0,params:n,...i})}async delete(t){return this.request(t,{method:"DELETE"})}setBaseURL(t){this.baseURL=t}setHeaders(t){this.defaultHeaders={...this.defaultHeaders,...t}}}const Me=new RC;function af(s={}){const{onSuccess:t,onError:r}=s;return Rt(async n=>await Me.post("/api/admin/forgot-password",n),{onSuccess:(n,i)=>{t==null||t(n,i)},onError:(n,i)=>{r==null||r(n,i)}})}function FC(s={}){const{onSuccess:t,onError:r}=s;return Rt(async n=>await Me.post("/api/admin/reset-password",n),{onSuccess:(n,i)=>{t==null||t(n,i)},onError:(n,i)=>{r==null||r(n,i)}})}function EC(s={}){const{onSuccess:t,onError:r}=s;return Rt(async n=>{const i=localStorage.getItem("user");if(!i)throw new Error("User not found");const l=JSON.parse(i).id;return await Me.get(`/api/admin/user_change_password/${l}`,{existingPassword:n.currentPassword,newPassword:n.newPassword})},{onSuccess:(n,i)=>{t==null||t(n,i)},onError:(n,i)=>{r==null||r(n,i)}})}function MC(s={}){const{onSuccess:t,onError:r}=s;return Rt(async({userId:n,existingPassword:i,newPassword:o})=>{const l=typeof n=="string"?parseInt(n,10):n;return await Me.get(`/api/admin/user_change_password/${l}`,{existingPassword:i,newPassword:o})},{onSuccess:(n,i)=>{t==null||t(n,i)},onError:(n,i)=>{r==null||r(n,i)}})}const OC=()=>{const[s,t]=h.useState("email"),[r,a]=h.useState(""),[n,i]=h.useState(""),[o,l]=h.useState(""),[c,u]=h.useState(""),d=af({onSuccess:()=>{I.success("Reset code sent to your email!"),t("sent")},onError:p=>{I.error(p.message||"Failed to send reset code. Please try again.")}}),m=async p=>{if(p.preventDefault(),!r||!r.includes("@")){I.error("Please enter a valid email address");return}await d.mutate({email:r})},x=async p=>{if(p.preventDefault(),!n||n.length<6){I.error("Please enter the 6-digit verification code");return}I.success("Code verified! You can now reset your password."),t("reset")},g=async p=>{if(p.preventDefault(),!o||!c){I.error("Please fill in both password fields");return}if(o.length<8){I.error("Password must be at least 8 characters");return}if(o!==c){I.error("Passwords do not match");return}I.success("Password reset successfully! You can now sign in with your new password."),setTimeout(()=>{window.location.href="/login"},2e3)};return e.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(Ge,{to:"/login",className:"inline-flex items-center text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to login"]})}),e.jsxs(L,{className:"border-border/50 shadow-elegant",children:[e.jsxs(Y,{className:"space-y-6 pb-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx(Ze,{className:"w-6 h-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Retailnextbox"}),e.jsx(we,{variant:"secondary",className:"text-xs",children:"Pro"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-xl font-semibold text-foreground",children:[s==="email"&&"Reset your password",s==="sent"&&"Check your email",s==="reset"&&"Set new password"]}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:[s==="email"&&"Enter your email to receive a reset link",s==="sent"&&"We sent a verification code to your email",s==="reset"&&"Create a strong new password"]})]})]}),e.jsxs(B,{className:"space-y-6",children:[s==="email"&&e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"email",type:"email",placeholder:"Enter your email address",className:"pl-10",value:r,onChange:p=>a(p.target.value)})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"We'll send a verification code to this email address."})]}),e.jsx(E,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90",disabled:d.loading,children:d.loading?e.jsxs(e.Fragment,{children:[e.jsx(Cc,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Cc,{className:"w-4 h-4 mr-2"}),"Send Reset Code"]})})]}),s==="sent"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-success/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Qs,{className:"w-8 h-8 text-success"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-foreground font-medium",children:"Reset code sent!"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["We sent a 6-digit verification code to",e.jsx("br",{}),e.jsx("span",{className:"font-medium text-foreground",children:r})]})]})]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"resetCode",children:"Verification Code"}),e.jsx(O,{id:"resetCode",type:"text",placeholder:"Enter 6-digit code",maxLength:6,className:"text-center text-lg tracking-widest",value:n,onChange:p=>i(p.target.value.replace(/\D/g,""))})]}),e.jsxs(E,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Verify Code"]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Didn't receive the code?",e.jsx("button",{onClick:()=>t("email"),className:"text-primary hover:text-primary/80 ml-1 font-medium",children:"Try again"})]})}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-muted-foreground",children:[e.jsx(gs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Code expires in 15 minutes"})]})})]}),s==="reset"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(sr,{className:"w-8 h-8 text-primary"})})}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"newPassword",children:"New Password"}),e.jsx(O,{id:"newPassword",type:"password",placeholder:"Enter new password",value:o,onChange:p=>l(p.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters long"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(O,{id:"confirmPassword",type:"password",placeholder:"Confirm new password",value:c,onChange:p=>u(p.target.value)})]}),e.jsxs(E,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Reset Password"]})]})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ze,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("p",{className:"font-medium mb-1",children:"Security Note"}),e.jsx("p",{children:"For your security, reset codes expire after 15 minutes and can only be used once."})]})]})}),e.jsxs("div",{className:"text-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remember your password? "}),e.jsx(Ge,{to:"/login",className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Back to login"})]})]})]})]})})},VC=()=>{const s=Ye(),[t]=jo(),r=t.get("token"),[a,n]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(r?2:1),[u,d]=h.useState(!1),[m,x]=h.useState(!1),[g,p]=h.useState(""),[N,f]=h.useState({newPassword:"",confirmPassword:"",requireEmailChange:!1,enableTwoFactor:!1,logOutOtherSessions:!0,notifySecurityChange:!0}),[S,j]=h.useState({score:0,feedback:"",color:"bg-red-500"}),w=af({onSuccess:()=>{x(!0),I.success("Password reset email sent! Check your inbox.")},onError:_=>{I.error(_.message||"Failed to send reset email. Please try again.")}}),C=FC({onSuccess:()=>{I.success("Password reset successfully! You can now login with your new password."),setTimeout(()=>{s("/login")},2e3)},onError:_=>{I.error(_.message||"Failed to reset password. The link may have expired.")}}),b=l/2*100,v=_=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_),M=_=>{let D=0,X="",ne="bg-red-500";return _.length===0?{score:0,feedback:"Enter a password",color:"bg-gray-300"}:(_.length>=8&&(D+=1),_.length>=12&&(D+=1),/[a-z]/.test(_)&&(D+=1),/[A-Z]/.test(_)&&(D+=1),/[0-9]/.test(_)&&(D+=1),/[^a-zA-Z0-9]/.test(_)&&(D+=1),D<=2?(X="Weak password",ne="bg-red-500"):D<=4?(X="Fair password",ne="bg-yellow-500"):D<=5?(X="Good password",ne="bg-blue-500"):(X="Strong password",ne="bg-green-500"),{score:D,feedback:X,color:ne})},P=_=>{f(D=>({...D,newPassword:_})),j(M(_))},V=async _=>{if(_.preventDefault(),!g||!v(g)){I.error("Please enter a valid email address");return}d(!0);try{await w.mutate({email:g})}finally{d(!1)}},R=()=>!N.newPassword||!N.confirmPassword?(I.error("Please fill in all password fields"),!1):N.newPassword.length<8?(I.error("Password must be at least 8 characters long"),!1):S.score<3?(I.error("Please choose a stronger password"),!1):N.newPassword!==N.confirmPassword?(I.error("Passwords do not match"),!1):!0,T=async _=>{if(_.preventDefault(),!!R()){d(!0);try{await C.mutate({token:r||"",password:N.newPassword,confirmPassword:N.confirmPassword})}finally{d(!1)}}},q=[{text:"At least 8 characters",met:N.newPassword.length>=8},{text:"Contains uppercase letter",met:/[A-Z]/.test(N.newPassword)},{text:"Contains lowercase letter",met:/[a-z]/.test(N.newPassword)},{text:"Contains a number",met:/[0-9]/.test(N.newPassword)},{text:"Contains special character",met:/[^a-zA-Z0-9]/.test(N.newPassword)}];return e.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(Ge,{to:"/login",className:"inline-flex items-center text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to login"]})}),e.jsxs(L,{className:"border-border/50 shadow-elegant",children:[e.jsxs(Y,{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx(Ze,{className:"w-7 h-7 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:r?"Reset Your Password":"Forgot Password"}),e.jsx("p",{className:"text-muted-foreground",children:r?"Create a new secure password for your account":"Enter your email to receive a password reset link"})]})]}),!r&&e.jsx(Aa,{value:b,className:"h-2"})]}),e.jsxs(B,{className:"space-y-6",children:[!r&&l===1&&!m&&e.jsxs("form",{onSubmit:V,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ts,{className:"w-5 h-5 text-warning mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-warning",children:"Security Notice"}),e.jsx("p",{className:"text-sm text-warning/80 mt-1",children:"We'll send a secure link to your email that expires in 60 minutes. This link can only be used once."})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"email",type:"email",placeholder:"Enter your registered email",className:"pl-10",value:g,onChange:_=>p(_.target.value),required:!0})]})]})]}),e.jsx(E,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90 h-12",disabled:u||w.loading,children:u||w.loading?e.jsxs(e.Fragment,{children:[e.jsx(Qa,{className:"w-5 h-5 mr-2 animate-spin"}),"Sending Reset Link..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qs,{className:"w-5 h-5 mr-2"}),"Send Reset Link"]})}),e.jsxs("div",{className:"text-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remember your password? "}),e.jsx(Ge,{to:"/login",className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Sign in"})]})]}),!r&&m&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-success/10 border border-success/20 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(Ie,{className:"w-8 h-8 text-success mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-success",children:"Reset Link Sent!"}),e.jsxs("p",{className:"text-success/80 mt-2",children:["We've sent a password reset link to ",e.jsx("strong",{children:g})]}),e.jsxs("ul",{className:"mt-4 space-y-2 text-sm text-success/80",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Check your inbox and spam folder"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Link expires in 60 minutes"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"For security, the link can only be used once"})]})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Didn't receive the email?"}),e.jsxs(E,{variant:"outline",className:"w-full",onClick:()=>{x(!1),c(1)},disabled:u,children:[e.jsx(Qa,{className:"w-4 h-4 mr-2"}),"Resend Reset Link"]}),e.jsx(Ge,{to:"/login",children:e.jsx(E,{variant:"ghost",className:"w-full",children:"Back to Login"})})]})]}),r&&e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"newPassword",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"newPassword",type:a?"text":"password",placeholder:"Enter your new password",className:"pl-10 pr-10",value:N.newPassword,onChange:_=>P(_.target.value),required:!0}),e.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:a?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]}),N.newPassword&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Password Strength"}),e.jsx("span",{className:`text-xs font-medium ${S.score<=2?"text-red-500":S.score<=4?"text-yellow-500":"text-green-500"}`,children:S.feedback})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${S.color}`,style:{width:`${S.score/6*100}%`}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Password must contain:"}),e.jsx("ul",{className:"space-y-1",children:q.map((_,D)=>e.jsxs("li",{className:"flex items-center space-x-2 text-xs",children:[e.jsx(Ie,{className:`w-3 h-3 ${_.met?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:_.met?"text-green-500":"text-gray-500",children:_.text})]},D))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"confirmPassword",type:i?"text":"password",placeholder:"Confirm your new password",className:"pl-10 pr-10",value:N.confirmPassword,onChange:_=>f(D=>({...D,confirmPassword:_.target.value})),required:!0}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:i?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Security Options"}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"logOutOthers",checked:N.logOutOtherSessions,onCheckedChange:_=>f(D=>({...D,logOutOtherSessions:_===!0}))}),e.jsx(k,{htmlFor:"logOutOthers",className:"text-sm leading-5",children:"Log out from all other devices (recommended)"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"notifyChange",checked:N.notifySecurityChange,onCheckedChange:_=>f(D=>({...D,notifySecurityChange:_===!0}))}),e.jsx(k,{htmlFor:"notifyChange",className:"text-sm leading-5",children:"Send security notification to my email"})]})]})]}),e.jsx(E,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90 h-12",disabled:u||C.loading,children:u||C.loading?e.jsxs(e.Fragment,{children:[e.jsx(Qa,{className:"w-5 h-5 mr-2 animate-spin"}),"Resetting Password..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"w-5 h-5 mr-2"}),"Reset Password"]})}),e.jsxs("div",{className:"text-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Remember your password? "}),e.jsx(Ge,{to:"/login",className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Sign in"})]})]})]})]})]})})},UC=()=>{const s=Ye(),[t,r]=h.useState(!1),[a,n]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState("2024-01-10"),[u,d]=h.useState({currentPassword:"",newPassword:"",confirmPassword:"",enableTwoFactor:!1,requireEmailChange:!1,logOutOtherSessions:!0,notifySecurityChange:!0}),[m,x]=h.useState({score:0,feedback:"",color:"bg-red-500"}),g=EC({onSuccess:()=>{I.success("Password changed successfully! Your account is now more secure."),setTimeout(()=>{s("/admin/dashboard")},1500)},onError:w=>{I.error(w.message||"Failed to change password. Please verify your current password.")}}),p=w=>{let C=0,y="",b="bg-red-500";return w.length===0?{score:0,feedback:"Enter a password",color:"bg-gray-300"}:(w.length>=8&&(C+=1),w.length>=12&&(C+=1),/[a-z]/.test(w)&&(C+=1),/[A-Z]/.test(w)&&(C+=1),/[0-9]/.test(w)&&(C+=1),/[^a-zA-Z0-9]/.test(w)&&(C+=1),C<=2?(y="Weak password",b="bg-red-500"):C<=4?(y="Fair password",b="bg-yellow-500"):C<=5?(y="Good password",b="bg-blue-500"):(y="Strong password",b="bg-green-500"),{score:C,feedback:y,color:b})},N=w=>{d(C=>({...C,newPassword:w})),x(p(w))},f=()=>u.currentPassword?!u.newPassword||!u.confirmPassword?(I.error("Please fill in all password fields"),!1):u.newPassword===u.currentPassword?(I.error("New password must be different from current password"),!1):u.newPassword.length<8?(I.error("Password must be at least 8 characters long"),!1):m.score<3?(I.error("Please choose a stronger password"),!1):u.newPassword!==u.confirmPassword?(I.error("Passwords do not match"),!1):!0:(I.error("Please enter your current password"),!1),S=async w=>{if(w.preventDefault(),!!f())try{await g.mutate({currentPassword:u.currentPassword,newPassword:u.newPassword,confirmPassword:u.confirmPassword})}catch{}},j=[{text:"At least 8 characters",met:u.newPassword.length>=8},{text:"Contains uppercase letter",met:/[A-Z]/.test(u.newPassword)},{text:"Contains lowercase letter",met:/[a-z]/.test(u.newPassword)},{text:"Contains a number",met:/[0-9]/.test(u.newPassword)},{text:"Contains special character",met:/[^a-zA-Z0-9]/.test(u.newPassword)},{text:"Different from current password",met:u.newPassword!==u.currentPassword}];return e.jsx("div",{className:"min-h-screen bg-gradient-subtle",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(Ge,{to:"/admin/dashboard",className:"inline-flex items-center text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx(sr,{className:"w-7 h-7 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Security Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account security and password"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(L,{className:"border-border/50 shadow-elegant",children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center space-x-2",children:[e.jsx(Hs,{className:"w-5 h-5"}),e.jsx("span",{children:"Change Password"})]})}),e.jsx(B,{children:e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"currentPassword",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"currentPassword",type:t?"text":"password",placeholder:"Enter your current password",className:"pl-10 pr-10",value:u.currentPassword,onChange:w=>d(C=>({...C,currentPassword:w.target.value})),required:!0}),e.jsx("button",{type:"button",onClick:()=>r(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:t?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"newPassword",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"newPassword",type:a?"text":"password",placeholder:"Enter your new password",className:"pl-10 pr-10",value:u.newPassword,onChange:w=>N(w.target.value),required:!0}),e.jsx("button",{type:"button",onClick:()=>n(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:a?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]}),u.newPassword&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Password Strength"}),e.jsx("span",{className:`text-xs font-medium ${m.score<=2?"text-red-500":m.score<=4?"text-yellow-500":"text-green-500"}`,children:m.feedback})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${m.color}`,style:{width:`${m.score/6*100}%`}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{id:"confirmPassword",type:i?"text":"password",placeholder:"Confirm your new password",className:"pl-10 pr-10",value:u.confirmPassword,onChange:w=>d(C=>({...C,confirmPassword:w.target.value})),required:!0}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:i?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium mb-3",children:"Password Requirements:"}),e.jsx("ul",{className:"space-y-2",children:j.map((w,C)=>e.jsxs("li",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Ie,{className:`w-4 h-4 ${w.met?"text-green-500":"text-gray-300"}`}),e.jsx("span",{className:w.met?"text-green-600":"text-gray-500",children:w.text})]},C))})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Additional Security Options"}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"logOutOthers",checked:u.logOutOtherSessions,onCheckedChange:w=>d(C=>({...C,logOutOtherSessions:w===!0}))}),e.jsx(k,{htmlFor:"logOutOthers",className:"text-sm leading-5",children:"Log out from all other devices (recommended)"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"notifyChange",checked:u.notifySecurityChange,onCheckedChange:w=>d(C=>({...C,notifySecurityChange:w===!0}))}),e.jsx(k,{htmlFor:"notifyChange",className:"text-sm leading-5",children:"Send security notification to my email"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(We,{id:"enableTwoFactor",checked:u.enableTwoFactor,onCheckedChange:w=>d(C=>({...C,enableTwoFactor:w===!0}))}),e.jsx(k,{htmlFor:"enableTwoFactor",className:"text-sm leading-5",children:"Enable two-factor authentication"})]})]})]}),e.jsx(E,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90 h-12",disabled:g.loading,children:g.loading?e.jsxs(e.Fragment,{children:[e.jsx(Qa,{className:"w-5 h-5 mr-2 animate-spin"}),"Changing Password..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-5 h-5 mr-2"}),"Change Password"]})})]})})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs(L,{className:"border-border/50 bg-primary/5",children:[e.jsx(Y,{children:e.jsxs(H,{className:"text-lg flex items-center space-x-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),e.jsx("span",{children:"Security Tips"})]})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary mt-0.5"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Use a unique password for each account"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary mt-0.5"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Enable two-factor authentication"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary mt-0.5"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Review active sessions regularly"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary mt-0.5"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Keep your recovery info updated"})]})]})]})})]})]})]})})};function Bs(s,t={}){const{enabled:r=!0,onSuccess:a,onError:n,...i}=t,[o,l]=h.useState(null),[c,u]=h.useState(r),[d,m]=h.useState(null),[x,g]=h.useState(0),p=h.useCallback(()=>{g(N=>N+1)},[]);return h.useEffect(()=>{if(!r){u(!1);return}const N=new AbortController,f=N.signal;return u(!0),m(null),fetch(s,{...i,signal:f,headers:{Accept:"application/json","Content-Type":"application/json",...i.headers}}).then(S=>{if(!S.ok)throw new Error(`HTTP ${S.status}: ${S.statusText}`);return S.json()}).then(S=>{f.aborted||(l(S),u(!1),a==null||a(S))}).catch(S=>{if(!f.aborted){const j=S instanceof Error?S:new Error("Unknown error");m(j),u(!1),n==null||n(j)}}),()=>N.abort()},[s,r,x]),{data:o,loading:c,error:d,refetch:p}}function zt(s,t={}){const{onSuccess:r,onError:a}=t,[n,i]=h.useState(null),[o,l]=h.useState(!1),[c,u]=h.useState(null),d=h.useCallback(()=>{i(null),u(null),l(!1)},[]);return{mutate:h.useCallback(async x=>{l(!0),u(null);try{const g=await s(x);return i(g),l(!1),r==null||r(g,x),g}catch(g){const p=g instanceof Error?g:new Error("Unknown error");throw u(p),l(!1),a==null||a(p,x),p}},[s,r,a]),data:n,loading:o,error:c,reset:d}}function ls(s,t,r){const a=s.replace(/\/+$/,""),n=t.replace(/^\/+/,"");let i=`${a}/${n}`;if(r){const o=new URLSearchParams;Object.entries(r).forEach(([c,u])=>{u!=null&&o.append(c,String(u))});const l=o.toString();l&&(i+=`?${l}`)}return i}async function Or(s,t={}){const r=await fetch(s,{...t,headers:{Accept:"application/json","Content-Type":"application/json",...t.headers}});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return r.json()}let kl=null;function nf(){return kl||(kl=localStorage.getItem("authToken")),kl}const kn=cc;function Dn(){const s=nf();return s?{Authorization:`Bearer ${s}`}:{}}function LC(s={}){const t=ls(kn,"/dashboard/trips/today");return Bs(t,{enabled:s.enabled!==!1,headers:Dn(),onSuccess:s.onSuccess,onError:s.onError})}function BC(s={}){const t=ls(kn,"/dashboard/revenue/today");return Bs(t,{enabled:s.enabled!==!1,headers:Dn(),onSuccess:s.onSuccess,onError:s.onError})}function $C(s={}){const t=ls(kn,"/dashboard/gmv/today");return Bs(t,{enabled:s.enabled!==!1,headers:Dn(),onSuccess:s.onSuccess,onError:s.onError})}function qC(s={}){const t=ls(kn,"/dashboard/on-duty-list");return Bs(t,{enabled:s.enabled!==!1,headers:Dn(),onSuccess:s.onSuccess,onError:s.onError})}function _C(s={}){const t=ls(kn,"/dashboard/active-rides");return Bs(t,{enabled:s.enabled!==!1,headers:Dn(),onSuccess:s.onSuccess,onError:s.onError})}function WC(s={}){const r=(()=>{const n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0),o=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59,999);return{from:i.toISOString(),to:o.toISOString()}})(),a=ls(kn,"/reports/ride-history",{from:r.from,to:r.to,page:0,size:1e3});return Bs(a,{enabled:s.enabled!==!1,headers:Dn(),onSuccess:s.onSuccess,onError:s.onError})}const $a=s=>s&&s.data?s.data:null,gu=s=>s==null?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),Dl=s=>s==null?"0":new Intl.NumberFormat("en-US").format(s),KC=()=>{const{data:s,loading:t,error:r}=LC(),{data:a,loading:n,error:i}=BC(),{data:o,loading:l,error:c}=$C(),{data:u,loading:d,error:m}=qC(),{data:x,loading:g,error:p}=_C(),{data:N,loading:f,error:S}=WC(),j=$a(s),w=$a(a),C=$a(o),y=$a(u)||[],b=$a(x)||[],v=$a(N),M=(v==null?void 0:v.content)||v||[],P=(j==null?void 0:j.totalRevenue)||(j==null?void 0:j.totalFare)||0,V=h.useMemo(()=>Array.isArray(M)?M.reduce((me,Q)=>{const be=Q.fare||Q.totalFare||Q.amount||Q.revenue||0;return Q.status==="COMPLETED"||Q.status==="completed"||!Q.status?me+(typeof be=="number"?be:0):me},0):0,[M]),R=(w==null?void 0:w.totalRevenue)||(w==null?void 0:w.todayRevenue)||P||V||0,T=(C==null?void 0:C.totalGMV)||(C==null?void 0:C.todayGMV)||0,q=(j==null?void 0:j.totalTrips)||(j==null?void 0:j.completedTrips)||0,_=y.length,D=b.length,X=h.useMemo(()=>{const me=(j==null?void 0:j.completedTrips)||0,Q=(j==null?void 0:j.activeTrips)||D,be=(j==null?void 0:j.cancelledTrips)||0;return[{name:"Completed",value:me,color:"hsl(var(--success))"},{name:"Active",value:Q,color:"hsl(var(--primary))"},{name:"Cancelled",value:be,color:"hsl(var(--destructive))"}].filter(ke=>ke.value>0)},[j,D]),ne=r||i||c||m||p||S;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Welcome back! Here's what's happening with your fleet."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(we,{variant:"secondary",className:"animate-glow",children:[e.jsx(qt,{className:"w-3 h-3 mr-1"}),"Live"]}),e.jsxs(E,{className:"bg-gradient-primary hover:opacity-90",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"View Live Map"]})]})]}),ne&&e.jsx(L,{className:"border-destructive",children:e.jsx(B,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-2 text-destructive",children:[e.jsx(xt,{className:"h-5 w-5"}),e.jsx("p",{children:"Error loading dashboard data. Please try again later."})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(L,{className:"hover-lift interactive border-metrics-border bg-metrics-bg/50",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-muted-foreground",children:"Today's Revenue"}),e.jsx(ps,{className:"h-4 w-4 text-chart-accent"})]}),e.jsx(B,{children:n||f?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-5 w-5 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:gu(R)}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center mt-1",children:[e.jsx(ir,{className:"w-3 h-3 mr-1"}),V>0?`Calculated from ${M.length} rides`:P>0?"From trips data":"Today's total revenue"]})]})})]}),e.jsxs(L,{className:"hover-lift interactive border-metrics-border bg-metrics-bg/50",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-muted-foreground",children:"On-Duty Drivers"}),e.jsx(os,{className:"h-4 w-4 text-chart-primary"})]}),e.jsx(B,{children:d?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-5 w-5 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:Dl(_)}),e.jsxs("p",{className:"text-xs text-success flex items-center mt-1",children:[e.jsx(Ie,{className:"w-3 h-3 mr-1"}),"Currently on duty"]})]})})]}),e.jsxs(L,{className:"hover-lift interactive border-metrics-border bg-metrics-bg/50",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-muted-foreground",children:"Today's Trips"}),e.jsx(fs,{className:"h-4 w-4 text-chart-secondary"})]}),e.jsx(B,{children:t?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-5 w-5 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:Dl(q)}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center mt-1",children:[e.jsx(ir,{className:"w-3 h-3 mr-1"}),"Total trips today"]})]})})]}),e.jsxs(L,{className:"hover-lift interactive border-metrics-border bg-metrics-bg/50",children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-muted-foreground",children:"Active Rides"}),e.jsx(qt,{className:"h-4 w-4 text-warning"})]}),e.jsx(B,{children:g?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-5 w-5 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:Dl(D)}),e.jsxs("p",{className:"text-xs text-warning flex items-center mt-1",children:[e.jsx(gs,{className:"w-3 h-3 mr-1"}),"Currently in progress"]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(L,{className:"hover-lift",children:[e.jsx(Y,{children:e.jsx(H,{className:"text-foreground",children:"Today's GMV"})}),e.jsx(B,{children:l?e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsx(Fe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsx("div",{className:"h-80 chart-enter",children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-foreground mb-2",children:gu(T)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gross Merchandise Value"})]})})})})]}),e.jsxs(L,{className:"hover-lift",children:[e.jsx(Y,{children:e.jsx(H,{className:"text-foreground",children:"Ride Status Distribution"})}),e.jsx(B,{children:t?e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsx(Fe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):X.length===0?e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No ride data available"})}):e.jsx("div",{className:"h-80 chart-enter",children:e.jsx(Qr,{width:"100%",height:"100%",children:e.jsxs(Dm,{children:[e.jsx(Vp,{data:X,cx:"50%",cy:"50%",labelLine:!1,label:({name:me,percent:Q})=>`${me} ${(Q*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:X.map((me,Q)=>e.jsx(Im,{fill:me.color},`cell-${Q}`))}),e.jsx(Zr,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}})]})})})})]})]}),b.length>0&&e.jsxs(L,{className:"hover-lift",children:[e.jsx(Y,{children:e.jsx(H,{className:"text-foreground",children:"Active Rides"})}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:b.slice(0,5).map((me,Q)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-2 bg-primary animate-glow"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm text-foreground",children:["Ride #",me.rideId||"N/A"," - ",me.status||"In Progress"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Driver ID: ",me.driverId||"N/A"," | Rider ID: ",me.riderId||"N/A"]})]})]},me.rideId||Q))})})]})]})},lf=h.forwardRef(({className:s,"data-testid":t,...r},a)=>e.jsx(um,{className:le("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),"data-testid":t,...r,ref:a,children:e.jsx(Zf,{className:le("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));lf.displayName=um.displayName;const et=h.forwardRef(({className:s,...t},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:le("w-full caption-bottom text-sm",s),...t})}));et.displayName="Table";const st=h.forwardRef(({className:s,...t},r)=>e.jsx("thead",{ref:r,className:le("[&_tr]:border-b",s),...t}));st.displayName="TableHeader";const tt=h.forwardRef(({className:s,...t},r)=>e.jsx("tbody",{ref:r,className:le("[&_tr:last-child]:border-0",s),...t}));tt.displayName="TableBody";const YC=h.forwardRef(({className:s,...t},r)=>e.jsx("tfoot",{ref:r,className:le("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));YC.displayName="TableFooter";const Ue=h.forwardRef(({className:s,...t},r)=>e.jsx("tr",{ref:r,className:le("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));Ue.displayName="TableRow";const oe=h.forwardRef(({className:s,...t},r)=>e.jsx("th",{ref:r,className:le("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t}));oe.displayName="TableHead";const re=h.forwardRef(({className:s,...t},r)=>e.jsx("td",{ref:r,className:le("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t}));re.displayName="TableCell";const zC=h.forwardRef(({className:s,...t},r)=>e.jsx("caption",{ref:r,className:le("mt-4 text-sm text-muted-foreground",s),...t}));zC.displayName="TableCaption";const dt=({currentPage:s,totalPages:t,totalItems:r,itemsPerPage:a,onPageChange:n,onItemsPerPageChange:i,itemsPerPageOptions:o=[10,25,50,100],siblingCount:l=1,showItemsPerPageSelector:c=!0,showTotalItems:u=!0,className:d})=>{const m=(w,C)=>{const y=C-w+1;return Array.from({length:y},(b,v)=>v+w)},g=(()=>{const w=l*2+5;if(t<=w)return m(1,t);const C=Math.max(s-l,1),y=Math.min(s+l,t),b=C>2,v=y<t-1;if(!b&&v){let M=3+2*l;return[...m(1,M),"...",t]}if(b&&!v){let M=3+2*l;return[1,"...",...m(t-M+1,t)]}return b&&v?[1,"...",...m(C,y),"...",t]:m(1,t)})(),p=w=>{w>=1&&w<=t&&n(w)},N=w=>{if(w==="left"){const C=Math.max(1,s-l*3);p(C)}else{const C=Math.min(t,s+l*3);p(C)}},f=w=>{const C=parseInt(w);i&&i(C)},S=r===0?0:(s-1)*a+1,j=Math.min(s*a,r);return e.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-between gap-4 px-2 ${d}`,children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[u&&e.jsxs("div",{children:["Showing ",S," to ",j," of ",r," items"]}),c&&i&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Rows per page:"}),e.jsxs(ge,{value:a.toString(),onValueChange:f,children:[e.jsx(fe,{className:"h-8 w-16",children:e.jsx(je,{})}),e.jsx(pe,{children:o.map(w=>e.jsx(A,{value:w.toString(),children:w},w))})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>p(1),disabled:s===1,children:e.jsx(wp,{className:"h-4 w-4"})}),e.jsx(E,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>p(s-1),disabled:s===1,children:e.jsx(Ki,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:g.map((w,C)=>{if(w==="..."){const b=C===1,v=b?Math.max(1,s-l*3):Math.min(t,s+l*3),M=b?`Jump back to page ${v}`:`Jump forward to page ${v}`;return e.jsx(E,{variant:"outline",size:"sm",className:"h-8 w-12 p-0 hover:bg-primary hover:text-primary-foreground transition-colors border-dashed",onClick:()=>N(b?"left":"right"),title:M,"aria-label":M,children:e.jsx("span",{className:"text-xs font-medium",children:"..."})},`ellipsis-${C}`)}const y=w;return e.jsx(E,{variant:s===y?"default":"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>p(y),children:y},y)})}),e.jsx(E,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>p(s+1),disabled:s===t,children:e.jsx(ni,{className:"h-4 w-4"})}),e.jsx(E,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>p(t),disabled:s===t,children:e.jsx(Cp,{className:"h-4 w-4"})})]})]})};function dc(s,t={}){const r=h.useCallback(async()=>{const n=await Me.get(`/drivers/${s}`);return n.data?n.data:n},[s]),a=Cs({queryKey:["driver",s],queryFn:r,enabled:t.enabled!==!1&&!!s});return h.useEffect(()=>{a.isSuccess&&a.data&&t.onSuccess&&t.onSuccess(a.data)},[a.isSuccess,a.data,t.onSuccess]),h.useEffect(()=>{a.isError&&a.error&&t.onError&&t.onError(a.error)},[a.isError,a.error,t.onError]),{...a,data:a.data,loading:a.isLoading||a.isFetching,error:a.error}}function HC(s={},t={}){const r=h.useCallback(async()=>{const a={};s.page!==void 0&&(a.page=s.page),s.size!==void 0&&(a.size=s.size),s.sort&&s.sort.length>0&&(a.sort=s.sort),s.search&&(a.search=s.search),s.status&&(a.status=s.status),s.kycStatus&&(a.kycStatus=s.kycStatus),s.isActive!==void 0&&(a.isActive=s.isActive);const n=await Me.get("/drivers/list",a);return n.data?n.data:Array.isArray(n)?{content:n,page:{size:n.length,number:0,totalElements:n.length,totalPages:1},first:!0,last:!0,empty:n.length===0}:n},[s.page,s.size,s.sort,s.search,s.status,s.kycStatus,s.isActive]);return Cs({queryKey:["drivers",s],queryFn:r,enabled:t.enabled!==!1,onSuccess:t.onSuccess,onError:t.onError})}function of(s={}){return Le({mutationFn:async t=>await Me.post("/drivers",t),onSuccess:s.onSuccess,onError:s.onError})}function cf(s={}){return Le({mutationFn:async({id:t,data:r})=>await Me.put(`/drivers/${t}`,r),onSuccess:s.onSuccess,onError:s.onError})}function GC(s={}){return Le({mutationFn:async t=>{var a;const r=await Me.delete(`/drivers/${t.driverId}`);if(t.email)try{const n=await Me.get(`/api/admin/user-by-email?email=${encodeURIComponent(t.email)}`);(a=n.data)!=null&&a.id&&await Me.delete(`/api/admin/${n.data.id}`)}catch(n){console.warn("Failed to delete corresponding user:",n)}return r},onSuccess:s.onSuccess,onError:s.onError})}function QC(s={}){return Le({mutationFn:async t=>await Me.get(`/drivers/toggle-active-status/${t}`),onSuccess:s.onSuccess,onError:s.onError})}function ZC(s={}){return Le({mutationFn:async({driverId:t,file:r})=>{const a=new FormData;return a.append("profilePhotoUrl",r),await Me.put(`/drivers/upload-profile-photo/${t}`,a)},onSuccess:s.onSuccess,onError:s.onError})}function XC(s={}){return Le({mutationFn:async({driverId:t,govtIdType:r,govtIdNumber:a,files:n})=>{const i=new FormData;i.append("govtIdFrontUrl",n.govtIdFrontUrl),i.append("govtIdBackUrl",n.govtIdBackUrl),i.append("drivingLicenseFrontUrl",n.drivingLicenseFrontUrl),i.append("drivingLicenseBackUrl",n.drivingLicenseBackUrl),i.append("selfieWithIdUrl",n.selfieWithIdUrl);const o={govtIdType:r,govtIdNumber:a,driverId:t};return await Me.post("/drivers/upload-kyc-documents",i,{params:o})},onSuccess:s.onSuccess,onError:s.onError})}function JC(s={}){return Le({mutationFn:async({driverId:t,vehicleType:r,vehicleCategoryId:a,vehicleMake:n,vehicleModel:i,vehicleRegistrationNumber:o,yearOfManufacture:l,vehicleColor:c,seatingCapacity:u,luggageCapacity:d,files:m})=>{const x=new FormData;x.append("ownershipDocUrl",m.ownershipDocUrl),x.append("insuranceDocUrl",m.insuranceDocUrl),x.append("roadTaxDocUrl",m.roadTaxDocUrl);const g={driverId:t,vehicleType:r,vehicleCategoryId:a,vehicleMake:n,vehicleModel:i,vehicleRegistrationNumber:o,yearOfManufacture:l,vehicleColor:c,seatingCapacity:u,luggageCapacity:d};return await Me.post("/drivers/upload-vehicle-details",x,{params:g})},onSuccess:s.onSuccess,onError:s.onError})}function eS(s={}){return Le({mutationFn:async({driverId:t,vehicleType:r,vehicleCategoryId:a,vehicleMake:n,vehicleModel:i,vehicleRegistrationNumber:o,yearOfManufacture:l,vehicleColor:c,seatingCapacity:u,luggageCapacity:d})=>{const m={vehicleType:r,vehicleCategoryId:a,vehicleMake:n,vehicleModel:i,vehicleRegistrationNumber:o,yearOfManufacture:l,vehicleColor:c,seatingCapacity:u,luggageCapacity:d};return await Me.put(`/drivers/update-vehicle-details/${t}`,null,{params:m})},onSuccess:s.onSuccess,onError:s.onError})}function sS(s={}){return Le({mutationFn:async({driverId:t,bankAccountHolderName:r,bankName:a,accountNumber:n,ifscCode:i,swiftCode:o,eWalletId:l,paymentFrequency:c})=>{const u={driverId:t,bankAccountHolderName:r,bankName:a,accountNumber:n,ifscCode:i,swiftCode:o,eWalletId:l,paymentFrequency:c};return await Me.post("/drivers/banking-and-payout-info",null,{params:u})},onSuccess:s.onSuccess,onError:s.onError})}function tS(s={}){return Le({mutationFn:async({driverId:t,bankAccountHolderName:r,bankName:a,accountNumber:n,ifscCode:i,swiftCode:o,eWalletId:l,paymentFrequency:c})=>{const u={bankAccountHolderName:r,bankName:a,accountNumber:n,ifscCode:i,swiftCode:o,eWalletId:l,paymentFrequency:c};return await Me.put(`/drivers/update-banking-and-payout-info/${t}`,null,{params:u})},onSuccess:s.onSuccess,onError:s.onError})}function rS(s={}){return Le({mutationFn:async({id:t,data:r})=>await Me.put(`/drivers/update-personal-details/${t}`,r),onSuccess:s.onSuccess,onError:s.onError})}function aS(s={}){return Le({mutationFn:async t=>await Me.put(`/drivers/approve-kyc-documents/${t}`),onSuccess:s.onSuccess,onError:s.onError})}function nS(s={}){return Le({mutationFn:async({driverId:t,rejectionReason:r})=>await Me.put(`/drivers/reject-kyc-documents/${t}`,null,{params:{rejectionReason:r}}),onSuccess:s.onSuccess,onError:s.onError})}function iS(s={}){return Le({mutationFn:async t=>await Me.put(`/drivers/keepinview-kyc-documents/${t}`),onSuccess:s.onSuccess,onError:s.onError})}function lS(s={}){return Le({mutationFn:async t=>await Me.get("/drivers/driver-document-download",{filePath:t},{responseType:"blob"}),onSuccess:s.onSuccess,onError:s.onError})}const Fr=Jf,oS=Xf,df=h.forwardRef(({className:s,...t},r)=>e.jsx(mm,{className:le("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));df.displayName=mm.displayName;const dr=h.forwardRef(({className:s,...t},r)=>e.jsxs(oS,{children:[e.jsx(df,{}),e.jsx(hm,{ref:r,className:le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));dr.displayName=hm.displayName;const ur=({className:s,...t})=>e.jsx("div",{className:le("flex flex-col space-y-2 text-center sm:text-left",s),...t});ur.displayName="AlertDialogHeader";const mr=({className:s,...t})=>e.jsx("div",{className:le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});mr.displayName="AlertDialogFooter";const hr=h.forwardRef(({className:s,...t},r)=>e.jsx(xm,{ref:r,className:le("text-lg font-semibold",s),...t}));hr.displayName=xm.displayName;const xr=h.forwardRef(({className:s,...t},r)=>e.jsx(fm,{ref:r,className:le("text-sm text-muted-foreground",s),...t}));xr.displayName=fm.displayName;const fr=h.forwardRef(({className:s,...t},r)=>e.jsx(pm,{ref:r,className:le(Wn(),s),...t}));fr.displayName=pm.displayName;const pr=h.forwardRef(({className:s,...t},r)=>e.jsx(gm,{ref:r,className:le(Wn({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));pr.displayName=gm.displayName;const cS=({open:s,onOpenChange:t,driverName:r,driverId:a,onConfirm:n,isLoading:i=!1})=>{const o=()=>{n(a)};return e.jsx(Fr,{open:s,onOpenChange:t,children:e.jsxs(dr,{children:[e.jsxs(ur,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"h-5 w-5 text-destructive"}),e.jsx(hr,{children:"Delete Driver"})]}),e.jsxs(xr,{className:"text-left",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-semibold",children:r}),"? This action cannot be undone and will permanently remove:",e.jsxs("ul",{className:"mt-2 ml-4 list-disc space-y-1 text-sm",children:[e.jsx("li",{children:"All driver profile information"}),e.jsx("li",{children:"Vehicle and document details"}),e.jsx("li",{children:"Banking and payment information"}),e.jsx("li",{children:"Historical ride data and earnings"})]}),e.jsx("div",{className:"mt-3 p-3 bg-destructive/10 border border-destructive/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-destructive font-medium",children:[e.jsx("strong",{children:"Warning:"})," This action is permanent and cannot be reversed."]})})]})]}),e.jsxs(mr,{children:[e.jsx(pr,{disabled:i,children:"Cancel"}),e.jsx(fr,{onClick:o,disabled:i,className:"bg-destructive hover:bg-destructive/90",children:i?"Deleting...":"Delete Driver"})]})]})})},uf=({status:s,size:t="md",className:r=""})=>{const a=(s==null?void 0:s.toUpperCase())||"PENDING",i=(()=>{switch(a){case"APPROVED":return{label:"Approved",className:"bg-success text-success-foreground",icon:Ie};case"REJECTED":return{label:"Rejected",className:"bg-destructive text-destructive-foreground",icon:vt};case"KEEP_IN_VIEW":case"KEEPINVIEW":return{label:"Keep in View",className:"bg-blue-500 text-white",icon:Je};case"PENDING":default:return{label:"Pending",className:"bg-warning text-warning-foreground",icon:gs}}})(),o=i.icon,l={sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"},c={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};return e.jsxs(we,{className:`${i.className} ${l[t]} ${r} inline-flex items-center gap-1.5`,children:[e.jsx(o,{className:c[t]}),i.label]})},dS=()=>{var xe,ce;const s=Ye(),t=ze(),[r,a]=h.useState(""),[n,i]=h.useState("all"),[o,l]=h.useState("all"),[c,u]=h.useState("all"),[d,m]=h.useState(0),[x,g]=h.useState(10),[p,N]=h.useState(!1),[f,S]=h.useState(null);h.useEffect(()=>{m(0)},[n,o,c,r]);const{mutate:j,isPending:w}=GC({onSuccess:async(ae,W)=>{I.success("Driver deleted successfully! Corresponding user account has also been removed."),await t.invalidateQueries({queryKey:["drivers"]})},onError:(ae,W)=>{I.error(`Failed to delete driver: ${ae.message}`)}}),{mutate:C,isPending:y}=QC({onSuccess:async(ae,W)=>{I.success("Driver status updated successfully!");const F={page:d,size:x,...r&&{search:r},...n!=="all"&&{status:n},...o!=="all"&&{kycStatus:o},...c!=="all"&&{isActive:c==="active"}};await t.invalidateQueries({queryKey:["drivers",F]})},onError:(ae,W)=>{I.error(`Failed to update driver status: ${ae.message}`);const F={page:d,size:x,...r&&{search:r},...n!=="all"&&{status:n},...o!=="all"&&{kycStatus:o},...c!=="all"&&{isActive:c==="active"}};t.invalidateQueries({queryKey:["drivers",F]})}}),b=ae=>{if(!ae.driverId){I.error("Driver ID is missing. Cannot update status.");return}const W=ae.isActive??!0,F=ae.driverId,te={page:d,size:x,...r&&{search:r},...n!=="all"&&{status:n},...o!=="all"&&{kycStatus:o},...c!=="all"&&{isActive:c==="active"}},ye=!W;t.setQueryData(["drivers",te],se=>{if(!(se!=null&&se.content))return se;const Z=se.content.map(U=>U.driverId===F?{...U,isActive:ye}:U);return{...se,content:Z}}),C(F)},{data:v,isLoading:M,error:P,refetch:V}=HC({page:d,size:x,...r&&{search:r},...n!=="all"&&{status:n},...o!=="all"&&{kycStatus:o},...c!=="all"&&{isActive:c==="active"}},{onError:ae=>{I.error(`Failed to load drivers: ${ae.message}`)}}),R=ae=>{const W=(ae==null?void 0:ae.toLowerCase())||"offline",F={online:{variant:"default",className:"bg-success text-success-foreground"},active:{variant:"default",className:"bg-success text-success-foreground"},busy:{variant:"secondary",className:"bg-warning text-warning-foreground"},offline:{variant:"secondary",className:"bg-muted text-muted-foreground"},inactive:{variant:"secondary",className:"bg-muted text-muted-foreground"},suspended:{variant:"destructive",className:"bg-destructive text-destructive-foreground"},pending:{variant:"secondary",className:"bg-muted text-muted-foreground"}};return F[W]||F.offline},T=(ae,W,F)=>{s(`/admin/drivers/create?driverId=${W}`)},q=(ae,W,F)=>{S({id:ae,name:W,email:F}),N(!0)},_=()=>{f&&(j({driverId:f.id,email:f.email}),N(!1),S(null))},D=()=>{N(!1),S(null)},X=h.useMemo(()=>{const ae=v;return!ae||!ae.content?[]:ae.content},[v]),ne=v,me=((xe=ne==null?void 0:ne.page)==null?void 0:xe.totalElements)??0,Q=((ce=ne==null?void 0:ne.page)==null?void 0:ce.totalPages)??0,be=ae=>{m(ae-1)},ke=ae=>{g(ae),m(0)},K=ae=>ae.fullName||ae.email||"Unknown Driver",G=ae=>ae.email||"N/A",ue=ae=>ae.phoneNumber||"N/A",de=ae=>ae.vehicleMake&&ae.vehicleModel&&ae.vehicleYear?`${ae.vehicleMake} ${ae.vehicleModel} ${ae.vehicleYear}`:ae.vehicleType||"N/A";return M?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading drivers..."})]})}):P?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(vt,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Drivers"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:P.message}),e.jsx(E,{onClick:()=>V(),children:"Try Again"})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Driver Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and monitor your driver network"})]}),e.jsxs(E,{className:"bg-gradient-primary hover:opacity-90",onClick:()=>s("/admin/drivers/create"),children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add New Driver"]})]}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search drivers by name or email...",className:"pl-10",value:r,onChange:ae=>a(ae.target.value)})]}),e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"w-[140px]",children:[e.jsx(zi,{className:"w-4 h-4 mr-2"}),n==="all"?"Status":n.charAt(0).toUpperCase()+n.slice(1)]})}),e.jsxs(Ss,{children:[e.jsx(Pe,{onSelect:()=>i("all"),children:"All Status"}),e.jsx(Pe,{onSelect:()=>i("online"),children:"Online"}),e.jsx(Pe,{onSelect:()=>i("busy"),children:"Busy"}),e.jsx(Pe,{onSelect:()=>i("offline"),children:"Offline"}),e.jsx(Pe,{onSelect:()=>i("suspended"),children:"Suspended"})]})]}),e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"w-[140px]",children:[e.jsx(Sc,{className:"w-4 h-4 mr-2"}),o==="all"?"KYC":o]})}),e.jsxs(Ss,{children:[e.jsx(Pe,{onSelect:()=>l("all"),children:"All KYC"}),e.jsx(Pe,{onSelect:()=>l("PENDING"),children:"Pending"}),e.jsx(Pe,{onSelect:()=>l("APPROVED"),children:"Approved"}),e.jsx(Pe,{onSelect:()=>l("REJECTED"),children:"Rejected"}),e.jsx(Pe,{onSelect:()=>l("KEEP_IN_VIEW"),children:"Keep in View"})]})]}),e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"w-[140px]",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),c==="all"?"Active":c==="active"?"Active Only":"Inactive Only"]})}),e.jsxs(Ss,{children:[e.jsx(Pe,{onSelect:()=>u("all"),children:"All"}),e.jsx(Pe,{onSelect:()=>u("active"),children:"Active Only"}),e.jsx(Pe,{onSelect:()=>u("inactive"),children:"Inactive Only"})]})]})]})})}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{children:["Drivers (",me,")"]})}),e.jsx(B,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Driver"}),e.jsx(oe,{children:"Contact"}),e.jsx(oe,{children:"KYC Status"}),e.jsx(oe,{children:"Active"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{children:"Rating"}),e.jsx(oe,{children:"Total Rides"}),e.jsx(oe,{children:"Vehicle"}),e.jsx(oe,{children:"Earnings"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:X.length===0?e.jsx(Ue,{children:e.jsx(re,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No drivers found"})}):X.map(ae=>{var se,Z,U;const W=ae.driverStatus||ae.availabilityStatus||"offline",F=R(W),te=K(ae),ye=te.split(" ").map(he=>he[0]).join("").toUpperCase().slice(0,2);return e.jsxs(Ue,{className:"hover:bg-muted/50",children:[e.jsx(re,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Kt,{children:e.jsx(Yt,{children:ye})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:te}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",ae.driverId]})]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 text-muted-foreground"}),G(ae)]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ra,{className:"w-3 h-3 mr-1 text-muted-foreground"}),ue(ae)]})]})}),e.jsx(re,{children:e.jsx(uf,{status:ae.kycStatus||"PENDING",size:"sm"})}),e.jsx(re,{children:e.jsx(lf,{"data-testid":`driver-active-switch-${ae.driverId}`,checked:ae.isActive??!0,disabled:y,onCheckedChange:()=>b(ae)})}),e.jsx(re,{children:e.jsxs(we,{className:F.className,children:[W.toLowerCase()==="online"&&e.jsx(Ie,{className:"w-3 h-3 mr-1"}),W.toLowerCase()==="active"&&e.jsx(Ie,{className:"w-3 h-3 mr-1"}),W.toLowerCase()==="busy"&&e.jsx(gs,{className:"w-3 h-3 mr-1"}),W.toLowerCase()==="offline"&&e.jsx(vt,{className:"w-3 h-3 mr-1"}),W.toLowerCase()==="inactive"&&e.jsx(vt,{className:"w-3 h-3 mr-1"}),W.toLowerCase()==="suspended"&&e.jsx(km,{className:"w-3 h-3 mr-1"}),W.charAt(0).toUpperCase()+W.slice(1)]})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(nr,{className:"w-4 h-4 text-chart-accent mr-1"}),((se=ae.averageRating)==null?void 0:se.toFixed(1))||"N/A"]})}),e.jsx(re,{children:((Z=ae.totalRidesCompleted)==null?void 0:Z.toLocaleString())||0}),e.jsx(re,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:de(ae)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ae.vehicleLicensePlate||""})]})}),e.jsxs(re,{children:["$",((U=ae.totalEarnings)==null?void 0:U.toLocaleString())||0]}),e.jsx(re,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(Mr,{className:"w-4 h-4"})})}),e.jsxs(Ss,{align:"end",children:[e.jsxs(Pe,{onClick:()=>T("Edit Details",ae.driverId||0),children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Details"]}),e.jsxs(Pe,{onClick:()=>s(`/admin/drivers/${ae.driverId}`),children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(Pe,{onClick:()=>s(`/admin/drivers/${ae.driverId}?tab=kyc`),children:[e.jsx(Sc,{className:"w-4 h-4 mr-2"}),"KYC Review"]}),e.jsx(ka,{}),e.jsxs(Pe,{onClick:()=>q(ae.driverId||0,te,G(ae)),className:"text-destructive",children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Delete Driver"]})]})]})})]},ae.driverId)})})]}),X.length>0&&Q>0&&e.jsx(dt,{currentPage:d+1,totalPages:Q,totalItems:me,itemsPerPage:x,onPageChange:be,onItemsPerPageChange:ke,className:"mt-4"})]})})]}),e.jsx(cS,{open:p,onOpenChange:D,driverName:(f==null?void 0:f.name)||"",driverId:(f==null?void 0:f.id)||0,onConfirm:_,isLoading:w})]})};var uS=function(s,t){for(var r={};s.length;){var a=s[0],n=a.code,i=a.message,o=a.path.join(".");if(!r[o])if("unionErrors"in a){var l=a.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:n};if("unionErrors"in a&&a.unionErrors.forEach(function(d){return d.errors.forEach(function(m){return s.push(m)})}),t){var c=r[o].types,u=c&&c[a.code];r[o]=Op(o,t,r,n,u?[].concat(u,a.message):a.message)}s.shift()}return r},Lt=function(s,t,r){return r===void 0&&(r={}),function(a,n,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(s[r.mode==="sync"?"parse":"parseAsync"](a,t)).then(function(u){return i.shouldUseNativeValidation&&Ep({},i),{errors:{},values:r.raw?a:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Mp(uS(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const Ra=ep,na=h.forwardRef(({className:s,...t},r)=>e.jsx(jm,{ref:r,className:le("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...t}));na.displayName=jm.displayName;const es=h.forwardRef(({className:s,...t},r)=>e.jsx(vm,{ref:r,className:le("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...t}));es.displayName=vm.displayName;const ss=h.forwardRef(({className:s,...t},r)=>e.jsx(ym,{ref:r,className:le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));ss.displayName=ym.displayName;const mS=At({phoneNumber:ee().min(10,"Phone number must be at least 10 digits").max(20,"Phone number must not exceed 20 digits").regex(/^\+?[\d\s\-\(\)]+$/,"Invalid phone number format. Use digits, spaces, hyphens, and parentheses only"),email:ee().email("Invalid email address").optional().or(Qe("")),fullName:ee().min(2,"Full name is required"),dateOfBirth:ee().optional(),gender:ee().optional(),address:ee().optional(),emergencyContactNumber:ee().optional(),preferredLanguage:ee().optional(),profilePhotoUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),govtIdType:ee().optional(),govtIdNumber:ee().optional(),govtIdFrontUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),govtIdBackUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),drivingLicenseFrontUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),drivingLicenseBackUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),selfieWithIdUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),vehicleType:ee().optional(),vehicleMake:ee().optional(),vehicleModel:ee().optional(),vehicleRegistrationNumber:ee().optional(),yearOfManufacture:ms().min(1900).max(new Date().getFullYear()+1).optional().or(Qe("")),vehicleColor:ee().optional(),seatingCapacity:ms().min(1).optional().or(Qe("")),luggageCapacity:ms().min(0).optional().or(Qe("")),ownershipDocUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),insuranceDocUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),roadTaxDocUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),bankAccountHolderName:ee().optional(),bankName:ee().optional(),accountNumber:ee().optional(),ifscCode:ee().optional(),swiftCode:ee().optional(),paymentFrequency:ee().optional(),deviceType:ee().optional(),osVersion:ee().optional(),fcmToken:ee().optional(),appVersion:ee().optional(),geolocationPermission:ot().optional(),signupMethod:ee().optional(),otpVerified:ot().optional(),termsConsent:ot().optional(),ewalletId:ee().optional()}),hS=()=>{const s=Ye(),[t,r]=h.useState("personal"),[a,n]=h.useState({}),{mutate:i,isLoading:o}=of({onSuccess:f=>{I.success("Driver created successfully!"),s("/admin/drivers")},onError:f=>{I.error(`Failed to create driver: ${f.message}`)}}),{register:l,handleSubmit:c,formState:{errors:u},watch:d,setValue:m,control:x}=ft({resolver:Lt(mS),defaultValues:{otpVerified:!1,geolocationPermission:!1,termsConsent:!1}}),g=async(f,S)=>{var w;const j=(w=f.target.files)==null?void 0:w[0];if(j){n(y=>({...y,[S]:j}));const C=new FileReader;C.onloadend=()=>{const y=C.result;m(S,y)},C.readAsDataURL(j)}},p=(f,S,j)=>{var y;const w=a[f],C=d(f);return e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{children:S}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{type:"file",accept:"image/*,.pdf",onChange:b=>g(b,f),className:"flex-1"}),w&&e.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:w.name})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsx(O,{...l(f),placeholder:j,value:C||""}),u[f]&&e.jsx("p",{className:"text-sm text-destructive",children:(y=u[f])==null?void 0:y.message}),C&&e.jsx("p",{className:"text-xs text-muted-foreground",children:C.startsWith("data:")?"File uploaded":"URL provided"})]})]})},N=f=>{var j,w,C,y,b,v,M,P,V,R,T,q,_,D;const S={phoneNumber:f.phoneNumber.trim(),email:((j=f.email)==null?void 0:j.trim())||void 0,fullName:f.fullName.trim(),dateOfBirth:f.dateOfBirth||void 0,gender:f.gender||void 0,address:((w=f.address)==null?void 0:w.trim())||void 0,emergencyContactNumber:((C=f.emergencyContactNumber)==null?void 0:C.trim())||void 0,preferredLanguage:f.preferredLanguage||void 0,profilePhotoUrl:((y=f.profilePhotoUrl)==null?void 0:y.trim())||void 0,govtIdType:f.govtIdType||void 0,govtIdNumber:f.govtIdNumber||void 0,govtIdFrontUrl:f.govtIdFrontUrl||void 0,govtIdBackUrl:f.govtIdBackUrl||void 0,drivingLicenseFrontUrl:f.drivingLicenseFrontUrl||void 0,drivingLicenseBackUrl:f.drivingLicenseBackUrl||void 0,selfieWithIdUrl:f.selfieWithIdUrl||void 0,vehicleType:f.vehicleType||void 0,vehicleMake:((b=f.vehicleMake)==null?void 0:b.trim())||void 0,vehicleModel:((v=f.vehicleModel)==null?void 0:v.trim())||void 0,vehicleRegistrationNumber:((M=f.vehicleRegistrationNumber)==null?void 0:M.trim())||void 0,yearOfManufacture:f.yearOfManufacture?Number(f.yearOfManufacture):void 0,vehicleColor:f.vehicleColor||void 0,seatingCapacity:f.seatingCapacity?Number(f.seatingCapacity):void 0,luggageCapacity:f.luggageCapacity?Number(f.luggageCapacity):void 0,ownershipDocUrl:f.ownershipDocUrl||void 0,insuranceDocUrl:f.insuranceDocUrl||void 0,roadTaxDocUrl:f.roadTaxDocUrl||void 0,bankAccountHolderName:((P=f.bankAccountHolderName)==null?void 0:P.trim())||void 0,bankName:((V=f.bankName)==null?void 0:V.trim())||void 0,accountNumber:((R=f.accountNumber)==null?void 0:R.trim())||void 0,ifscCode:((T=f.ifscCode)==null?void 0:T.trim())||void 0,swiftCode:((q=f.swiftCode)==null?void 0:q.trim())||void 0,paymentFrequency:f.paymentFrequency||void 0,deviceType:f.deviceType||void 0,osVersion:f.osVersion||void 0,fcmToken:((_=f.fcmToken)==null?void 0:_.trim())||void 0,appVersion:f.appVersion||void 0,geolocationPermission:f.geolocationPermission||!1,signupMethod:f.signupMethod||void 0,otpVerified:f.otpVerified||!1,termsConsent:f.termsConsent||!1,ewalletId:((D=f.ewalletId)==null?void 0:D.trim())||void 0,isDeletedValue:!1,signupStatus:"PENDING"};i(S)};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>s("/admin/drivers"),className:"hover:bg-muted",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Add New Driver"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Register a new driver to the platform"})]})]})}),e.jsxs("form",{onSubmit:c(N),children:[e.jsxs(Ra,{value:t,onValueChange:r,className:"space-y-6",children:[e.jsxs(na,{className:"grid w-full grid-cols-5",children:[e.jsxs(es,{value:"personal",children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Personal"]}),e.jsxs(es,{value:"documents",children:[e.jsx(ar,{className:"w-4 h-4 mr-2"}),"Documents"]}),e.jsxs(es,{value:"vehicle",children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Vehicle"]}),e.jsxs(es,{value:"banking",children:[e.jsx(Er,{className:"w-4 h-4 mr-2"}),"Banking"]}),e.jsxs(es,{value:"additional",children:[e.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Additional"]})]}),e.jsx(ss,{value:"personal",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Personal Information"}),e.jsx($e,{children:"Enter the driver's personal details"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"phoneNumber",children:"Phone Number *"}),e.jsx(O,{id:"phoneNumber",...l("phoneNumber"),placeholder:"+1234567890"}),u.phoneNumber&&e.jsx("p",{className:"text-sm text-destructive",children:u.phoneNumber.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Email"}),e.jsx(O,{id:"email",type:"email",...l("email"),placeholder:"driver@example.com"}),u.email&&e.jsx("p",{className:"text-sm text-destructive",children:u.email.message})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(O,{id:"fullName",...l("fullName"),placeholder:"John Doe"}),u.fullName&&e.jsx("p",{className:"text-sm text-destructive",children:u.fullName.message})]}),e.jsx(hi,{control:x,name:"dateOfBirth",label:"Date of Birth",placeholder:"Select date of birth"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"gender",children:"Gender"}),e.jsxs(ge,{onValueChange:f=>m("gender",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select gender"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"male",children:"Male"}),e.jsx(A,{value:"female",children:"Female"}),e.jsx(A,{value:"other",children:"Other"}),e.jsx(A,{value:"prefer_not_to_say",children:"Prefer not to say"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{htmlFor:"address",children:"Address"}),e.jsx(O,{id:"address",...l("address"),placeholder:"123 Main St, City, State, ZIP"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"emergencyContactNumber",children:"Emergency Contact Number"}),e.jsx(O,{id:"emergencyContactNumber",...l("emergencyContactNumber"),placeholder:"+1234567890"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"preferredLanguage",children:"Preferred Language"}),e.jsxs(ge,{onValueChange:f=>m("preferredLanguage",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select language"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"en",children:"English"}),e.jsx(A,{value:"es",children:"Spanish"}),e.jsx(A,{value:"fr",children:"French"}),e.jsx(A,{value:"de",children:"German"}),e.jsx(A,{value:"hi",children:"Hindi"})]})]})]}),p("profilePhotoUrl","Profile Photo","https://example.com/photo.jpg"),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"signupMethod",children:"Signup Method"}),e.jsxs(ge,{onValueChange:f=>m("signupMethod",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select signup method"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"email",children:"Email"}),e.jsx(A,{value:"phone",children:"Phone"}),e.jsx(A,{value:"google",children:"Google"}),e.jsx(A,{value:"facebook",children:"Facebook"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(We,{id:"otpVerified",...l("otpVerified"),onCheckedChange:f=>m("otpVerified",f)}),e.jsx(k,{htmlFor:"otpVerified",className:"cursor-pointer",children:"OTP Verified"})]})]})})]})}),e.jsx(ss,{value:"documents",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Government ID & Documents"}),e.jsx($e,{children:"Upload driver identification documents"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"govtIdType",children:"Government ID Type"}),e.jsxs(ge,{onValueChange:f=>m("govtIdType",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select ID type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"passport",children:"Passport"}),e.jsx(A,{value:"national_id",children:"National ID"}),e.jsx(A,{value:"driving_license",children:"Driving License"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"govtIdNumber",children:"Government ID Number"}),e.jsx(O,{id:"govtIdNumber",...l("govtIdNumber"),placeholder:"ID number"})]}),p("govtIdFrontUrl","Government ID Front","https://example.com/doc-front.jpg"),p("govtIdBackUrl","Government ID Back","https://example.com/doc-back.jpg"),p("drivingLicenseFrontUrl","Driving License Front","https://example.com/license-front.jpg"),p("drivingLicenseBackUrl","Driving License Back","https://example.com/license-back.jpg"),p("selfieWithIdUrl","Selfie with ID","https://example.com/selfie.jpg")]})})]})}),e.jsx(ss,{value:"vehicle",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Vehicle Information"}),e.jsx($e,{children:"Enter vehicle details"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleType",children:"Vehicle Type"}),e.jsxs(ge,{onValueChange:f=>m("vehicleType",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select vehicle type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"sedan",children:"Sedan"}),e.jsx(A,{value:"suv",children:"SUV"}),e.jsx(A,{value:"hatchback",children:"Hatchback"}),e.jsx(A,{value:"coupe",children:"Coupe"}),e.jsx(A,{value:"van",children:"Van"}),e.jsx(A,{value:"truck",children:"Truck"}),e.jsx(A,{value:"motorcycle",children:"Motorcycle"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleMake",children:"Vehicle Make"}),e.jsx(O,{id:"vehicleMake",...l("vehicleMake"),placeholder:"Toyota"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleModel",children:"Vehicle Model"}),e.jsx(O,{id:"vehicleModel",...l("vehicleModel"),placeholder:"Camry"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleRegistrationNumber",children:"Registration Number"}),e.jsx(O,{id:"vehicleRegistrationNumber",...l("vehicleRegistrationNumber"),placeholder:"ABC-1234"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"yearOfManufacture",children:"Year of Manufacture"}),e.jsx(O,{id:"yearOfManufacture",type:"number",...l("yearOfManufacture",{valueAsNumber:!0}),placeholder:"2020",min:"1900",max:new Date().getFullYear()+1}),u.yearOfManufacture&&e.jsx("p",{className:"text-sm text-destructive",children:u.yearOfManufacture.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleColor",children:"Vehicle Color"}),e.jsx(O,{id:"vehicleColor",...l("vehicleColor"),placeholder:"White"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"seatingCapacity",children:"Seating Capacity"}),e.jsx(O,{id:"seatingCapacity",type:"number",...l("seatingCapacity",{valueAsNumber:!0}),placeholder:"4",min:"1"}),u.seatingCapacity&&e.jsx("p",{className:"text-sm text-destructive",children:u.seatingCapacity.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"luggageCapacity",children:"Luggage Capacity"}),e.jsx(O,{id:"luggageCapacity",type:"number",...l("luggageCapacity",{valueAsNumber:!0}),placeholder:"2",min:"0"}),u.luggageCapacity&&e.jsx("p",{className:"text-sm text-destructive",children:u.luggageCapacity.message})]}),p("ownershipDocUrl","Ownership Document","https://example.com/ownership.pdf"),p("insuranceDocUrl","Insurance Document","https://example.com/insurance.pdf"),p("roadTaxDocUrl","Road Tax Document","https://example.com/roadtax.pdf")]})})]})}),e.jsx(ss,{value:"banking",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Banking Information"}),e.jsx($e,{children:"Enter banking details for payments"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{htmlFor:"bankAccountHolderName",children:"Account Holder Name"}),e.jsx(O,{id:"bankAccountHolderName",...l("bankAccountHolderName"),placeholder:"John Doe"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"bankName",children:"Bank Name"}),e.jsx(O,{id:"bankName",...l("bankName"),placeholder:"ABC Bank"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"accountNumber",children:"Account Number"}),e.jsx(O,{id:"accountNumber",...l("accountNumber"),placeholder:"1234567890"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"ifscCode",children:"IFSC Code"}),e.jsx(O,{id:"ifscCode",...l("ifscCode"),placeholder:"ABCD0123456"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"swiftCode",children:"SWIFT Code"}),e.jsx(O,{id:"swiftCode",...l("swiftCode"),placeholder:"SWIFTCODE123"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"paymentFrequency",children:"Payment Frequency"}),e.jsxs(ge,{onValueChange:f=>m("paymentFrequency",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select frequency"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"daily",children:"Daily"}),e.jsx(A,{value:"weekly",children:"Weekly"}),e.jsx(A,{value:"biweekly",children:"Bi-weekly"}),e.jsx(A,{value:"monthly",children:"Monthly"})]})]})]})]})})]})}),e.jsx(ss,{value:"additional",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Additional Information"}),e.jsx($e,{children:"Device and app information"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"deviceType",children:"Device Type"}),e.jsxs(ge,{onValueChange:f=>m("deviceType",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select device type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"android",children:"Android"}),e.jsx(A,{value:"ios",children:"iOS"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"osVersion",children:"OS Version"}),e.jsx(O,{id:"osVersion",...l("osVersion"),placeholder:"14.0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"appVersion",children:"App Version"}),e.jsx(O,{id:"appVersion",...l("appVersion"),placeholder:"1.0.0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"fcmToken",children:"FCM Token"}),e.jsx(O,{id:"fcmToken",...l("fcmToken"),placeholder:"FCM token"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"ewalletId",children:"E-Wallet ID"}),e.jsx(O,{id:"ewalletId",...l("ewalletId"),placeholder:"wallet_123456"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(We,{id:"geolocationPermission",...l("geolocationPermission"),onCheckedChange:f=>m("geolocationPermission",f)}),e.jsx(k,{htmlFor:"geolocationPermission",className:"cursor-pointer",children:"Geolocation Permission Granted"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"termsConsent",...l("termsConsent"),onCheckedChange:f=>m("termsConsent",f)}),e.jsx(k,{htmlFor:"termsConsent",className:"cursor-pointer",children:"Terms & Conditions Consented"})]})]})})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s("/admin/drivers"),disabled:o,children:"Cancel"}),e.jsx(E,{type:"submit",className:"bg-gradient-primary hover:opacity-90",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Create Driver"]})})]})]})]})},xS=At({phoneNumber:ee().min(10,"Phone number must be at least 10 digits").max(20,"Phone number must not exceed 20 digits").regex(/^\+?[\d\s\-\(\)]+$/,"Invalid phone number format. Use digits, spaces, hyphens, and parentheses only"),email:ee().email("Invalid email address").optional().or(Qe("")),fullName:ee().min(2,"Full name is required"),dateOfBirth:ee().optional(),gender:ee().optional(),address:ee().optional(),emergencyContactNumber:ee().optional(),preferredLanguage:ee().optional(),profilePhotoUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),govtIdType:ee().optional(),govtIdNumber:ee().optional(),govtIdFrontUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),govtIdBackUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),drivingLicenseFrontUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),drivingLicenseBackUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),selfieWithIdUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),vehicleType:ee().optional(),vehicleMake:ee().optional(),vehicleModel:ee().optional(),vehicleRegistrationNumber:ee().optional(),yearOfManufacture:ms().min(1900).max(new Date().getFullYear()+1).optional().or(Qe("")),vehicleColor:ee().optional(),seatingCapacity:ms().min(1).optional().or(Qe("")),luggageCapacity:ms().min(0).optional().or(Qe("")),ownershipDocUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),insuranceDocUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),roadTaxDocUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),bankAccountHolderName:ee().optional(),bankName:ee().optional(),accountNumber:ee().optional(),ifscCode:ee().optional(),swiftCode:ee().optional(),paymentFrequency:ee().optional(),deviceType:ee().optional(),osVersion:ee().optional(),fcmToken:ee().optional(),appVersion:ee().optional(),geolocationPermission:ot().optional(),signupMethod:ee().optional(),otpVerified:ot().optional(),termsConsent:ot().optional(),ewalletId:ee().optional()}),fS=()=>{const s=Ye(),{driverId:t}=Js(),r=t?parseInt(t,10):0,[a,n]=h.useState("personal"),[i,o]=h.useState({}),{data:l,loading:c,error:u}=dc(r,{onError:y=>{I.error(`Failed to load driver: ${y.message}`)}}),{mutate:d,isLoading:m}=cf({onSuccess:y=>{I.success("Driver updated successfully!"),s("/admin/drivers")},onError:y=>{I.error(`Failed to update driver: ${y.message}`)}}),{register:x,handleSubmit:g,formState:{errors:p},watch:N,setValue:f,reset:S}=ft({resolver:Lt(xS),defaultValues:{otpVerified:!1,geolocationPermission:!1,termsConsent:!1}});h.useEffect(()=>{l&&S({phoneNumber:l.phoneNumber||"",email:l.email||"",fullName:l.fullName||"",dateOfBirth:l.dateOfBirth||"",gender:l.gender||"",address:l.address||"",emergencyContactNumber:l.emergencyContactNumber||"",preferredLanguage:l.preferredLanguage||"",profilePhotoUrl:l.profilePhotoUrl||"",govtIdType:l.govtIdType||"",govtIdNumber:l.govtIdNumber||"",govtIdFrontUrl:l.govtIdFrontUrl||"",govtIdBackUrl:l.govtIdBackUrl||"",drivingLicenseFrontUrl:l.drivingLicenseFrontUrl||"",drivingLicenseBackUrl:l.drivingLicenseBackUrl||"",selfieWithIdUrl:l.selfieWithIdUrl||"",vehicleType:l.vehicleType||"",vehicleMake:l.vehicleMake||"",vehicleModel:l.vehicleModel||"",vehicleRegistrationNumber:l.vehicleRegistrationNumber||l.vehicleLicensePlate||"",yearOfManufacture:l.yearOfManufacture||l.vehicleYear||void 0,vehicleColor:l.vehicleColor||"",seatingCapacity:l.seatingCapacity||void 0,luggageCapacity:l.luggageCapacity||void 0,ownershipDocUrl:l.ownershipDocUrl||l.vehicleRegistrationCertUrl||"",insuranceDocUrl:l.insuranceDocUrl||l.vehicleInsuranceCertUrl||"",roadTaxDocUrl:l.roadTaxDocUrl||"",bankAccountHolderName:l.bankAccountHolderName||"",bankName:l.bankName||"",accountNumber:l.accountNumber||l.bankAccountNumber||"",ifscCode:l.ifscCode||l.bankIfscCode||"",swiftCode:l.swiftCode||"",paymentFrequency:l.paymentFrequency||"",deviceType:l.deviceType||"",osVersion:l.osVersion||"",fcmToken:l.fcmToken||"",appVersion:l.appVersion||"",geolocationPermission:l.geolocationPermission??!1,signupMethod:l.signupMethod||"",otpVerified:l.otpVerified??!1,termsConsent:l.termsConsent??!1,ewalletId:l.ewalletId||""})},[l]);const j=async(y,b)=>{var M;const v=(M=y.target.files)==null?void 0:M[0];if(v){o(V=>({...V,[b]:v}));const P=new FileReader;P.onloadend=()=>{const V=P.result;f(b,V)},P.readAsDataURL(v)}},w=(y,b,v)=>{var V;const M=i[y],P=N(y);return e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{children:b}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{type:"file",accept:"image/*,.pdf",onChange:R=>j(R,y),className:"flex-1"}),M&&e.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:M.name})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsx(O,{...x(y),placeholder:v,value:P||""}),p[y]&&e.jsx("p",{className:"text-sm text-destructive",children:(V=p[y])==null?void 0:V.message}),P&&e.jsx("p",{className:"text-xs text-muted-foreground",children:P.startsWith("data:")?"File uploaded":"URL provided"})]})]})},C=y=>{var v,M,P,V,R;if(!r){I.error("Driver ID is missing");return}const b={driverId:r,phoneNumber:y.phoneNumber.trim(),email:((v=y.email)==null?void 0:v.trim())||void 0,fullName:y.fullName.trim(),dateOfBirth:y.dateOfBirth||void 0,gender:y.gender||void 0,address:((M=y.address)==null?void 0:M.trim())||void 0,emergencyContactNumber:((P=y.emergencyContactNumber)==null?void 0:P.trim())||void 0,preferredLanguage:y.preferredLanguage||void 0,profilePhotoUrl:((V=y.profilePhotoUrl)==null?void 0:V.trim())||void 0,govtIdType:y.govtIdType||void 0,govtIdNumber:y.govtIdNumber||void 0,govtIdFrontUrl:y.govtIdFrontUrl||void 0,govtIdBackUrl:y.govtIdBackUrl||void 0,drivingLicenseFrontUrl:y.drivingLicenseFrontUrl||void 0,drivingLicenseBackUrl:y.drivingLicenseBackUrl||void 0,selfieWithIdUrl:y.selfieWithIdUrl||void 0,vehicleType:y.vehicleType||void 0,vehicleMake:y.vehicleMake||void 0,vehicleModel:y.vehicleModel||void 0,vehicleRegistrationNumber:y.vehicleRegistrationNumber||void 0,yearOfManufacture:y.yearOfManufacture?Number(y.yearOfManufacture):void 0,vehicleColor:y.vehicleColor||void 0,seatingCapacity:y.seatingCapacity?Number(y.seatingCapacity):void 0,luggageCapacity:y.luggageCapacity?Number(y.luggageCapacity):void 0,ownershipDocUrl:y.ownershipDocUrl||void 0,insuranceDocUrl:y.insuranceDocUrl||void 0,roadTaxDocUrl:y.roadTaxDocUrl||void 0,bankAccountHolderName:y.bankAccountHolderName||void 0,bankName:y.bankName||void 0,accountNumber:y.accountNumber||void 0,ifscCode:y.ifscCode||void 0,swiftCode:y.swiftCode||void 0,paymentFrequency:y.paymentFrequency||void 0,deviceType:y.deviceType||void 0,osVersion:y.osVersion||void 0,fcmToken:y.fcmToken||void 0,appVersion:y.appVersion||void 0,geolocationPermission:y.geolocationPermission??!1,signupMethod:y.signupMethod||void 0,otpVerified:y.otpVerified??!1,termsConsent:y.termsConsent??!1,ewalletId:((R=y.ewalletId)==null?void 0:R.trim())||void 0,isDeletedValue:(l==null?void 0:l.isDeletedValue)??!1,signupStatus:(l==null?void 0:l.signupStatus)||"PENDING"};d({id:r,data:b})};return c?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading driver details..."})]})}):u||!l?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-destructive mb-4",children:(u==null?void 0:u.message)||"Driver not found"}),e.jsx(E,{onClick:()=>s("/admin/drivers"),children:"Back to Drivers"})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>s("/admin/drivers"),className:"hover:bg-muted",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Edit Driver"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Update driver information"})]})]})}),e.jsxs("form",{onSubmit:g(C),children:[e.jsxs(Ra,{value:a,onValueChange:n,className:"space-y-6",children:[e.jsxs(na,{className:"grid w-full grid-cols-5",children:[e.jsxs(es,{value:"personal",children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Personal"]}),e.jsxs(es,{value:"documents",children:[e.jsx(ar,{className:"w-4 h-4 mr-2"}),"Documents"]}),e.jsxs(es,{value:"vehicle",children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Vehicle"]}),e.jsxs(es,{value:"banking",children:[e.jsx(Er,{className:"w-4 h-4 mr-2"}),"Banking"]}),e.jsxs(es,{value:"additional",children:[e.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Additional"]})]}),e.jsx(ss,{value:"personal",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Personal Information"}),e.jsx($e,{children:"Update the driver's personal details"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"phoneNumber",children:"Phone Number *"}),e.jsx(O,{id:"phoneNumber",...x("phoneNumber"),placeholder:"+1234567890"}),p.phoneNumber&&e.jsx("p",{className:"text-sm text-destructive",children:p.phoneNumber.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Email"}),e.jsx(O,{id:"email",type:"email",...x("email"),placeholder:"driver@example.com"}),p.email&&e.jsx("p",{className:"text-sm text-destructive",children:p.email.message})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(O,{id:"fullName",...x("fullName"),placeholder:"John Doe"}),p.fullName&&e.jsx("p",{className:"text-sm text-destructive",children:p.fullName.message})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(hi,{control,name:"dateOfBirth",label:"Date of Birth",placeholder:"Select date of birth"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"gender",children:"Gender"}),e.jsxs(ge,{value:N("gender"),onValueChange:y=>f("gender",y),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select gender"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"male",children:"Male"}),e.jsx(A,{value:"female",children:"Female"}),e.jsx(A,{value:"other",children:"Other"}),e.jsx(A,{value:"prefer_not_to_say",children:"Prefer not to say"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{htmlFor:"address",children:"Address"}),e.jsx(O,{id:"address",...x("address"),placeholder:"123 Main St, City, State, ZIP"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"emergencyContactNumber",children:"Emergency Contact Number"}),e.jsx(O,{id:"emergencyContactNumber",...x("emergencyContactNumber"),placeholder:"+1234567890"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"preferredLanguage",children:"Preferred Language"}),e.jsxs(ge,{value:N("preferredLanguage"),onValueChange:y=>f("preferredLanguage",y),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select language"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"en",children:"English"}),e.jsx(A,{value:"es",children:"Spanish"}),e.jsx(A,{value:"fr",children:"French"}),e.jsx(A,{value:"de",children:"German"}),e.jsx(A,{value:"hi",children:"Hindi"})]})]})]}),w("profilePhotoUrl","Profile Photo","https://example.com/photo.jpg"),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"signupMethod",children:"Signup Method"}),e.jsxs(ge,{value:N("signupMethod"),onValueChange:y=>f("signupMethod",y),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select signup method"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"email",children:"Email"}),e.jsx(A,{value:"phone",children:"Phone"}),e.jsx(A,{value:"google",children:"Google"}),e.jsx(A,{value:"facebook",children:"Facebook"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(We,{id:"otpVerified",checked:N("otpVerified"),onCheckedChange:y=>f("otpVerified",y)}),e.jsx(k,{htmlFor:"otpVerified",className:"cursor-pointer",children:"OTP Verified"})]})]})})]})}),e.jsx(ss,{value:"documents",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Government ID & Documents"}),e.jsx($e,{children:"Update driver identification documents"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"govtIdType",children:"Government ID Type"}),e.jsxs(ge,{value:N("govtIdType"),onValueChange:y=>f("govtIdType",y),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select ID type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"passport",children:"Passport"}),e.jsx(A,{value:"national_id",children:"National ID"}),e.jsx(A,{value:"driving_license",children:"Driving License"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"govtIdNumber",children:"Government ID Number"}),e.jsx(O,{id:"govtIdNumber",...x("govtIdNumber"),placeholder:"ID number"})]}),w("govtIdFrontUrl","Government ID Front","https://example.com/doc-front.jpg"),w("govtIdBackUrl","Government ID Back","https://example.com/doc-back.jpg"),w("drivingLicenseFrontUrl","Driving License Front","https://example.com/license-front.jpg"),w("drivingLicenseBackUrl","Driving License Back","https://example.com/license-back.jpg"),w("selfieWithIdUrl","Selfie with ID","https://example.com/selfie.jpg")]})})]})}),e.jsx(ss,{value:"vehicle",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Vehicle Information"}),e.jsx($e,{children:"Update vehicle details"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleType",children:"Vehicle Type"}),e.jsxs(ge,{value:N("vehicleType"),onValueChange:y=>f("vehicleType",y),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select vehicle type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"sedan",children:"Sedan"}),e.jsx(A,{value:"suv",children:"SUV"}),e.jsx(A,{value:"hatchback",children:"Hatchback"}),e.jsx(A,{value:"coupe",children:"Coupe"}),e.jsx(A,{value:"van",children:"Van"}),e.jsx(A,{value:"truck",children:"Truck"}),e.jsx(A,{value:"motorcycle",children:"Motorcycle"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleMake",children:"Vehicle Make"}),e.jsx(O,{id:"vehicleMake",...x("vehicleMake"),placeholder:"Toyota"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleModel",children:"Vehicle Model"}),e.jsx(O,{id:"vehicleModel",...x("vehicleModel"),placeholder:"Camry"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleRegistrationNumber",children:"Registration Number"}),e.jsx(O,{id:"vehicleRegistrationNumber",...x("vehicleRegistrationNumber"),placeholder:"ABC-1234"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"yearOfManufacture",children:"Year of Manufacture"}),e.jsx(O,{id:"yearOfManufacture",type:"number",...x("yearOfManufacture",{valueAsNumber:!0}),placeholder:"2020",min:"1900",max:new Date().getFullYear()+1}),p.yearOfManufacture&&e.jsx("p",{className:"text-sm text-destructive",children:p.yearOfManufacture.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleColor",children:"Vehicle Color"}),e.jsx(O,{id:"vehicleColor",...x("vehicleColor"),placeholder:"White"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"seatingCapacity",children:"Seating Capacity"}),e.jsx(O,{id:"seatingCapacity",type:"number",...x("seatingCapacity",{valueAsNumber:!0}),placeholder:"4",min:"1"}),p.seatingCapacity&&e.jsx("p",{className:"text-sm text-destructive",children:p.seatingCapacity.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"luggageCapacity",children:"Luggage Capacity"}),e.jsx(O,{id:"luggageCapacity",type:"number",...x("luggageCapacity",{valueAsNumber:!0}),placeholder:"2",min:"0"}),p.luggageCapacity&&e.jsx("p",{className:"text-sm text-destructive",children:p.luggageCapacity.message})]}),w("ownershipDocUrl","Ownership Document","https://example.com/ownership.pdf"),w("insuranceDocUrl","Insurance Document","https://example.com/insurance.pdf"),w("roadTaxDocUrl","Road Tax Document","https://example.com/roadtax.pdf")]})})]})}),e.jsx(ss,{value:"banking",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Banking Information"}),e.jsx($e,{children:"Update banking details for payments"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{htmlFor:"bankAccountHolderName",children:"Account Holder Name"}),e.jsx(O,{id:"bankAccountHolderName",...x("bankAccountHolderName"),placeholder:"John Doe"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"bankName",children:"Bank Name"}),e.jsx(O,{id:"bankName",...x("bankName"),placeholder:"ABC Bank"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"accountNumber",children:"Account Number"}),e.jsx(O,{id:"accountNumber",...x("accountNumber"),placeholder:"1234567890"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"ifscCode",children:"IFSC Code"}),e.jsx(O,{id:"ifscCode",...x("ifscCode"),placeholder:"ABCD0123456"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"swiftCode",children:"SWIFT Code"}),e.jsx(O,{id:"swiftCode",...x("swiftCode"),placeholder:"SWIFTCODE123"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"paymentFrequency",children:"Payment Frequency"}),e.jsxs(ge,{value:N("paymentFrequency"),onValueChange:y=>f("paymentFrequency",y),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select frequency"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"daily",children:"Daily"}),e.jsx(A,{value:"weekly",children:"Weekly"}),e.jsx(A,{value:"biweekly",children:"Bi-weekly"}),e.jsx(A,{value:"monthly",children:"Monthly"})]})]})]})]})})]})}),e.jsx(ss,{value:"additional",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Additional Information"}),e.jsx($e,{children:"Update device and app information"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"deviceType",children:"Device Type"}),e.jsxs(ge,{value:N("deviceType"),onValueChange:y=>f("deviceType",y),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select device type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"android",children:"Android"}),e.jsx(A,{value:"ios",children:"iOS"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"osVersion",children:"OS Version"}),e.jsx(O,{id:"osVersion",...x("osVersion"),placeholder:"14.0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"appVersion",children:"App Version"}),e.jsx(O,{id:"appVersion",...x("appVersion"),placeholder:"1.0.0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"fcmToken",children:"FCM Token"}),e.jsx(O,{id:"fcmToken",...x("fcmToken"),placeholder:"FCM token"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"ewalletId",children:"E-Wallet ID"}),e.jsx(O,{id:"ewalletId",...x("ewalletId"),placeholder:"wallet_123456"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(We,{id:"geolocationPermission",checked:N("geolocationPermission"),onCheckedChange:y=>f("geolocationPermission",y)}),e.jsx(k,{htmlFor:"geolocationPermission",className:"cursor-pointer",children:"Geolocation Permission Granted"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"termsConsent",checked:N("termsConsent"),onCheckedChange:y=>f("termsConsent",y)}),e.jsx(k,{htmlFor:"termsConsent",className:"cursor-pointer",children:"Terms & Conditions Consented"})]})]})})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s("/admin/drivers"),disabled:m,children:"Cancel"}),e.jsx(E,{type:"submit",className:"bg-gradient-primary hover:opacity-90",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Update Driver"]})})]})]})]})},pS=({steps:s,currentStep:t,completedSteps:r,onStepClick:a,allowNavigation:n=!1})=>{const i=s.findIndex(c=>c.id===t),o=(c,u)=>r.includes(c)?"completed":c===t?"current":"upcoming",l=(c,u)=>!n||!a?!1:r.includes(c)||c===t;return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"flex items-center justify-between",children:s.map((c,u)=>{const d=o(c.id),m=l(c.id);return e.jsxs(Ne.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("button",{onClick:()=>m&&(a==null?void 0:a(c.id)),disabled:!m,className:`
                      w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm
                      transition-all duration-200
                      ${d==="completed"?"bg-success text-success-foreground":""}
                      ${d==="current"?"bg-primary text-primary-foreground ring-4 ring-primary/20":""}
                      ${d==="upcoming"?"bg-muted text-muted-foreground":""}
                      ${m?"cursor-pointer hover:scale-110":"cursor-default"}
                    `,children:d==="completed"?e.jsx(Ar,{className:"w-5 h-5"}):e.jsx("span",{children:u+1})}),e.jsxs("div",{className:"mt-2 text-center",children:[e.jsx("p",{className:`text-sm font-medium ${d==="current"?"text-foreground":"text-muted-foreground"}`,children:c.label}),c.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:c.description})]})]}),u<s.length-1&&e.jsx("div",{className:"flex-1 h-0.5 mx-4 mb-8",children:e.jsx("div",{className:`h-full transition-colors duration-200 ${u<i?"bg-success":"bg-muted"}`})})]},c.id)})})}),e.jsx("div",{className:"md:hidden space-y-4",children:s.map((c,u)=>{const d=o(c.id),m=l(c.id);return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{onClick:()=>m&&(a==null?void 0:a(c.id)),disabled:!m,className:`
                    w-8 h-8 rounded-full flex items-center justify-center font-semibold text-xs
                    transition-all duration-200 flex-shrink-0
                    ${d==="completed"?"bg-success text-success-foreground":""}
                    ${d==="current"?"bg-primary text-primary-foreground ring-4 ring-primary/20":""}
                    ${d==="upcoming"?"bg-muted text-muted-foreground":""}
                    ${m?"cursor-pointer":"cursor-default"}
                  `,children:d==="completed"?e.jsx(Ar,{className:"w-4 h-4"}):e.jsx("span",{children:u+1})}),u<s.length-1&&e.jsx("div",{className:"w-0.5 h-12 my-1",children:e.jsx("div",{className:`h-full transition-colors duration-200 ${u<i?"bg-success":"bg-muted"}`})})]}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsx("p",{className:`text-sm font-medium ${d==="current"?"text-foreground":"text-muted-foreground"}`,children:c.label}),c.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:c.description})]})]},c.id)})})]})},vr=({label:s,value:t,onChange:r,accept:a="image/*,.pdf",required:n=!1,maxSizeMB:i=5,placeholder:o="Click to upload or drag and drop",helperText:l,error:c,disabled:u=!1})=>{const d=h.useRef(null),[m,x]=h.useState(!1),[g,p]=h.useState(null);Ne.useEffect(()=>{if(t instanceof File)if(t.type.startsWith("image/")){const P=new FileReader;P.onloadend=()=>{p(P.result)},P.readAsDataURL(t)}else p(null);else typeof t=="string"&&t.startsWith("http")?p(t):p(null)},[t]);const N=P=>{var D;const V=i*1024*1024;if(P.size>V)return I.error(`File size must be less than ${i}MB`),!1;const R=a.split(",").map(X=>X.trim()),T="."+((D=P.name.split(".").pop())==null?void 0:D.toLowerCase()),q=P.type;return R.some(X=>{if(X.startsWith("."))return T===X;if(X.includes("/*")){const ne=X.split("/")[0];return q.startsWith(ne+"/")}return q===X})?!0:(I.error(`File type not accepted. Allowed: ${a}`),!1)},f=P=>{var R;const V=(R=P.target.files)==null?void 0:R[0];V&&N(V)&&r(V)},S=P=>{P.preventDefault(),x(!0)},j=P=>{P.preventDefault(),x(!1)},w=P=>{var R;P.preventDefault(),x(!1);const V=(R=P.dataTransfer.files)==null?void 0:R[0];V&&N(V)&&r(V)},C=()=>{r(null),p(null),d.current&&(d.current.value="")},y=()=>{var P;(P=d.current)==null||P.click()},v=t instanceof File?t.name:typeof t=="string"?t.split("/").pop()||t:null,M=v==null?void 0:v.toLowerCase().endsWith(".pdf");return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{children:[s,n&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs("div",{className:`
          border-2 border-dashed rounded-lg p-4 transition-colors cursor-pointer
          ${m?"border-primary bg-primary/5":"border-muted-foreground/25"}
          ${u?"opacity-50 cursor-not-allowed":"hover:border-primary hover:bg-muted/50"}
          ${c?"border-destructive":""}
        `,onDragOver:S,onDragLeave:j,onDrop:w,onClick:u?void 0:y,children:[e.jsx("input",{ref:d,type:"file",accept:a,onChange:f,className:"hidden",disabled:u}),t?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[g&&!M?e.jsx("img",{src:g,alt:"Preview",className:"w-16 h-16 object-cover rounded border"}):e.jsx("div",{className:"w-16 h-16 bg-muted rounded border flex items-center justify-center",children:M?e.jsx(ar,{className:"w-8 h-8 text-muted-foreground"}):e.jsx(Sp,{className:"w-8 h-8 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:v}),t instanceof File&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(t.size/1024).toFixed(1)," KB"]})]})]}),!u&&e.jsx(E,{type:"button",variant:"ghost",size:"sm",onClick:P=>{P.stopPropagation(),C()},className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:e.jsx(Wt,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Pp,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:o}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a," (max ",i,"MB)"]})]})]}),c?e.jsx("p",{className:"text-sm text-destructive",children:c}):l?e.jsx("p",{className:"text-sm text-muted-foreground",children:l}):null]})},gS=At({fullName:ee().min(2,"Full name is required"),email:ee().email("Invalid email address").optional().or(Qe("")),phoneNumber:ee().min(10,"Phone number must be at least 10 digits"),dateOfBirth:ee().optional(),gender:ee().optional(),address:ee().optional(),emergencyContactNumber:ee().optional(),preferredLanguage:ee().optional()});At({});const jS=At({govtIdType:ee().min(1,"ID Type is required"),govtIdNumber:ee().min(1,"ID Number is required")}),vS=At({vehicleType:ee().min(1,"Vehicle Type is required"),vehicleCategoryId:ee().optional(),vehicleMake:ee().min(1,"Make is required"),vehicleModel:ee().min(1,"Model is required"),vehicleRegistrationNumber:ee().min(1,"Registration Number is required"),yearOfManufacture:ee().optional(),vehicleColor:ee().optional(),seatingCapacity:ee().optional(),luggageCapacity:ee().optional()}),yS=At({bankAccountHolderName:ee().min(1,"Account Holder Name is required"),bankName:ee().min(1,"Bank Name is required"),accountNumber:ee().min(1,"Account Number is required"),ifscCode:ee().min(1,"IFSC Code is required"),swiftCode:ee().optional(),paymentFrequency:ee().optional()}),NS=()=>{var ce,ae;const s=Ye(),[t,r]=jo(),a=t.get("step")||"personal",n=t.get("driverId"),i=n?parseInt(n):null,[o,l]=h.useState(null),[c,u]=h.useState({govtIdFront:null,govtIdBack:null,licenseFront:null,licenseBack:null,selfie:null}),[d,m]=h.useState({ownership:null,insurance:null,roadTax:null}),[x,g]=h.useState([]),[p,N]=h.useState({personal:null,kyc:null,vehicle:null,banking:null}),{mutateAsync:f,isPending:S}=of(),{mutateAsync:j,isPending:w}=ZC(),{mutateAsync:C,isPending:y}=XC(),{mutateAsync:b,isPending:v}=JC(),{mutateAsync:M,isPending:P}=sS(),{mutateAsync:V,isPending:R}=cf(),{data:T}=dc(i||0,{enabled:!!i}),q=ft({resolver:Lt(gS)}),_=ft({resolver:Lt(jS)}),D=ft({resolver:Lt(vS)}),X=ft({resolver:Lt(yS)});h.useEffect(()=>{var W,F,te,ye;T&&(q.reset({fullName:T.fullName,email:T.email,phoneNumber:T.phoneNumber,dateOfBirth:T.dateOfBirth,gender:T.gender,address:T.address,emergencyContactNumber:T.emergencyContactNumber,preferredLanguage:T.preferredLanguage}),T.profilePhotoUrl&&l(T.profilePhotoUrl),_.reset({govtIdType:T.govtIdType,govtIdNumber:T.govtIdNumber}),u({govtIdFront:T.govtIdFrontUrl||null,govtIdBack:T.govtIdBackUrl||null,licenseFront:T.drivingLicenseFrontUrl||null,licenseBack:T.drivingLicenseBackUrl||null,selfie:T.selfieWithIdUrl||null}),D.reset({vehicleType:T.vehicleType,vehicleCategoryId:(W=T.vehicleCategoryId)==null?void 0:W.toString(),vehicleMake:T.vehicleMake,vehicleModel:T.vehicleModel,vehicleRegistrationNumber:T.vehicleRegistrationNumber,yearOfManufacture:(F=T.yearOfManufacture)==null?void 0:F.toString(),vehicleColor:T.vehicleColor,seatingCapacity:(te=T.seatingCapacity)==null?void 0:te.toString(),luggageCapacity:(ye=T.luggageCapacity)==null?void 0:ye.toString()}),m({ownership:T.ownershipDocUrl||null,insurance:T.vehicleInsuranceCertUrl||null,roadTax:T.roadTaxDocUrl||null}),X.reset({bankAccountHolderName:T.bankAccountHolderName,bankName:T.bankName,accountNumber:T.accountNumber,ifscCode:T.ifscCode,swiftCode:T.swiftCode,paymentFrequency:T.paymentFrequency}),x.includes("review")||g(["personal","photo","kyc","vehicle","bank","review"]))},[T,q,_,D,X]);const ne=[{id:"personal",label:"Personal Details",description:"Basic info"},{id:"photo",label:"Profile Photo",description:"Upload photo"},{id:"kyc",label:"KYC Documents",description:"Identity verification"},{id:"vehicle",label:"Vehicle",description:"Car details"},{id:"bank",label:"Banking",description:"Payout info"},{id:"review",label:"Review",description:"Complete"}],me=W=>{i?r({step:W,driverId:i.toString()}):W==="personal"&&r({step:W})},Q=W=>{x.includes(a)||g([...x,a]),r({step:W,driverId:(i==null?void 0:i.toString())||""}),window.scrollTo(0,0)},be=W=>{i?V({id:i,data:W}).then(()=>{I.success("Personal details updated"),r({step:"photo",driverId:i.toString()}),x.includes("personal")||g([...x,"personal"])}).catch(F=>{I.error(`Failed to update driver: ${F.message}`)}):(N(F=>({...F,personal:W})),r({step:"photo"}),x.includes("personal")||g([...x,"personal"]))},ke=()=>{if(i){if(typeof o=="string"){Q("kyc");return}if(!o){Q("kyc");return}j({driverId:i,file:o}).then(()=>{I.success("Profile photo uploaded"),Q("kyc")}).catch(W=>{I.error(`Upload failed: ${W.message}`)})}else Q("kyc")},K=W=>{if(!c.govtIdFront||!c.govtIdBack||!c.licenseFront||!c.licenseBack||!c.selfie){I.error("Please upload all required KYC documents");return}if(i){const F={};if(c.govtIdFront instanceof File&&(F.govtIdFrontUrl=c.govtIdFront),c.govtIdBack instanceof File&&(F.govtIdBackUrl=c.govtIdBack),c.licenseFront instanceof File&&(F.drivingLicenseFrontUrl=c.licenseFront),c.licenseBack instanceof File&&(F.drivingLicenseBackUrl=c.licenseBack),c.selfie instanceof File&&(F.selfieWithIdUrl=c.selfie),Object.keys(F).length===0){Q("vehicle");return}C({driverId:i,govtIdType:W.govtIdType,govtIdNumber:W.govtIdNumber,files:F}).then(()=>{I.success("KYC documents uploaded"),Q("vehicle")}).catch(te=>{I.error(`Upload failed: ${te.message}`)})}else N(F=>({...F,kyc:W})),Q("vehicle")},G=W=>{if(!d.ownership||!d.insurance||!d.roadTax){I.error("Please upload all required vehicle documents");return}if(i){const F={};d.ownership instanceof File&&(F.ownershipDocUrl=d.ownership),d.insurance instanceof File&&(F.insuranceDocUrl=d.insurance),d.roadTax instanceof File&&(F.roadTaxDocUrl=d.roadTax),b({driverId:i,vehicleType:W.vehicleType,vehicleCategoryId:W.vehicleCategoryId?parseInt(W.vehicleCategoryId):0,vehicleMake:W.vehicleMake,vehicleModel:W.vehicleModel,vehicleRegistrationNumber:W.vehicleRegistrationNumber,yearOfManufacture:W.yearOfManufacture?parseInt(W.yearOfManufacture):0,vehicleColor:W.vehicleColor||"",seatingCapacity:W.seatingCapacity?parseInt(W.seatingCapacity):4,luggageCapacity:W.luggageCapacity?parseInt(W.luggageCapacity):0,files:F}).then(()=>{I.success("Vehicle details saved"),Q("bank")}).catch(te=>{I.error(`Failed to save vehicle details: ${te.message}`)})}else N(F=>({...F,vehicle:W})),Q("bank")},ue=W=>{i?M({driverId:i,...W,eWalletId:""}).then(()=>{I.success("Banking details saved"),Q("review")}).catch(F=>{I.error(`Failed to save banking details: ${F.message}`)}):(N(F=>({...F,banking:W})),Q("review"))},de=async()=>{var W,F,te,ye,se;if(i){I.success("Driver details updated!"),s("/admin/drivers");return}try{const Z=await f(p.personal);console.log("Create driver response:",Z);let U=((W=Z==null?void 0:Z.data)==null?void 0:W.driverId)||(Z==null?void 0:Z.driverId)||((te=(F=Z==null?void 0:Z.data)==null?void 0:F.data)==null?void 0:te.driverId)||(Z==null?void 0:Z.id)||((ye=Z==null?void 0:Z.data)==null?void 0:ye.id);if(!U&&(Z!=null&&Z.message)){const he=Z.message.match(/Driver \((\d+)\)/);he&&he[1]&&(U=parseInt(he[1],10),console.log("Extracted driver ID from message:",U))}if(console.log("Extracted driver ID:",U),!U&&p.personal.phoneNumber){console.log("Attempting to recover driver ID using phone number:",p.personal.phoneNumber);try{await new Promise(z=>setTimeout(z,1e3));const he=await Me.get("/drivers/list",{page:0,size:10});console.log("List response for recovery:",he);const ts=(((se=he.data)==null?void 0:se.content)||he.content||(Array.isArray(he.data)?he.data:[])).filter(z=>z.phoneNumber===p.personal.phoneNumber).sort((z,J)=>(J.driverId||0)-(z.driverId||0))[0];ts!=null&&ts.driverId&&(U=ts.driverId,console.log("Successfully recovered driver ID:",U))}catch(he){console.error("Failed to recover driver ID:",he)}}if(!U){I.error("Driver created but failed to retrieve ID. Please check the list."),s("/admin/drivers");return}I.success(`Driver created successfully! ID: ${U}`),o&&o instanceof File&&await j({driverId:U,file:o}),p.kyc&&c&&await C({driverId:U,govtIdType:p.kyc.govtIdType,govtIdNumber:p.kyc.govtIdNumber,files:{govtIdFrontUrl:c.govtIdFront,govtIdBackUrl:c.govtIdBack,drivingLicenseFrontUrl:c.licenseFront,drivingLicenseBackUrl:c.licenseBack,selfieWithIdUrl:c.selfie}}),p.vehicle&&d&&await b({driverId:U,vehicleType:p.vehicle.vehicleType,vehicleCategoryId:p.vehicle.vehicleCategoryId?parseInt(p.vehicle.vehicleCategoryId):0,vehicleMake:p.vehicle.vehicleMake,vehicleModel:p.vehicle.vehicleModel,vehicleRegistrationNumber:p.vehicle.vehicleRegistrationNumber,yearOfManufacture:p.vehicle.yearOfManufacture?parseInt(p.vehicle.yearOfManufacture):0,vehicleColor:p.vehicle.vehicleColor||"",seatingCapacity:p.vehicle.seatingCapacity?parseInt(p.vehicle.seatingCapacity):4,luggageCapacity:p.vehicle.luggageCapacity?parseInt(p.vehicle.luggageCapacity):0,files:{ownershipDocUrl:d.ownership,insuranceDocUrl:d.insurance,roadTaxDocUrl:d.roadTax}}),p.banking&&await M({driverId:U,...p.banking,eWalletId:""}),I.success("Driver onboarding completed successfully!"),s("/admin/drivers")}catch(Z){console.error("Onboarding chain failed:",Z),I.error(`Onboarding failed: ${Z.message||"Unknown error"}`)}},xe=S||w||y||v||P||R;return e.jsxs("div",{className:"space-y-6 animate-fade-in max-w-5xl mx-auto pb-10",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>s("/admin/drivers"),className:"hover:bg-muted",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to Drivers"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Add New Driver"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete the wizard to register a new driver"})]})]})}),e.jsx(L,{children:e.jsx(B,{className:"pt-6",children:e.jsx(pS,{steps:ne,currentStep:a,completedSteps:x,onStepClick:me,allowNavigation:!!i})})}),e.jsxs(L,{className:"min-h-[400px]",children:[e.jsxs(Y,{children:[e.jsx(H,{children:(ce=ne.find(W=>W.id===a))==null?void 0:ce.label}),e.jsx($e,{children:(ae=ne.find(W=>W.id===a))==null?void 0:ae.description})]}),e.jsxs(B,{children:[a==="personal"&&e.jsx("form",{id:"personal-form",onSubmit:q.handleSubmit(be),className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(O,{...q.register("fullName"),placeholder:"John Doe"}),q.formState.errors.fullName&&e.jsx("p",{className:"text-sm text-destructive",children:q.formState.errors.fullName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"phoneNumber",children:"Phone Number *"}),e.jsx(O,{...q.register("phoneNumber"),placeholder:"+1234567890"}),q.formState.errors.phoneNumber&&e.jsx("p",{className:"text-sm text-destructive",children:q.formState.errors.phoneNumber.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Email"}),e.jsx(O,{...q.register("email"),placeholder:"john@example.com"}),q.formState.errors.email&&e.jsx("p",{className:"text-sm text-destructive",children:q.formState.errors.email.message})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(hi,{control:q.control,name:"dateOfBirth",label:"Date of Birth",placeholder:"Select date of birth"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"gender",children:"Gender"}),e.jsxs(ge,{onValueChange:W=>q.setValue("gender",W),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select gender"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"MALE",children:"Male"}),e.jsx(A,{value:"FEMALE",children:"Female"}),e.jsx(A,{value:"OTHER",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"preferredLanguage",children:"Preferred Language"}),e.jsxs(ge,{onValueChange:W=>q.setValue("preferredLanguage",W),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select language"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"ENGLISH",children:"English"}),e.jsx(A,{value:"SPANISH",children:"Spanish"}),e.jsx(A,{value:"FRENCH",children:"French"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{htmlFor:"address",children:"Address"}),e.jsx(O,{...q.register("address"),placeholder:"123 Main St"})]})]})}),a==="photo"&&e.jsx("div",{className:"space-y-6 max-w-md mx-auto text-center",children:e.jsx(vr,{label:"Profile Photo",value:o||void 0,onChange:l,accept:"image/*",placeholder:"Upload a clear face photo"})}),a==="kyc"&&e.jsxs("form",{id:"kyc-form",onSubmit:_.handleSubmit(K),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"govtIdType",children:"Government ID Type *"}),e.jsxs(ge,{onValueChange:W=>_.setValue("govtIdType",W),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select ID type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"NATIONAL_ID",children:"National ID"}),e.jsx(A,{value:"PASSPORT",children:"Passport"}),e.jsx(A,{value:"DRIVING_LICENSE",children:"Driving License"})]})]}),_.formState.errors.govtIdType&&e.jsx("p",{className:"text-sm text-destructive",children:_.formState.errors.govtIdType.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"govtIdNumber",children:"ID Number *"}),e.jsx(O,{..._.register("govtIdNumber"),placeholder:"Enter ID number"}),_.formState.errors.govtIdNumber&&e.jsx("p",{className:"text-sm text-destructive",children:_.formState.errors.govtIdNumber.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(vr,{label:"Government ID Front *",value:c.govtIdFront||void 0,onChange:W=>u(F=>({...F,govtIdFront:W})),required:!0}),e.jsx(vr,{label:"Government ID Back *",value:c.govtIdBack||void 0,onChange:W=>u(F=>({...F,govtIdBack:W})),required:!0}),e.jsx(vr,{label:"Driving License Front *",value:c.licenseFront||void 0,onChange:W=>u(F=>({...F,licenseFront:W})),required:!0}),e.jsx(vr,{label:"Driving License Back *",value:c.licenseBack||void 0,onChange:W=>u(F=>({...F,licenseBack:W})),required:!0}),e.jsx(vr,{label:"Selfie with ID *",value:c.selfie||void 0,onChange:W=>u(F=>({...F,selfie:W})),required:!0})]})]}),a==="vehicle"&&e.jsxs("form",{id:"vehicle-form",onSubmit:D.handleSubmit(G),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleType",children:"Vehicle Type *"}),e.jsxs(ge,{onValueChange:W=>D.setValue("vehicleType",W),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"CAR",children:"Car"}),e.jsx(A,{value:"BIKE",children:"Bike"}),e.jsx(A,{value:"AUTO",children:"Auto"})]})]}),D.formState.errors.vehicleType&&e.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.vehicleType.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleMake",children:"Make *"}),e.jsx(O,{...D.register("vehicleMake"),placeholder:"Toyota"}),D.formState.errors.vehicleMake&&e.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.vehicleMake.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleModel",children:"Model *"}),e.jsx(O,{...D.register("vehicleModel"),placeholder:"Corolla"}),D.formState.errors.vehicleModel&&e.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.vehicleModel.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleRegistrationNumber",children:"Registration Number *"}),e.jsx(O,{...D.register("vehicleRegistrationNumber"),placeholder:"ABC-1234"}),D.formState.errors.vehicleRegistrationNumber&&e.jsx("p",{className:"text-sm text-destructive",children:D.formState.errors.vehicleRegistrationNumber.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"yearOfManufacture",children:"Year"}),e.jsx(O,{type:"number",...D.register("yearOfManufacture"),placeholder:"2020"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleColor",children:"Color"}),e.jsx(O,{...D.register("vehicleColor"),placeholder:"White"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(vr,{label:"Ownership Document *",value:d.ownership||void 0,onChange:W=>m(F=>({...F,ownership:W})),required:!0}),e.jsx(vr,{label:"Insurance Document *",value:d.insurance||void 0,onChange:W=>m(F=>({...F,insurance:W})),required:!0}),e.jsx(vr,{label:"Road Tax Document *",value:d.roadTax||void 0,onChange:W=>m(F=>({...F,roadTax:W})),required:!0})]})]}),a==="bank"&&e.jsx("form",{id:"banking-form",onSubmit:X.handleSubmit(ue),className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"bankAccountHolderName",children:"Account Holder Name *"}),e.jsx(O,{...X.register("bankAccountHolderName"),placeholder:"John Doe"}),X.formState.errors.bankAccountHolderName&&e.jsx("p",{className:"text-sm text-destructive",children:X.formState.errors.bankAccountHolderName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"bankName",children:"Bank Name *"}),e.jsx(O,{...X.register("bankName"),placeholder:"Chase Bank"}),X.formState.errors.bankName&&e.jsx("p",{className:"text-sm text-destructive",children:X.formState.errors.bankName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"accountNumber",children:"Account Number *"}),e.jsx(O,{...X.register("accountNumber"),placeholder:"1234567890"}),X.formState.errors.accountNumber&&e.jsx("p",{className:"text-sm text-destructive",children:X.formState.errors.accountNumber.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"ifscCode",children:"IFSC / Routing Code *"}),e.jsx(O,{...X.register("ifscCode"),placeholder:"ABCD0123456"}),X.formState.errors.ifscCode&&e.jsx("p",{className:"text-sm text-destructive",children:X.formState.errors.ifscCode.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"swiftCode",children:"SWIFT Code"}),e.jsx(O,{...X.register("swiftCode"),placeholder:"ABCDUS33"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"paymentFrequency",children:"Payment Frequency"}),e.jsxs(ge,{onValueChange:W=>X.setValue("paymentFrequency",W),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select frequency"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"WEEKLY",children:"Weekly"}),e.jsx(A,{value:"BIWEEKLY",children:"Bi-Weekly"}),e.jsx(A,{value:"MONTHLY",children:"Monthly"})]})]})]})]})}),a==="review"&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-16 h-16 bg-success/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ie,{className:"w-8 h-8 text-success"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Ready to Complete"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"All information has been entered. Click below to complete the onboarding process."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-left max-w-2xl mx-auto",children:[e.jsxs(L,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(H,{className:"text-base",children:"Personal Details"})}),e.jsxs(B,{children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Name: ",q.getValues("fullName")]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Phone: ",q.getValues("phoneNumber")]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(H,{className:"text-base",children:"Vehicle"})}),e.jsxs(B,{children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",D.getValues("vehicleType")]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Reg: ",D.getValues("vehicleRegistrationNumber")]})]})]})]})]})]}),e.jsxs(Pa,{className:"flex justify-between border-t pt-6",children:[e.jsx(E,{variant:"outline",onClick:()=>{const W=ne.findIndex(F=>F.id===a);W>0?r({step:ne[W-1].id,driverId:(i==null?void 0:i.toString())||""}):s("/admin/drivers")},children:"Back"}),a==="personal"&&e.jsxs(E,{type:"submit",form:"personal-form",disabled:xe,children:[xe&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Save & Next"]}),a==="photo"&&e.jsxs(E,{onClick:ke,disabled:xe,children:[xe&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),o?"Upload & Next":"Skip & Next"]}),a==="kyc"&&e.jsxs(E,{type:"submit",form:"kyc-form",disabled:xe,children:[xe&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Upload & Next"]}),a==="vehicle"&&e.jsxs(E,{type:"submit",form:"vehicle-form",disabled:xe,children:[xe&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Save & Next"]}),a==="bank"&&e.jsxs(E,{type:"submit",form:"banking-form",disabled:xe,children:[xe&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Save & Next"]}),a==="review"&&e.jsxs(E,{onClick:de,disabled:xe,className:"bg-success hover:bg-success/90 text-success-foreground",children:[xe&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Complete Onboarding"]})]})]})]})},_t=rp,uc=ap,bS=sp,mf=h.forwardRef(({className:s,...t},r)=>e.jsx(Nm,{ref:r,className:le("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));mf.displayName=Nm.displayName;const Dt=h.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(bS,{children:[e.jsx(mf,{}),e.jsxs(bm,{ref:a,className:le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[t,e.jsxs(tp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Wt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Dt.displayName=bm.displayName;const It=({className:s,...t})=>e.jsx("div",{className:le("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});It.displayName="DialogHeader";const $i=({className:s,...t})=>e.jsx("div",{className:le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});$i.displayName="DialogFooter";const Tt=h.forwardRef(({className:s,...t},r)=>e.jsx(wm,{ref:r,className:le("text-lg font-semibold leading-none tracking-tight",s),...t}));Tt.displayName=wm.displayName;const Fa=h.forwardRef(({className:s,...t},r)=>e.jsx(Cm,{ref:r,className:le("text-sm text-muted-foreground",s),...t}));Fa.displayName=Cm.displayName;const ju=({documents:s,onDownload:t,gridCols:r=3})=>{const[a,n]=h.useState(null),[i,o]=h.useState(!1),l=x=>{if(!x.url){I.error("Document not available");return}console.log("Opening document preview:",x),n(x),o(!0)},c=x=>{if(!x.url){I.error("Document not available");return}if(t)t(x.url,x.fileName||x.label);else{const g=document.createElement("a");g.href=x.url,g.download=x.fileName||x.label,g.target="_blank",document.body.appendChild(g),g.click(),document.body.removeChild(g),I.success("Download started")}},u=x=>(x==null?void 0:x.toLowerCase().endsWith(".pdf"))||(x==null?void 0:x.includes("application/pdf")),d=x=>(x==null?void 0:x.match(/\.(jpg|jpeg|png|gif|webp)$/i))||(x==null?void 0:x.startsWith("data:image")),m={2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid ${m[r]} gap-4`,children:s.map((x,g)=>e.jsx(L,{className:"overflow-hidden",children:e.jsxs(B,{className:"p-4",children:[e.jsx("div",{className:"aspect-video bg-muted rounded-lg mb-3 overflow-hidden relative group",children:x.url?e.jsxs(e.Fragment,{children:[d(x.url)?e.jsx("img",{src:x.url,alt:x.label,className:"w-full h-full object-cover"}):u(x.url)?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ar,{className:"w-16 h-16 text-muted-foreground"})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ar,{className:"w-16 h-16 text-muted-foreground"})}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsxs(E,{size:"sm",variant:"secondary",onClick:()=>l(x),children:[e.jsx(Je,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsxs(E,{size:"sm",variant:"secondary",onClick:()=>c(x),children:[e.jsx(tr,{className:"w-4 h-4 mr-1"}),"Download"]})]})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Wt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Not uploaded"})]})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm mb-2",children:x.label}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>l(x),disabled:!x.url,children:[e.jsx(Je,{className:"w-3 h-3 mr-1"}),"View"]}),e.jsxs(E,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>c(x),disabled:!x.url,children:[e.jsx(tr,{className:"w-3 h-3 mr-1"}),"Download"]})]})]})]})},g))}),e.jsx(_t,{open:i,onOpenChange:o,children:e.jsxs(Dt,{className:"max-w-4xl max-h-[90vh]",children:[e.jsx(It,{children:e.jsxs(Tt,{className:"flex items-center justify-between",children:[e.jsx("span",{children:a==null?void 0:a.label}),a&&e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>c(a),children:[e.jsx(tr,{className:"w-4 h-4 mr-2"}),"Download"]})]})}),e.jsx("div",{className:"overflow-auto max-h-[calc(90vh-8rem)]",children:a!=null&&a.url?e.jsx(e.Fragment,{children:d(a.url)?e.jsx("img",{src:a.url,alt:a.label,className:"w-full h-auto",onError:x=>{console.error("Image failed to load:",a.url),I.error("Failed to load image")}}):u(a.url)?e.jsxs("div",{className:"space-y-4",children:[e.jsx("iframe",{src:a.url,className:"w-full h-[70vh] border rounded",title:a.label,onError:x=>{console.error("PDF iframe failed to load:",a.url)}}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[e.jsx("p",{children:"If the preview doesn't load, try downloading the document."}),e.jsx(E,{size:"sm",variant:"outline",onClick:()=>window.open(a.url,"_blank"),className:"mt-2",children:"Open in New Tab"})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ar,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Preview not available for this file type"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(E,{onClick:()=>c(a),children:[e.jsx(tr,{className:"w-4 h-4 mr-2"}),"Download File"]}),e.jsx(E,{variant:"outline",onClick:()=>window.open(a.url,"_blank"),children:"Open in New Tab"})]})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Wt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Document not available"})]})})]})})]})},wS=({driverId:s,currentStatus:t,onApprove:r,onReject:a,onKeepInView:n,disabled:i=!1})=>{const[o,l]=h.useState(!1),[c,u]=h.useState(!1),[d,m]=h.useState(!1),[x,g]=h.useState(""),[p,N]=h.useState(!1),f=(t==null?void 0:t.toUpperCase())||"PENDING",S=f==="APPROVED",j=f==="REJECTED",w=async()=>{N(!0);try{await r(s),I.success("KYC documents approved successfully"),l(!1)}catch{I.error("Failed to approve KYC documents")}finally{N(!1)}},C=async()=>{if(!x.trim()){I.error("Please provide a rejection reason");return}N(!0);try{await a(s,x),I.success("KYC documents rejected"),u(!1),g("")}catch{I.error("Failed to reject KYC documents")}finally{N(!1)}},y=async()=>{N(!0);try{await n(s),I.success("KYC documents marked for review"),m(!1)}catch{I.error("Failed to update KYC status")}finally{N(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"KYC Actions"}),e.jsx($e,{children:"Review and update the KYC verification status for this driver"})]}),e.jsxs(B,{children:[e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(E,{onClick:()=>l(!0),disabled:i||S,className:"bg-success hover:bg-success/90 text-success-foreground",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Approve KYC"]}),e.jsxs(E,{onClick:()=>u(!0),disabled:i||j||S,variant:"destructive",children:[e.jsx(vt,{className:"w-4 h-4 mr-2"}),"Reject KYC"]}),e.jsxs(E,{onClick:()=>m(!0),disabled:i||S||j,variant:"outline",className:"border-blue-500 text-blue-500 hover:bg-blue-50",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Keep in View"]})]}),S&&e.jsxs("p",{className:"text-sm text-success mt-3 flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"KYC documents are already approved. All actions have been disabled."]}),j&&e.jsxs("p",{className:"text-sm text-destructive mt-3 flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4"}),"KYC documents have been rejected"]})]})]}),e.jsx(Fr,{open:o,onOpenChange:l,children:e.jsxs(dr,{children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Approve KYC Documents?"}),e.jsx(xr,{children:"This will approve the driver's KYC documents and allow them to start accepting rides. Make sure you have reviewed all documents carefully."})]}),e.jsxs(mr,{children:[e.jsx(pr,{disabled:p,children:"Cancel"}),e.jsxs(fr,{onClick:w,disabled:p,className:"bg-success hover:bg-success/90",children:[p&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Approve"]})]})]})}),e.jsx(_t,{open:c,onOpenChange:u,children:e.jsxs(Dt,{children:[e.jsxs(It,{children:[e.jsx(Tt,{children:"Reject KYC Documents"}),e.jsx(Fa,{children:"Please provide a reason for rejecting the KYC documents. This will be shared with the driver."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"rejectionReason",children:["Rejection Reason ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(yt,{id:"rejectionReason",placeholder:"e.g., Document is blurry, ID has expired, etc.",value:x,onChange:b=>g(b.target.value),rows:4,disabled:p})]})}),e.jsxs($i,{children:[e.jsx(E,{variant:"outline",onClick:()=>u(!1),disabled:p,children:"Cancel"}),e.jsxs(E,{variant:"destructive",onClick:C,disabled:p,children:[p&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Reject KYC"]})]})]})}),e.jsx(Fr,{open:d,onOpenChange:m,children:e.jsxs(dr,{children:[e.jsxs(ur,{children:[e.jsx(hr,{children:"Mark for Review?"}),e.jsx(xr,{children:'This will mark the KYC documents as "Keep in View" for further review. The driver will not be able to accept rides until the documents are approved.'})]}),e.jsxs(mr,{children:[e.jsx(pr,{disabled:p,children:"Cancel"}),e.jsxs(fr,{onClick:y,disabled:p,className:"bg-blue-500 hover:bg-blue-600",children:[p&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Keep in View"]})]})]})})]})},CS=()=>{const{id:s}=Js(),t=Ye(),[r,a]=jo(),n=r.get("tab")||"overview",i=parseInt(s||"0"),{data:o,loading:l,refetch:c}=dc(i,{enabled:!!i}),{mutate:u,loading:d}=rS(),{mutate:m,loading:x}=eS(),{mutate:g,loading:p}=tS(),{mutateAsync:N,isPending:f}=aS(),{mutateAsync:S,isPending:j}=nS(),{mutateAsync:w,isPending:C}=iS(),{mutate:y}=lS(),b=ft(),v=ft(),M=ft();h.useEffect(()=>{o&&(b.reset({fullName:o.fullName,email:o.email,phoneNumber:o.phoneNumber,dateOfBirth:o.dateOfBirth,gender:o.gender,address:o.address,preferredLanguage:o.preferredLanguage}),v.reset({vehicleType:o.vehicleType,vehicleMake:o.vehicleMake,vehicleModel:o.vehicleModel,vehicleRegistrationNumber:o.vehicleRegistrationNumber||o.vehicleLicensePlate,vehicleColor:o.vehicleColor,yearOfManufacture:o.yearOfManufacture||o.vehicleYear}),M.reset({bankAccountHolderName:o.bankAccountHolderName,bankName:o.bankName,accountNumber:o.accountNumber||o.bankAccountNumber,ifscCode:o.ifscCode||o.bankIfscCode,swiftCode:o.swiftCode,paymentFrequency:o.paymentFrequency}))},[o,b,v,M]);const P=Q=>{a({tab:Q})},V=Q=>{if(!o)return;const be={...o,...Q};u({id:i,data:be}).then(()=>{I.success("Personal details updated"),c()}).catch(ke=>I.error(`Update failed: ${ke.message}`))},R=Q=>{o&&m({driverId:i,...Q,vehicleCategoryId:o.vehicleCategoryId||0}).then(()=>{I.success("Vehicle details updated"),c()}).catch(be=>I.error(`Update failed: ${be.message}`))},T=Q=>{o&&g({driverId:i,...Q}).then(()=>{I.success("Banking details updated"),c()}).catch(be=>I.error(`Update failed: ${be.message}`))},q=async Q=>{try{await N(Q),I.success("KYC Approved"),c()}catch(be){I.error(`Failed to approve: ${be.message}`)}},_=async(Q,be)=>{try{await S({driverId:Q,rejectionReason:be}),I.success("KYC Rejected"),c()}catch(ke){I.error(`Failed to reject: ${ke.message}`)}},D=async Q=>{try{await w(Q),I.success("Marked as Keep in View"),c()}catch(be){I.error(`Failed to update status: ${be.message}`)}},X=(Q,be)=>{if(Q.startsWith("http")){window.open(Q,"_blank");return}y(Q).then(ke=>{const K=document.createElement("a");K.href=window.URL.createObjectURL(ke),K.download=be,K.click()}).catch(ke=>I.error(`Download failed: ${ke.message}`))};if(l)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(Fe,{className:"w-8 h-8 animate-spin text-primary"})});if(!o)return e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-destructive",children:"Driver not found"}),e.jsx(E,{onClick:()=>t("/admin/drivers"),className:"mt-4",children:"Back to Drivers"})]});const ne=[{label:"Govt ID Front",url:o.govtIdFrontUrl,fileName:"govt-id-front"},{label:"Govt ID Back",url:o.govtIdBackUrl,fileName:"govt-id-back"},{label:"Driving License Front",url:o.drivingLicenseFrontUrl,fileName:"license-front"},{label:"Driving License Back",url:o.drivingLicenseBackUrl,fileName:"license-back"},{label:"Selfie with ID",url:o.selfieWithIdUrl,fileName:"selfie"}].filter(Q=>Q.url),me=[{label:"Ownership Document",url:o.ownershipDocUrl||o.vehicleRegistrationCertUrl,fileName:"ownership-doc"},{label:"Insurance Document",url:o.insuranceDocUrl||o.vehicleInsuranceCertUrl,fileName:"insurance-doc"},{label:"Road Tax Document",url:o.roadTaxDocUrl,fileName:"road-tax-doc"}].filter(Q=>Q.url);return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>t("/admin/drivers"),className:"hover:bg-muted",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[o.profilePhotoUrl?e.jsx("img",{src:o.profilePhotoUrl,alt:o.fullName,className:"w-12 h-12 rounded-full object-cover border-2 border-primary/10"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:e.jsx(Is,{className:"w-6 h-6 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:o.fullName}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:o.phoneNumber}),e.jsx("span",{children:""}),e.jsx("span",{children:o.email})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(uf,{status:o.kycStatus||"PENDING",size:"lg"}),e.jsx(we,{variant:o.isActive?"default":"secondary",children:o.isActive?"Active":"Inactive"})]})]}),e.jsxs(Ra,{value:n,onValueChange:P,className:"space-y-6",children:[e.jsxs(na,{className:"grid w-full grid-cols-2 md:grid-cols-6 h-auto",children:[e.jsx(es,{value:"overview",className:"py-2",children:"Overview"}),e.jsx(es,{value:"personal",className:"py-2",children:"Personal"}),e.jsx(es,{value:"kyc",className:"py-2",children:"KYC & Docs"}),e.jsx(es,{value:"vehicle",className:"py-2",children:"Vehicle"}),e.jsx(es,{value:"banking",className:"py-2",children:"Banking"}),e.jsx(es,{value:"activity",className:"py-2",children:"Activity"})]}),e.jsx(ss,{value:"overview",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(L,{className:"md:col-span-2",children:[e.jsx(Y,{children:e.jsx(H,{children:"Driver Summary"})}),e.jsxs(B,{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Full Name"}),e.jsx("p",{className:"font-medium",children:o.fullName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"font-medium",children:o.phoneNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium",children:o.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehicle"}),e.jsxs("p",{className:"font-medium",children:[o.vehicleMake," ",o.vehicleModel," (",o.vehicleRegistrationNumber,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Rides"}),e.jsx("p",{className:"font-medium",children:o.totalRidesCompleted||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rating"}),e.jsxs("p",{className:"font-medium flex items-center",children:[o.averageRating||"N/A"," ",e.jsx("span",{className:"text-yellow-500 ml-1",children:""})]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Quick Actions"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs(E,{variant:"outline",className:"w-full justify-start",onClick:()=>P("kyc"),children:[e.jsx(ar,{className:"w-4 h-4 mr-2"}),"Review KYC"]}),e.jsxs(E,{variant:"outline",className:"w-full justify-start",onClick:()=>P("vehicle"),children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Update Vehicle"]}),e.jsxs(E,{variant:"outline",className:"w-full justify-start",onClick:()=>P("banking"),children:[e.jsx(Er,{className:"w-4 h-4 mr-2"}),"Update Banking"]})]})]})]})}),e.jsx(ss,{value:"personal",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Personal Information"}),e.jsx($e,{children:"Update driver's personal details"})]}),e.jsx(B,{children:e.jsx("form",{id:"personal-form",onSubmit:b.handleSubmit(V),className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Full Name"}),e.jsx(O,{...b.register("fullName")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Phone Number"}),e.jsx(O,{...b.register("phoneNumber")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Email"}),e.jsx(O,{...b.register("email")})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(hi,{control:b.control,name:"dateOfBirth",label:"Date of Birth",placeholder:"Select date of birth"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Gender"}),e.jsxs(ge,{defaultValue:o.gender,onValueChange:Q=>b.setValue("gender",Q),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select gender"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"MALE",children:"Male"}),e.jsx(A,{value:"FEMALE",children:"Female"}),e.jsx(A,{value:"OTHER",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{children:"Address"}),e.jsx(O,{...b.register("address")})]})]})})}),e.jsx(Pa,{children:e.jsxs(E,{type:"submit",form:"personal-form",disabled:d,children:[d&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Save Changes"]})})]})}),e.jsx(ss,{value:"kyc",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(wS,{driverId:i,currentStatus:o.kycStatus||"PENDING",onApprove:q,onReject:_,onKeepInView:D}),e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"KYC Documents"}),e.jsxs($e,{children:["ID Type: ",e.jsx("span",{className:"font-medium",children:o.govtIdType})," | ID Number: ",e.jsx("span",{className:"font-medium",children:o.govtIdNumber})]})]}),e.jsx(B,{children:e.jsx(ju,{documents:ne,onDownload:X})})]})]})}),e.jsx(ss,{value:"vehicle",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Vehicle Details"})}),e.jsx(B,{children:e.jsx("form",{id:"vehicle-form",onSubmit:v.handleSubmit(R),className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Vehicle Type"}),e.jsxs(ge,{defaultValue:o.vehicleType,onValueChange:Q=>v.setValue("vehicleType",Q),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"CAR",children:"Car"}),e.jsx(A,{value:"BIKE",children:"Bike"}),e.jsx(A,{value:"AUTO",children:"Auto"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Make"}),e.jsx(O,{...v.register("vehicleMake")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Model"}),e.jsx(O,{...v.register("vehicleModel")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Registration Number"}),e.jsx(O,{...v.register("vehicleRegistrationNumber")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Color"}),e.jsx(O,{...v.register("vehicleColor")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Year"}),e.jsx(O,{type:"number",...v.register("yearOfManufacture")})]})]})})}),e.jsx(Pa,{children:e.jsxs(E,{type:"submit",form:"vehicle-form",disabled:x,children:[x&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Save Changes"]})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Vehicle Documents"})}),e.jsx(B,{children:e.jsx(ju,{documents:me,onDownload:X})})]})]})}),e.jsx(ss,{value:"banking",children:e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Banking Information"})}),e.jsx(B,{children:e.jsx("form",{id:"banking-form",onSubmit:M.handleSubmit(T),className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Account Holder Name"}),e.jsx(O,{...M.register("bankAccountHolderName")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Bank Name"}),e.jsx(O,{...M.register("bankName")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Account Number"}),e.jsx(O,{...M.register("accountNumber")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"IFSC Code"}),e.jsx(O,{...M.register("ifscCode")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"SWIFT Code"}),e.jsx(O,{...M.register("swiftCode")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{children:"Payment Frequency"}),e.jsxs(ge,{defaultValue:o.paymentFrequency,onValueChange:Q=>M.setValue("paymentFrequency",Q),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select frequency"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"WEEKLY",children:"Weekly"}),e.jsx(A,{value:"BIWEEKLY",children:"Bi-Weekly"}),e.jsx(A,{value:"MONTHLY",children:"Monthly"})]})]})]})]})})}),e.jsx(Pa,{children:e.jsxs(E,{type:"submit",form:"banking-form",disabled:p,children:[p&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Save Changes"]})})]})}),e.jsx(ss,{value:"activity",children:e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Device & App Info"})}),e.jsxs(B,{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Device Type"}),e.jsx("p",{className:"font-medium",children:o.deviceType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"OS Version"}),e.jsx("p",{className:"font-medium",children:o.osVersion||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"App Version"}),e.jsx("p",{className:"font-medium",children:o.appVersion||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Login"}),e.jsx("p",{className:"font-medium",children:o.lastLogin||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"FCM Token"}),e.jsx("p",{className:"font-mono text-xs truncate bg-muted p-2 rounded mt-1",children:o.fcmToken||"N/A"})]})]})]})})]})]})};function SS(s,t={}){const r=h.useCallback(async()=>{const n=await Me.get(`/riders/${s}`);return n&&typeof n=="object"&&"data"in n?n.data:n},[s]),a=Cs({queryKey:["rider",s],queryFn:r,enabled:t.enabled!==!1&&!!s});return h.useEffect(()=>{a.isSuccess&&a.data&&t.onSuccess&&t.onSuccess(a.data)},[a.isSuccess,a.data,t.onSuccess]),h.useEffect(()=>{a.isError&&a.error&&t.onError&&t.onError(a.error)},[a.isError,a.error,t.onError]),{...a,data:a.data,loading:a.isLoading||a.isFetching,error:a.error}}function PS(s={},t={}){const r=h.useCallback(async()=>{const n={};s.page!==void 0&&(n.page=s.page),s.size!==void 0&&(n.size=s.size),s.sort&&s.sort.length>0&&(n.sort=s.sort),s.search&&(n.search=s.search);const i=await Me.get("/riders/list",n);return i.data?i.data:Array.isArray(i)?{content:i,page:{size:i.length,number:0,totalElements:i.length,totalPages:1},first:!0,last:!0,empty:i.length===0}:i},[s.page,s.size,s.sort,s.search]),a=Cs({queryKey:["riders",s],queryFn:r,enabled:t.enabled!==!1});return h.useEffect(()=>{a.isSuccess&&a.data&&t.onSuccess&&t.onSuccess(a.data)},[a.isSuccess,a.data,t.onSuccess]),h.useEffect(()=>{a.isError&&a.error&&t.onError&&t.onError(a.error)},[a.isError,a.error,t.onError]),a}function kS(s={}){const t=ze();return Le({mutationFn:async r=>await Me.post("/riders",r),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["riders"]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function DS(s={}){const t=ze();return Le({mutationFn:async({id:r,data:a})=>await Me.put(`/riders/${r}`,a),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["riders"]}),t.invalidateQueries({queryKey:["rider",a.id]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function IS(s={}){const t=ze();return Le({mutationFn:async r=>{var n;const a=await Me.delete(`/riders/${r.riderId}`);if(r.email)try{const i=await Me.get(`/api/admin/user-by-email?email=${encodeURIComponent(r.email)}`);(n=i.data)!=null&&n.id&&await Me.delete(`/api/admin/${i.data.id}`)}catch(i){console.warn("Failed to delete corresponding user:",i)}return a},onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["riders"]}),t.invalidateQueries({queryKey:["rider",a.riderId]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function TS(s={}){const t=ze();return Le({mutationFn:async r=>await Me.get(`/riders/toggle-active-status/${r}`),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["riders"]}),t.invalidateQueries({queryKey:["rider",a]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}const AS=({open:s,onOpenChange:t,riderName:r,riderId:a,onConfirm:n,isLoading:i=!1})=>{const o=()=>{n(a)};return e.jsx(Fr,{open:s,onOpenChange:t,children:e.jsxs(dr,{children:[e.jsxs(ur,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"h-5 w-5 text-destructive"}),e.jsx(hr,{children:"Delete Rider"})]}),e.jsxs(xr,{className:"text-left",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-semibold",children:r}),"? This action cannot be undone and will permanently remove:",e.jsxs("ul",{className:"mt-2 ml-4 list-disc space-y-1 text-sm",children:[e.jsx("li",{children:"All rider profile information"}),e.jsx("li",{children:"Contact and address details"}),e.jsx("li",{children:"KYC verification documents"}),e.jsx("li",{children:"Payment methods and wallet balance"}),e.jsx("li",{children:"Historical ride data and preferences"}),e.jsx("li",{children:"Account and login credentials"})]}),e.jsx("div",{className:"mt-3 p-3 bg-destructive/10 border border-destructive/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-destructive font-medium",children:[e.jsx("strong",{children:"Warning:"})," This action is permanent and cannot be reversed."]})})]})]}),e.jsxs(mr,{children:[e.jsx(pr,{disabled:i,children:"Cancel"}),e.jsx(fr,{onClick:o,disabled:i,className:"bg-destructive hover:bg-destructive/90",children:i?"Deleting...":"Delete Rider"})]})]})})},RS=()=>{var G,ue;const s=Ye(),t=ze(),[r,a]=h.useState(""),[n,i]=h.useState("all"),[o,l]=h.useState("all"),[c,u]=h.useState(0),[d,m]=h.useState(10),[x,g]=h.useState(!1),[p,N]=h.useState(null),{mutate:f,isPending:S}=IS({onSuccess:async(de,xe)=>{I.success("Rider deleted successfully! Corresponding user account has also been removed."),await t.invalidateQueries({queryKey:["riders"]})},onError:(de,xe)=>{I.error(`Failed to delete rider: ${de.message}`),M()}}),{mutate:j,isPending:w}=TS({onSuccess:async(de,xe)=>{I.success("Rider status updated successfully!"),t.setQueriesData({queryKey:["riders"]},ce=>{if(!(ce!=null&&ce.content))return ce;const ae=ce.content.map(W=>W.riderId===xe?{...W,isActive:!W.isActive}:W);return{...ce,content:ae}})},onError:(de,xe)=>{I.error(`Failed to update rider status: ${de.message}`)}}),C=de=>{j(de)},{data:y,isLoading:b,error:v,refetch:M}=PS({page:c,size:d,...r&&{search:r}},{onError:de=>{I.error(`Failed to load riders: ${de.message}`)}}),P=de=>de?{variant:"default",className:"bg-success text-success-foreground"}:{variant:"secondary",className:"bg-muted text-muted-foreground"},V=(de,xe,ce)=>{s(`/admin/riders/edit/${xe}`)},R=(de,xe,ce)=>{N({id:de,name:xe,email:ce}),g(!0)},T=()=>{p&&(f({riderId:p.id,email:p.email}),g(!1),N(null))},q=()=>{g(!1),N(null)},_=h.useMemo(()=>{const de=y;if(!de||!de.content)return[];let xe=de.content;return n!=="all"&&(xe=xe.filter(ce=>{var W;return(((W=ce.status)==null?void 0:W.toLowerCase())||"active")===n.toLowerCase()})),o!=="all"&&(xe=xe.filter(ce=>{const ae=ce.isActive??!0;return o==="active"?ae:!ae})),xe},[y,n,o]),D=y,X=((G=D==null?void 0:D.page)==null?void 0:G.totalElements)??0,ne=((ue=D==null?void 0:D.page)==null?void 0:ue.totalPages)??0,me=de=>{u(de-1)},Q=de=>{m(de),u(0)},be=de=>de.fullName||de.emailId||"Unknown Rider",ke=de=>de.emailId||"N/A",K=de=>de.phoneNumber||"N/A";return b?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading riders..."})]})}):v?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(vt,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Riders"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:v.message}),e.jsx(E,{onClick:()=>M(),children:"Try Again"})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Rider Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and monitor your rider base"})]}),e.jsxs(E,{className:"bg-gradient-primary hover:opacity-90",onClick:()=>s("/admin/riders/add"),children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add New Rider"]})]}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search riders by name or email...",className:"pl-10",value:r,onChange:de=>a(de.target.value)})]}),e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"w-40",children:[e.jsx(zi,{className:"w-4 h-4 mr-2"}),n==="all"?"All Status":n.charAt(0).toUpperCase()+n.slice(1)]})}),e.jsxs(Ss,{align:"end",children:[e.jsx(Pe,{onClick:()=>i("all"),children:"All Status"}),e.jsx(Pe,{onClick:()=>i("active"),children:"Active"}),e.jsx(Pe,{onClick:()=>i("inactive"),children:"Inactive"}),e.jsx(Pe,{onClick:()=>i("suspended"),children:"Suspended"}),e.jsx(Pe,{onClick:()=>i("pending"),children:"Pending"})]})]}),e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"w-[140px]",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),o==="all"?"Active":o==="active"?"Active Only":"Inactive Only"]})}),e.jsxs(Ss,{children:[e.jsx(Pe,{onSelect:()=>l("all"),children:"All"}),e.jsx(Pe,{onSelect:()=>l("active"),children:"Active Only"}),e.jsx(Pe,{onSelect:()=>l("inactive"),children:"Inactive Only"})]})]})]})})}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{children:["Riders (",X,")"]})}),e.jsx(B,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Rider"}),e.jsx(oe,{children:"Contact"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{children:"Wallet Balance"}),e.jsx(oe,{children:"Payment Method"}),e.jsx(oe,{children:"Signup Date"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:_.length===0?e.jsx(Ue,{children:e.jsx(re,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No riders found"})}):_.map(de=>{var F;const xe=de.isActive,ce=P(xe),ae=be(de),W=ae.split(" ").map(te=>te[0]).join("").toUpperCase().slice(0,2);return e.jsxs(Ue,{className:"hover:bg-muted/50",children:[e.jsx(re,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Kt,{children:e.jsx(Yt,{children:W})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:ae}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",de.riderId]})]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 text-muted-foreground"}),ke(de)]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ra,{className:"w-3 h-3 mr-1 text-muted-foreground"}),K(de)]})]})}),e.jsx(re,{children:e.jsxs(we,{className:ce.className,children:[xe&&e.jsx(Ie,{className:"w-3 h-3 mr-1"}),!xe&&e.jsx(km,{className:"w-3 h-3 mr-1"}),xe?"Active":"Inactive"]})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Er,{className:"w-4 h-4 text-chart-secondary mr-1"}),"$",((F=de.walletBalance)==null?void 0:F.toLocaleString())||0]})}),e.jsx(re,{children:de.preferredPaymentMethod||"N/A"}),e.jsx(re,{children:de.signupDate?lr(de.signupDate):"N/A"}),e.jsx(re,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(Mr,{className:"w-4 h-4"})})}),e.jsxs(Ss,{align:"end",children:[e.jsxs(Pe,{onClick:()=>V("Edit Details",de.riderId||0),children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Details"]}),e.jsx(Pe,{onClick:()=>C(de.riderId),disabled:S||w,children:de.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate"]})}),e.jsxs(Pe,{onClick:()=>R(de.riderId||0,ae,ke(de)),className:"text-destructive",children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Delete Rider"]})]})]})})]},de.riderId)})})]}),_.length>0&&ne>0&&e.jsx(dt,{currentPage:c+1,totalPages:ne,totalItems:X,itemsPerPage:d,onPageChange:me,onItemsPerPageChange:Q,className:"mt-4"})]})})]}),e.jsx(AS,{open:x,onOpenChange:q,riderName:(p==null?void 0:p.name)||"",riderId:(p==null?void 0:p.id)||0,onConfirm:T,isLoading:S})]})},FS=At({phoneNumber:ee().min(10,"Phone number must be at least 10 digits").max(20,"Phone number must not exceed 20 digits").regex(/^\+?[\d\s\-\(\)]+$/,"Invalid phone number format. Use digits, spaces, hyphens, and parentheses only"),emailId:ee().email("Invalid email address"),fullName:ee().min(2,"Full name is required"),dateOfBirth:ee().optional(),gender:ee().optional(),homeAddress:ee().optional(),workAddress:ee().optional(),preferredLanguage:ee().optional(),profilePhotoUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),kycIdType:ee().optional(),kycIdNumber:ee().optional(),kycDocumentPhotoUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),preferredPaymentMethod:ee().optional(),walletBalance:ms().min(0).optional().or(Qe("")),savedPaymentMethods:Ai(ee()).optional(),deviceToken:ee().optional(),locationAccessPermission:ot().optional(),signupMethod:ee().optional(),otpVerified:ot().optional(),promotionalConsent:ot().optional(),notificationPreferences:Ai(ee()).optional()}),ES=()=>{const s=Ye(),[t,r]=h.useState("personal"),[a,n]=h.useState({}),{mutate:i,isLoading:o}=kS({onSuccess:(f,S)=>{I.success("Rider created successfully!"),s("/admin/riders")},onError:(f,S)=>{I.error(`Failed to create rider: ${f.message}`)}}),{register:l,handleSubmit:c,formState:{errors:u},watch:d,setValue:m,control:x}=ft({resolver:Lt(FS),defaultValues:{otpVerified:!1,locationAccessPermission:!1,promotionalConsent:!1,savedPaymentMethods:[],notificationPreferences:[]}}),g=async(f,S)=>{var w;const j=(w=f.target.files)==null?void 0:w[0];if(j){n(y=>({...y,[S]:j}));const C=new FileReader;C.onloadend=()=>{const y=C.result;m(S,y)},C.readAsDataURL(j)}},p=(f,S,j)=>{var y;const w=a[f],C=d(f);return e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{children:S}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{type:"file",accept:"image/*,.pdf",onChange:b=>g(b,f),className:"flex-1"}),w&&e.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:w.name})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsx(O,{...l(f),placeholder:j,value:C||""}),u[f]&&e.jsx("p",{className:"text-sm text-destructive",children:(y=u[f])==null?void 0:y.message}),C&&e.jsx("p",{className:"text-xs text-muted-foreground",children:C.startsWith("data:")?"File uploaded":"URL provided"})]})]})},N=f=>{var w,C,y,b,v,M;let S=f.fullName||"";if(S){const P=S.trim().split(/\s+/);S=[...new Set(P)].join(" ")}const j={phoneNumber:f.phoneNumber.trim(),emailId:f.emailId.trim(),fullName:S,dateOfBirth:f.dateOfBirth||void 0,gender:f.gender||void 0,homeAddress:((w=f.homeAddress)==null?void 0:w.trim())||void 0,workAddress:((C=f.workAddress)==null?void 0:C.trim())||void 0,preferredLanguage:f.preferredLanguage||void 0,profilePhotoUrl:((y=f.profilePhotoUrl)==null?void 0:y.trim())||void 0,kycIdType:f.kycIdType||void 0,kycIdNumber:((b=f.kycIdNumber)==null?void 0:b.trim())||void 0,kycDocumentPhotoUrl:((v=f.kycDocumentPhotoUrl)==null?void 0:v.trim())||void 0,preferredPaymentMethod:f.preferredPaymentMethod||void 0,walletBalance:f.walletBalance?Number(f.walletBalance):void 0,savedPaymentMethods:f.savedPaymentMethods||void 0,deviceToken:((M=f.deviceToken)==null?void 0:M.trim())||void 0,locationAccessPermission:f.locationAccessPermission||!1,signupMethod:f.signupMethod||void 0,otpVerified:f.otpVerified||!1,promotionalConsent:f.promotionalConsent||!1,notificationPreferences:f.notificationPreferences||void 0,isDeletedValue:!1,status:"ACTIVE"};i(j)};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>s("/admin/riders"),className:"hover:bg-muted",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Add New Rider"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Register a new rider to the platform"})]})]})}),e.jsxs("form",{onSubmit:c(N),children:[e.jsxs(Ra,{value:t,onValueChange:r,className:"space-y-6",children:[e.jsxs(na,{className:"grid w-full grid-cols-4",children:[e.jsxs(es,{value:"personal",children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Personal"]}),e.jsxs(es,{value:"kyc",children:[e.jsx(ar,{className:"w-4 h-4 mr-2"}),"KYC"]}),e.jsxs(es,{value:"payment",children:[e.jsx(Er,{className:"w-4 h-4 mr-2"}),"Payment"]}),e.jsxs(es,{value:"additional",children:[e.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Additional"]})]}),e.jsx(ss,{value:"personal",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Personal Information"}),e.jsx($e,{children:"Enter the rider's personal details"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"phoneNumber",children:"Phone Number *"}),e.jsx(O,{id:"phoneNumber",...l("phoneNumber"),placeholder:"+1234567890"}),u.phoneNumber&&e.jsx("p",{className:"text-sm text-destructive",children:u.phoneNumber.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"emailId",children:"Email *"}),e.jsx(O,{id:"emailId",type:"email",...l("emailId"),placeholder:"rider@example.com",required:!0}),u.emailId&&e.jsx("p",{className:"text-sm text-destructive",children:u.emailId.message})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(O,{id:"fullName",...l("fullName",{setValueAs:f=>(f==null?void 0:f.trim())||""}),placeholder:"John Doe"}),u.fullName&&e.jsx("p",{className:"text-sm text-destructive",children:u.fullName.message})]}),e.jsx(hi,{control:x,name:"dateOfBirth",label:"Date of Birth",placeholder:"Select date of birth"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"gender",children:"Gender"}),e.jsxs(ge,{onValueChange:f=>m("gender",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select gender"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"male",children:"Male"}),e.jsx(A,{value:"female",children:"Female"}),e.jsx(A,{value:"other",children:"Other"}),e.jsx(A,{value:"prefer_not_to_say",children:"Prefer not to say"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(k,{htmlFor:"homeAddress",children:[e.jsx(Xe,{className:"w-4 h-4 inline mr-1"}),"Home Address"]}),e.jsx(O,{id:"homeAddress",...l("homeAddress"),placeholder:"123 Home St, City, State, ZIP"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(k,{htmlFor:"workAddress",children:[e.jsx(Xe,{className:"w-4 h-4 inline mr-1"}),"Work Address"]}),e.jsx(O,{id:"workAddress",...l("workAddress"),placeholder:"456 Work Ave, City, State, ZIP"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"preferredLanguage",children:"Preferred Language"}),e.jsxs(ge,{onValueChange:f=>m("preferredLanguage",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select language"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"en",children:"English"}),e.jsx(A,{value:"es",children:"Spanish"}),e.jsx(A,{value:"fr",children:"French"}),e.jsx(A,{value:"de",children:"German"}),e.jsx(A,{value:"hi",children:"Hindi"})]})]})]}),p("profilePhotoUrl","Profile Photo","https://example.com/photo.jpg"),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"signupMethod",children:"Signup Method"}),e.jsxs(ge,{onValueChange:f=>m("signupMethod",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select signup method"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"email",children:"Email"}),e.jsx(A,{value:"phone",children:"Phone"}),e.jsx(A,{value:"google",children:"Google"}),e.jsx(A,{value:"facebook",children:"Facebook"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(We,{id:"otpVerified",...l("otpVerified"),onCheckedChange:f=>m("otpVerified",f)}),e.jsx(k,{htmlFor:"otpVerified",className:"cursor-pointer",children:"OTP Verified"})]})]})})]})}),e.jsx(ss,{value:"kyc",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"KYC Information"}),e.jsx($e,{children:"Know Your Customer verification details"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"kycIdType",children:"KYC ID Type"}),e.jsxs(ge,{onValueChange:f=>m("kycIdType",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select ID type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"passport",children:"Passport"}),e.jsx(A,{value:"national_id",children:"National ID"}),e.jsx(A,{value:"driving_license",children:"Driving License"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"kycIdNumber",children:"KYC ID Number"}),e.jsx(O,{id:"kycIdNumber",...l("kycIdNumber"),placeholder:"ID number"})]}),p("kycDocumentPhotoUrl","KYC Document Photo","https://example.com/kyc-doc.jpg")]})})]})}),e.jsx(ss,{value:"payment",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Payment Information"}),e.jsx($e,{children:"Payment preferences and wallet details"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"preferredPaymentMethod",children:"Preferred Payment Method"}),e.jsxs(ge,{onValueChange:f=>m("preferredPaymentMethod",f),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select payment method"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"credit_card",children:"Credit Card"}),e.jsx(A,{value:"debit_card",children:"Debit Card"}),e.jsx(A,{value:"paypal",children:"PayPal"}),e.jsx(A,{value:"digital_wallet",children:"Digital Wallet"}),e.jsx(A,{value:"cash",children:"Cash"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"walletBalance",children:"Wallet Balance"}),e.jsx(O,{id:"walletBalance",type:"number",...l("walletBalance",{valueAsNumber:!0}),placeholder:"0.00",min:"0",step:"0.01"}),u.walletBalance&&e.jsx("p",{className:"text-sm text-destructive",children:u.walletBalance.message})]})]})})]})}),e.jsx(ss,{value:"additional",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Additional Information"}),e.jsx($e,{children:"Device and preferences"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{htmlFor:"deviceToken",children:"Device Token"}),e.jsx(O,{id:"deviceToken",...l("deviceToken"),placeholder:"FCM or device token"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(We,{id:"locationAccessPermission",...l("locationAccessPermission"),onCheckedChange:f=>m("locationAccessPermission",f)}),e.jsx(k,{htmlFor:"locationAccessPermission",className:"cursor-pointer",children:"Location Access Permission Granted"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"promotionalConsent",...l("promotionalConsent"),onCheckedChange:f=>m("promotionalConsent",f)}),e.jsx(k,{htmlFor:"promotionalConsent",className:"cursor-pointer",children:"Promotional Consent"})]})]})})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s("/admin/riders"),disabled:o,children:"Cancel"}),e.jsx(E,{type:"submit",className:"bg-gradient-primary hover:opacity-90",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Create Rider"]})})]})]})]})},MS=At({phoneNumber:ee().min(10,"Phone number must be at least 10 digits").max(20,"Phone number must not exceed 20 digits").regex(/^\+?[\d\s\-\(\)]+$/,"Invalid phone number format. Use digits, spaces, hyphens, and parentheses only"),emailId:ee().email("Invalid email address").optional().or(Qe("")),fullName:ee().min(2,"Full name is required"),dateOfBirth:ee().optional(),gender:ee().optional(),homeAddress:ee().optional(),workAddress:ee().optional(),preferredLanguage:ee().optional(),profilePhotoUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),kycIdType:ee().optional(),kycIdNumber:ee().optional(),kycDocumentPhotoUrl:ee().refine(s=>!s||s.startsWith("http")||s.startsWith("data:"),{message:"Must be a valid URL or uploaded file"}).optional().or(Qe("")),preferredPaymentMethod:ee().optional(),walletBalance:ms().min(0).optional().or(Qe("")),savedPaymentMethods:Ai(ee()).optional(),deviceToken:ee().optional(),locationAccessPermission:ot().optional(),signupMethod:ee().optional(),otpVerified:ot().optional(),promotionalConsent:ot().optional(),notificationPreferences:Ai(ee()).optional()}),OS=()=>{const s=Ye(),{riderId:t}=Js(),r=t?parseInt(t,10):0,[a,n]=h.useState("personal"),[i,o]=h.useState({}),{data:l,loading:c,error:u}=SS(r,{onError:b=>{I.error(`Failed to load rider: ${b.message}`)}}),{mutate:d,isLoading:m}=DS({onSuccess:(b,v)=>{I.success("Rider updated successfully!"),s("/admin/riders")},onError:(b,v)=>{I.error(`Failed to update rider: ${b.message}`)}}),{register:x,handleSubmit:g,formState:{errors:p},watch:N,setValue:f,reset:S,trigger:j}=ft({resolver:Lt(MS),defaultValues:{otpVerified:!1,locationAccessPermission:!1,promotionalConsent:!1,savedPaymentMethods:[],notificationPreferences:[]}});h.useEffect(()=>{l&&(S({phoneNumber:l.phoneNumber||"",emailId:l.emailId||"",fullName:l.fullName||"",dateOfBirth:l.dateOfBirth||"",gender:l.gender||"",homeAddress:l.homeAddress||"",workAddress:l.workAddress||"",preferredLanguage:l.preferredLanguage||"",profilePhotoUrl:l.profilePhotoUrl||"",kycIdType:l.kycIdType||"",kycIdNumber:l.kycIdNumber||"",kycDocumentPhotoUrl:l.kycDocumentPhotoUrl||"",preferredPaymentMethod:l.preferredPaymentMethod||"",walletBalance:l.walletBalance||void 0,savedPaymentMethods:l.savedPaymentMethods||[],deviceToken:l.deviceToken||"",locationAccessPermission:l.locationAccessPermission??!1,signupMethod:l.signupMethod||"",otpVerified:l.otpVerified??!1,promotionalConsent:l.promotionalConsent??!1,notificationPreferences:l.notificationPreferences||[]}),j())},[l,S,j]);const w=async(b,v)=>{var P;const M=(P=b.target.files)==null?void 0:P[0];if(M){o(R=>({...R,[v]:M}));const V=new FileReader;V.onloadend=()=>{const R=V.result;f(v,R)},V.readAsDataURL(M)}},C=(b,v,M)=>{var R;const P=i[b],V=N(b);return e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{children:v}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{type:"file",accept:"image/*,.pdf",onChange:T=>w(T,b),className:"flex-1"}),P&&e.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:P.name})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsx(O,{...x(b),placeholder:M,value:V||""}),p[b]&&e.jsx("p",{className:"text-sm text-destructive",children:(R=p[b])==null?void 0:R.message}),V&&e.jsx("p",{className:"text-xs text-muted-foreground",children:V.startsWith("data:")?"File uploaded":"URL provided"})]})]})},y=b=>{var M,P,V,R,T,q,_;if(!r){I.error("Rider ID is missing");return}const v={riderId:r,phoneNumber:b.phoneNumber.trim(),emailId:((M=b.emailId)==null?void 0:M.trim())||void 0,fullName:b.fullName.trim(),dateOfBirth:b.dateOfBirth||void 0,gender:b.gender||void 0,homeAddress:((P=b.homeAddress)==null?void 0:P.trim())||void 0,workAddress:((V=b.workAddress)==null?void 0:V.trim())||void 0,preferredLanguage:b.preferredLanguage||void 0,profilePhotoUrl:((R=b.profilePhotoUrl)==null?void 0:R.trim())||void 0,kycIdType:b.kycIdType||void 0,kycIdNumber:((T=b.kycIdNumber)==null?void 0:T.trim())||void 0,kycDocumentPhotoUrl:((q=b.kycDocumentPhotoUrl)==null?void 0:q.trim())||void 0,preferredPaymentMethod:b.preferredPaymentMethod||void 0,walletBalance:b.walletBalance?Number(b.walletBalance):void 0,savedPaymentMethods:b.savedPaymentMethods||void 0,deviceToken:((_=b.deviceToken)==null?void 0:_.trim())||void 0,locationAccessPermission:b.locationAccessPermission??!1,signupMethod:b.signupMethod||void 0,otpVerified:b.otpVerified??!1,promotionalConsent:b.promotionalConsent??!1,notificationPreferences:b.notificationPreferences||void 0,isDeletedValue:(l==null?void 0:l.isDeletedValue)??!1,status:(l==null?void 0:l.status)||"ACTIVE"};d({id:r,data:v})};return c?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading rider details..."})]})}):u||!l?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-destructive mb-4",children:(u==null?void 0:u.message)||"Rider not found"}),e.jsx(E,{onClick:()=>s("/admin/riders"),children:"Back to Riders"})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>s("/admin/riders"),className:"hover:bg-muted",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Edit Rider"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Update rider information"})]})]})}),e.jsxs("form",{onSubmit:g(y),children:[e.jsxs(Ra,{value:a,onValueChange:n,className:"space-y-6",children:[e.jsxs(na,{className:"grid w-full grid-cols-4",children:[e.jsxs(es,{value:"personal",children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Personal"]}),e.jsxs(es,{value:"kyc",children:[e.jsx(ar,{className:"w-4 h-4 mr-2"}),"KYC"]}),e.jsxs(es,{value:"payment",children:[e.jsx(Er,{className:"w-4 h-4 mr-2"}),"Payment"]}),e.jsxs(es,{value:"additional",children:[e.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Additional"]})]}),e.jsx(ss,{value:"personal",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Personal Information"}),e.jsx($e,{children:"Update the rider's personal details"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"phoneNumber",children:"Phone Number *"}),e.jsx(O,{id:"phoneNumber",...x("phoneNumber"),placeholder:"+1234567890"}),p.phoneNumber&&e.jsx("p",{className:"text-sm text-destructive",children:p.phoneNumber.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"emailId",children:"Email"}),e.jsx(O,{id:"emailId",type:"email",...x("emailId"),placeholder:"rider@example.com"}),p.emailId&&e.jsx("p",{className:"text-sm text-destructive",children:p.emailId.message})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(O,{id:"fullName",...x("fullName"),placeholder:"John Doe"}),p.fullName&&e.jsx("p",{className:"text-sm text-destructive",children:p.fullName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"dateOfBirth",children:"Date of Birth"}),e.jsx(O,{id:"dateOfBirth",type:"date",...x("dateOfBirth")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"gender",children:"Gender"}),e.jsxs(ge,{value:N("gender"),onValueChange:b=>f("gender",b),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select gender"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"male",children:"Male"}),e.jsx(A,{value:"female",children:"Female"}),e.jsx(A,{value:"other",children:"Other"}),e.jsx(A,{value:"prefer_not_to_say",children:"Prefer not to say"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(k,{htmlFor:"homeAddress",children:[e.jsx(Xe,{className:"w-4 h-4 inline mr-1"}),"Home Address"]}),e.jsx(O,{id:"homeAddress",...x("homeAddress"),placeholder:"123 Home St, City, State, ZIP"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(k,{htmlFor:"workAddress",children:[e.jsx(Xe,{className:"w-4 h-4 inline mr-1"}),"Work Address"]}),e.jsx(O,{id:"workAddress",...x("workAddress"),placeholder:"456 Work Ave, City, State, ZIP"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"preferredLanguage",children:"Preferred Language"}),e.jsxs(ge,{value:N("preferredLanguage"),onValueChange:b=>f("preferredLanguage",b),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select language"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"en",children:"English"}),e.jsx(A,{value:"es",children:"Spanish"}),e.jsx(A,{value:"fr",children:"French"}),e.jsx(A,{value:"de",children:"German"}),e.jsx(A,{value:"hi",children:"Hindi"})]})]})]}),C("profilePhotoUrl","Profile Photo","https://example.com/photo.jpg"),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"signupMethod",children:"Signup Method"}),e.jsxs(ge,{value:N("signupMethod"),onValueChange:b=>f("signupMethod",b),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select signup method"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"email",children:"Email"}),e.jsx(A,{value:"phone",children:"Phone"}),e.jsx(A,{value:"google",children:"Google"}),e.jsx(A,{value:"facebook",children:"Facebook"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(We,{id:"otpVerified",checked:N("otpVerified"),onCheckedChange:b=>f("otpVerified",b)}),e.jsx(k,{htmlFor:"otpVerified",className:"cursor-pointer",children:"OTP Verified"})]})]})})]})}),e.jsx(ss,{value:"kyc",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"KYC Information"}),e.jsx($e,{children:"Update Know Your Customer verification details"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"kycIdType",children:"KYC ID Type"}),e.jsxs(ge,{value:N("kycIdType"),onValueChange:b=>f("kycIdType",b),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select ID type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"passport",children:"Passport"}),e.jsx(A,{value:"national_id",children:"National ID"}),e.jsx(A,{value:"driving_license",children:"Driving License"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"kycIdNumber",children:"KYC ID Number"}),e.jsx(O,{id:"kycIdNumber",...x("kycIdNumber"),placeholder:"ID number"})]}),C("kycDocumentPhotoUrl","KYC Document Photo","https://example.com/kyc-doc.jpg")]})})]})}),e.jsx(ss,{value:"payment",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Payment Information"}),e.jsx($e,{children:"Update payment preferences and wallet details"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"preferredPaymentMethod",children:"Preferred Payment Method"}),e.jsxs(ge,{value:N("preferredPaymentMethod"),onValueChange:b=>f("preferredPaymentMethod",b),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select payment method"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"credit_card",children:"Credit Card"}),e.jsx(A,{value:"debit_card",children:"Debit Card"}),e.jsx(A,{value:"paypal",children:"PayPal"}),e.jsx(A,{value:"digital_wallet",children:"Digital Wallet"}),e.jsx(A,{value:"cash",children:"Cash"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"walletBalance",children:"Wallet Balance"}),e.jsx(O,{id:"walletBalance",type:"number",...x("walletBalance",{valueAsNumber:!0}),placeholder:"0.00",min:"0",step:"0.01"}),p.walletBalance&&e.jsx("p",{className:"text-sm text-destructive",children:p.walletBalance.message})]})]})})]})}),e.jsx(ss,{value:"additional",className:"space-y-6",children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Additional Information"}),e.jsx($e,{children:"Update device and preferences"})]}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{htmlFor:"deviceToken",children:"Device Token"}),e.jsx(O,{id:"deviceToken",...x("deviceToken"),placeholder:"FCM or device token"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(We,{id:"locationAccessPermission",checked:N("locationAccessPermission"),onCheckedChange:b=>f("locationAccessPermission",b)}),e.jsx(k,{htmlFor:"locationAccessPermission",className:"cursor-pointer",children:"Location Access Permission Granted"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"promotionalConsent",checked:N("promotionalConsent"),onCheckedChange:b=>f("promotionalConsent",b)}),e.jsx(k,{htmlFor:"promotionalConsent",className:"cursor-pointer",children:"Promotional Consent"})]})]})})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s("/admin/riders"),disabled:m,children:"Cancel"}),e.jsx(E,{type:"submit",className:"bg-gradient-primary hover:opacity-90",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Update Rider"]})})]})]})]})};class VS{constructor(t=rf,r={}){gt(this,"baseURL");gt(this,"defaultHeaders");this.baseURL=t,this.defaultHeaders={"Content-Type":"application/json",Accept:"application/json",...r}}buildURL(t,r){const a=/^https?:\/\//i.test(this.baseURL);let n;if(a)n=new URL(t,this.baseURL);else{const i=this.baseURL.endsWith("/")?this.baseURL.slice(0,-1):this.baseURL,o=t.startsWith("/")?t:`/${t}`,l=`${i}${o}`;n=new URL(l,window.location.origin)}return r&&Object.entries(r).forEach(([i,o])=>{o!=null&&(Array.isArray(o)?o.forEach(l=>n.searchParams.append(i,String(l))):n.searchParams.append(i,String(o)))}),a?n.toString():n.pathname+n.search}async request(t,r={}){const{params:a,headers:n,...i}=r,o=this.buildURL(t,a);try{const l=await fetch(o,{...i,headers:{...this.defaultHeaders,...n}});if(!l.ok){const u=await l.json().catch(()=>({}));throw new Error(u.message||`HTTP Error: ${l.status} ${l.statusText}`)}return await l.json()}catch(l){throw l instanceof Error?l:new Error("An unexpected error occurred")}}async get(t,r){return this.request(t,{method:"GET",params:r})}async post(t,r,a){return this.request(t,{method:"POST",body:r?JSON.stringify(r):void 0,params:a})}async put(t,r){return this.request(t,{method:"PUT",body:JSON.stringify(r)})}async delete(t){return this.request(t,{method:"DELETE"})}setBaseURL(t){this.baseURL=t}setHeaders(t){this.defaultHeaders={...this.defaultHeaders,...t}}}const ds=new VS;function hf(s,t={}){const r=h.useCallback(async()=>{var n;const a=await ds.get(`/base-pricing/${s}`);if((n=a.data)!=null&&n.data)return a.data.data;if(a.data&&"pricingId"in a.data)return a.data;throw new Error("Unable to parse pricing data from API response")},[s]);return Cs({queryKey:["pricing",s],queryFn:r,enabled:t.enabled!==!1&&!!s,onSuccess:t.onSuccess,onError:t.onError})}function US(s={},t={}){const r=h.useCallback(async()=>{const a={};s.page!==void 0&&(a.page=s.page),s.size!==void 0&&(a.size=s.size),s.sort&&s.sort.length>0&&(a.sort=s.sort),s.search&&(a.search=s.search),s.vehicleCategoryId&&(a.vehicleCategoryId=s.vehicleCategoryId),s.cityId&&(a.cityId=s.cityId),s.isActive!==void 0&&(a.isActive=s.isActive);const n=await ds.get("/base-pricing/list",a);return n.data,n.data},[s.page,s.size,s.sort,s.search,s.vehicleCategoryId,s.cityId,s.isActive]);return Cs({queryKey:["pricings",s],queryFn:r,enabled:t.enabled!==!1,onSuccess:t.onSuccess,onError:t.onError})}function LS(s={}){const t=h.useCallback(async()=>{const r=await ds.get("/base-pricing/list-only");return r.data,r.data},[]);return Cs({queryKey:["all-pricings"],queryFn:t,enabled:s.enabled!==!1,onSuccess:s.onSuccess,onError:s.onError})}function BS(s={}){return Le({mutationFn:async t=>await ds.post("/base-pricing",t),onSuccess:s.onSuccess,onError:s.onError})}function $S(s={}){return Le({mutationFn:async({id:t,data:r})=>await ds.put(`/base-pricing/${t}`,r),onSuccess:s.onSuccess,onError:s.onError})}function xf(s={}){return Le({mutationFn:async t=>await ds.delete(`/base-pricing/${t}`),onSuccess:s.onSuccess,onError:s.onError})}function ff(s={}){return Le({mutationFn:async t=>await ds.get(`/base-pricing/toggle-active-status/${t}`),onSuccess:s.onSuccess,onError:s.onError})}function In(s={}){const t=h.useCallback(async()=>{const r=await ds.get("/vehicle-category/active-list-only");return r.data,r.data},[]);return Cs({queryKey:["vehicle-categories"],queryFn:t,enabled:s.enabled!==!1,onSuccess:s.onSuccess,onError:s.onError})}function qS(s,t={}){const r=h.useCallback(async()=>{const a=await ds.get(`/city/${s}`);return a.data,a.data},[s]);return Cs({queryKey:["city",s],queryFn:r,enabled:t.enabled!==!1&&!!s,onSuccess:t.onSuccess,onError:t.onError})}function Ea(s={}){const t=h.useCallback(async()=>{const r=await ds.get("/city/list-only");return r.data,r.data},[]);return Cs({queryKey:["cities"],queryFn:t,enabled:s.enabled!==!1,onSuccess:s.onSuccess,onError:s.onError})}const pf=({open:s,onOpenChange:t,pricingDetails:r,pricingId:a,onConfirm:n,isLoading:i=!1})=>{const o=()=>{n(a)};return e.jsx(Fr,{open:s,onOpenChange:t,children:e.jsxs(dr,{children:[e.jsxs(ur,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"h-5 w-5 text-destructive"}),e.jsx(hr,{children:"Delete Pricing Rule"})]}),e.jsxs(xr,{className:"text-left",children:["Are you sure you want to delete the pricing rule for ",e.jsx("span",{className:"font-semibold",children:r}),"? This action cannot be undone and will permanently remove:",e.jsxs("ul",{className:"mt-2 ml-4 list-disc space-y-1 text-sm",children:[e.jsx("li",{children:"All pricing configuration data"}),e.jsx("li",{children:"Base fare and rate calculations"}),e.jsx("li",{children:"Minimum fare and night charges"}),e.jsx("li",{children:"Toll fee settings"}),e.jsx("li",{children:"Historical pricing data and analytics"})]}),e.jsx("div",{className:"mt-3 p-3 bg-destructive/10 border border-destructive/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-destructive font-medium",children:[e.jsx("strong",{children:"Warning:"})," This action is permanent and cannot be reversed. Active rides using this pricing rule may be affected."]})}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 p-3 bg-amber-50 border border-amber-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx(os,{className:"w-4 h-4"}),e.jsx(ps,{className:"w-4 h-4"})]}),e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Impact:"})," Riders and drivers in this location will need fallback pricing until a new rule is created."]})]})]})]}),e.jsxs(mr,{children:[e.jsx(pr,{disabled:i,children:"Cancel"}),e.jsx(fr,{onClick:o,disabled:i,className:"bg-destructive hover:bg-destructive/90",children:i?"Deleting...":"Delete Pricing Rule"})]})]})})},_S=()=>{var te,ye;const s=Ye(),t=ze(),[r,a]=h.useState(""),[n,i]=h.useState(""),[o,l]=h.useState("all"),[c,u]=h.useState(0),[d,m]=h.useState(10),[x,g]=h.useState(!1),[p,N]=h.useState(null),f=Ne.useRef(null),S=h.useCallback(se=>{a(se.target.value)},[]);h.useEffect(()=>{const se=setTimeout(()=>{i(r)},300);return()=>{clearTimeout(se)}},[r]);const j=o!=="all",w=j?1e3:d,C=j?0:c;h.useEffect(()=>{u(0)},[n]);const y=n.trim().length>2,{data:b,isLoading:v,error:M,refetch:P}=US({page:C,size:w,...y&&{search:n.trim()}},{enabled:!0,onError:se=>{I.error(`Failed to load pricing: ${se.message}`)}}),{data:V}=Ea({enabled:!0}),R=h.useMemo(()=>{const se=new Map;return V&&V.forEach(Z=>{se.set(Z.cityId,Z.cityName)}),se},[V]),{mutate:T,isPending:q}=xf({onSuccess:async(se,Z)=>{I.success("Pricing deleted successfully!"),await t.invalidateQueries({queryKey:["pricings"]})},onError:(se,Z)=>{I.error(`Failed to delete pricing: ${se.message}`)}}),{mutate:_,isPending:D}=ff({onSuccess:async(se,Z)=>{I.success("Pricing status updated successfully!"),t.setQueriesData({queryKey:["pricings"]},U=>{if(!(U!=null&&U.content))return U;const he=U.content.map(Te=>Te.pricingId===Z?{...Te,isActive:!Te.isActive}:Te);return{...U,content:he}})},onError:(se,Z)=>{I.error(`Failed to update pricing status: ${se.message}`)}}),X=h.useCallback(se=>se?{variant:"default",className:"bg-success text-success-foreground",label:"Active"}:{variant:"secondary",className:"bg-muted text-muted-foreground",label:"Inactive"},[]),ne=(se,Z,U)=>{se==="Edit"?s(`/admin/base-pricing/edit/${Z}`):se==="View"?s(`/admin/base-pricing/view/${Z}`):se==="Toggle Status"&&_(Z)},me=(se,Z)=>{N({id:se,details:Z}),g(!0)},Q=se=>{T(se),g(!1),N(null)},be=()=>{g(!1),N(null)},ke=h.useMemo(()=>{const se=b;if(!se||!se.content)return[];let Z=se.content;return o!=="all"&&(Z=Z.filter(U=>o==="active"?U.isActive===!0:o==="inactive"?U.isActive===!1:!0)),Z},[b,o,j]),K=b,G=ke.length,ue=((te=K==null?void 0:K.page)==null?void 0:te.totalElements)??0,de=h.useMemo(()=>{var Z,U,he,Te;if(j)return G>0?Math.ceil(G/d):0;const se=((Z=K==null?void 0:K.page)==null?void 0:Z.totalPages)??0;return se===0&&((U=K==null?void 0:K.page)!=null&&U.totalElements)&&((he=K==null?void 0:K.page)==null?void 0:he.totalElements)>0?Math.ceil(((Te=K==null?void 0:K.page)==null?void 0:Te.totalElements)/d):se===0&&(K!=null&&K.content)&&(K==null?void 0:K.content.length)>0?Math.ceil((K==null?void 0:K.content.length)/d):se},[G,d,j,K]),xe=h.useMemo(()=>{if(!j)return(K==null?void 0:K.content)??[];const se=c*d,Z=se+d;return ke.slice(se,Z)},[ke,c,d,j,K]),ce=se=>{u(se-1)},ae=se=>{m(se),u(0)};h.useEffect(()=>{if(!v&&K&&xe.length===0&&c>0&&de>0){const se=Math.max(0,de-1);u(se)}},[v,xe.length,c,de,K]);const W=h.useCallback(se=>{var U,he;return`${(U=se.city)!=null&&U.cityId&&R.has(se.city.cityId)?R.get(se.city.cityId):((he=se.city)==null?void 0:he.cityName)||"Unknown City"} - ${se.vehicleCategoryId?"Vehicle "+se.vehicleCategoryId:"Unknown Vehicle"}`},[R]),F=h.useCallback(se=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(se),[]);return v?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading pricing data..."})]})}):M?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(Nn,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Pricing"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:M.message}),e.jsx(E,{onClick:()=>P(),children:"Try Again"})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Pricing Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and configure base pricing for your ride-hailing service"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(E,{className:"bg-gradient-primary hover:opacity-90",onClick:()=>s("/admin/base-pricing/add"),children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add New Pricing"]})})]}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{ref:f,placeholder:"Search pricing by city or vehicle... (min 3 characters)",className:"pl-10",value:r,onChange:S,autoComplete:"off"})]}),e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"w-40",children:[e.jsx(zi,{className:"w-4 h-4 mr-2"}),o==="all"?"All Status":o.charAt(0).toUpperCase()+o.slice(1)]})}),e.jsxs(Ss,{align:"end",children:[e.jsx(Pe,{onClick:()=>l("all"),children:"All Status"}),e.jsx(Pe,{onClick:()=>l("active"),children:"Active"}),e.jsx(Pe,{onClick:()=>l("inactive"),children:"Inactive"})]})]})]})})}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5"}),"Pricing Rules (",v?"...":j?`${G} filtered`:ue>0?ue:((ye=K==null?void 0:K.content)==null?void 0:ye.length)??0,")"]})}),e.jsx(B,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Location & Vehicle"}),e.jsx(oe,{children:"Base Fare"}),e.jsx(oe,{children:"Rate per KM"}),e.jsx(oe,{children:"Rate per Minute"}),e.jsx(oe,{children:"Minimum Fare"}),e.jsx(oe,{children:"Night Charges"}),e.jsx(oe,{children:"Toll Fee"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:xe.length===0?e.jsx(Ue,{children:e.jsx(re,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:ke.length===0?"No pricing rules found":"No pricing rules match the current filters"})}):xe.map(se=>{var he,Te;const Z=X(se.isActive),U=W(se);return e.jsxs(Ue,{className:"hover:bg-muted/50",children:[e.jsx(re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:(he=se.city)!=null&&he.cityId&&R.has(se.city.cityId)?R.get(se.city.cityId):((Te=se.city)==null?void 0:Te.cityName)||"Unknown City"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(os,{className:"w-3 h-3"}),e.jsxs("span",{children:["Vehicle ID: ",se.vehicleCategoryId]})]})]})}),e.jsx(re,{children:e.jsx("div",{className:"font-semibold text-green-600",children:F(se.baseFare)})}),e.jsx(re,{children:e.jsx("div",{className:"text-blue-600",children:F(se.ratePerKm)})}),e.jsx(re,{children:e.jsx("div",{className:"text-orange-600",children:F(se.ratePerMinute)})}),e.jsx(re,{children:e.jsx("div",{className:"text-purple-600",children:F(se.minimumFare)})}),e.jsx(re,{children:e.jsx("div",{className:"text-indigo-600",children:F(se.nightCharges)})}),e.jsx(re,{children:e.jsx(we,{variant:se.tollFeeApplicable?"default":"secondary",className:se.tollFeeApplicable?"bg-blue-100 text-blue-800":"",children:se.tollFeeApplicable?"Applicable":"Not Applicable"})}),e.jsx(re,{children:e.jsx(we,{className:Z.className,children:se.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-3 h-3 mr-1"}),Z.label]}):e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-3 h-3 mr-1"}),Z.label]})})}),e.jsx(re,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(Mr,{className:"w-4 h-4"})})}),e.jsxs(Ss,{align:"end",children:[e.jsxs(Pe,{onSelect:()=>{s(`/admin/base-pricing/view/${se.pricingId||0}`)},children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(Pe,{onSelect:()=>ne("Edit",se.pricingId||0),children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Pricing"]}),e.jsx(Pe,{onSelect:()=>ne("Toggle Status",se.pricingId||0),disabled:D,children:se.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate"]})}),e.jsxs(Pe,{onSelect:()=>me(se.pricingId||0,U),className:"text-destructive",disabled:q,children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Delete Pricing"]})]})]})})]},se.pricingId)})})]}),de>0&&e.jsx(dt,{currentPage:c+1,totalPages:de,totalItems:j?G:ue,itemsPerPage:d,onPageChange:ce,onItemsPerPageChange:ae,className:"mt-4"})]})})]}),e.jsx(pf,{open:x,onOpenChange:be,pricingDetails:(p==null?void 0:p.details)||"",pricingId:(p==null?void 0:p.id)||0,onConfirm:Q,isLoading:q})]})},WS=At({vehicleCategoryId:ms().min(1,"Vehicle category is required"),cityId:ms().min(1,"City is required"),baseFare:ms().min(0,"Base fare must be at least 0"),ratePerKm:ms().min(0,"Rate per km must be at least 0"),ratePerMinute:ms().min(0,"Rate per minute must be at least 0"),minimumFare:ms().min(0,"Minimum fare must be at least 0"),nightCharges:ms().min(0,"Night charges must be at least 0"),tollFeeApplicable:ot()}),vu=()=>{var M,P,V,R;const s=Ye(),t=ze(),{pricingId:r}=Js(),a=!!r,n=r?parseInt(r,10):0,{data:i,isLoading:o}=hf(n,{enabled:a,onError:T=>{I.error(`Failed to load pricing: ${T.message}`)}}),{data:l,isLoading:c}=In(),{data:u,isLoading:d}=Ea(),{mutate:m,isPending:x}=BS({onSuccess:async(T,q)=>{I.success("Pricing rule created successfully!"),await t.invalidateQueries({queryKey:["pricings"]}),s("/admin/base-pricing")},onError:(T,q)=>{I.error(`Failed to create pricing: ${T.message}`)}}),{mutate:g,isPending:p}=$S({onSuccess:async(T,q)=>{I.success("Pricing rule updated successfully!"),await t.invalidateQueries({queryKey:["pricings"]}),s("/admin/base-pricing")},onError:(T,q)=>{I.error(`Failed to update pricing: ${T.message}`)}}),{register:N,handleSubmit:f,formState:{errors:S},watch:j,setValue:w,reset:C,control:y}=ft({resolver:Lt(WS),defaultValues:{tollFeeApplicable:!1}});h.useEffect(()=>{var T;if(a&&i&&!o){const q=i,_=((T=q.city)==null?void 0:T.cityId)||0,D=q.vehicleCategoryId||0;C({vehicleCategoryId:D,cityId:_,baseFare:q.baseFare||0,ratePerKm:q.ratePerKm||0,ratePerMinute:q.ratePerMinute||0,minimumFare:q.minimumFare||0,nightCharges:q.nightCharges||0,tollFeeApplicable:q.tollFeeApplicable||!1})}},[i,a,C,o,n]);const b=j(),v=T=>{const q=u==null?void 0:u.find(_=>_.cityId===T.cityId);if(!q){I.error("Selected city not found. Please select a valid city.");return}if(a&&n){const _=i,D={pricingId:n,vehicleCategoryId:T.vehicleCategoryId,city:q,baseFare:T.baseFare,ratePerKm:T.ratePerKm,ratePerMinute:T.ratePerMinute,minimumFare:T.minimumFare,nightCharges:T.nightCharges,tollFeeApplicable:T.tollFeeApplicable,isActive:!0,createdBy:_==null?void 0:_.createdBy,createdDate:_==null?void 0:_.createdDate,isDeletedValue:(_==null?void 0:_.isDeletedValue)||!1,modifiedBy:"admin"};g({id:n,data:D})}else{const _={vehicleCategoryId:T.vehicleCategoryId,city:q,baseFare:T.baseFare,ratePerKm:T.ratePerKm,ratePerMinute:T.ratePerMinute,minimumFare:T.minimumFare,nightCharges:T.nightCharges,tollFeeApplicable:T.tollFeeApplicable,isActive:!0,createdBy:"admin",isDeletedValue:!1,modifiedBy:"admin"};m(_)}};return o?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading pricing details..."})]})}):e.jsxs("div",{className:"space-y-6 animate-fade-in max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>s("/admin/base-pricing"),className:"shrink-0",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to Pricing"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:a?"Edit Pricing Rule":"Create New Pricing Rule"}),e.jsx("p",{className:"text-muted-foreground",children:a?"Modify the pricing configuration for a specific location and vehicle type":"Configure base pricing for a specific location and vehicle type"})]})]}),e.jsxs("form",{onSubmit:f(v),className:"space-y-6",children:[e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Location & Vehicle Configuration"]}),e.jsx($e,{children:"Select the city and vehicle category for this pricing rule"})]}),e.jsxs(B,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(bi,{name:"cityId",control:y,render:({field:T})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"cityId",children:"City *"}),e.jsxs(ge,{value:T.value?T.value.toString():"",onValueChange:q=>{const _=parseInt(q,10);T.onChange(isNaN(_)?0:_)},disabled:d,children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select a city"})}),e.jsx(pe,{children:(u==null?void 0:u.map(q=>e.jsx(A,{value:q.cityId.toString(),children:q.cityName},q.cityId)))||[]})]}),S.cityId&&e.jsx("p",{className:"text-sm text-destructive",children:S.cityId.message})]})}),e.jsx(bi,{name:"vehicleCategoryId",control:y,render:({field:T})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleCategoryId",children:"Vehicle Category *"}),e.jsxs(ge,{value:T.value?T.value.toString():"",onValueChange:q=>{const _=parseInt(q,10);T.onChange(isNaN(_)?0:_)},disabled:c,children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select vehicle category"})}),e.jsx(pe,{children:(l==null?void 0:l.map(q=>e.jsxs(A,{value:q.vehicleCategoryId.toString(),children:[q.vehicleCategoryName," (Max:"," ",q.maxPassengerCount," passengers)"]},q.vehicleCategoryId)))||[]})]}),S.vehicleCategoryId&&e.jsx("p",{className:"text-sm text-destructive",children:S.vehicleCategoryId.message})]})})]})]}),e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5"}),"Pricing Configuration"]}),e.jsx($e,{children:"Set the base fare and rate calculations for this pricing rule"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"baseFare",children:"Base Fare ($) *"}),e.jsx(O,{id:"baseFare",type:"number",step:"0.01",min:"0",placeholder:"0.00",...N("baseFare",{valueAsNumber:!0})}),S.baseFare&&e.jsx("p",{className:"text-sm text-destructive",children:S.baseFare.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"ratePerKm",children:"Rate per KM ($) *"}),e.jsx(O,{id:"ratePerKm",type:"number",step:"0.01",min:"0",placeholder:"0.00",...N("ratePerKm",{valueAsNumber:!0})}),S.ratePerKm&&e.jsx("p",{className:"text-sm text-destructive",children:S.ratePerKm.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"ratePerMinute",children:"Rate per Minute ($) *"}),e.jsx(O,{id:"ratePerMinute",type:"number",step:"0.01",min:"0",placeholder:"0.00",...N("ratePerMinute",{valueAsNumber:!0})}),S.ratePerMinute&&e.jsx("p",{className:"text-sm text-destructive",children:S.ratePerMinute.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"minimumFare",children:"Minimum Fare ($) *"}),e.jsx(O,{id:"minimumFare",type:"number",step:"0.01",min:"0",placeholder:"0.00",...N("minimumFare",{valueAsNumber:!0})}),S.minimumFare&&e.jsx("p",{className:"text-sm text-destructive",children:S.minimumFare.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"nightCharges",children:"Night Charges ($) *"}),e.jsx(O,{id:"nightCharges",type:"number",step:"0.01",min:"0",placeholder:"0.00",...N("nightCharges",{valueAsNumber:!0})}),S.nightCharges&&e.jsx("p",{className:"text-sm text-destructive",children:S.nightCharges.message})]}),e.jsx(bi,{name:"tollFeeApplicable",control:y,render:({field:T})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"tollFeeApplicable",children:"Toll Fee Settings"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx(We,{id:"tollFeeApplicable",checked:T.value||!1,onCheckedChange:T.onChange}),e.jsx(k,{htmlFor:"tollFeeApplicable",className:"text-sm font-normal",children:"Toll fees are applicable for this route"})]})]})})]})})]}),e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Pricing Preview"]}),e.jsx($e,{children:"Preview how the pricing will be calculated for a typical ride"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3 text-sm",children:"Example Ride Calculation:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Fare:"}),e.jsxs("span",{className:"font-medium",children:["$",((M=b.baseFare)==null?void 0:M.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["5 km  $",((P=b.ratePerKm)==null?void 0:P.toFixed(2))||"0.00","/km:"]}),e.jsxs("span",{className:"font-medium",children:["$",((b.ratePerKm||0)*5).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["15 min  $",((V=b.ratePerMinute)==null?void 0:V.toFixed(2))||"0.00","/min:"]}),e.jsxs("span",{className:"font-medium",children:["$",((b.ratePerMinute||0)*15).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Night Charges:"}),e.jsxs("span",{className:"font-medium",children:["$",((R=b.nightCharges)==null?void 0:R.toFixed(2))||"0.00"]})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["$",Math.max(b.minimumFare||0,(b.baseFare||0)+(b.ratePerKm||0)*5+(b.ratePerMinute||0)*15+(b.nightCharges||0)).toFixed(2)]})]})})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-semibold mb-2 text-sm text-blue-800",children:[e.jsx(Ts,{className:"inline w-4 h-4 mr-1"}),"Important Notes:"]}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:" Minimum fare guarantees driver earnings"}),e.jsx("li",{children:" Night charges apply during specific hours"}),e.jsx("li",{children:" Toll fees are added separately when applicable"}),e.jsx("li",{children:" Rates are calculated based on actual route and time"})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s("/admin/base-pricing"),disabled:x||p,children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:x||p,className:"bg-gradient-primary hover:opacity-90",children:[x||p?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),a?"Updating...":"Creating..."]}):e.jsx(Xs,{className:"w-4 h-4 mr-2"}),a?"Update Pricing Rule":"Create Pricing Rule"]})]})]})]})},gf=h.forwardRef(({className:s,orientation:t="horizontal",decorative:r=!0,...a},n)=>e.jsx(Sm,{ref:n,decorative:r,orientation:t,className:le("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...a}));gf.displayName=Sm.displayName;const KS=()=>{var R,T;const s=Ye(),t=ze(),{pricingId:r}=Js(),a=r?parseInt(r,10):0,[n,i]=h.useState(!1),[o,l]=h.useState(null),{data:c,loading:u,error:d}=hf(a,{onError:q=>{I.error(`Failed to load pricing: ${q.message}`)}}),{data:m}=In({enabled:!0}),{mutate:x,isLoading:g}=ff({onSuccess:async(q,_)=>{I.success("Pricing status updated successfully!"),await t.invalidateQueries({queryKey:["pricings"]}),await t.invalidateQueries({queryKey:["pricing",a]})},onError:q=>{I.error(`Failed to update pricing status: ${q.message}`)}}),{mutate:p,isLoading:N}=xf({onSuccess:(q,_)=>{I.success("Pricing deleted successfully!"),s("/admin/base-pricing")},onError:(q,_)=>{I.error(`Failed to delete pricing: ${q.message}`)}}),f=h.useCallback(q=>{if(!m)return`Vehicle ID: ${q}`;const _=m.find(D=>D.vehicleCategoryId===q);return(_==null?void 0:_.vehicleCategoryName)||`Vehicle ID: ${q}`},[]),S=h.useCallback(q=>{if(m)return m.find(_=>_.vehicleCategoryId===q)},[]),j=h.useCallback(q=>q?{variant:"default",className:"bg-success text-success-foreground",label:"Active"}:{variant:"secondary",className:"bg-muted text-muted-foreground",label:"Inactive"},[]),w=h.useCallback(q=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(q),[]),C=h.useCallback(q=>new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),[]),y=()=>{x(a)},b=()=>{var q;if(c){const _=`${f(c.vehicleCategoryId)} - ${((q=c.city)==null?void 0:q.cityName)||"Unknown City"}`;l({id:a,details:_}),i(!0)}},v=q=>{p(q),i(!1),l(null)},M=()=>{i(!1),l(null)};if(u)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading pricing details..."})]})});if(d||!c)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(vt,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pricing Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:(d==null?void 0:d.message)||"The requested pricing rule could not be found."}),e.jsx(E,{onClick:()=>s("/admin/base-pricing"),children:"Back to Pricing"})]})})});const P=S(c.vehicleCategoryId),V=j(c.isActive);return e.jsxs("div",{className:"space-y-6 animate-fade-in max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>s("/admin/base-pricing"),children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to Pricing"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Pricing Details"}),e.jsx("p",{className:"text-muted-foreground",children:"View detailed information about this pricing rule"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",onClick:()=>s(`/admin/base-pricing/edit/${a}`),children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Pricing"]}),e.jsx(E,{variant:"outline",onClick:y,disabled:g,className:c.isActive?"text-orange-600":"text-green-600",children:c.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate"]})}),e.jsxs(E,{variant:"destructive",onClick:b,disabled:N,children:[e.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Delete Pricing"]})]})]}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:e.jsx(ps,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:f(c.vehicleCategoryId)}),e.jsx("p",{className:"text-muted-foreground",children:((R=c.city)==null?void 0:R.cityName)||"Unknown City"})]})]}),e.jsx(we,{className:V.className,children:V.label})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(yo,{className:"w-5 h-5"}),"Basic Information"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehicle Category"}),e.jsx("p",{className:"font-medium",children:f(c.vehicleCategoryId)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"City"}),e.jsx("p",{className:"font-medium",children:((T=c.city)==null?void 0:T.cityName)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pricing ID"}),e.jsxs("p",{className:"font-medium",children:["#",c.pricingId]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(we,{className:V.className,children:V.label})]})]}),P&&e.jsxs("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",children:"Vehicle Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Max Passengers:"}),e.jsx("span",{className:"ml-2 font-medium",children:P.maxPassengerCount})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Luggage Volume:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[P.maxLuggageVolume," m"]})]})]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5"}),"Pricing Details"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Base Fare"}),e.jsx("span",{className:"font-bold text-green-600 text-lg",children:w(c.baseFare)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Rate per KM"}),e.jsx("span",{className:"font-semibold text-blue-600",children:w(c.ratePerKm)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Rate per Minute"}),e.jsx("span",{className:"font-semibold text-orange-600",children:w(c.ratePerMinute)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Minimum Fare"}),e.jsx("span",{className:"font-semibold text-purple-600",children:w(c.minimumFare)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Night Charges"}),e.jsx("span",{className:"font-semibold text-indigo-600",children:w(c.nightCharges)})]}),e.jsx(gf,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Toll Fee"}),e.jsx(we,{variant:c.tollFeeApplicable?"default":"secondary",children:c.tollFeeApplicable?"Applicable":"Not Applicable"})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-semibold mb-3 text-sm text-blue-800",children:[e.jsx(ir,{className:"inline w-4 h-4 mr-1"}),"Sample Fare Calculation"]}),e.jsx("div",{className:"space-y-2 text-sm text-blue-900",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Fare (5km, 15min):"}),e.jsx("span",{className:"font-medium",children:w(Math.max(c.minimumFare,c.baseFare+c.ratePerKm*5+c.ratePerMinute*15+c.nightCharges))})]})})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5"}),"Metadata"]})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Created By"}),e.jsx("p",{className:"font-medium",children:c.createdBy||"System"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Created Date"}),e.jsx("p",{className:"font-medium",children:C(c.createdDate||"")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Modified By"}),e.jsx("p",{className:"font-medium",children:c.modifiedBy||c.createdBy||"System"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Modified Date"}),e.jsx("p",{className:"font-medium",children:C(c.modifiedDate||c.createdDate||"")})]})]})})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Additional Information"]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Usage Guidelines"}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 mt-0.5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"Base fare is charged at the start of every ride"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 mt-0.5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"Distance charges apply based on actual route distance"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 mt-0.5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"Time charges apply during wait time and traffic delays"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 mt-0.5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"Night charges apply during specified hours"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 mt-0.5 text-green-600 flex-shrink-0"}),e.jsx("span",{children:"Minimum fare guarantees driver earnings"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Pricing Impact"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-800 mb-2",children:[e.jsx(ir,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Competitive Analysis"})]}),e.jsx("p",{className:"text-blue-700",children:"This pricing is positioned to be competitive while maintaining profitability for drivers."})]}),e.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-800 mb-2",children:[e.jsx(Ts,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Important Notes"})]}),e.jsx("p",{className:"text-amber-700",children:"This pricing rule applies to all rides within the specified city and vehicle category."})]})]})]})]})})]}),e.jsx(pf,{open:n,onOpenChange:M,pricingDetails:(o==null?void 0:o.details)||"",pricingId:(o==null?void 0:o.id)||0,onConfirm:v,isLoading:N})]})},YS=()=>{const[s,t]=h.useState(null),[r,a]=h.useState(null),[n,i]=h.useState("month"),[o,l]=h.useState(0),{data:c,refetch:u}=LS({}),{data:d}=Ea({}),{data:m}=In({}),x=h.useMemo(()=>{if(!(c!=null&&c.length))return{totalPricings:0,activePricings:0,inactivePricings:0,averageBaseFare:0,averageRatePerKm:0,averageRatePerMinute:0,averageMinimumFare:0,averageNightCharges:0,totalCities:0,totalVehicleCategories:0,pricingByCity:[],pricingByVehicle:[],distribution:[],trends:[]};const f=c.filter(T=>{var D;const q=s?((D=T.city)==null?void 0:D.cityId)===s:!0,_=r?T.vehicleCategoryId===r:!0;return q&&_}),S=f.filter(T=>T.isActive),j=f.filter(T=>!T.isActive),w=f.reduce((T,q)=>T+q.baseFare,0)/f.length||0,C=f.reduce((T,q)=>T+q.ratePerKm,0)/f.length||0,y=f.reduce((T,q)=>T+q.ratePerMinute,0)/f.length||0,b=f.reduce((T,q)=>T+q.minimumFare,0)/f.length||0,v=f.reduce((T,q)=>T+q.nightCharges,0)/f.length||0,M=(d==null?void 0:d.map(T=>{const q=f.filter(_=>{var D;return((D=_.city)==null?void 0:D.cityId)===T.cityId});return{name:T.cityName,count:q.length,activeCount:q.filter(_=>_.isActive).length,averageFare:q.reduce((_,D)=>_+D.baseFare,0)/q.length||0}}).filter(T=>T.count>0))||[],P=(m==null?void 0:m.map(T=>{const q=f.filter(_=>_.vehicleCategoryId===T.vehicleCategoryId);return{name:T.vehicleCategoryName,maxPassengers:T.maxPassengerCount,count:q.length,activeCount:q.filter(_=>_.isActive).length,averageFare:q.reduce((_,D)=>_+D.baseFare,0)/q.length||0}}).filter(T=>T.count>0))||[],V=[{name:"Active",value:S.length,color:"#10B981"},{name:"Inactive",value:j.length,color:"#EF4444"}],R=()=>{const T=new Date,q=n==="week"?7:n==="month"?30:365,_=[];for(let D=q-1;D>=0;D--){const X=new Date(T);X.setDate(X.getDate()-D),_.push({date:X.toLocaleDateString("en-US",{month:"short",day:"numeric"}),pricings:Math.floor(Math.random()*20)+10,activePricings:Math.floor(Math.random()*15)+5})}return _};return{totalPricings:f.length,activePricings:S.length,inactivePricings:j.length,averageBaseFare:w,averageRatePerKm:C,averageRatePerMinute:y,averageMinimumFare:b,averageNightCharges:v,totalCities:(d==null?void 0:d.length)||0,totalVehicleCategories:(m==null?void 0:m.length)||0,pricingByCity:M,pricingByVehicle:P,distribution:V,trends:R()}},[c,s,r,d,m,n]),g=()=>{l(f=>f+1),u()},p=()=>{const f=[["City","Vehicle Category","Base Fare","Rate/KM","Rate/Min","Minimum Fare","Night Charges","Status"],...c==null?void 0:c.map(C=>{var y;return[((y=C.city)==null?void 0:y.cityName)||"N/A",N(C.vehicleCategoryId),C.baseFare.toFixed(2),C.ratePerKm.toFixed(2),C.ratePerMinute.toFixed(2),C.minimumFare.toFixed(2),C.nightCharges.toFixed(2),C.isActive?"Active":"Inactive"]})].map(C=>C.join(",")).join(`
`),S=new Blob([f],{type:"text/csv"}),j=window.URL.createObjectURL(S),w=document.createElement("a");w.href=j,w.download=`pricing-analytics-${new Date().toISOString().split("T")[0]}.csv`,w.click(),window.URL.revokeObjectURL(j),I.success("Analytics data exported successfully!")},N=h.useCallback(f=>{const S=m==null?void 0:m.find(j=>j.vehicleCategoryId===f);return(S==null?void 0:S.vehicleCategoryName)||`Vehicle ${f}`},[m]);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Pricing Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive insights and analytics for your pricing strategy"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",onClick:g,children:[e.jsx(Qa,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(E,{variant:"outline",onClick:p,children:[e.jsx(tr,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(ge,{value:(s==null?void 0:s.toString())||"",onValueChange:f=>t(f?parseInt(f):null),children:[e.jsx(fe,{className:"w-full sm:w-48",children:e.jsx(je,{placeholder:"All Cities"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"",children:"All Cities"}),d==null?void 0:d.map(f=>e.jsx(A,{value:f.cityId.toString(),children:f.cityName},f.cityId))]})]}),e.jsxs(ge,{value:(r==null?void 0:r.toString())||"",onValueChange:f=>a(f?parseInt(f):null),children:[e.jsx(fe,{className:"w-full sm:w-48",children:e.jsx(je,{placeholder:"All Vehicles"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"",children:"All Vehicles"}),m==null?void 0:m.map(f=>e.jsx(A,{value:f.vehicleCategoryId.toString(),children:f.vehicleCategoryName},f.vehicleCategoryId))]})]}),e.jsxs(ge,{value:n,onValueChange:f=>i(f),children:[e.jsx(fe,{className:"w-full sm:w-48",children:e.jsx(je,{})}),e.jsxs(pe,{children:[e.jsx(A,{value:"week",children:"Last Week"}),e.jsx(A,{value:"month",children:"Last Month"}),e.jsx(A,{value:"year",children:"Last Year"})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Pricings"}),e.jsx("p",{className:"text-2xl font-bold",children:x.totalPricings})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ea,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Pricings"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.activePricings})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ir,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Base Fare"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",x.averageBaseFare.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(ps,{className:"w-6 h-6 text-purple-600"})})]})})}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Coverage"}),e.jsxs("p",{className:"text-2xl font-bold",children:[x.totalCities," cities, ",x.totalVehicleCategories," vehicles"]})]}),e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(pn,{className:"w-6 h-6 text-orange-600"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(kp,{className:"w-5 h-5"}),"Status Distribution"]})}),e.jsx(B,{children:e.jsx("div",{className:"h-64",children:e.jsx(Qr,{width:"100%",height:"100%",children:e.jsxs(Dm,{children:[e.jsx(Pie,{data:x.distribution,cx:"50%",cy:"50%",labelLine:!1,label:({name:f,value:S})=>`${f}: ${S}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:x.distribution.map((f,S)=>e.jsx(Im,{fill:f.color},`cell-${S}`))}),e.jsx(Zr,{}),e.jsx(Dc,{})]})})})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ea,{className:"w-5 h-5"}),"Pricing Trends"]})}),e.jsx(B,{children:e.jsx("div",{className:"h-64",children:e.jsx(Qr,{width:"100%",height:"100%",children:e.jsxs(Tm,{data:x.trends,children:[e.jsx(Xa,{strokeDasharray:"3 3"}),e.jsx(Ja,{dataKey:"date"}),e.jsx(ma,{}),e.jsx(Zr,{}),e.jsx(Dc,{}),e.jsx(Ri,{type:"monotone",dataKey:"pricings",stroke:"#8884d8",name:"Total Pricings"}),e.jsx(Ri,{type:"monotone",dataKey:"activePricings",stroke:"#10B981",name:"Active Pricings"})]})})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Pricing by City"]})}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:x.pricingByCity.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No data available"}):x.pricingByCity.map((f,S)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.activeCount," of ",f.count," active"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["$",f.averageFare.toFixed(2)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"avg fare"})]})]},S))})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-5 h-5"}),"Pricing by Vehicle Type"]})}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:x.pricingByVehicle.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No data available"}):x.pricingByVehicle.map((f,S)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.maxPassengers," passengers  ",f.activeCount," of ",f.count," active"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["$",f.averageFare.toFixed(2)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"avg fare"})]})]},S))})})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5"}),"Detailed Metrics"]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Rate/KM"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",x.averageRatePerKm.toFixed(2)]})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Rate/Minute"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["$",x.averageRatePerMinute.toFixed(2)]})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Minimum Fare"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["$",x.averageMinimumFare.toFixed(2)]})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Night Charges"}),e.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:["$",x.averageNightCharges.toFixed(2)]})]})]})})]})]})};function mc(s,t={}){const r=h.useCallback(async()=>{const a=await ds.get(`/surge-pricing/${s}`);return a.data,a.data},[s]);return Cs({queryKey:["surge-pricing",s],queryFn:r,enabled:t.enabled!==!1&&!!s,onSuccess:t.onSuccess,onError:t.onError})}function zS(s={},t={}){const r=h.useCallback(async()=>{const a={};s.page!==void 0&&(a.page=s.page),s.size!==void 0&&(a.size=s.size),s.search&&(a.search=s.search),s.vehicleCategoryId&&(a.vehicleCategoryId=s.vehicleCategoryId),s.cityId&&(a.cityId=s.cityId),s.isActive!==void 0&&(a.isActive=s.isActive),s.dayOfWeek&&(a.dayOfWeek=s.dayOfWeek),s.sort&&s.sort.length>0&&(a.sort=s.sort);const n=await ds.get("/surge-pricing/list",a);return n.data,n.data},[s.page,s.size,s.sort,s.search,s.vehicleCategoryId,s.cityId,s.isActive,s.dayOfWeek]);return Cs({queryKey:["surge-pricings",s],queryFn:r,enabled:t.enabled!==!1,onSuccess:t.onSuccess,onError:t.onError})}function HS(s={}){const t=ze();return Le({mutationFn:async r=>await ds.post("/surge-pricing",r),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["surge-pricings"]}),t.invalidateQueries({queryKey:["all-surge-pricing"]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function jf(s={}){const t=ze();return Le({mutationFn:async({id:r,data:a})=>await ds.put(`/surge-pricing/${r}`,a),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["surge-pricings"]}),t.invalidateQueries({queryKey:["all-surge-pricing"]}),t.invalidateQueries({queryKey:["surge-pricing",a.id]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function GS(s={}){const t=ze();return Le({mutationFn:async r=>await ds.delete(`/surge-pricing/${r}`),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["surge-pricings"]}),t.invalidateQueries({queryKey:["all-surge-pricing"]}),t.invalidateQueries({queryKey:["surge-pricing",a]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function vf(s={}){const t=ze();return Le({mutationFn:async r=>await ds.get(`/surge-pricing/toggle-active-status/${r}`),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["surge-pricings"]}),t.invalidateQueries({queryKey:["all-surge-pricing"]}),t.invalidateQueries({queryKey:["surge-pricing",a]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}const QS=({open:s,onOpenChange:t,surgePricingDetails:r,surgePricingId:a,onConfirm:n,isLoading:i=!1})=>{const o=()=>{n(a)};return e.jsx(Fr,{open:s,onOpenChange:t,children:e.jsxs(dr,{children:[e.jsxs(ur,{children:[e.jsxs(hr,{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"w-5 h-5 text-destructive"}),"Delete Surge Pricing Rule"]}),e.jsx(xr,{asChild:!0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"Are you sure you want to delete this surge pricing rule? This action cannot be undone."}),e.jsxs("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Tr,{className:"w-4 h-4 text-destructive"}),e.jsx("span",{className:"font-medium",children:"Rule Details:"})]}),e.jsx("p",{className:"text-sm text-destructive font-medium",children:r}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Rule ID: ",a]})]}),e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2 text-warning",children:"Impact:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" This surge pricing rule will be permanently removed"}),e.jsx("li",{children:" No future rides will use this surge multiplier"}),e.jsx("li",{children:" The vehicle category will use base pricing during this time"}),e.jsx("li",{children:" This may affect driver earnings during peak hours"})]})]})]})})]}),e.jsxs(mr,{children:[e.jsx(pr,{disabled:i,children:"Cancel"}),e.jsx(fr,{onClick:o,disabled:i,className:"bg-destructive hover:bg-destructive/90",children:i?"Deleting...":"Delete Surge Rule"})]})]})})},ZS=()=>{var se,Z;const s=Ye(),t=ze(),[r,a]=h.useState(""),[n,i]=h.useState(""),[o,l]=h.useState("all"),[c,u]=h.useState("all"),[d,m]=h.useState(0),[x,g]=h.useState(10),[p,N]=h.useState(!1),[f,S]=h.useState(null),{data:j}=Ea({enabled:!0}),w=Ne.useRef(null),C=h.useCallback(U=>{a(U.target.value)},[]);h.useEffect(()=>{const U=setTimeout(()=>{i(r)},300);return()=>{clearTimeout(U)}},[r]);const y=o!=="all"||c!=="all",b=y?1e3:x,v=y?0:d;h.useEffect(()=>{m(0)},[n]);const{data:M,isLoading:P,error:V,refetch:R}=zS({page:v,size:b,...n.trim()&&{search:n.trim()}},{onError:U=>{I.error(`Failed to load surge pricing: ${U.message}`)}}),{mutate:T,isPending:q}=GS({onSuccess:async(U,he)=>{I.success("Surge pricing rule deleted successfully!"),await t.invalidateQueries({queryKey:["surge-pricings"]})},onError:(U,he)=>{I.error(`Failed to delete surge pricing: ${U.message}`)}}),{mutate:_,isPending:D}=vf({onSuccess:async(U,he)=>{I.success("Surge pricing status updated successfully!"),t.setQueriesData({queryKey:["surge-pricings"]},Te=>{if(!(Te!=null&&Te.content))return Te;const ts=Te.content.map(z=>z.surgeRuleId===he?{...z,isActive:!z.isActive}:z);return{...Te,content:ts}})},onError:(U,he)=>{I.error(`Failed to update surge pricing status: ${U.message}`)}}),X=h.useCallback(U=>U?{variant:"default",className:"bg-success text-success-foreground",label:"Active"}:{variant:"secondary",className:"bg-muted text-muted-foreground",label:"Inactive"},[]),ne=(U,he,Te)=>{U==="Edit"?s(`/admin/surge-pricing/edit/${he}`):U==="View"?s(`/admin/surge-pricing/view/${he}`):U==="Toggle Status"&&_(he)},me=(U,he)=>{S({id:U,details:he}),N(!0)},Q=U=>{T(U),N(!1),S(null)},be=()=>{N(!1),S(null)},ke=h.useMemo(()=>{const U=M;if(!U||!U.content)return[];let he=U.content;if(o!=="all"&&(he=he.filter(Te=>o==="active"?Te.isActive===!0:o==="inactive"?Te.isActive===!1:!0)),c!=="all"){const Te=c.toUpperCase();he=he.filter(ts=>{var z;return((z=ts.dayOfWeek)==null?void 0:z.toUpperCase())===Te})}return he},[M,o,c,y]),K=ke.length,G=M,ue=((se=G==null?void 0:G.page)==null?void 0:se.totalElements)??0,de=h.useMemo(()=>{var U;return o!=="all"||c!=="all"?Math.ceil(K/x):((U=G==null?void 0:G.page)==null?void 0:U.totalPages)||0},[K,x,o,c,(Z=G==null?void 0:G.page)==null?void 0:Z.totalPages]),xe=h.useMemo(()=>{if(o==="all"&&c==="all")return ke;const U=d*x,he=U+x;return ke.slice(U,he)},[ke,d,x,o,c]),ce=U=>{m(U-1)},ae=U=>{g(U),m(0)};h.useEffect(()=>{if(!P&&M&&xe.length===0&&d>0&&de>0){const U=Math.max(0,de-1);m(U)}},[P,xe.length,d,de,M]);const W=h.useCallback(U=>{var Te;return`${((Te=j==null?void 0:j.find(ts=>{var z;return ts.cityId===((z=U.city)==null?void 0:z.cityId)}))==null?void 0:Te.cityName)||"Unknown City"} - ${U.vehicleCategoryId?"Vehicle "+U.vehicleCategoryId:"Unknown Vehicle"} - ${U.dayOfWeek}`},[j]),F=h.useCallback(U=>{if(typeof U=="string"){const[he,Te]=U.split(":");return`${he}:${Te}`}else if(U&&typeof U=="object"&&"hour"in U&&"minute"in U){const he=U.hour.toString().padStart(2,"0"),Te=U.minute.toString().padStart(2,"0");return`${he}:${Te}`}return"00:00"},[]),te=h.useCallback(U=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(U),[]),ye=h.useCallback(U=>({MONDAY:"Monday",TUESDAY:"Tuesday",WEDNESDAY:"Wednesday",THURSDAY:"Thursday",FRIDAY:"Friday",SATURDAY:"Saturday",SUNDAY:"Sunday"})[U]||U,[]);return P?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading surge pricing data..."})]})}):V?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(Nn,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Surge Pricing"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:V.message}),e.jsx(E,{onClick:()=>R(),children:"Try Again"})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Surge Pricing Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and configure surge pricing rules for peak hours and high-demand periods"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(E,{className:"bg-gradient-primary hover:opacity-90",onClick:()=>s("/admin/surge-pricing/add"),children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add New Surge Rule"]})})]}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{ref:w,placeholder:"Search surge pricing by city or vehicle...",className:"pl-10",value:r,onChange:C,autoComplete:"off"})]}),e.jsxs(ge,{value:o,onValueChange:U=>l(U),children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"All Status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(ge,{value:c,onValueChange:U=>u(U),children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"All Days"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Days"}),e.jsx(A,{value:"monday",children:"Monday"}),e.jsx(A,{value:"tuesday",children:"Tuesday"}),e.jsx(A,{value:"wednesday",children:"Wednesday"}),e.jsx(A,{value:"thursday",children:"Thursday"}),e.jsx(A,{value:"friday",children:"Friday"}),e.jsx(A,{value:"saturday",children:"Saturday"}),e.jsx(A,{value:"sunday",children:"Sunday"})]})]})]})})}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"w-5 h-5"}),"Surge Pricing Rules (",o!=="all"||c!=="all"?`${K} filtered`:ue,")"]})}),e.jsx(B,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Location & Vehicle"}),e.jsx(oe,{children:"Day"}),e.jsx(oe,{children:"Time Range"}),e.jsx(oe,{children:"Multiplier"}),e.jsx(oe,{children:"Max Cap"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:xe.length===0?e.jsx(Ue,{children:e.jsx(re,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:ke.length===0?"No surge pricing rules found":"No surge pricing rules match the current filters"})}):xe.map(U=>{var ts;const he=X(U.isActive),Te=W(U);return e.jsxs(Ue,{className:"hover:bg-muted/50",children:[e.jsx(re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:((ts=j==null?void 0:j.find(z=>{var J;return z.cityId===((J=U.city)==null?void 0:J.cityId)}))==null?void 0:ts.cityName)||"Unknown City"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(os,{className:"w-3 h-3"}),e.jsxs("span",{children:["Vehicle ID: ",U.vehicleCategoryId]})]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:ye(U.dayOfWeek)})]})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(gs,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[F(U.startTime)," -"," ",F(U.endTime)]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"font-bold text-orange-600",children:[U.surgeMultiplier.toFixed(1),"x"]})}),e.jsx(re,{children:e.jsx("div",{className:"text-red-600 font-semibold",children:te(U.maxSurgeCap)})}),e.jsx(re,{children:e.jsx(we,{className:he.className,children:U.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-3 h-3 mr-1"}),he.label]}):e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-3 h-3 mr-1"}),he.label]})})}),e.jsx(re,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(Mr,{className:"w-4 h-4"})})}),e.jsxs(Ss,{align:"end",children:[e.jsxs(Pe,{onSelect:()=>{s(`/admin/surge-pricing/view/${U.surgeRuleId||0}`)},children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(Pe,{onSelect:()=>ne("Edit",U.surgeRuleId||0),children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Surge Rule"]}),e.jsx(Pe,{onSelect:()=>ne("Toggle Status",U.surgeRuleId||0),disabled:D,children:U.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate"]})}),e.jsxs(Pe,{onSelect:()=>me(U.surgeRuleId||0,Te),className:"text-destructive",disabled:q,children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Delete Surge Rule"]})]})]})})]},U.surgeRuleId)})})]}),de>0&&e.jsx(dt,{currentPage:d+1,totalPages:de,totalItems:o!=="all"||c!=="all"?K:ue,itemsPerPage:x,onPageChange:ce,onItemsPerPageChange:ae,className:"mt-4"})]})})]}),e.jsx(QS,{open:p,onOpenChange:be,surgePricingDetails:(f==null?void 0:f.details)||"",surgePricingId:(f==null?void 0:f.id)||0,onConfirm:Q,isLoading:q})]})},XS=At({vehicleCategoryId:ms().min(1,"Vehicle category is required"),cityId:ms().min(1,"City is required"),startTime:ee().min(1,"Start time is required"),endTime:ee().min(1,"End time is required"),surgeMultiplier:ms().min(1,"Surge multiplier must be at least 1.0"),dayOfWeek:ee().min(1,"Day of week is required"),maxSurgeCap:ms().min(0,"Max surge cap must be non-negative"),isActive:ot()}),JS=()=>{var q,_;const{id:s}=Js(),t=Ye(),r=!!s,a=parseInt(s||"0"),{register:n,handleSubmit:i,formState:{errors:o},watch:l,setValue:c,reset:u}=ft({resolver:Lt(XS),defaultValues:{vehicleCategoryId:0,cityId:0,startTime:"09:00",endTime:"18:00",surgeMultiplier:1.5,dayOfWeek:"MONDAY",maxSurgeCap:50,isActive:!0}}),{data:d,loading:m}=mc(a,{enabled:r,onError:D=>{I.error(`Failed to load surge pricing: ${D.message}`)}}),x=HS({onSuccess:D=>{I.success("Surge pricing created successfully!"),t("/admin/surge-pricing")},onError:(D,X)=>{I.error(`Failed to create surge pricing: ${D.message}`)}}),g=jf({onSuccess:D=>{I.success("Surge pricing updated successfully!"),t("/admin/surge-pricing")},onError:D=>{I.error(`Failed to update surge pricing: ${D.message}`)}}),{data:p,isLoading:N}=In({onError:D=>{I.error(`Failed to load vehicle categories: ${D.message}`)}}),{data:f,isLoading:S}=Ea({onError:D=>{I.error(`Failed to load cities: ${D.message}`)}}),[j,w]=h.useState(null),{data:C,isLoading:y}=qS(j||0,{enabled:!!j&&j>0,onError:D=>{}});h.useEffect(()=>{var D;if(r&&d&&!m){const X=((D=d.city)==null?void 0:D.cityId)||0;u({vehicleCategoryId:d.vehicleCategoryId,cityId:X,startTime:M(d.startTime),endTime:M(d.endTime),surgeMultiplier:d.surgeMultiplier,dayOfWeek:d.dayOfWeek,maxSurgeCap:d.maxSurgeCap,isActive:d.isActive}),X>0&&w(X)}},[d,r,u,m]);const b=l(),v=D=>{const X=P(D.cityId);if(!X){I.error("Please select a valid city");return}if(!D.vehicleCategoryId||D.vehicleCategoryId===0){I.error("Please select a valid vehicle category");return}if(!D.cityId||D.cityId===0){I.error("Please select a valid city");return}const ne=C&&C.cityId===D.cityId?C:X,me=V(ne),Q={vehicleCategoryId:D.vehicleCategoryId,city:me,startTime:D.startTime+":00",endTime:D.endTime+":00",surgeMultiplier:D.surgeMultiplier,dayOfWeek:D.dayOfWeek,maxSurgeCap:D.maxSurgeCap,isActive:D.isActive,createdBy:r&&(d==null?void 0:d.createdBy)||"admin",createdDate:r?d==null?void 0:d.createdDate:new Date().toISOString(),isDeletedValue:r&&(d==null?void 0:d.isDeletedValue)||!1,modifiedBy:"admin",modifiedDate:new Date().toISOString()};if(r&&a)Q.surgeRuleId=a,g.mutate({id:a,data:Q});else{const{surgeRuleId:be,...ke}=Q;x.mutate(ke)}},M=D=>{var me,Q;if(!D)return"09:00";if(typeof D=="string")return D.includes(":")?D:"09:00";const X=((me=D.hour)==null?void 0:me.toString().padStart(2,"0"))||"09",ne=((Q=D.minute)==null?void 0:Q.toString().padStart(2,"0"))||"00";return`${X}:${ne}`},P=D=>(f==null?void 0:f.find(X=>X.cityId===D))||null,V=D=>{const X={cityId:D.cityId,code:D.code||"",cityName:D.cityName,createdBy:D.createdBy||"",createdDate:D.createdDate||new Date().toISOString(),createdSystemIp:D.createdSystemIp||"",isDeletedValue:D.isDeletedValue??!1,isActive:D.isActive??!0,modifiedBy:D.modifiedBy||"",modifiedDate:D.modifiedDate||new Date().toISOString(),modifiedSystemIp:D.modifiedSystemIp||"",status:D.status||""};return D.remarks&&(X.remarks=D.remarks),D.state&&D.state.stateId&&(X.state={stateId:D.state.stateId,code:D.state.code||"",stateName:D.state.stateName||"",createdSystemIp:D.state.createdSystemIp||"",isDeletedValue:D.state.isDeletedValue??!1,isActive:D.state.isActive??!0,modifiedSystemIp:D.state.modifiedSystemIp||""},D.state.createdBy&&(X.state.createdBy=D.state.createdBy),D.state.createdDate&&(X.state.createdDate=D.state.createdDate),D.state.modifiedBy&&(X.state.modifiedBy=D.state.modifiedBy),D.state.modifiedDate&&(X.state.modifiedDate=D.state.modifiedDate),D.state.status&&(X.state.status=D.state.status),D.state.remarks&&(X.state.remarks=D.state.remarks),D.state.country&&D.state.country.countryId&&(X.state.country={countryId:D.state.country.countryId,code:D.state.country.code||"",countryName:D.state.country.countryName||"",createdSystemIp:D.state.country.createdSystemIp||"",isDeletedValue:D.state.country.isDeletedValue??!1,isActive:D.state.country.isActive??!0,modifiedSystemIp:D.state.country.modifiedSystemIp||""},D.state.country.createdBy&&(X.state.country.createdBy=D.state.country.createdBy),D.state.country.createdDate&&(X.state.country.createdDate=D.state.country.createdDate),D.state.country.modifiedBy&&(X.state.country.modifiedBy=D.state.country.modifiedBy),D.state.country.modifiedDate&&(X.state.country.modifiedDate=D.state.country.modifiedDate),D.state.country.status&&(X.state.country.status=D.state.country.status),D.state.country.remarks&&(X.state.country.remarks=D.state.country.remarks))),X},R=()=>{t("/admin/surge-pricing")},T=[{value:"MONDAY",label:"Monday"},{value:"TUESDAY",label:"Tuesday"},{value:"WEDNESDAY",label:"Wednesday"},{value:"THURSDAY",label:"Thursday"},{value:"FRIDAY",label:"Friday"},{value:"SATURDAY",label:"Saturday"},{value:"SUNDAY",label:"Sunday"}];return m&&r?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading surge pricing data..."})]})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",onClick:R,children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to Surge Pricing"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r?"Edit Surge Rule":"Add New Surge Rule"}),e.jsx("p",{className:"text-muted-foreground",children:r?"Update the surge pricing rule details below.":"Create a new surge pricing rule to manage demand-based pricing."})]})]}),e.jsxs("form",{onSubmit:i(v),className:"space-y-6",children:[e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Location & Vehicle Configuration"]}),e.jsx($e,{children:"Select the city, vehicle category, and timing for this surge rule"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"cityId",children:"City *"}),e.jsxs(ge,{value:((q=b.cityId)==null?void 0:q.toString())||"",onValueChange:D=>{const X=parseInt(D);c("cityId",X),w(X)},disabled:S||y,children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select city"})}),e.jsx(pe,{children:f==null?void 0:f.map(D=>e.jsx(A,{value:D.cityId.toString(),children:D.cityName},D.cityId))})]}),o.cityId&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:o.cityId.message})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"vehicleCategoryId",children:"Vehicle Category *"}),e.jsxs(ge,{value:((_=b.vehicleCategoryId)==null?void 0:_.toString())||"",onValueChange:D=>c("vehicleCategoryId",parseInt(D)),disabled:N,children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select vehicle category"})}),e.jsx(pe,{children:p==null?void 0:p.map(D=>e.jsx(A,{value:D.vehicleCategoryId.toString(),children:D.vehicleCategoryName},D.vehicleCategoryId))})]}),o.vehicleCategoryId&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:o.vehicleCategoryId.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"dayOfWeek",children:"Day of Week *"}),e.jsxs(ge,{value:b.dayOfWeek||"",onValueChange:D=>c("dayOfWeek",D),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select day"})}),e.jsx(pe,{children:T.map(D=>e.jsx(A,{value:D.value,children:D.label},D.value))})]}),o.dayOfWeek&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:o.dayOfWeek.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"isActive",checked:b.isActive,onCheckedChange:D=>c("isActive",D===!0)}),e.jsx(k,{htmlFor:"isActive",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed",children:"Active Rule"})]})]})]})]}),e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"w-5 h-5"}),"Timing Configuration"]}),e.jsx($e,{children:"Set the time range and multiplier for this surge rule"})]}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"startTime",children:"Start Time *"}),e.jsx(O,{id:"startTime",type:"time",...n("startTime"),placeholder:"09:00"}),o.startTime&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:o.startTime.message})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"endTime",children:"End Time *"}),e.jsx(O,{id:"endTime",type:"time",...n("endTime"),placeholder:"18:00"}),o.endTime&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:o.endTime.message})]})]})})]}),e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5"}),"Pricing Configuration"]}),e.jsx($e,{children:"Configure the surge multiplier and maximum cap"})]}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"surgeMultiplier",children:"Surge Multiplier *"}),e.jsx(O,{id:"surgeMultiplier",type:"number",step:"0.1",min:"1.0",max:"5.0",...n("surgeMultiplier",{valueAsNumber:!0}),placeholder:"1.5"}),o.surgeMultiplier&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:o.surgeMultiplier.message})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"maxSurgeCap",children:"Max Surge Cap (%)"}),e.jsx(O,{id:"maxSurgeCap",type:"number",step:"1",min:"0",max:"100",...n("maxSurgeCap",{valueAsNumber:!0}),placeholder:"50"}),o.maxSurgeCap&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:o.maxSurgeCap.message})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:R,children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:x.loading||g.loading,children:[(x.loading||g.loading)&&e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),e.jsx(Xs,{className:"w-4 h-4 mr-2"}),r?"Update Surge Rule":"Create Surge Rule"]})]})]})]})},e2=()=>{var S;const{id:s}=Js(),t=Ye(),r=parseInt(s||"0"),[a,n]=h.useState(!1),{data:i,loading:o,error:l,refetch:c}=mc(r,{enabled:!!r&&r>0,onError:j=>{I.error(`Failed to load surge pricing details: ${j.message}`)}}),{mutate:u}=vf({onSuccess:(j,w)=>{n(!1),I.success("Surge pricing status updated successfully!"),c()},onError:(j,w)=>{n(!1),I.error(`Failed to update surge pricing status: ${j.message}`)}}),d=h.useCallback(j=>{if(typeof j=="string"){const[w,C]=j.split(":");return`${w}:${C}`}else if(j&&typeof j=="object"&&"hour"in j&&"minute"in j){const w=j.hour.toString().padStart(2,"0"),C=j.minute.toString().padStart(2,"0");return`${w}:${C}`}return"00:00"},[]),m=h.useCallback(j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(j),[]),x=h.useCallback(j=>({MONDAY:"Monday",TUESDAY:"Tuesday",WEDNESDAY:"Wednesday",THURSDAY:"Thursday",FRIDAY:"Friday",SATURDAY:"Saturday",SUNDAY:"Sunday"})[j]||j,[]),g=h.useCallback(j=>j?new Date(j).toLocaleString():"N/A",[]),p=()=>{i&&(n(!0),u(i.surgeRuleId))},N=()=>{t(`/admin/surge-pricing/edit/${r}`)},f=()=>{t("/admin/surge-pricing")};return o?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading surge pricing details..."})]})}):l||!i?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(xt,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Surge Pricing"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:(l==null?void 0:l.message)||"Surge pricing not found"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(E,{variant:"outline",onClick:()=>c(),children:"Try Again"}),e.jsx(E,{onClick:f,children:"Back to List"})]})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:f,children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to Surge Pricing"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Surge Pricing Details"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"View detailed information about this surge pricing rule"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",onClick:p,disabled:a,children:i.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate"]})}),e.jsxs(E,{onClick:N,children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Surge Rule"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"w-5 h-5"}),"Surge Pricing Rule Information"]})}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),"City"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"font-semibold",children:((S=i.city)==null?void 0:S.cityName)||"Unknown City"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),"Vehicle Category"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsxs("p",{className:"font-semibold",children:["Vehicle ID: ",i.vehicleCategoryId]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Day of Week"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"font-semibold",children:x(i.dayOfWeek)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4"}),"Time Range"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsxs("p",{className:"font-semibold",children:[d(i.startTime)," - ",d(i.endTime)]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(ir,{className:"w-4 h-4"}),"Surge Multiplier"]}),e.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("p",{className:"font-bold text-orange-600 text-lg",children:[i.surgeMultiplier.toFixed(1),"x"]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(ps,{className:"w-4 h-4"}),"Maximum Surge Cap"]}),e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"font-bold text-red-600 text-lg",children:m(i.maxSurgeCap)})})]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5"}),"System Information"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Is,{className:"w-4 h-4"}),"Created By"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"font-medium",children:i.createdBy||"Unknown"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(yo,{className:"w-4 h-4"}),"Status"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx(we,{className:i.isActive?"bg-success text-success-foreground":"bg-muted text-muted-foreground",children:i.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-3 h-3 mr-1"}),"Inactive"]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"text-sm",children:g(i.createdDate)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Modified"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"text-sm",children:g(i.modifiedDate)})})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5"}),"Rule Status"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(Tr,{className:"w-8 h-8 text-white"})}),e.jsx(we,{variant:i.isActive?"default":"secondary",className:i.isActive?"bg-success text-success-foreground text-sm px-3 py-1":"bg-muted text-muted-foreground text-sm px-3 py-1",children:i.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Rule ID:"}),e.jsxs("span",{className:"font-mono",children:["#",i.surgeRuleId]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Deleted:"}),e.jsx("span",{children:i.isDeletedValue?"Yes":"No"})]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Quick Actions"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs(E,{onClick:N,className:"w-full",children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Surge Rule"]}),e.jsx(E,{variant:"outline",onClick:p,disabled:a,className:"w-full",children:i.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate Rule"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate Rule"]})}),e.jsxs(E,{variant:"outline",onClick:()=>t("/admin/surge-pricing"),className:"w-full",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to List"]})]})]})]})]})]})},s2=()=>{const{id:s}=Js(),t=Ye(),r=parseInt(s||"0"),[a,n]=h.useState({vehicleCategoryId:0,cityId:0,startTime:"09:00",endTime:"18:00",surgeMultiplier:1.5,dayOfWeek:"MONDAY",maxSurgeCap:50,isActive:!0}),[i,o]=h.useState({}),[l,c]=h.useState(!1),u=h.useCallback(v=>{if(typeof v=="string"){const[M,P]=v.split(":");return`${M.padStart(2,"0")}:${P.padStart(2,"0")}`}else if(v&&typeof v=="object"&&"hour"in v&&"minute"in v){const M=v.hour.toString().padStart(2,"0"),P=v.minute.toString().padStart(2,"0");return`${M}:${P}`}return"09:00"},[]),{data:d,loading:m,error:x,refetch:g}=mc(r,{enabled:!!r&&r>0,onError:v=>{I.error(`Failed to load surge pricing data: ${v.message}`)}}),{data:p}=Ea({enabled:!0}),{data:N}=In({enabled:!0}),{mutate:f,isLoading:S}=jf({onSuccess:()=>{I.success("Surge pricing rule updated successfully!"),t("/admin/surge-pricing")},onError:v=>{I.error(`Failed to update surge pricing: ${v.message}`)}});h.useEffect(()=>{var v;if(d){const M={vehicleCategoryId:d.vehicleCategoryId||0,cityId:((v=d.city)==null?void 0:v.cityId)||0,startTime:u(d.startTime),endTime:u(d.endTime),surgeMultiplier:d.surgeMultiplier,dayOfWeek:d.dayOfWeek,maxSurgeCap:d.maxSurgeCap,isActive:d.isActive};n(M),c(!1)}},[d,u,r]);const j=h.useCallback(()=>{const v={};return a.vehicleCategoryId||(v.vehicleCategoryId="Vehicle category is required"),a.cityId||(v.cityId="City is required"),a.startTime||(v.startTime="Start time is required"),a.endTime||(v.endTime="End time is required"),a.startTime&&a.endTime&&a.startTime>=a.endTime&&(v.endTime="End time must be after start time"),(!a.surgeMultiplier||a.surgeMultiplier<=0)&&(v.surgeMultiplier="Surge multiplier must be greater than 0"),(!a.maxSurgeCap||a.maxSurgeCap<=0)&&(v.maxSurgeCap="Maximum surge cap must be greater than 0"),a.surgeMultiplier>10&&(v.surgeMultiplier="Surge multiplier cannot exceed 10x"),o(v),Object.keys(v).length===0},[a]),w=h.useCallback((v,M)=>{n(P=>({...P,[v]:M})),o(P=>({...P,[v]:void 0})),c(!0)},[]),C=h.useCallback(async v=>{if(v.preventDefault(),!j()){I.error("Please fix the validation errors");return}const M=p==null?void 0:p.find(P=>P.cityId===a.cityId);if(!M){I.error("Selected city not found. Please select a valid city.");return}f({id:r,data:{vehicleCategoryId:a.vehicleCategoryId,city:{cityId:M.cityId},startTime:a.startTime+":00",endTime:a.endTime+":00",surgeMultiplier:a.surgeMultiplier,dayOfWeek:a.dayOfWeek,maxSurgeCap:a.maxSurgeCap,isActive:a.isActive}})},[a,r,j,f]),y=h.useCallback(()=>{var v;if(d){const M={vehicleCategoryId:d.vehicleCategoryId||0,cityId:((v=d.city)==null?void 0:v.cityId)||0,startTime:u(d.startTime),endTime:u(d.endTime),surgeMultiplier:d.surgeMultiplier,dayOfWeek:d.dayOfWeek,maxSurgeCap:d.maxSurgeCap,isActive:d.isActive};n(M),o({}),c(!1)}},[d,u]),b=h.useCallback(()=>{l?window.confirm("You have unsaved changes. Are you sure you want to leave?")&&t("/admin/surge-pricing"):t("/admin/surge-pricing")},[l,t]);return m?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading surge pricing data..."})]})}):x||!d?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(xt,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Surge Pricing"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:(x==null?void 0:x.message)||"Surge pricing not found"}),e.jsx(E,{onClick:()=>t("/admin/surge-pricing"),children:"Back to List"})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:b,children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to Surge Pricing"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Edit Surge Pricing Rule"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Modify the surge pricing rule details"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",onClick:y,disabled:!l||S,children:[e.jsx(No,{className:"w-4 h-4 mr-2"}),"Reset"]}),e.jsx(E,{onClick:C,disabled:!l||S,children:S?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Update Surge Rule"]})})]})]}),e.jsx("form",{onSubmit:C,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Tr,{className:"w-5 h-5"}),"Basic Information"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"cityId",className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),"City *"]}),e.jsxs(ge,{value:a.cityId.toString(),onValueChange:v=>w("cityId",parseInt(v)),children:[e.jsx(fe,{className:i.cityId?"border-red-500":"",children:e.jsx(je,{placeholder:"Select a city"})}),e.jsx(pe,{children:p==null?void 0:p.map(v=>e.jsx(A,{value:v.cityId.toString(),children:v.cityName},v.cityId))})]}),i.cityId&&e.jsx("p",{className:"text-sm text-red-500",children:i.cityId})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"vehicleCategoryId",className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),"Vehicle Category *"]}),e.jsxs(ge,{value:a.vehicleCategoryId.toString(),onValueChange:v=>w("vehicleCategoryId",parseInt(v)),children:[e.jsx(fe,{className:i.vehicleCategoryId?"border-red-500":"",children:e.jsx(je,{placeholder:"Select a vehicle category"})}),e.jsx(pe,{children:N==null?void 0:N.map(v=>e.jsx(A,{value:v.vehicleCategoryId.toString(),children:v.vehicleCategoryName},v.vehicleCategoryId))})]}),i.vehicleCategoryId&&e.jsx("p",{className:"text-sm text-red-500",children:i.vehicleCategoryId})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"dayOfWeek",className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Day of Week *"]}),e.jsxs(ge,{value:a.dayOfWeek,onValueChange:v=>w("dayOfWeek",v),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select day"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"MONDAY",children:"Monday"}),e.jsx(A,{value:"TUESDAY",children:"Tuesday"}),e.jsx(A,{value:"WEDNESDAY",children:"Wednesday"}),e.jsx(A,{value:"THURSDAY",children:"Thursday"}),e.jsx(A,{value:"FRIDAY",children:"Friday"}),e.jsx(A,{value:"SATURDAY",children:"Saturday"}),e.jsx(A,{value:"SUNDAY",children:"Sunday"})]})]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"w-5 h-5"}),"Schedule Information"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"startTime",children:"Start Time *"}),e.jsx(O,{id:"startTime",type:"time",value:a.startTime,onChange:v=>w("startTime",v.target.value),className:i.startTime?"border-red-500":""}),i.startTime&&e.jsx("p",{className:"text-sm text-red-500",children:i.startTime})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"endTime",children:"End Time *"}),e.jsx(O,{id:"endTime",type:"time",value:a.endTime,onChange:v=>w("endTime",v.target.value),className:i.endTime?"border-red-500":""}),i.endTime&&e.jsx("p",{className:"text-sm text-red-500",children:i.endTime})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4",children:[e.jsx(We,{id:"isActive",checked:a.isActive,onCheckedChange:v=>w("isActive",v)}),e.jsxs(k,{htmlFor:"isActive",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Active"]})]})]})]}),e.jsxs(L,{className:"lg:col-span-2",children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5"}),"Pricing Information"]})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"surgeMultiplier",className:"flex items-center gap-2",children:[e.jsx(ir,{className:"w-4 h-4"}),"Surge Multiplier *"]}),e.jsx(O,{id:"surgeMultiplier",type:"number",step:"0.1",min:"0.1",max:"10",value:a.surgeMultiplier,onChange:v=>w("surgeMultiplier",parseFloat(v.target.value)||0),className:i.surgeMultiplier?"border-red-500":""}),i.surgeMultiplier&&e.jsx("p",{className:"text-sm text-red-500",children:i.surgeMultiplier}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Multiplier applied to base pricing during surge hours (e.g., 1.5 for 50% increase)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"maxSurgeCap",className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-4 h-4"}),"Maximum Surge Cap *"]}),e.jsx(O,{id:"maxSurgeCap",type:"number",step:"0.01",min:"0.01",value:a.maxSurgeCap,onChange:v=>w("maxSurgeCap",parseFloat(v.target.value)||0),className:i.maxSurgeCap?"border-red-500":""}),i.maxSurgeCap&&e.jsx("p",{className:"text-sm text-red-500",children:i.maxSurgeCap}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum fare amount during surge pricing"})]})]})})]})]})})]})};function yf(s,t={}){const r=h.useCallback(async()=>{const a=await ds.get(`/promotions/${s}`);return a.data,a.data},[s]);return Cs({queryKey:["promotion",s],queryFn:r,enabled:t.enabled!==!1&&!!s,onSuccess:t.onSuccess,onError:t.onError})}function t2(s={},t={}){const r=h.useCallback(async()=>{const a={};s.page!==void 0&&(a.page=s.page),s.size!==void 0&&(a.size=s.size),s.search&&(a.search=s.search),s.vehicleCategoryId&&(a.vehicleCategoryId=s.vehicleCategoryId),s.cityId&&(a.cityId=s.cityId),s.isActive!==void 0&&(a.isActive=s.isActive),s.discountType&&(a.discountType=s.discountType),s.applicableUserType&&(a.applicableUserType=s.applicableUserType),s.validFrom&&(a.validFrom=s.validFrom),s.validTo&&(a.validTo=s.validTo),s.sort&&s.sort.length>0&&(a.sort=s.sort);const n=await ds.get("/promotions/list",a);return n.data,n.data},[s.page,s.size,s.sort,s.search,s.vehicleCategoryId,s.cityId,s.isActive,s.discountType,s.applicableUserType,s.validFrom,s.validTo]);return Cs({queryKey:["promotions",s],queryFn:r,enabled:t.enabled!==!1,onSuccess:t.onSuccess,onError:t.onError})}function r2(s={}){const t=ze();return Le({mutationFn:async r=>await ds.post("/promotions",r),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["promotions"]}),t.invalidateQueries({queryKey:["all-promotions"]}),t.invalidateQueries({queryKey:["active-promotions"]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function a2(s={}){const t=ze();return Le({mutationFn:async({id:r,data:a})=>await ds.put(`/promotions/${r}`,a),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["promotions"]}),t.invalidateQueries({queryKey:["all-promotions"]}),t.invalidateQueries({queryKey:["active-promotions"]}),t.invalidateQueries({queryKey:["promotion",a.id]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function n2(s={}){const t=ze();return Le({mutationFn:async r=>await ds.delete(`/promotions/${r}`),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["promotions"]}),t.invalidateQueries({queryKey:["all-promotions"]}),t.invalidateQueries({queryKey:["active-promotions"]}),t.invalidateQueries({queryKey:["promotion",a]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function Nf(s={}){const t=ze();return Le({mutationFn:async r=>await ds.get(`/promotions/toggle-active-status/${r}`),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["promotions"]}),t.invalidateQueries({queryKey:["all-promotions"]}),t.invalidateQueries({queryKey:["active-promotions"]}),t.invalidateQueries({queryKey:["promotion",a]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function po(s){if(!s.isActive)return"inactive";const t=new Date,r=new Date(s.validFrom),a=new Date(s.validTo);return t<r?"scheduled":t>a?"expired":"active"}function i2(s){if(!s.isActive)return!1;const t=new Date,r=new Date(s.validFrom),a=new Date(s.validTo);return t>=r&&t<=a}const hc=[{value:"PERCENTAGE",label:"Percentage (%)"},{value:"FIXED_AMOUNT",label:"Fixed Amount ($)"}],xc=[{value:"DRIVER",label:"Driver Only"},{value:"PASSENGER",label:"Passenger Only"},{value:"ALL_USERS",label:"All Users"}],l2=[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"scheduled",label:"Scheduled"},{value:"expired",label:"Expired"},{value:"inactive",label:"Inactive"}],o2=({open:s,onOpenChange:t,promotionDetails:r,promotionId:a,onConfirm:n,isLoading:i=!1})=>{const o=()=>{n(a)};return e.jsx(Fr,{open:s,onOpenChange:t,children:e.jsxs(dr,{children:[e.jsxs(ur,{children:[e.jsxs(hr,{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"w-5 h-5 text-destructive"}),"Delete Promotion"]}),e.jsxs(xr,{children:['Are you sure you want to delete the promotion "',e.jsx("span",{className:"font-semibold",children:r}),'"?',e.jsx("br",{}),e.jsx("br",{}),"This action cannot be undone. The promotion will be permanently removed from the system and any unused promo codes will become invalid."]})]}),e.jsxs(mr,{children:[e.jsx(pr,{disabled:i,children:"Cancel"}),e.jsx(fr,{onClick:o,disabled:i,className:"bg-destructive hover:bg-destructive/90",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Delete Promotion"]})})]})]})})},c2=()=>{var se,Z;const s=Ye(),t=ze(),[r,a]=h.useState(""),[n,i]=h.useState(""),[o,l]=h.useState("all"),[c,u]=h.useState("all"),[d,m]=h.useState("all"),[x,g]=h.useState(0),[p,N]=h.useState(10),[f,S]=h.useState(!1),[j,w]=h.useState(null),C=Ne.useRef(null),y=h.useCallback(U=>{a(U.target.value)},[]);h.useEffect(()=>{const U=setTimeout(()=>{i(r)},300);return()=>{clearTimeout(U)}},[r]);const b=o!=="all"||c!=="all"||d!=="all",v=b?1e3:p,M=b?0:x;h.useEffect(()=>{g(0)},[n]);const{data:P,isLoading:V,error:R,refetch:T}=t2({page:M,size:v,...n.trim()&&{search:n.trim()}},{onError:U=>{I.error(`Failed to load promotions: ${U.message}`)}}),{mutate:q,isPending:_}=n2({onSuccess:async(U,he)=>{I.success("Promotion deleted successfully!"),await t.invalidateQueries({queryKey:["promotions"]})},onError:(U,he)=>{I.error(`Failed to delete promotion: ${U.message}`)}}),{mutate:D,isPending:X}=Nf({onSuccess:async(U,he)=>{I.success("Promotion status updated successfully!"),t.setQueriesData({queryKey:["promotions"]},Te=>{if(!(Te!=null&&Te.content))return Te;const ts=Te.content.map(z=>z.promotionId===he?{...z,isActive:!z.isActive}:z);return{...Te,content:ts}})},onError:(U,he)=>{I.error(`Failed to update promotion status: ${U.message}`)}}),ne=h.useCallback(U=>{switch(po(U)){case"active":return{variant:"default",className:"bg-green-100 text-green-800 border-green-200",label:"Active",icon:Ie};case"scheduled":return{variant:"secondary",className:"bg-blue-100 text-blue-800 border-blue-200",label:"Scheduled",icon:gs};case"expired":return{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-200",label:"Expired",icon:vt};case"inactive":return{variant:"secondary",className:"bg-red-100 text-red-800 border-red-200",label:"Inactive",icon:xt};default:return{variant:"secondary",className:"bg-muted text-muted-foreground",label:"Unknown",icon:xt}}},[]),me=h.useCallback(U=>U==="PERCENTAGE"?{variant:"default",className:"bg-purple-100 text-purple-800 border-purple-200",label:"Percentage"}:{variant:"default",className:"bg-indigo-100 text-indigo-800 border-indigo-200",label:"Fixed Amount"},[]),Q=(U,he,Te)=>{U==="Edit"?s(`/admin/promotions/edit/${he}`):U==="View"?s(`/admin/promotions/view/${he}`):U==="Toggle Status"&&D(he)},be=(U,he)=>{w({id:U,details:he}),S(!0)},ke=U=>{q(U),S(!1),w(null)},K=()=>{S(!1),w(null)},G=h.useMemo(()=>{if(!(P!=null&&P.content))return[];let U=P.content;return o!=="all"&&(U=U.filter(he=>po(he)===o)),c!=="all"&&(U=U.filter(he=>he.discountType===c)),d!=="all"&&(U=U.filter(he=>he.applicableUserType===d)),U},[P==null?void 0:P.content,o,c,d,b]),ue=G.length,de=((se=P==null?void 0:P.page)==null?void 0:se.totalElements)||0,xe=h.useMemo(()=>{var U;return b?Math.ceil(ue/p):((U=P==null?void 0:P.page)==null?void 0:U.totalPages)||0},[ue,p,b,(Z=P==null?void 0:P.page)==null?void 0:Z.totalPages]),ce=h.useMemo(()=>{if(!b)return G;const U=x*p,he=U+p;return G.slice(U,he)},[G,x,p,b]),ae=U=>{g(U-1)},W=U=>{N(U),g(0)};h.useEffect(()=>{if(!V&&P&&ce.length===0&&x>0&&xe>0){const U=Math.max(0,xe-1);g(U)}},[V,ce.length,x,xe,P]);const F=h.useCallback(U=>{var he;return`${U.promoCode} - ${((he=U.city)==null?void 0:he.cityName)||"Unknown City"}`},[]),te=h.useCallback(U=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(U),[]),ye=h.useCallback(U=>U.discountType==="PERCENTAGE"?`${U.discountValue}%`:te(U.discountValue),[te]);return V?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading promotions data..."})]})}):R?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(Nn,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Promotions"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:R.message}),e.jsx(E,{onClick:()=>T(),children:"Try Again"})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Promotions Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage promotional codes, discount offers, and special deals"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(E,{className:"bg-gradient-primary hover:opacity-90",onClick:()=>s("/admin/promotions/add"),children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add New Promotion"]})})]}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{ref:C,placeholder:"Search promotions by code or description...",className:"pl-10",value:r,onChange:y,autoComplete:"off"})]}),e.jsxs(ge,{value:o,onValueChange:U=>l(U),children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"All Status"})}),e.jsx(pe,{children:l2.map(U=>e.jsx(A,{value:U.value,children:U.label},U.value))})]}),e.jsxs(ge,{value:c,onValueChange:U=>u(U),children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"All Types"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Types"}),hc.map(U=>e.jsx(A,{value:U.value,children:U.label},U.value))]})]}),e.jsxs(ge,{value:d,onValueChange:U=>m(U),children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"User Type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"Show All"}),xc.map(U=>e.jsx(A,{value:U.value,children:U.label},U.value))]})]})]})})}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Jr,{className:"w-5 h-5"}),"Promotions (",b?`${ue} filtered`:de,")"]})}),e.jsx(B,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Promotion Details"}),e.jsx(oe,{children:"Location & Vehicle"}),e.jsx(oe,{children:"Discount"}),e.jsx(oe,{children:"Validity Period"}),e.jsx(oe,{children:"Usage"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:ce.length===0?e.jsx(Ue,{children:e.jsx(re,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:G.length===0?"No promotions found":"No promotions match the current filters"})}):ce.map(U=>{var J;const he=ne(U),Te=me(U.discountType),ts=he.icon,z=F(U);return e.jsxs(Ue,{className:"hover:bg-muted/50",children:[e.jsx(re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bo,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-semibold text-lg",children:U.promoCode})]}),e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2",children:U.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:U.applicableUserType.replace("_"," ")})]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:((J=U.city)==null?void 0:J.cityName)||"All Cities"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(os,{className:"w-3 h-3"}),e.jsxs("span",{children:["Vehicle ID: ",U.vehicleCategoryId]})]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{className:Te.className,children:Te.label}),e.jsx("div",{className:"font-bold text-lg text-green-600",children:ye(U)}),U.maxDiscountAmount>0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Max:"," ",te(U.maxDiscountAmount)]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ws,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{children:lr(U.validFrom)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ws,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{children:lr(U.validTo)})]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"font-medium",children:[U.totalRedemptions," used"]}),e.jsxs("div",{className:"text-muted-foreground",children:["Max ",U.maxUsesPerUser," per user"]})]})}),e.jsx(re,{children:e.jsxs(we,{className:he.className,children:[e.jsx(ts,{className:"w-3 h-3 mr-1"}),he.label]})}),e.jsx(re,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(Mr,{className:"w-4 h-4"})})}),e.jsxs(Ss,{align:"end",children:[e.jsxs(Pe,{onSelect:()=>{s(`/admin/promotions/view/${U.promoCodeId||0}`)},children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(Pe,{onSelect:()=>Q("Edit",U.promoCodeId||0),children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Promotion"]}),e.jsx(Pe,{onSelect:()=>Q("Toggle Status",U.promoCodeId||0),disabled:X,children:U.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate"]})}),e.jsxs(Pe,{onSelect:()=>be(U.promoCodeId||0,z),className:"text-destructive",disabled:_,children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Delete Promotion"]})]})]})})]},U.promoCodeId)})})]}),xe>0&&e.jsx(dt,{currentPage:x+1,totalPages:xe,totalItems:b?ue:de,itemsPerPage:p,onPageChange:ae,onItemsPerPageChange:W,className:"mt-4"})]})})]}),e.jsx(o2,{open:f,onOpenChange:K,promotionDetails:(j==null?void 0:j.details)||"",promotionId:(j==null?void 0:j.id)||0,onConfirm:ke,isLoading:_})]})},d2=()=>{var q;const{id:s}=Js(),t=Ye(),r=parseInt(s||"0"),[a,n]=h.useState(!1),[i,o]=h.useState(!1),{data:l,loading:c,error:u,refetch:d}=yf(r,{enabled:!!r&&r>0,onError:_=>{I.error(`Failed to load promotion details: ${_.message}`)}}),{mutate:m}=Nf({onSuccess:(_,D)=>{n(!1),I.success("Promotion status updated successfully!"),d()},onError:(_,D)=>{n(!1),I.error(`Failed to update promotion status: ${_.message}`)}}),x=h.useCallback(_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(_),[]),g=h.useCallback(_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),[]),p=h.useCallback(_=>_?new Date(_).toLocaleString():"N/A",[]),N=h.useCallback(_=>_.discountType==="PERCENTAGE"?`${_.discountValue}%`:x(_.discountValue),[x]);h.useCallback(_=>{const D=hc.find(X=>X.value===_);return D?D.label:_},[]);const f=h.useCallback(_=>{const D=xc.find(X=>X.value===_);return D?D.label:_},[]),S=h.useCallback(_=>{switch(po(_)){case"active":return{variant:"default",className:"bg-green-100 text-green-800 border-green-200",label:"Active",icon:Ie};case"scheduled":return{variant:"secondary",className:"bg-blue-100 text-blue-800 border-blue-200",label:"Scheduled",icon:gs};case"expired":return{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-200",label:"Expired",icon:vt};case"inactive":return{variant:"secondary",className:"bg-red-100 text-red-800 border-red-200",label:"Inactive",icon:xt};default:return{variant:"secondary",className:"bg-muted text-muted-foreground",label:"Unknown",icon:xt}}},[]),j=h.useCallback(_=>_==="PERCENTAGE"?{variant:"default",className:"bg-purple-100 text-purple-800 border-purple-200",label:"Percentage"}:{variant:"default",className:"bg-indigo-100 text-indigo-800 border-indigo-200",label:"Fixed Amount"},[]),w=h.useCallback(_=>_.maxUsesPerUser<=0?0:Math.min(_.totalRedemptions/_.maxUsesPerUser*100,100),[]),C=h.useCallback(async _=>{try{if(!_||typeof _!="string"){I.error("No promo code available to copy");return}if(!navigator.clipboard){const D=document.createElement("textarea");D.value=_.trim(),D.style.position="fixed",D.style.left="-999999px",D.style.top="-999999px",document.body.appendChild(D),D.focus(),D.select();try{const X=document.execCommand("copy");document.body.removeChild(D),X?(o(!0),I.success("Promo code copied to clipboard!"),setTimeout(()=>o(!1),2e3)):I.error("Failed to copy promo code")}catch{document.body.removeChild(D),I.error("Failed to copy promo code")}return}await navigator.clipboard.writeText(_.trim()),o(!0),I.success("Promo code copied to clipboard!"),setTimeout(()=>o(!1),2e3)}catch{I.error("Failed to copy promo code")}},[]),y=()=>{l&&(n(!0),m(l.promoCodeId))},b=()=>{t(`/admin/promotions/edit/${r}`)},v=()=>{t("/admin/promotions")};if(c)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading promotion details..."})]})});if(u||!l)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(xt,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Promotion"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:(u==null?void 0:u.message)||"Promotion not found"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(E,{variant:"outline",onClick:()=>d(),children:"Try Again"}),e.jsx(E,{onClick:v,children:"Back to List"})]})]})})});const M=S(l),P=j(l.discountType),V=M.icon,R=i2(l),T=w(l);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:v,children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to Promotions"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Promotion Details"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"View detailed information about this promotional offer"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",onClick:y,disabled:a,children:l.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate"]})}),e.jsxs(E,{onClick:b,children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Promotion"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Jr,{className:"w-5 h-5"}),"Promotion Information"]})}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(bo,{className:"w-4 h-4"}),"Promo Code"]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg",children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:l.promoCode})}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>C((l==null?void 0:l.promoCode)||""),className:"border-purple-300 text-purple-700 hover:bg-purple-100",children:[i?e.jsx(Ie,{className:"w-4 h-4 mr-1"}):e.jsx(Ti,{className:"w-4 h-4 mr-1"}),i?"Copied!":"Copy"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),e.jsx("div",{className:"p-4 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"text-sm leading-relaxed",children:l.description})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),"City"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"font-semibold",children:((q=l.city)==null?void 0:q.cityName)||"All Cities"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),"Vehicle Category"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsxs("p",{className:"font-semibold",children:["Vehicle ID: ",l.vehicleCategoryId]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4"}),"Applicable User Type"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"font-semibold",children:f(l.applicableUserType)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(yo,{className:"w-4 h-4"}),"Status"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsxs(we,{className:M.className,children:[e.jsx(V,{className:"w-3 h-3 mr-1"}),M.label]})})]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5"}),"Discount Details"]})}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Discount Type"}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg",children:e.jsx(we,{className:P.className,children:P.label})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Discount Value"}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-2xl font-bold text-green-700",children:N(l)})})]})]}),l.maxDiscountAmount>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Maximum Discount Amount"}),e.jsx("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-xl font-bold text-orange-700",children:x(l.maxDiscountAmount)})})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ea,{className:"w-5 h-5"}),"Usage Statistics"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Total Redemptions"}),e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:l.totalRedemptions})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Maximum Uses Per User"}),e.jsx("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:l.maxUsesPerUser})})]})]}),l.maxUsesPerUser>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Usage Progress"}),e.jsxs("span",{className:"text-sm font-semibold",children:[T.toFixed(1),"%"]})]}),e.jsx(Aa,{value:T,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.totalRedemptions," of ",l.maxUsesPerUser," uses"]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5"}),"System Information"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Is,{className:"w-4 h-4"}),"Created By"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"font-medium",children:l.createdBy||"Unknown"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Promotion ID"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsxs("p",{className:"font-mono text-sm",children:["#",l.promoCodeId]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"text-sm",children:p(l.createdDate)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Modified"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"text-sm",children:p(l.modifiedDate)})})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5"}),"Promotion Status"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center",children:e.jsx(Jr,{className:"w-8 h-8 text-white"})}),e.jsxs(we,{variant:M.variant,className:`${M.className} text-sm px-3 py-1`,children:[e.jsx(V,{className:"w-3 h-3 mr-1"}),M.label]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Currently Valid:"}),e.jsx("span",{className:R?"text-green-600":"text-red-600",children:R?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Deleted:"}),e.jsx("span",{children:l.isDeletedValue?"Yes":"No"})]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5"}),"Validity Period"]})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Valid From"}),e.jsx("p",{className:"font-semibold text-green-600",children:g(l.validFrom)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Valid Until"}),e.jsx("p",{className:"font-semibold text-red-600",children:g(l.validTo)})]})]})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Quick Actions"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs(E,{onClick:b,className:"w-full",children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Promotion"]}),e.jsx(E,{variant:"outline",onClick:y,disabled:a,className:"w-full",children:l.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate Promotion"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate Promotion"]})}),e.jsxs(E,{variant:"outline",onClick:()=>C((l==null?void 0:l.promoCode)||""),className:"w-full",children:[e.jsx(Ti,{className:"w-4 h-4 mr-2"}),"Copy Promo Code"]}),e.jsxs(E,{variant:"outline",onClick:v,className:"w-full",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to List"]})]})]})]})]})]})},yu=()=>{const{id:s}=Js(),t=Ye(),r=!!s,a=parseInt(s||"0"),[n,i]=h.useState({vehicleCategoryId:0,cityId:0,promoCode:"",description:"",discountType:"PERCENTAGE",discountValue:0,maxDiscountAmount:0,validFrom:St(new Date),validTo:St(new Date(Date.now()+30*24*60*60*1e3)),applicableUserType:"ALL_USERS",maxUsesPerUser:1,isActive:!0}),[o,l]=h.useState({}),[c,u]=h.useState(!1),{data:d,loading:m,error:x}=yf(a,{enabled:r&&!!a&&a>0,onError:P=>{I.error(`Failed to load promotion data: ${P.message}`)}}),{data:g}=Ea({enabled:!0}),{data:p}=In({enabled:!0}),{mutate:N,isPending:f}=r2({onSuccess:()=>{I.success("Promotion created successfully!"),t("/admin/promotions")},onError:P=>{I.error(`Failed to create promotion: ${P.message}`)}}),{mutate:S,isPending:j}=a2({onSuccess:()=>{I.success("Promotion updated successfully!"),t(`/admin/promotions/view/${a}`)},onError:P=>{I.error(`Failed to update promotion: ${P.message}`)}});h.useEffect(()=>{var P;if(d&&r){const V={vehicleCategoryId:d.vehicleCategoryId,cityId:((P=d.city)==null?void 0:P.cityId)||0,promoCode:d.promoCode,description:d.description,discountType:d.discountType,discountValue:d.discountValue,maxDiscountAmount:d.maxDiscountAmount,validFrom:d.validFrom.split("T")[0],validTo:d.validTo.split("T")[0],applicableUserType:d.applicableUserType,maxUsesPerUser:d.maxUsesPerUser,isActive:d.isActive};i(V)}},[d,r]);const w=h.useCallback(()=>{const P={};return n.vehicleCategoryId||(P.vehicleCategoryId="Vehicle category is required"),n.cityId||(P.cityId="City is required"),n.promoCode.trim()?n.promoCode.length<3?P.promoCode="Promo code must be at least 3 characters":/^[A-Z0-9_]+$/i.test(n.promoCode)||(P.promoCode="Promo code can only contain letters, numbers, and underscores"):P.promoCode="Promo code is required",n.description.trim()?n.description.length<10&&(P.description="Description must be at least 10 characters"):P.description="Description is required",n.discountType||(P.discountType="Discount type is required"),!n.discountValue||n.discountValue<=0?P.discountValue="Discount value must be greater than 0":n.discountType==="PERCENTAGE"&&n.discountValue>100&&(P.discountValue="Percentage discount cannot exceed 100%"),n.maxDiscountAmount<0&&(P.maxDiscountAmount="Maximum discount amount cannot be negative"),n.validFrom||(P.validFrom="Valid from date is required"),n.validTo?n.validFrom&&new Date(n.validTo)<new Date(n.validFrom)&&(P.validTo="Valid to date must be on or after valid from date"):P.validTo="Valid to date is required",n.applicableUserType||(P.applicableUserType="Applicable user type is required"),(!n.maxUsesPerUser||n.maxUsesPerUser<=0)&&(P.maxUsesPerUser="Maximum uses per user must be greater than 0"),l(P),Object.keys(P).length===0},[n]),C=h.useCallback((P,V)=>{i(R=>({...R,[P]:V})),l(R=>({...R,[P]:void 0})),u(!0)},[]),y=h.useCallback(async P=>{if(P.preventDefault(),!w()){I.error("Please fix the validation errors");return}const V=g==null?void 0:g.find(T=>T.cityId===n.cityId);if(!V){I.error("Selected city not found. Please select a valid city.");return}const R={vehicleCategoryId:n.vehicleCategoryId,city:V,promoCode:n.promoCode,description:n.description,discountType:n.discountType,discountValue:n.discountValue,maxDiscountAmount:n.maxDiscountAmount,validFrom:n.validFrom,validTo:n.validTo,applicableUserType:n.applicableUserType,maxUsesPerUser:n.maxUsesPerUser,isActive:n.isActive,...r&&d&&{promoCodeId:a,createdBy:d.createdBy,createdDate:d.createdDate,isDeletedValue:d.isDeletedValue||!1}};r?S({id:a,data:R}):N(R)},[n,a,r,w,S,N,g,d]),b=h.useCallback(()=>{var P;if(r&&d){const V={vehicleCategoryId:d.vehicleCategoryId,cityId:((P=d.city)==null?void 0:P.cityId)||0,promoCode:d.promoCode,description:d.description,discountType:d.discountType,discountValue:d.discountValue,maxDiscountAmount:d.maxDiscountAmount,validFrom:d.validFrom.split("T")[0],validTo:d.validTo.split("T")[0],applicableUserType:d.applicableUserType,maxUsesPerUser:d.maxUsesPerUser,isActive:d.isActive};i(V)}else i({vehicleCategoryId:0,cityId:0,promoCode:"",description:"",discountType:"PERCENTAGE",discountValue:0,maxDiscountAmount:0,validFrom:St(new Date),validTo:St(new Date(Date.now()+30*24*60*60*1e3)),applicableUserType:"ALL_USERS",maxUsesPerUser:1,isActive:!0});l({}),u(!1)},[r,d]),v=h.useCallback(()=>{c?window.confirm("You have unsaved changes. Are you sure you want to leave?")&&t("/admin/promotions"):t("/admin/promotions")},[c,t]),M=m||f||j;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:v,children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to Promotions"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r?"Edit Promotion":"Create New Promotion"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:r?"Modify the promotion details":"Create a new promotional code or discount offer"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",onClick:b,disabled:!c||M,children:[e.jsx(No,{className:"w-4 h-4 mr-2"}),"Reset"]}),e.jsx(E,{onClick:y,disabled:!c||M,children:M?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),r?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),r?"Update Promotion":"Create Promotion"]})})]})]}),e.jsx("form",{onSubmit:y,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Jr,{className:"w-5 h-5"}),"Basic Information"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"promoCode",className:"flex items-center gap-2",children:[e.jsx(bo,{className:"w-4 h-4"}),"Promo Code *"]}),e.jsx(O,{id:"promoCode",placeholder:"e.g., SAVE20, RIDE2024",value:n.promoCode,onChange:P=>C("promoCode",P.target.value.toUpperCase()),className:o.promoCode?"border-red-500":"",disabled:r}),o.promoCode&&e.jsx("p",{className:"text-sm text-red-500",children:o.promoCode}),r&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Promo codes cannot be edited after creation"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"description",children:"Description *"}),e.jsx(yt,{id:"description",placeholder:"Describe the promotion benefits...",value:n.description,onChange:P=>C("description",P.target.value),className:o.description?"border-red-500":"",rows:3}),o.description&&e.jsx("p",{className:"text-sm text-red-500",children:o.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"applicableUserType",className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4"}),"Applicable User Type *"]}),e.jsxs(ge,{value:n.applicableUserType,onValueChange:P=>C("applicableUserType",P),children:[e.jsx(fe,{className:o.applicableUserType?"border-red-500":"",children:e.jsx(je,{placeholder:"Select user type"})}),e.jsx(pe,{children:xc.map(P=>e.jsx(A,{value:P.value,children:P.label},P.value))})]}),o.applicableUserType&&e.jsx("p",{className:"text-sm text-red-500",children:o.applicableUserType})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4",children:[e.jsx(We,{id:"isActive",checked:n.isActive,onCheckedChange:P=>C("isActive",P)}),e.jsxs(k,{htmlFor:"isActive",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Active"]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Location & Vehicle"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"cityId",className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),"City *"]}),e.jsxs(ge,{value:n.cityId>0?n.cityId.toString():void 0,onValueChange:P=>C("cityId",parseInt(P)),children:[e.jsx(fe,{className:o.cityId?"border-red-500":"",children:e.jsx(je,{placeholder:"Select a city"})}),e.jsx(pe,{children:g==null?void 0:g.map(P=>e.jsx(A,{value:P.cityId.toString(),children:P.cityName},P.cityId))})]}),o.cityId&&e.jsx("p",{className:"text-sm text-red-500",children:o.cityId})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"vehicleCategoryId",className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),"Vehicle Category *"]}),e.jsxs(ge,{value:n.vehicleCategoryId>0?n.vehicleCategoryId.toString():void 0,onValueChange:P=>C("vehicleCategoryId",parseInt(P)),children:[e.jsx(fe,{className:o.vehicleCategoryId?"border-red-500":"",children:e.jsx(je,{placeholder:"Select a vehicle category"})}),e.jsx(pe,{children:p==null?void 0:p.map(P=>e.jsx(A,{value:P.vehicleCategoryId.toString(),children:P.vehicleCategoryName},P.vehicleCategoryId))})]}),o.vehicleCategoryId&&e.jsx("p",{className:"text-sm text-red-500",children:o.vehicleCategoryId})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"maxUsesPerUser",children:"Maximum Uses Per User *"}),e.jsx(O,{id:"maxUsesPerUser",type:"number",min:"1",max:"999",value:n.maxUsesPerUser,onChange:P=>C("maxUsesPerUser",parseInt(P.target.value)||0),className:o.maxUsesPerUser?"border-red-500":""}),o.maxUsesPerUser&&e.jsx("p",{className:"text-sm text-red-500",children:o.maxUsesPerUser}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum number of times a single user can use this promotion"})]})]})]}),e.jsxs(L,{className:"lg:col-span-2",children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5"}),"Discount Information"]})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"discountType",children:"Discount Type *"}),e.jsxs(ge,{value:n.discountType,onValueChange:P=>C("discountType",P),children:[e.jsx(fe,{className:o.discountType?"border-red-500":"",children:e.jsx(je,{placeholder:"Select discount type"})}),e.jsx(pe,{children:hc.map(P=>e.jsx(A,{value:P.value,children:P.label},P.value))})]}),o.discountType&&e.jsx("p",{className:"text-sm text-red-500",children:o.discountType})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"discountValue",className:"flex items-center gap-2",children:[n.discountType==="PERCENTAGE"?e.jsx(Dp,{className:"w-4 h-4"}):e.jsx(Er,{className:"w-4 h-4"}),"Discount Value *"]}),e.jsx(O,{id:"discountValue",type:"number",step:"0.01",min:"0.01",max:n.discountType==="PERCENTAGE"?100:void 0,value:n.discountValue,onChange:P=>C("discountValue",parseFloat(P.target.value)||0),className:o.discountValue?"border-red-500":""}),o.discountValue&&e.jsx("p",{className:"text-sm text-red-500",children:o.discountValue}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.discountType==="PERCENTAGE"?"Percentage discount (e.g., 20 for 20%)":"Fixed amount discount (e.g., 10.00 for $10 off)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"maxDiscountAmount",children:"Maximum Discount Amount"}),e.jsx(O,{id:"maxDiscountAmount",type:"number",step:"0.01",min:"0",value:n.maxDiscountAmount,onChange:P=>C("maxDiscountAmount",parseFloat(P.target.value)||0),className:o.maxDiscountAmount?"border-red-500":""}),o.maxDiscountAmount&&e.jsx("p",{className:"text-sm text-red-500",children:o.maxDiscountAmount}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum discount amount (0 for no limit)"})]})]})})]}),e.jsxs(L,{className:"lg:col-span-2",children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5"}),"Validity Period"]})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"validFrom",children:"Valid From *"}),e.jsx(kr,{value:n.validFrom?new Date(n.validFrom):void 0,onChange:P=>C("validFrom",P?St(P):""),placeholder:"Select start date"}),o.validFrom&&e.jsx("p",{className:"text-sm text-red-500",children:o.validFrom})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"validTo",children:"Valid To *"}),e.jsx(kr,{value:n.validTo?new Date(n.validTo):void 0,onChange:P=>C("validTo",P?St(P):""),placeholder:"Select end date"}),o.validTo&&e.jsx("p",{className:"text-sm text-red-500",children:o.validTo})]})]})})]})]})})]})};function bf(s,t={}){const r=h.useCallback(async()=>{const a=await ds.get(`/referral-campaign/${s}`);return a.data,a.data},[s]);return Cs({queryKey:["referral-campaign",s],queryFn:r,enabled:t.enabled!==!1&&!!s,onSuccess:t.onSuccess,onError:t.onError})}function u2(s={},t={}){const r=h.useCallback(async()=>{const a={};s.page!==void 0&&(a.page=s.page),s.size!==void 0&&(a.size=s.size),s.search&&(a.search=s.search),s.isActive!==void 0&&(a.isActive=s.isActive),s.referrerRewardType&&(a.referrerRewardType=s.referrerRewardType),s.referredRewardType&&(a.referredRewardType=s.referredRewardType),s.validityDays&&(a.validityDays=s.validityDays),s.sort&&s.sort.length>0&&(a.sort=s.sort);const n=await ds.get("/referral-campaign/list",a);return n.data,n.data},[s.page,s.size,s.sort,s.search,s.isActive,s.referrerRewardType,s.referredRewardType,s.validityDays]);return Cs({queryKey:["referral-campaigns",s],queryFn:r,enabled:t.enabled!==!1,onSuccess:t.onSuccess,onError:t.onError})}function m2(s={}){const t=ze();return Le({mutationFn:async r=>await ds.post("/referral-campaign",r),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["referral-campaigns"]}),t.invalidateQueries({queryKey:["all-referral-campaigns"]}),t.invalidateQueries({queryKey:["active-referral-campaigns"]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function h2(s={}){const t=ze();return Le({mutationFn:async({id:r,data:a})=>await ds.put(`/referral-campaign/${r}`,a),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["referral-campaigns"]}),t.invalidateQueries({queryKey:["all-referral-campaigns"]}),t.invalidateQueries({queryKey:["active-referral-campaigns"]}),t.invalidateQueries({queryKey:["referral-campaign",a.id]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function x2(s={}){const t=ze();return Le({mutationFn:async r=>await ds.delete(`/referral-campaign/${r}`),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["referral-campaigns"]}),t.invalidateQueries({queryKey:["all-referral-campaigns"]}),t.invalidateQueries({queryKey:["active-referral-campaigns"]}),t.invalidateQueries({queryKey:["referral-campaign",a]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function wf(s={}){const t=ze();return Le({mutationFn:async r=>await ds.get(`/referral-campaign/toggle-active-status/${r}`),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["referral-campaigns"]}),t.invalidateQueries({queryKey:["all-referral-campaigns"]}),t.invalidateQueries({queryKey:["active-referral-campaigns"]}),t.invalidateQueries({queryKey:["referral-campaign",a]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function Ha(s,t){switch(s){case"DISCOUNT":return`${t}%`;case"CASHBACK":case"CREDIT":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(t);case"FREE_RIDE":return`${t} Free Ride${t>1?"s":""}`;case"POINTS":return`${t} Points`;default:return`${t} ${s}`}}function Ga(s){return{DISCOUNT:"Discount (%)",CASHBACK:"Cashback ($)",CREDIT:"Account Credit ($)",FREE_RIDE:"Free Rides",POINTS:"Loyalty Points"}[s]||s}const qi=[{value:"DISCOUNT",label:"Discount (%)"},{value:"CASHBACK",label:"Cashback ($)"},{value:"CREDIT",label:"Account Credit ($)"},{value:"FREE_RIDE",label:"Free Ride"},{value:"POINTS",label:"Loyalty Points"}],f2=[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],p2=({open:s,onOpenChange:t,referralCampaignDetails:r,referralCampaignId:a,onConfirm:n,isLoading:i=!1})=>{const o=()=>{n(a)};return e.jsx(Fr,{open:s,onOpenChange:t,children:e.jsxs(dr,{children:[e.jsxs(ur,{children:[e.jsxs(hr,{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"w-5 h-5 text-destructive"}),"Delete Referral Campaign"]}),e.jsxs(xr,{children:['Are you sure you want to delete the referral campaign "',e.jsx("span",{className:"font-semibold",children:r}),'"?',e.jsx("br",{}),e.jsx("br",{}),"This action cannot be undone. The referral campaign will be permanently removed from the system and any ongoing referrals will be affected."]})]}),e.jsxs(mr,{children:[e.jsx(pr,{disabled:i,children:"Cancel"}),e.jsx(fr,{onClick:o,disabled:i,className:"bg-destructive hover:bg-destructive/90",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Delete Campaign"]})})]})]})})},g2=()=>{var ae,W;const s=Ye(),t=ze(),[r,a]=h.useState(""),[n,i]=h.useState(""),[o,l]=h.useState("all"),[c,u]=h.useState("all"),[d,m]=h.useState("all"),[x,g]=h.useState(0),[p,N]=h.useState(10),[f,S]=h.useState(!1),[j,w]=h.useState(null);h.useEffect(()=>{const F=setTimeout(()=>{i(r)},300);return()=>{clearTimeout(F)}},[r]);const C=n.trim()!==""||o!=="all"||c!=="all"||d!=="all",y=C?1e3:p,b=C?0:x;h.useEffect(()=>{g(0)},[n,o,c,d]);const{data:v,isLoading:M,error:P,refetch:V}=u2({page:b,size:y},{onError:F=>{I.error(`Failed to load referral campaigns: ${F.message}`)}}),{mutate:R,isPending:T}=x2({onSuccess:async(F,te)=>{I.success("Referral campaign deleted successfully!"),await t.invalidateQueries({queryKey:["referral-campaigns"]})},onError:(F,te)=>{I.error(`Failed to delete referral campaign: ${F.message}`)}}),{mutate:q,isPending:_}=wf({onSuccess:async(F,te)=>{I.success("Referral campaign status updated successfully!"),t.setQueriesData({queryKey:["referral-campaigns"]},ye=>{if(!(ye!=null&&ye.content))return ye;const se=ye.content.map(Z=>Z.referralCampaignId===te?{...Z,isActive:!Z.isActive}:Z);return{...ye,content:se}})},onError:(F,te)=>{I.error(`Failed to update referral campaign status: ${F.message}`)}}),D=h.useCallback(F=>F?{variant:"default",className:"bg-success text-success-foreground",label:"Active"}:{variant:"secondary",className:"bg-muted text-muted-foreground",label:"Inactive"},[]),X=(F,te,ye)=>{F==="Edit"?s(`/admin/referral-campaigns/edit/${te}`):F==="View"?s(`/admin/referral-campaigns/view/${te}`):F==="Toggle Status"&&q(te)},ne=(F,te)=>{w({id:F,details:te}),S(!0)},me=F=>{R(F),S(!1),w(null)},Q=()=>{S(!1),w(null)},be=h.useMemo(()=>{if(!(v!=null&&v.content))return[];let F=v.content;if(n.trim()!==""){const te=n.trim().toLowerCase();F=F.filter(ye=>{var jr,Ht,Ua,oa,La,ie,Be,us;const se=(jr=ye.referralCampaignId)==null?void 0:jr.toString().includes(te),Z=(Ht=ye.referrerRewardType)==null?void 0:Ht.toLowerCase().includes(te),U=(Ua=ye.referredRewardType)==null?void 0:Ua.toLowerCase().includes(te),he=(oa=ye.referrerRewardValue)==null?void 0:oa.toString().includes(te),Te=(La=ye.referredRewardValue)==null?void 0:La.toString().includes(te),ts=(ie=ye.validityDays)==null?void 0:ie.toString().includes(te),z=(Be=ye.maxUsesPerReferrer)==null?void 0:Be.toString().includes(te),J=(us=ye.createdBy)==null?void 0:us.toLowerCase().includes(te),Ce=ye.createdDate&&lr(ye.createdDate).toLowerCase().includes(te),hs=Ha(ye.referrerRewardType,ye.referrerRewardValue).toLowerCase().includes(te),Os=Ha(ye.referredRewardType,ye.referredRewardValue).toLowerCase().includes(te),ut=Ga(ye.referrerRewardType).toLowerCase().includes(te),Ns=Ga(ye.referredRewardType).toLowerCase().includes(te);return se||Z||U||he||Te||ts||z||J||Ce||hs||Os||ut||Ns})}return o!=="all"&&(F=F.filter(te=>o==="active"?te.isActive===!0:o==="inactive"?te.isActive===!1:!0)),c!=="all"&&(F=F.filter(te=>te.referrerRewardType===c)),d!=="all"&&(F=F.filter(te=>te.referredRewardType===d)),F},[v==null?void 0:v.content,n,o,c,d,C]),ke=be.length,K=((ae=v==null?void 0:v.page)==null?void 0:ae.totalElements)||0,G=h.useMemo(()=>{var F;return C?Math.ceil(ke/p):((F=v==null?void 0:v.page)==null?void 0:F.totalPages)||0},[ke,p,C,(W=v==null?void 0:v.page)==null?void 0:W.totalPages]),ue=h.useMemo(()=>{if(!C)return be;const F=x*p,te=F+p;return be.slice(F,te)},[be,x,p,C]),de=F=>{g(F-1)},xe=F=>{N(F),g(0)};h.useEffect(()=>{if(!M&&v&&ue.length===0&&x>0&&G>0){const F=Math.max(0,G-1);g(F)}},[M,ue.length,x,G,v]);const ce=h.useCallback(F=>`Campaign ID: ${F.referralCampaignId}`,[]);return M?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading referral campaigns data..."})]})}):P?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(Nn,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Referral Campaigns"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:P.message}),e.jsx(E,{onClick:()=>V(),children:"Try Again"})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Referral Campaigns Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and configure referral campaigns to encourage user growth and engagement"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(E,{className:"bg-gradient-primary hover:opacity-90",onClick:()=>s("/admin/referral-campaigns/add"),children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add New Campaign"]})})]}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search by ID, reward type, value, creator, or date...",className:"pl-10",value:r,onChange:F=>a(F.target.value)})]}),e.jsxs(ge,{value:o,onValueChange:F=>l(F),children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"All Status"})}),e.jsx(pe,{children:f2.map(F=>e.jsx(A,{value:F.value,children:F.label},F.value))})]}),e.jsxs(ge,{value:c,onValueChange:F=>u(F),children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"Referrer Reward"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Referrer Rewards"}),qi.map(F=>e.jsx(A,{value:F.value,children:F.label},F.value))]})]}),e.jsxs(ge,{value:d,onValueChange:F=>m(F),children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"Referred Reward"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Referred Rewards"}),qi.map(F=>e.jsx(A,{value:F.value,children:F.label},F.value))]})]})]})})}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Ii,{className:"w-5 h-5"}),"Referral Campaigns (",C?`${ke} filtered`:K,")"]})}),e.jsx(B,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Campaign Details"}),e.jsx(oe,{children:"Referrer Reward"}),e.jsx(oe,{children:"Referred Reward"}),e.jsx(oe,{children:"Validity Period"}),e.jsx(oe,{children:"Usage Limits"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:ue.length===0?e.jsx(Ue,{children:e.jsx(re,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:be.length===0?"No referral campaigns found":"No referral campaigns match the current filters"})}):ue.map(F=>{const te=D(F.isActive),ye=ce(F);return e.jsxs(Ue,{className:"hover:bg-muted/50",children:[e.jsx(re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pn,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"font-semibold text-lg",children:["Campaign #",F.referralCampaignId]})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:lr(F.createdDate)})]})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ai,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:Ga(F.referrerRewardType)})]}),e.jsx("div",{className:"font-bold text-green-600",children:Ha(F.referrerRewardType,F.referrerRewardValue)})]})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:Ga(F.referredRewardType)})]}),e.jsx("div",{className:"font-bold text-blue-600",children:Ha(F.referredRewardType,F.referredRewardValue)})]})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ws,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[F.validityDays," days"]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"font-medium",children:["Max ",F.maxUsesPerReferrer," uses per referrer"]}),e.jsx("div",{className:"text-muted-foreground",children:"Per referrer limit"})]})}),e.jsx(re,{children:e.jsx(we,{className:te.className,children:F.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-3 h-3 mr-1"}),te.label]}):e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-3 h-3 mr-1"}),te.label]})})}),e.jsx(re,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(Mr,{className:"w-4 h-4"})})}),e.jsxs(Ss,{align:"end",children:[e.jsxs(Pe,{onSelect:()=>{s(`/admin/referral-campaigns/view/${F.referralCampaignId||0}`)},children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(Pe,{onSelect:()=>X("Edit",F.referralCampaignId||0),children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Campaign"]}),e.jsx(Pe,{onSelect:()=>X("Toggle Status",F.referralCampaignId||0),disabled:_,children:F.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate"]})}),e.jsxs(Pe,{onSelect:()=>ne(F.referralCampaignId||0,ye),className:"text-destructive",disabled:T,children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Delete Campaign"]})]})]})})]},F.referralCampaignId)})})]}),G>0&&e.jsx(dt,{currentPage:x+1,totalPages:G,totalItems:C?ke:K,itemsPerPage:p,onPageChange:de,onItemsPerPageChange:xe,className:"mt-4"})]})})]}),e.jsx(p2,{open:f,onOpenChange:Q,referralCampaignDetails:(j==null?void 0:j.details)||"",referralCampaignId:(j==null?void 0:j.id)||0,onConfirm:me,isLoading:T})]})},j2=()=>{const{id:s}=Js(),t=Ye(),r=parseInt(s||"0"),[a,n]=h.useState(!1),{data:i,loading:o,error:l,refetch:c}=bf(r,{enabled:!!r&&r>0,onError:j=>{I.error(`Failed to load referral campaign details: ${j.message}`)}}),{mutate:u}=wf({onSuccess:(j,w)=>{n(!1),I.success("Referral campaign status updated successfully!"),c()},onError:(j,w)=>{n(!1),I.error(`Failed to update referral campaign status: ${j.message}`)}});h.useCallback(j=>new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),[]);const d=h.useCallback(j=>j?new Date(j).toLocaleString():"N/A",[]),m=h.useCallback(j=>j?{variant:"default",className:"bg-success text-success-foreground",label:"Active",icon:Ie}:{variant:"secondary",className:"bg-muted text-muted-foreground",label:"Inactive",icon:vt},[]),x=()=>{i&&(n(!0),u(i.referralCampaignId))},g=()=>{t(`/admin/referral-campaigns/edit/${r}`)},p=()=>{t("/admin/referral-campaigns")},N=h.useCallback(async j=>{try{if(!j||typeof j!="number"){I.error("No campaign ID available to copy");return}const w=j.toString();if(!navigator.clipboard){const C=document.createElement("textarea");C.value=w,C.style.position="fixed",C.style.left="-999999px",C.style.top="-999999px",document.body.appendChild(C),C.focus(),C.select();try{const y=document.execCommand("copy");document.body.removeChild(C),y?I.success("Campaign ID copied to clipboard!"):I.error("Failed to copy campaign ID")}catch{document.body.removeChild(C),I.error("Failed to copy campaign ID")}return}await navigator.clipboard.writeText(w),I.success("Campaign ID copied to clipboard!")}catch{I.error("Failed to copy campaign ID")}},[]);if(o)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading referral campaign details..."})]})});if(l||!i)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(xt,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Referral Campaign"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:(l==null?void 0:l.message)||"Referral campaign not found"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(E,{variant:"outline",onClick:()=>c(),children:"Try Again"}),e.jsx(E,{onClick:p,children:"Back to List"})]})]})})});const f=m(i.isActive),S=f.icon;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:p,children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to Referral Campaigns"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Referral Campaign Details"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"View detailed information about this referral campaign"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",onClick:x,disabled:a,children:i.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate"]})}),e.jsxs(E,{onClick:g,children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Campaign"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Ii,{className:"w-5 h-5"}),"Campaign Information"]})}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(pn,{className:"w-4 h-4"}),"Campaign ID"]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:["#",i.referralCampaignId]})}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>N((i==null?void 0:i.referralCampaignId)||0),className:"border-blue-300 text-blue-700 hover:bg-blue-100",children:[e.jsx(Ti,{className:"w-4 h-4 mr-1"}),"Copy"]})]})]})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Jr,{className:"w-5 h-5"}),"Reward Structure"]})}),e.jsxs(B,{className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(ai,{className:"w-4 h-4"}),"Referrer Reward Type"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"font-semibold",children:Ga(i.referrerRewardType)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Referrer Reward Value"}),e.jsx("div",{className:"p-3 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-xl font-bold text-green-700",children:Ha(i.referrerRewardType,i.referrerRewardValue)})})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4"}),"Referred User Reward Type"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"font-semibold",children:Ga(i.referredRewardType)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Referred User Reward Value"}),e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-xl font-bold text-blue-700",children:Ha(i.referredRewardType,i.referredRewardValue)})})]})]})})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(pn,{className:"w-5 h-5"}),"Campaign Settings"]})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Validity Period"]}),e.jsxs("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg",children:[e.jsxs("p",{className:"text-xl font-bold text-purple-700",children:[i.validityDays," days"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Rewards remain valid for this many days"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Usage Limits"}),e.jsxs("div",{className:"p-3 bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg",children:[e.jsx("p",{className:"text-xl font-bold text-orange-700",children:i.maxUsesPerReferrer}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Maximum uses per referrer"})]})]})]})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5"}),"System Information"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(Is,{className:"w-4 h-4"}),"Created By"]}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"font-medium",children:i.createdBy||"Unknown"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Campaign Status"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsxs(we,{className:f.className,children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),f.label]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"text-sm",children:d(i.createdDate)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Modified"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"text-sm",children:d(i.modifiedDate)})})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5"}),"Campaign Status"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(Ii,{className:"w-8 h-8 text-white"})}),e.jsxs(we,{variant:f.variant,className:`${f.className} text-sm px-3 py-1`,children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),f.label]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Campaign ID:"}),e.jsxs("span",{className:"font-mono",children:["#",i.referralCampaignId]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Deleted:"}),e.jsx("span",{children:i.isDeletedValue?"Yes":"No"})]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ea,{className:"w-5 h-5"}),"Campaign Stats"]})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Validity Period"}),e.jsxs("p",{className:"font-semibold text-purple-600",children:[i.validityDays," days"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Usage Limit"}),e.jsxs("p",{className:"font-semibold text-orange-600",children:[i.maxUsesPerReferrer," per referrer"]})]})]})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Quick Actions"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs(E,{onClick:g,className:"w-full",children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Campaign"]}),e.jsx(E,{variant:"outline",onClick:x,disabled:a,className:"w-full",children:i.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate Campaign"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate Campaign"]})}),e.jsxs(E,{variant:"outline",onClick:()=>N((i==null?void 0:i.referralCampaignId)||0),className:"w-full",children:[e.jsx(Ti,{className:"w-4 h-4 mr-2"}),"Copy Campaign ID"]}),e.jsxs(E,{variant:"outline",onClick:p,className:"w-full",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to List"]})]})]})]})]})]})},Nu=()=>{const{id:s}=Js(),t=Ye(),r=!!s,a=parseInt(s||"0"),[n,i]=h.useState({referrerRewardType:"DISCOUNT",referrerRewardValue:10,referredRewardType:"DISCOUNT",referredRewardValue:5,validityDays:30,maxUsesPerReferrer:10,isActive:!0}),[o,l]=h.useState({}),[c,u]=h.useState(!1),{data:d,loading:m,error:x}=bf(a,{enabled:r&&!!a&&a>0,onError:v=>{I.error(`Failed to load referral campaign data: ${v.message}`)}}),{mutate:g,isPending:p}=m2({onSuccess:()=>{I.success("Referral campaign created successfully!"),t("/admin/referral-campaigns")},onError:v=>{I.error(`Failed to create referral campaign: ${v.message}`)}}),{mutate:N,isPending:f}=h2({onSuccess:()=>{I.success("Referral campaign updated successfully!"),t("/admin/referral-campaigns")},onError:v=>{I.error(`Failed to update referral campaign: ${v.message}`)}});h.useEffect(()=>{if(d&&r){const v={referrerRewardType:d.referrerRewardType,referrerRewardValue:d.referrerRewardValue,referredRewardType:d.referredRewardType,referredRewardValue:d.referredRewardValue,validityDays:d.validityDays,maxUsesPerReferrer:d.maxUsesPerReferrer,isActive:d.isActive};i(v)}},[d,r]);const S=h.useCallback(()=>{const v={};return n.referrerRewardType||(v.referrerRewardType="Referrer reward type is required"),!n.referrerRewardValue||n.referrerRewardValue<=0?v.referrerRewardValue="Referrer reward value must be greater than 0":n.referrerRewardType==="DISCOUNT"&&n.referrerRewardValue>100&&(v.referrerRewardValue="Discount cannot exceed 100%"),n.referredRewardType||(v.referredRewardType="Referred reward type is required"),!n.referredRewardValue||n.referredRewardValue<=0?v.referredRewardValue="Referred reward value must be greater than 0":n.referredRewardType==="DISCOUNT"&&n.referredRewardValue>100&&(v.referredRewardValue="Discount cannot exceed 100%"),!n.validityDays||n.validityDays<=0?v.validityDays="Validity days must be greater than 0":n.validityDays>365&&(v.validityDays="Validity days cannot exceed 365"),!n.maxUsesPerReferrer||n.maxUsesPerReferrer<=0?v.maxUsesPerReferrer="Maximum uses per referrer must be greater than 0":n.maxUsesPerReferrer>1e3&&(v.maxUsesPerReferrer="Maximum uses per referrer cannot exceed 1000"),l(v),Object.keys(v).length===0},[n]),j=h.useCallback((v,M)=>{i(P=>({...P,[v]:M})),l(P=>({...P,[v]:void 0})),u(!0)},[]),w=h.useCallback(async v=>{if(v.preventDefault(),!S()){I.error("Please fix the validation errors");return}r?N({id:a,data:n}):g(n)},[n,a,r,S,N,g]),C=h.useCallback(()=>{if(r&&d){const v={referrerRewardType:d.referrerRewardType,referrerRewardValue:d.referrerRewardValue,referredRewardType:d.referredRewardType,referredRewardValue:d.referredRewardValue,validityDays:d.validityDays,maxUsesPerReferrer:d.maxUsesPerReferrer,isActive:d.isActive};i(v)}else i({referrerRewardType:"DISCOUNT",referrerRewardValue:10,referredRewardType:"DISCOUNT",referredRewardValue:5,validityDays:30,maxUsesPerReferrer:10,isActive:!0});l({}),u(!1)},[r,d]),y=h.useCallback(()=>{c?window.confirm("You have unsaved changes. Are you sure you want to leave?")&&t("/admin/referral-campaigns"):t("/admin/referral-campaigns")},[c,t]),b=m||p||f;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:y,children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Back to Referral Campaigns"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r?"Edit Referral Campaign":"Create New Referral Campaign"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:r?"Modify the referral campaign details":"Create a new referral campaign to encourage user referrals"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",onClick:C,disabled:!c||b,children:[e.jsx(No,{className:"w-4 h-4 mr-2"}),"Reset"]}),e.jsx(E,{onClick:w,disabled:!c||b,children:b?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),r?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),r?"Update Campaign":"Create Campaign"]})})]})]}),e.jsx("form",{onSubmit:w,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ai,{className:"w-5 h-5"}),"Referrer Rewards"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"referrerRewardType",className:"flex items-center gap-2",children:[e.jsx(Jr,{className:"w-4 h-4"}),"Referrer Reward Type *"]}),e.jsxs(ge,{value:n.referrerRewardType,onValueChange:v=>j("referrerRewardType",v),children:[e.jsx(fe,{className:o.referrerRewardType?"border-red-500":"",children:e.jsx(je,{placeholder:"Select reward type"})}),e.jsx(pe,{children:qi.map(v=>e.jsx(A,{value:v.value,children:v.label},v.value))})]}),o.referrerRewardType&&e.jsx("p",{className:"text-sm text-red-500",children:o.referrerRewardType})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"referrerRewardValue",children:"Referrer Reward Value *"}),e.jsx(O,{id:"referrerRewardValue",type:"number",step:"0.01",min:"0.01",max:n.referrerRewardType==="DISCOUNT"?100:void 0,value:n.referrerRewardValue,onChange:v=>j("referrerRewardValue",parseFloat(v.target.value)||0),className:o.referrerRewardValue?"border-red-500":""}),o.referrerRewardValue&&e.jsx("p",{className:"text-sm text-red-500",children:o.referrerRewardValue}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.referrerRewardType==="DISCOUNT"&&"Percentage discount (e.g., 10 for 10%)",n.referrerRewardType==="CASHBACK"&&"Cashback amount in dollars",n.referrerRewardType==="CREDIT"&&"Account credit amount in dollars",n.referrerRewardType==="FREE_RIDE"&&"Number of free rides",n.referrerRewardType==="POINTS"&&"Loyalty points to award"]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5"}),"Referred User Rewards"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"referredRewardType",className:"flex items-center gap-2",children:[e.jsx(Jr,{className:"w-4 h-4"}),"Referred User Reward Type *"]}),e.jsxs(ge,{value:n.referredRewardType,onValueChange:v=>j("referredRewardType",v),children:[e.jsx(fe,{className:o.referredRewardType?"border-red-500":"",children:e.jsx(je,{placeholder:"Select reward type"})}),e.jsx(pe,{children:qi.map(v=>e.jsx(A,{value:v.value,children:v.label},v.value))})]}),o.referredRewardType&&e.jsx("p",{className:"text-sm text-red-500",children:o.referredRewardType})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"referredRewardValue",children:"Referred User Reward Value *"}),e.jsx(O,{id:"referredRewardValue",type:"number",step:"0.01",min:"0.01",max:n.referredRewardType==="DISCOUNT"?100:void 0,value:n.referredRewardValue,onChange:v=>j("referredRewardValue",parseFloat(v.target.value)||0),className:o.referredRewardValue?"border-red-500":""}),o.referredRewardValue&&e.jsx("p",{className:"text-sm text-red-500",children:o.referredRewardValue}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.referredRewardType==="DISCOUNT"&&"Percentage discount (e.g., 5 for 5%)",n.referredRewardType==="CASHBACK"&&"Cashback amount in dollars",n.referredRewardType==="CREDIT"&&"Account credit amount in dollars",n.referredRewardType==="FREE_RIDE"&&"Number of free rides",n.referredRewardType==="POINTS"&&"Loyalty points to award"]})]})]})]}),e.jsxs(L,{className:"lg:col-span-2",children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(pn,{className:"w-5 h-5"}),"Campaign Settings"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"validityDays",className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Validity Period (Days) *"]}),e.jsx(O,{id:"validityDays",type:"number",min:"1",max:"365",value:n.validityDays,onChange:v=>j("validityDays",parseInt(v.target.value)||0),className:o.validityDays?"border-red-500":""}),o.validityDays&&e.jsx("p",{className:"text-sm text-red-500",children:o.validityDays}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Number of days the referral reward remains valid"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"maxUsesPerReferrer",children:"Maximum Uses Per Referrer *"}),e.jsx(O,{id:"maxUsesPerReferrer",type:"number",min:"1",max:"1000",value:n.maxUsesPerReferrer,onChange:v=>j("maxUsesPerReferrer",parseInt(v.target.value)||0),className:o.maxUsesPerReferrer?"border-red-500":""}),o.maxUsesPerReferrer&&e.jsx("p",{className:"text-sm text-red-500",children:o.maxUsesPerReferrer}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum number of successful referrals per referrer"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4",children:[e.jsx(We,{id:"isActive",checked:n.isActive,onCheckedChange:v=>j("isActive",v)}),e.jsxs(k,{htmlFor:"isActive",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Active"]})]})]})]})]})})]})};class v2{constructor(t=rf,r={}){gt(this,"baseURL");gt(this,"defaultHeaders");this.baseURL=t,this.defaultHeaders={"Content-Type":"application/json",Accept:"application/json",...r}}buildURL(t,r){const a=/^https?:\/\//i.test(this.baseURL);let n;if(a)n=new URL(t,this.baseURL);else{const i=this.baseURL.endsWith("/")?this.baseURL.slice(0,-1):this.baseURL,o=t.startsWith("/")?t:`/${t}`,l=`${i}${o}`;n=new URL(l,window.location.origin)}return r&&Object.entries(r).forEach(([i,o])=>{o!=null&&(Array.isArray(o)?o.forEach(l=>n.searchParams.append(i,String(l))):n.searchParams.append(i,String(o)))}),a?n.toString():n.pathname+n.search}async request(t,r={}){const{params:a,headers:n,...i}=r,o=this.buildURL(t,a);try{const l=await fetch(o,{...i,headers:{...this.defaultHeaders,...n}});if(!l.ok){const u=await l.json().catch(()=>({}));throw new Error(u.message||`HTTP Error: ${l.status} ${l.statusText}`)}return await l.json()}catch(l){throw l instanceof Error?l:new Error("An unexpected error occurred")}}async get(t,r){return this.request(t,{method:"GET",params:r})}async post(t,r,a){return this.request(t,{method:"POST",body:r?JSON.stringify(r):void 0,params:a})}async put(t,r){return this.request(t,{method:"PUT",body:JSON.stringify(r)})}async delete(t){return this.request(t,{method:"DELETE"})}setBaseURL(t){this.baseURL=t}setHeaders(t){this.defaultHeaders={...this.defaultHeaders,...t}}}const Ma=new v2;function Cf(s,t={}){const r=h.useCallback(async()=>{const a=await Ma.get(`/vehicle-category/${s}`);return a.data,a.data},[s]);return Cs({queryKey:["vehicle-category",s],queryFn:r,enabled:t.enabled!==!1&&!!s,onSuccess:t.onSuccess,onError:t.onError})}function y2(s={},t={}){const r=h.useCallback(async()=>{const a={};s.page!==void 0&&(a.page=s.page),s.size!==void 0&&(a.size=s.size),s.sort&&s.sort.length>0&&(a.sort=s.sort),s.search&&(a.search=s.search),s.isActive!==void 0&&(a.isActive=s.isActive);const n=await Ma.get("/vehicle-category/list",a);return n.data,n.data},[s.page,s.size,s.sort,s.search,s.isActive]);return Cs({queryKey:["vehicle-categories",s],queryFn:r,enabled:t.enabled!==!1,onSuccess:t.onSuccess,onError:t.onError})}function N2(s={}){const t=h.useCallback(async()=>{const r=await Ma.get("/vehicle-category/list-only");return r.data,r.data},[]);return Cs({queryKey:["all-vehicle-categories"],queryFn:t,enabled:s.enabled!==!1,onSuccess:s.onSuccess,onError:s.onError})}function b2(s={}){const t=ze();return Le({mutationFn:async r=>await Ma.post("/vehicle-category",r),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["vehicle-categories"]}),t.invalidateQueries({queryKey:["all-vehicle-categories"]}),t.invalidateQueries({queryKey:["active-vehicle-categories"]}),t.invalidateQueries({queryKey:["active-vehicle-categories-paginated"]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function w2(s={}){const t=ze();return Le({mutationFn:async({id:r,data:a})=>await Ma.put(`/vehicle-category/${r}`,a),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["vehicle-categories"]}),t.invalidateQueries({queryKey:["all-vehicle-categories"]}),t.invalidateQueries({queryKey:["active-vehicle-categories"]}),t.invalidateQueries({queryKey:["active-vehicle-categories-paginated"]}),t.invalidateQueries({queryKey:["vehicle-category",a.id]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function C2(s={}){const t=ze();return Le({mutationFn:async r=>await Ma.delete(`/vehicle-category/${r}`),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["vehicle-categories"]}),t.invalidateQueries({queryKey:["all-vehicle-categories"]}),t.invalidateQueries({queryKey:["active-vehicle-categories"]}),t.invalidateQueries({queryKey:["active-vehicle-categories-paginated"]}),t.invalidateQueries({queryKey:["vehicle-category",a]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}function Sf(s={}){const t=ze();return Le({mutationFn:async r=>await Ma.get(`/vehicle-category/toggle-active-status/${r}`),onSuccess:(r,a)=>{t.invalidateQueries({queryKey:["vehicle-categories"]}),t.invalidateQueries({queryKey:["all-vehicle-categories"]}),t.invalidateQueries({queryKey:["active-vehicle-categories"]}),t.invalidateQueries({queryKey:["active-vehicle-categories-paginated"]}),t.invalidateQueries({queryKey:["vehicle-category",a]}),s.onSuccess&&s.onSuccess(r,a)},onError:s.onError})}const S2=({open:s,onOpenChange:t,vehicleCategoryDetails:r,vehicleCategoryId:a,onConfirm:n,isLoading:i=!1})=>{const o=()=>{n(a)};return e.jsx(Fr,{open:s,onOpenChange:t,children:e.jsxs(dr,{children:[e.jsxs(ur,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"h-5 w-5 text-destructive"}),e.jsx(hr,{children:"Delete Vehicle Category"})]}),e.jsxs(xr,{className:"text-left",children:["Are you sure you want to delete the vehicle category ",e.jsx("span",{className:"font-semibold",children:r}),"? This action cannot be undone and will permanently remove:",e.jsxs("ul",{className:"mt-2 ml-4 list-disc space-y-1 text-sm",children:[e.jsx("li",{children:"Vehicle category configuration and settings"}),e.jsx("li",{children:"Pricing rules and fare calculations"}),e.jsx("li",{children:"Passenger and luggage capacity settings"}),e.jsx("li",{children:"Cancellation fee and wait time settings"}),e.jsx("li",{children:"Associated pricing rules and surge configurations"})]}),e.jsx("div",{className:"mt-3 p-3 bg-destructive/10 border border-destructive/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-destructive font-medium",children:[e.jsx("strong",{children:"Warning:"})," This action is permanent and cannot be reversed. All related pricing and promotion configurations will be affected."]})}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 p-3 bg-amber-50 border border-amber-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[e.jsx(os,{className:"w-4 h-4"}),e.jsx(fs,{className:"w-4 h-4"}),e.jsx(Gi,{className:"w-4 h-4"}),e.jsx(ps,{className:"w-4 h-4"})]}),e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Impact:"})," Riders will no longer be able to select this vehicle type. Existing bookings may need vehicle reassignment."]})]})]})]}),e.jsxs(mr,{children:[e.jsx(pr,{disabled:i,children:"Cancel"}),e.jsx(fr,{onClick:o,disabled:i,className:"bg-destructive hover:bg-destructive/90",children:i?"Deleting...":"Delete Vehicle Category"})]})]})})},P2=()=>{var ce,ae;const s=Ye(),t=ze(),[r,a]=h.useState(""),[n,i]=h.useState(""),[o,l]=h.useState("all"),[c,u]=h.useState(0),[d,m]=h.useState(10),[x,g]=h.useState(!1),[p,N]=h.useState(null);h.useEffect(()=>{const W=setTimeout(()=>{i(r)},300);return()=>{clearTimeout(W)}},[r]);const f=o!=="all",S=f?1e3:d,j=f?0:c;h.useEffect(()=>{u(0)},[n]);const w=n.trim().length>2,{data:C,isLoading:y,error:b,refetch:v}=y2({page:j,size:S,...w&&{search:n.trim()}},{enabled:!0,onError:W=>{I.error(`Failed to load vehicle categories: ${W.message}`)}}),{mutate:M,isPending:P}=C2({onSuccess:async(W,F)=>{I.success("Vehicle category deleted successfully!"),await t.invalidateQueries({queryKey:["vehicle-categories"]})},onError:(W,F)=>{I.error(`Failed to delete vehicle category: ${W.message}`)}}),{mutate:V,isPending:R}=Sf({onSuccess:async(W,F)=>{I.success("Vehicle category status updated successfully!"),t.setQueriesData({queryKey:["vehicle-categories"]},te=>{if(!(te!=null&&te.content))return te;const ye=te.content.map(se=>se.vehicleCategoryId===F?{...se,isActive:!se.isActive}:se);return{...te,content:ye}})},onError:(W,F)=>{I.error(`Failed to update vehicle category status: ${W.message}`)}}),T=h.useCallback(W=>W?{variant:"default",className:"bg-success text-success-foreground",label:"Active"}:{variant:"secondary",className:"bg-muted text-muted-foreground",label:"Inactive"},[]),q=(W,F,te)=>{W==="Edit"?s(`/admin/vehicle-categories/edit/${F}`):W==="View"?s(`/admin/vehicle-categories/view/${F}`):W==="Toggle Status"&&V(F)},_=(W,F)=>{N({id:W,details:F}),g(!0)},D=W=>{M(W),g(!1),N(null)},X=()=>{g(!1),N(null)},ne=h.useMemo(()=>{const W=C;if(!W||!W.content)return[];let F=W.content;return o!=="all"&&(F=F.filter(te=>o==="active"?te.isActive===!0:o==="inactive"?te.isActive===!1:!0)),F},[C,o,f]),me=ne.length,Q=C,be=((ce=Q==null?void 0:Q.page)==null?void 0:ce.totalElements)??0,ke=h.useMemo(()=>{var F,te,ye,se;if(f)return me>0?Math.ceil(me/d):0;const W=((F=Q==null?void 0:Q.page)==null?void 0:F.totalPages)??0;return W===0&&((te=Q==null?void 0:Q.page)!=null&&te.totalElements)&&((ye=Q==null?void 0:Q.page)==null?void 0:ye.totalElements)>0?Math.ceil(((se=Q==null?void 0:Q.page)==null?void 0:se.totalElements)/d):W===0&&(Q!=null&&Q.content)&&Q.content.length>0?Math.ceil(Q.content.length/d):W},[me,d,f,Q]),K=h.useMemo(()=>{if(!f)return(Q==null?void 0:Q.content)??[];const W=c*d,F=W+d;return ne.slice(W,F)},[ne,c,d,f,Q]),G=W=>{u(W-1)},ue=W=>{m(W),u(0)};h.useEffect(()=>{if(!y&&Q&&K.length===0&&c>0&&ke>0){const W=Math.max(0,ke-1);u(W)}},[y,K.length,c,ke,Q]);const de=h.useCallback(W=>`${W.vehicleCategoryName||"Unknown Category"}`,[]),xe=h.useCallback(W=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(W),[]);return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading vehicle categories..."})]})}):b?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(Nn,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Loading Vehicle Categories"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:b.message}),e.jsx(E,{onClick:()=>v(),children:"Try Again"})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Vehicle Categories"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage vehicle types, pricing, and capacity settings"})]}),e.jsxs(E,{className:"bg-gradient-primary hover:opacity-90",onClick:()=>s("/admin/vehicle-categories/add"),children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add Vehicle Category"]})]}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search vehicle categories by name... (min 3 characters)",className:"pl-10",value:r,onChange:W=>a(W.target.value)})]}),e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"w-40",children:[e.jsx(zi,{className:"w-4 h-4 mr-2"}),o==="all"?"All Status":o.charAt(0).toUpperCase()+o.slice(1)]})}),e.jsxs(Ss,{align:"end",children:[e.jsx(Pe,{onClick:()=>l("all"),children:"All Status"}),e.jsx(Pe,{onClick:()=>l("active"),children:"Active"}),e.jsx(Pe,{onClick:()=>l("inactive"),children:"Inactive"})]})]})]})})}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-5 h-5"}),"Vehicle Categories (",y?"...":f?`${me} filtered`:be>0?be:((ae=Q==null?void 0:Q.content)==null?void 0:ae.length)??0,")"]})}),e.jsx(B,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Category Name"}),e.jsx(oe,{children:"Description"}),e.jsx(oe,{children:"Capacity"}),e.jsx(oe,{children:"Luggage"}),e.jsx(oe,{children:"Base Fare"}),e.jsx(oe,{children:"Rate per KM"}),e.jsx(oe,{children:"Wait Time"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:K.length===0?e.jsx(Ue,{children:e.jsx(re,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:ne.length===0?"No vehicle categories found":"No vehicle categories match the current filters"})}):K.map(W=>{const F=T(W.isActive),te=de(W);return e.jsxs(Ue,{className:"hover:bg-muted/50",children:[e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kt,{className:"h-10 w-10",children:e.jsx(Yt,{className:"bg-blue-100 text-blue-800",children:e.jsx(os,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:W.vehicleCategoryName||"Unknown Category"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",W.vehicleCategoryId]})]})]})}),e.jsx(re,{children:e.jsx("div",{className:"max-w-xs truncate",children:W.vehicleDescription||"No description"})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fs,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:W.maxPassengerCount})]})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Gi,{className:"w-4 h-4 text-orange-500"}),e.jsxs("span",{className:"font-medium",children:[W.maxLuggageVolume,"L"]})]})}),e.jsx(re,{children:e.jsx("div",{className:"font-semibold text-green-600",children:xe(W.baseFare)})}),e.jsx(re,{children:e.jsx("div",{className:"text-blue-600",children:xe(W.ratePerKm)})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gs,{className:"w-4 h-4 text-purple-500"}),e.jsxs("span",{children:[W.waitTimeLimit," min"]})]})}),e.jsx(re,{children:e.jsx(we,{className:F.className,children:W.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-3 h-3 mr-1"}),F.label]}):e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-3 h-3 mr-1"}),F.label]})})}),e.jsx(re,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(Mr,{className:"w-4 h-4"})})}),e.jsxs(Ss,{align:"end",children:[e.jsxs(Pe,{onSelect:()=>{s(`/admin/vehicle-categories/view/${W.vehicleCategoryId||0}`)},children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(Pe,{onSelect:()=>q("Edit",W.vehicleCategoryId||0),children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Category"]}),e.jsx(Pe,{onSelect:()=>q("Toggle Status",W.vehicleCategoryId||0),disabled:R,children:W.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Activate"]})}),e.jsxs(Pe,{onSelect:()=>_(W.vehicleCategoryId||0,te),className:"text-destructive",disabled:P,children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Delete Category"]})]})]})})]},W.vehicleCategoryId)})})]}),ke>0&&e.jsx(dt,{currentPage:c+1,totalPages:ke,totalItems:f?me:be,itemsPerPage:d,onPageChange:G,onItemsPerPageChange:ue,className:"mt-4"})]})})]}),e.jsx(S2,{open:x,onOpenChange:X,vehicleCategoryDetails:(p==null?void 0:p.details)||"",vehicleCategoryId:(p==null?void 0:p.id)||0,onConfirm:D,isLoading:P})]})},k2=(s,t)=>At({vehicleCategoryName:ee().min(1,"Vehicle category name is required").max(100,"Name must be less than 100 characters").refine(r=>!r||r.trim()===""?!1:!(s&&Array.isArray(s)&&s.some(n=>{var o;const i=n.vehicleCategoryId||n.id;return((o=n.vehicleCategoryName)==null?void 0:o.toLowerCase().trim())===r.toLowerCase().trim()&&i!==t})),{message:"Vehicle category name already exists"}),vehicleDescription:ee().min(1,"Description is required").max(500,"Description must be less than 500 characters"),maxPassengerCount:ms().min(1,"Max passenger count must be at least 1").max(20,"Max passenger count cannot exceed 20"),maxLuggageVolume:ms().min(0,"Max luggage volume must be at least 0").max(1e3,"Max luggage volume cannot exceed 1000 liters"),baseFare:ms().min(0,"Base fare must be at least 0"),ratePerKm:ms().min(0,"Rate per km must be at least 0"),ratePerMinute:ms().min(0,"Rate per minute must be at least 0"),cancellationFee:ms().min(0,"Cancellation fee must be at least 0"),waitTimeLimit:ms().min(1,"Wait time limit must be at least 1 minute").max(60,"Wait time limit cannot exceed 60 minutes"),vehicleIcon:ee().max(255,"Icon URL must be less than 255 characters").optional(),isActive:ot()}),bu=()=>{const s=Ye(),{categoryId:t}=Js(),r=!!t,a=t?parseInt(t,10):0,{data:n}=N2({onError:D=>{}}),i=h.useMemo(()=>!Array.isArray(n)||n.length===0?"":JSON.stringify(n.map(D=>({id:D.vehicleCategoryId||D.id,name:D.vehicleCategoryName}))),[n]),o=h.useMemo(()=>Array.isArray(n)?n:[],[i]),{data:l,isLoading:c}=Cf(a,{enabled:r&&a>0,onError:D=>{I.error(`Failed to load vehicle category: ${D.message}`)}}),{mutate:u,isPending:d}=b2({onSuccess:(D,X)=>{I.success("Vehicle category created successfully!"),s("/admin/vehicle-categories")},onError:(D,X)=>{I.error(`Failed to create vehicle category: ${D.message}`)}}),{mutate:m,isPending:x}=w2({onSuccess:(D,X)=>{I.success("Vehicle category updated successfully!"),s("/admin/vehicle-categories")},onError:(D,X)=>{I.error(`Failed to update vehicle category: ${D.message}`)}}),g=h.useMemo(()=>k2(o,a),[i,a]),{register:p,handleSubmit:N,setValue:f,watch:S,formState:{errors:j,isDirty:w,isValid:C,touchedFields:y},reset:b,trigger:v}=ft({resolver:Lt(g),mode:"onBlur",defaultValues:{vehicleCategoryName:"",vehicleDescription:"",maxPassengerCount:4,maxLuggageVolume:100,baseFare:5,ratePerKm:1.5,ratePerMinute:.3,cancellationFee:2,waitTimeLimit:5,vehicleIcon:"",isActive:!0}}),M=h.useMemo(()=>o.length>0&&y.vehicleCategoryName,[o.length,y.vehicleCategoryName]);h.useEffect(()=>{M&&i&&v("vehicleCategoryName")},[i,M]);const P=Ne.useRef(!1),V=Ne.useRef(null);h.useEffect(()=>{V.current!==a&&(V.current=a,P.current=!1)},[a]),h.useEffect(()=>{l&&r&&!P.current&&l.vehicleCategoryId&&l.vehicleCategoryId===a&&(P.current=!0,b({vehicleCategoryName:l.vehicleCategoryName||"",vehicleDescription:l.vehicleDescription||"",maxPassengerCount:l.maxPassengerCount||4,maxLuggageVolume:l.maxLuggageVolume||100,baseFare:l.baseFare||5,ratePerKm:l.ratePerKm||1.5,ratePerMinute:l.ratePerMinute||.3,cancellationFee:l.cancellationFee||2,waitTimeLimit:l.waitTimeLimit||5,vehicleIcon:l.vehicleIcon||"",isActive:l.isActive??!0}))},[l==null?void 0:l.vehicleCategoryId,a,r]);const R=()=>{v("vehicleCategoryName")},T=D=>{r?m({id:a,data:D}):u(D)},q=c||d||x,_=S("isActive");return c&&r?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading vehicle category..."})]})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>s("/admin/vehicle-categories"),className:"gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r?"Edit Vehicle Category":"Add New Vehicle Category"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:r?"Update vehicle category details and pricing":"Create a new vehicle category with pricing and capacity settings"})]})]})}),e.jsxs("form",{onSubmit:N(T),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-5 h-5"}),"Basic Information"]}),e.jsx($e,{children:"General details about the vehicle category"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleCategoryName",children:"Category Name *"}),e.jsx(O,{id:"vehicleCategoryName",placeholder:"e.g., Economy, Premium, SUV",...p("vehicleCategoryName"),onBlur:R,className:j.vehicleCategoryName&&y.vehicleCategoryName?"border-red-500":""}),j.vehicleCategoryName&&y.vehicleCategoryName&&e.jsx("p",{className:"text-sm text-red-500",children:j.vehicleCategoryName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleDescription",children:"Description *"}),e.jsx(yt,{id:"vehicleDescription",placeholder:"Brief description of the vehicle category",rows:3,...p("vehicleDescription")}),j.vehicleDescription&&e.jsx("p",{className:"text-sm text-red-500",children:j.vehicleDescription.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"vehicleIcon",children:"Vehicle Icon URL"}),e.jsx(O,{id:"vehicleIcon",placeholder:"URL to vehicle icon image",...p("vehicleIcon")}),j.vehicleIcon&&e.jsx("p",{className:"text-sm text-red-500",children:j.vehicleIcon.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"isActive",checked:_,onCheckedChange:D=>f("isActive",D)}),e.jsx(k,{htmlFor:"isActive",children:"Category is active"})]})]})]}),e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5"}),"Capacity & Luggage"]}),e.jsx($e,{children:"Passenger and luggage capacity settings"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"maxPassengerCount",children:"Max Passengers *"}),e.jsx(O,{id:"maxPassengerCount",type:"number",min:"1",max:"20",...p("maxPassengerCount",{valueAsNumber:!0}),className:j.maxPassengerCount?"border-red-500":""}),j.maxPassengerCount&&e.jsx("p",{className:"text-sm text-red-500",children:j.maxPassengerCount.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"maxLuggageVolume",children:"Max Luggage Volume (Liters) *"}),e.jsx(O,{id:"maxLuggageVolume",type:"number",min:"0",max:"1000",step:"0.1",...p("maxLuggageVolume",{valueAsNumber:!0}),className:j.maxLuggageVolume?"border-red-500":""}),j.maxLuggageVolume&&e.jsx("p",{className:"text-sm text-red-500",children:j.maxLuggageVolume.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"waitTimeLimit",children:"Wait Time Limit (Minutes) *"}),e.jsx(O,{id:"waitTimeLimit",type:"number",min:"1",max:"60",...p("waitTimeLimit",{valueAsNumber:!0}),className:j.waitTimeLimit?"border-red-500":""}),j.waitTimeLimit&&e.jsx("p",{className:"text-sm text-red-500",children:j.waitTimeLimit.message})]})]})]}),e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5"}),"Pricing Settings"]}),e.jsx($e,{children:"Default pricing for this vehicle category"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"baseFare",children:"Base Fare ($) *"}),e.jsx(O,{id:"baseFare",type:"number",min:"0",step:"0.01",...p("baseFare",{valueAsNumber:!0}),className:j.baseFare?"border-red-500":""}),j.baseFare&&e.jsx("p",{className:"text-sm text-red-500",children:j.baseFare.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"ratePerKm",children:"Rate per Kilometer ($) *"}),e.jsx(O,{id:"ratePerKm",type:"number",min:"0",step:"0.01",...p("ratePerKm",{valueAsNumber:!0}),className:j.ratePerKm?"border-red-500":""}),j.ratePerKm&&e.jsx("p",{className:"text-sm text-red-500",children:j.ratePerKm.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"ratePerMinute",children:"Rate per Minute ($) *"}),e.jsx(O,{id:"ratePerMinute",type:"number",min:"0",step:"0.01",...p("ratePerMinute",{valueAsNumber:!0}),className:j.ratePerMinute?"border-red-500":""}),j.ratePerMinute&&e.jsx("p",{className:"text-sm text-red-500",children:j.ratePerMinute.message})]})]})]}),e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"w-5 h-5"}),"Additional Fees"]}),e.jsx($e,{children:"Cancellation and other additional fees"})]}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"cancellationFee",children:"Cancellation Fee ($) *"}),e.jsx(O,{id:"cancellationFee",type:"number",min:"0",step:"0.01",...p("cancellationFee",{valueAsNumber:!0}),className:j.cancellationFee?"border-red-500":""}),j.cancellationFee&&e.jsx("p",{className:"text-sm text-red-500",children:j.cancellationFee.message})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s("/admin/vehicle-categories"),disabled:q,children:"Cancel"}),e.jsx(E,{type:"submit",disabled:q,className:"bg-gradient-primary hover:opacity-90",children:q?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),r?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),r?"Update Category":"Create Category"]})})]})]})]})},D2=()=>{const s=Ye(),{categoryId:t}=Js(),r=t?parseInt(t,10):0,{data:a,loading:n,error:i,refetch:o}=Cf(r,{onError:x=>{I.error(`Failed to load vehicle category: ${x.message}`)}}),{mutate:l,isLoading:c}=Sf({onSuccess:(x,g)=>{I.success("Vehicle category status updated successfully!"),o()},onError:(x,g)=>{I.error(`Failed to update vehicle category status: ${x.message}`)}}),u=()=>{a&&l(a.vehicleCategoryId)},d=x=>x?new Date(x).toLocaleString():"N/A",m=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(x);return n?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading vehicle category details..."})]})}):i||!a?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(L,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(os,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Vehicle Category Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:(i==null?void 0:i.message)||"The vehicle category you are looking for does not exist."}),e.jsx(E,{onClick:()=>s("/admin/vehicle-categories"),children:"Back to Vehicle Categories"})]})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>s("/admin/vehicle-categories"),className:"gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:a.vehicleCategoryName||"Unknown Category"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Vehicle category details and configuration"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{variant:"outline",onClick:()=>s(`/admin/vehicle-categories/edit/${a.vehicleCategoryId}`),className:"gap-2",children:[e.jsx(js,{className:"w-4 h-4"}),"Edit"]}),e.jsx(E,{variant:a.isActive?"destructive":"default",onClick:u,disabled:c,className:"gap-2",children:c?"Updating...":a.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"w-4 h-4"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-4 h-4"}),"Activate"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-5 h-5"}),"Basic Information"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Kt,{className:"h-16 w-16",children:[e.jsx(Kn,{src:a.vehicleIcon,alt:a.vehicleCategoryName}),e.jsx(Yt,{className:"bg-blue-100 text-blue-800",children:e.jsx(os,{className:"h-8 w-8"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold",children:a.vehicleCategoryName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(we,{className:a.isActive?"bg-success text-success-foreground":"bg-muted text-muted-foreground",children:a.isActive?"Active":"Inactive"}),e.jsxs(we,{variant:"outline",children:["ID: ",a.vehicleCategoryId]})]})]})]}),a.vehicleDescription&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:a.vehicleDescription})]}),a.vehicleIcon&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Vehicle Icon"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:a.vehicleIcon,alt:"Vehicle Icon",className:"h-12 w-12 object-cover rounded",onError:x=>{x.currentTarget.style.display="none"}}),e.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-xs",children:a.vehicleIcon})]})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5"}),"Capacity & Settings"]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(fs,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Max Passengers"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.maxPassengerCount})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Gi,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Max Luggage Volume"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[a.maxLuggageVolume,"L"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(gs,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Wait Time Limit"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[a.waitTimeLimit," min"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(qt,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Status"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:a.isActive?"Active":"Inactive"})]})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5"}),"Pricing"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Base Fare"}),e.jsx("span",{className:"font-semibold text-green-600",children:m(a.baseFare)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Rate per KM"}),e.jsx("span",{className:"font-semibold text-blue-600",children:m(a.ratePerKm)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Rate per Minute"}),e.jsx("span",{className:"font-semibold text-orange-600",children:m(a.ratePerMinute)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Cancellation Fee"}),e.jsx("span",{className:"font-semibold text-red-600",children:m(a.cancellationFee)})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5"}),"System Information"]})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ws,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Created Date"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d(a.createdDate)})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Is,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Created By"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.createdBy||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ws,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Modified Date"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d(a.modifiedDate)})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Is,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Modified By"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.modifiedBy||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qt,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Deleted"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.isDeletedValue?"Yes":"No"})]})]})]})})]})]})]})]})};class I2{constructor(t=AC,r={}){gt(this,"baseURL");gt(this,"defaultHeaders");gt(this,"authToken",null);this.baseURL=t,this.defaultHeaders={"Content-Type":"application/json",...r}}setAuthToken(t){this.authToken=t,this.defaultHeaders.Authorization=`Bearer ${t}`}clearAuthToken(){this.authToken=null,delete this.defaultHeaders.Authorization}getAuthToken(){return this.authToken}buildURL(t,r){const a=/^https?:\/\//i.test(this.baseURL);let n;if(a)n=new URL(t,this.baseURL);else{const i=this.baseURL.endsWith("/")?this.baseURL.slice(0,-1):this.baseURL,o=t.startsWith("/")?t:`/${t}`,l=`${i}${o}`;n=new URL(l,window.location.origin)}return r&&Object.entries(r).forEach(([i,o])=>{o!=null&&(Array.isArray(o)?o.forEach(l=>n.searchParams.append(i,String(l))):n.searchParams.append(i,String(o)))}),a?n.toString():n.pathname+n.search}async request(t,r={}){const{params:a,headers:n,responseType:i="json",...o}=r,l=this.buildURL(t,a);try{const c={...this.defaultHeaders};Object.assign(c,n||{}),o.body instanceof FormData&&delete c["Content-Type"],o.body||delete c["Content-Type"];const u=await fetch(l,{...o,headers:c});if(!u.ok){const m=await u.json().catch(()=>({}));throw new Error(m.message||m.error||`HTTP Error: ${u.status} ${u.statusText}`)}return i==="blob"?await u.blob():await u.json()}catch(c){throw c instanceof Error?c:new Error("An unexpected error occurred")}}async get(t,r,a){return this.request(t,{method:"GET",params:r,...a})}async post(t,r,a){const{params:n,...i}=a||{};return this.request(t,{method:"POST",body:r instanceof FormData?r:r?JSON.stringify(r):void 0,params:n,...i})}async put(t,r,a){const{params:n,...i}=a||{};return this.request(t,{method:"PUT",body:r instanceof FormData?r:r?JSON.stringify(r):void 0,params:n,...i})}async delete(t){return this.request(t,{method:"DELETE"})}setBaseURL(t){this.baseURL=t}setHeaders(t){this.defaultHeaders={...this.defaultHeaders,...t}}}const Oa=new I2;function T2(s,t={}){const r=h.useCallback(async()=>{const n=await Oa.get(`/dispute/${s}`);return n.data?n.data:n},[s]),a=Cs({queryKey:["dispute",s],queryFn:r,enabled:t.enabled!==!1&&!!s});return h.useEffect(()=>{a.isSuccess&&a.data&&t.onSuccess&&t.onSuccess(a.data)},[a.isSuccess,a.data,t.onSuccess]),h.useEffect(()=>{a.isError&&a.error&&t.onError&&t.onError(a.error)},[a.isError,a.error,t.onError]),{...a,data:a.data,loading:a.isLoading||a.isFetching,error:a.error}}function A2(s={},t={}){const r=h.useCallback(async()=>{const n={};s.page!==void 0&&(n.page=s.page),s.size!==void 0&&(n.size=s.size),s.sort&&s.sort.length>0&&(n.sort=s.sort),s.status&&(n.status=s.status),s.disputeType&&(n.disputeType=s.disputeType);const i=await Oa.get("/dispute/list",n);return i.data?i.data:Array.isArray(i)?{content:i,page:{size:i.length,number:0,totalElements:i.length,totalPages:1},first:!0,last:!0,empty:i.length===0}:i},[s.page,s.size,s.sort,s.status,s.disputeType]),a=Cs({queryKey:["disputes",s],queryFn:r,enabled:t.enabled!==!1,onSuccess:t.onSuccess,onError:t.onError});return{...a,data:a.data,loading:a.isLoading||a.isFetching,error:a.error}}function R2(s={}){const t=h.useCallback(async()=>{const a=await Oa.get("/dispute/stats");return a.data?a.data:a},[]),r=Cs({queryKey:["dispute-stats"],queryFn:t,enabled:s.enabled!==!1,onSuccess:s.onSuccess,onError:s.onError});return{...r,data:r.data,loading:r.isLoading||r.isFetching,error:r.error}}function F2(s={}){return Le({mutationFn:async t=>await Oa.post("/dispute",t),onSuccess:s.onSuccess,onError:s.onError})}function E2(s={}){return Le({mutationFn:async({id:t,resolution:r})=>{if(!t)throw new Error("Dispute ID is required");return await Oa.put(`/dispute/${t}/resolve`,void 0,{params:{resolution:r}})},onSuccess:s.onSuccess,onError:s.onError})}function M2(s={}){return Le({mutationFn:async({id:t,resolution:r})=>{if(!t)throw new Error("Dispute ID is required");return await Oa.put(`/dispute/${t}/reject`,void 0,{params:{resolution:r}})},onSuccess:s.onSuccess,onError:s.onError})}function O2(s={}){return Le({mutationFn:async t=>await Oa.put(`/dispute/${t}/in-progress`),onSuccess:s.onSuccess,onError:s.onError})}const V2=()=>{var ye,se;const s=Ye(),t=ze(),[r,a]=h.useState(""),[n,i]=h.useState("all"),[o,l]=h.useState("all"),[c,u]=h.useState(!1),[d,m]=h.useState(!1),[x,g]=h.useState(!1),[p,N]=h.useState(null),[f,S]=h.useState(""),[j,w]=h.useState(0),[C,y]=h.useState(10),b={page:j,size:C,status:n!=="all"?n:void 0,disputeType:o!=="all"?o:void 0},{data:v,loading:M,error:P}=A2(b),{data:V,loading:R}=R2(),{data:T,loading:q}=T2(p||0,{enabled:!!p}),_=E2({onSuccess:()=>{I.success("Dispute resolved successfully"),m(!1),S(""),t.invalidateQueries({queryKey:["disputes"]}),t.invalidateQueries({queryKey:["dispute-stats"]}),p&&t.invalidateQueries({queryKey:["dispute",p]})},onError:Z=>{I.error(`Failed to resolve dispute: ${Z.message}`)}}),D=M2({onSuccess:()=>{I.success("Dispute rejected successfully"),g(!1),S(""),t.invalidateQueries({queryKey:["disputes"]}),t.invalidateQueries({queryKey:["dispute-stats"]}),p&&t.invalidateQueries({queryKey:["dispute",p]})},onError:Z=>{I.error(`Failed to reject dispute: ${Z.message}`)}}),X=O2({onSuccess:()=>{I.success("Dispute marked as in progress"),t.invalidateQueries({queryKey:["disputes"]}),t.invalidateQueries({queryKey:["dispute-stats"]}),p&&t.invalidateQueries({queryKey:["dispute",p]})},onError:Z=>{I.error(`Failed to update dispute: ${Z.message}`)}}),ne=Z=>{const U={OPEN:{className:"bg-destructive text-destructive-foreground"},IN_PROGRESS:{className:"bg-yellow-500 text-yellow-50"},RESOLVED:{className:"bg-green-500 text-green-50"},REJECTED:{className:"bg-gray-500 text-gray-50"}};return U[Z||"OPEN"]||U.OPEN},me=Z=>{const U={HIGH:{className:"bg-destructive text-destructive-foreground"},MEDIUM:{className:"bg-yellow-500 text-yellow-50"},LOW:{className:"bg-gray-500 text-gray-50"},CRITICAL:{className:"bg-red-600 text-red-50"}};return U[Z||"MEDIUM"]||U.MEDIUM},Q=Z=>{switch(Z){case"PAYMENT":case"REFUND":return e.jsx(ps,{className:"w-4 h-4"});case"DELIVERY":return e.jsx(Il,{className:"w-4 h-4"});case"PRODUCT":return e.jsx(Ts,{className:"w-4 h-4"});default:return e.jsx(Il,{className:"w-4 h-4"})}},be=Z=>{N(Z),u(!0)},ke=Z=>{N(Z),m(!0)},K=Z=>{N(Z),g(!0)},G=Z=>{X.mutate(Z)},ue=()=>{if(!p||!f.trim()){I.error("Please provide a resolution");return}_.mutate({id:p,resolution:f})},de=()=>{if(!p||!f.trim()){I.error("Please provide a rejection reason");return}D.mutate({id:p,resolution:f})},xe=v,ce=((ye=xe==null?void 0:xe.content)==null?void 0:ye.filter(Z=>{var he,Te,ts,z;if(!r)return!0;const U=r.toLowerCase();return((he=Z.disputeId)==null?void 0:he.toString().toLowerCase().includes(U))||((Te=Z.bookingId)==null?void 0:Te.toString().toLowerCase().includes(U))||((ts=Z.reason)==null?void 0:ts.toLowerCase().includes(U))||((z=Z.description)==null?void 0:z.toLowerCase().includes(U))}))||[];h.useEffect(()=>{w(0)},[n,o]);const ae=(xe==null?void 0:xe.totalPages)||0,W=(xe==null?void 0:xe.totalElements)||0,F=Z=>{w(Z-1)},te=Z=>{y(Z),w(0)};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dispute Resolution"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage and resolve customer disputes"})]}),e.jsxs(E,{onClick:()=>s("/admin/disputes/add"),variant:"default",children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Create Dispute"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(L,{className:"hover-lift interactive",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Open Disputes"}),e.jsx("p",{className:"text-2xl font-bold text-destructive",children:R?e.jsx(Fe,{className:"w-6 h-6 animate-spin"}):(V==null?void 0:V.openDisputes)||0})]}),e.jsx(Ts,{className:"h-8 w-8 text-destructive"})]})})}),e.jsx(L,{className:"hover-lift interactive",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:R?e.jsx(Fe,{className:"w-6 h-6 animate-spin"}):(V==null?void 0:V.inProgressDisputes)||0})]}),e.jsx(gs,{className:"h-8 w-8 text-yellow-500"})]})})}),e.jsx(L,{className:"hover-lift interactive",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-500",children:R?e.jsx(Fe,{className:"w-6 h-6 animate-spin"}):(V==null?void 0:V.resolvedDisputes)||0})]}),e.jsx(Ar,{className:"h-8 w-8 text-green-500"})]})})})]}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search disputes by ID, booking ID, reason, or description...",className:"pl-10",value:r,onChange:Z=>a(Z.target.value)})]}),e.jsxs(ge,{value:n,onValueChange:Z=>i(Z),children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"Status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"OPEN",children:"Open"}),e.jsx(A,{value:"IN_PROGRESS",children:"In Progress"}),e.jsx(A,{value:"RESOLVED",children:"Resolved"}),e.jsx(A,{value:"REJECTED",children:"Rejected"})]})]}),e.jsxs(ge,{value:o,onValueChange:Z=>l(Z),children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"Type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"PAYMENT",children:"Payment"}),e.jsx(A,{value:"DELIVERY",children:"Delivery"}),e.jsx(A,{value:"PRODUCT",children:"Product"}),e.jsx(A,{value:"REFUND",children:"Refund"})]})]})]})})}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{children:["Disputes (",W,")"]})}),e.jsx(B,{children:M?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Fe,{className:"w-8 h-8 animate-spin text-muted-foreground"})}):P?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("p",{className:"text-destructive",children:["Error loading disputes: ",P.message]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Dispute ID"}),e.jsx(oe,{children:"Booking ID"}),e.jsx(oe,{children:"Type"}),e.jsx(oe,{children:"Reason"}),e.jsx(oe,{children:"Raised By"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{children:"Priority"}),e.jsx(oe,{children:"Raised At"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:ce.length===0?e.jsx(Ue,{children:e.jsx(re,{colSpan:9,className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No disputes found"})})}):ce.map(Z=>{var Te;const U=ne(Z.status),he=me(Z.priority);return e.jsxs(Ue,{className:"hover:bg-muted/50",children:[e.jsx(re,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[Q(Z.disputeType),e.jsxs("span",{className:"font-medium",children:["#",Z.disputeId]})]})}),e.jsx(re,{children:e.jsxs("span",{className:"font-medium",children:["#",Z.bookingId]})}),e.jsx(re,{children:e.jsx(we,{variant:"outline",children:Z.disputeType})}),e.jsx(re,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Z.reason}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:Z.description})]})}),e.jsx(re,{children:e.jsx(we,{variant:"outline",children:Z.raisedByType})}),e.jsx(re,{children:e.jsx(we,{className:U.className,children:(Te=Z.status)==null?void 0:Te.replace("_"," ")})}),e.jsx(re,{children:Z.priority&&e.jsx(we,{className:he.className,children:Z.priority})}),e.jsx(re,{children:Z.raisedAt?new Date(Z.raisedAt).toLocaleDateString():"-"}),e.jsx(re,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"sm",children:e.jsx(Mr,{className:"w-4 h-4"})})}),e.jsxs(Ss,{align:"end",children:[e.jsxs(Pe,{onSelect:()=>be(Z.disputeId),children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"View Details"]}),Z.status==="OPEN"&&e.jsxs(Pe,{onSelect:()=>G(Z.disputeId),children:[e.jsx(gs,{className:"w-4 h-4 mr-2"}),"Mark In Progress"]}),Z.status!=="RESOLVED"&&Z.status!=="REJECTED"&&e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{onSelect:()=>ke(Z.disputeId),children:[e.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Resolve"]}),e.jsxs(Pe,{onSelect:()=>K(Z.disputeId),children:[e.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Reject"]})]})]})]})})]},Z.disputeId)})})]})}),ae>0&&e.jsx(dt,{currentPage:j+1,totalPages:ae,totalItems:W,itemsPerPage:C,onPageChange:F,onItemsPerPageChange:te,className:"mt-4"})]})})]}),e.jsx(_t,{open:c,onOpenChange:u,children:e.jsx(Dt,{className:"max-w-2xl max-h-[600px] overflow-y-auto",children:q?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Fe,{className:"w-8 h-8 animate-spin"})}):T?e.jsxs(e.Fragment,{children:[e.jsx(It,{children:e.jsxs(Tt,{children:["Dispute Details - #",T.disputeId]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Booking ID"}),e.jsxs("p",{className:"font-medium",children:["#",T.bookingId]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Dispute Type"}),e.jsx(we,{variant:"outline",children:T.disputeType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx(we,{className:ne(T.status).className,children:(se=T.status)==null?void 0:se.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Priority"}),T.priority&&e.jsx(we,{className:me(T.priority).className,children:T.priority})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Raised By"}),e.jsx(we,{variant:"outline",children:T.raisedByType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Raised At"}),e.jsx("p",{children:T.raisedAt?new Date(T.raisedAt).toLocaleString():"-"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Reason"}),e.jsx("p",{className:"font-medium",children:T.reason})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Description"}),e.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:T.description})]}),T.resolution&&e.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Resolution"}),e.jsx("p",{className:"text-sm",children:T.resolution}),T.resolvedAt&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Resolved at: ",new Date(T.resolvedAt).toLocaleString()]})]})]})]}):null})}),e.jsx(_t,{open:d,onOpenChange:Z=>{m(Z),Z||S("")},children:e.jsxs(Dt,{children:[e.jsx(It,{children:e.jsxs(Tt,{children:["Resolve Dispute ",p?`#${p}`:""]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Resolution Details"}),e.jsx(yt,{placeholder:"Enter resolution details...",value:f,onChange:Z=>S(Z.target.value),rows:4,className:"mt-2"})]})}),e.jsxs($i,{children:[e.jsx(E,{variant:"outline",onClick:()=>{m(!1),S("")},children:"Cancel"}),e.jsx(E,{onClick:ue,disabled:!p||!f.trim()||_.isPending,children:_.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Resolving..."]}):"Resolve"})]})]})}),e.jsx(_t,{open:x,onOpenChange:Z=>{g(Z),Z||S("")},children:e.jsxs(Dt,{children:[e.jsx(It,{children:e.jsxs(Tt,{children:["Reject Dispute ",p?`#${p}`:""]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Rejection Reason"}),e.jsx(yt,{placeholder:"Enter rejection reason...",value:f,onChange:Z=>S(Z.target.value),rows:4,className:"mt-2"})]})}),e.jsxs($i,{children:[e.jsx(E,{variant:"outline",onClick:()=>{g(!1),S("")},children:"Cancel"}),e.jsx(E,{onClick:de,disabled:!p||!f.trim()||D.isPending,variant:"destructive",children:D.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Rejecting..."]}):"Reject"})]})]})})]})},U2=()=>{const s=Ye(),t=ze(),[r,a]=h.useState({bookingId:"",disputeType:"",reason:"",description:"",raisedByType:"",raisedById:"",status:"OPEN",priority:"MEDIUM"}),[n,i]=h.useState({}),o=F2({onSuccess:()=>{t.invalidateQueries({queryKey:["disputes"]}),t.invalidateQueries({queryKey:["dispute-stats"]}),I.success("Dispute created successfully!"),s("/admin/disputes")},onError:d=>{I.error(`Failed to create dispute: ${d.message}`)}}),l=()=>{const d={};return r.bookingId.trim()?(isNaN(Number(r.bookingId))||Number(r.bookingId)<=0)&&(d.bookingId="Booking ID must be a valid positive number"):d.bookingId="Booking ID is required",r.disputeType||(d.disputeType="Dispute type is required"),r.reason.trim()?r.reason.trim().length<3&&(d.reason="Reason must be at least 3 characters"):d.reason="Reason is required",r.description.trim()?r.description.trim().length<10&&(d.description="Description must be at least 10 characters"):d.description="Description is required",r.raisedByType||(d.raisedByType="Raised by type is required"),r.raisedById.trim()?(isNaN(Number(r.raisedById))||Number(r.raisedById)<=0)&&(d.raisedById="Raised by ID must be a valid positive number"):d.raisedById="Raised by ID is required",i(d),Object.keys(d).length===0},c=(d,m)=>{a(x=>({...x,[d]:m})),n[d]&&i(x=>({...x,[d]:void 0}))},u=async d=>{if(d.preventDefault(),!l()){I.error("Please fix the validation errors");return}const m={bookingId:Number(r.bookingId),disputeType:r.disputeType,reason:r.reason.trim(),description:r.description.trim(),raisedByType:r.raisedByType,raisedById:Number(r.raisedById),status:r.status?r.status:"OPEN",priority:r.priority?r.priority:"MEDIUM"};o.mutate(m)};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>s("/admin/disputes"),children:e.jsx(Ee,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Create Dispute"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Create a new dispute record"})]})]})}),e.jsx("form",{onSubmit:u,children:e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Dispute Information"}),e.jsx($e,{children:"Enter the details of the dispute"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"bookingId",children:["Booking ID ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(O,{id:"bookingId",type:"number",placeholder:"Enter booking ID",value:r.bookingId,onChange:d=>c("bookingId",d.target.value),className:n.bookingId?"border-destructive":""}),n.bookingId&&e.jsx("p",{className:"text-sm text-destructive",children:n.bookingId})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"disputeType",children:["Dispute Type ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(ge,{value:r.disputeType,onValueChange:d=>c("disputeType",d),children:[e.jsx(fe,{className:n.disputeType?"border-destructive":"",children:e.jsx(je,{placeholder:"Select dispute type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"PAYMENT",children:"Payment"}),e.jsx(A,{value:"DELIVERY",children:"Delivery"}),e.jsx(A,{value:"PRODUCT",children:"Product"}),e.jsx(A,{value:"REFUND",children:"Refund"})]})]}),n.disputeType&&e.jsx("p",{className:"text-sm text-destructive",children:n.disputeType})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"reason",children:["Reason ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(O,{id:"reason",placeholder:"Enter dispute reason",value:r.reason,onChange:d=>c("reason",d.target.value),className:n.reason?"border-destructive":""}),n.reason&&e.jsx("p",{className:"text-sm text-destructive",children:n.reason})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"description",children:["Description ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(yt,{id:"description",placeholder:"Enter detailed description of the dispute",value:r.description,onChange:d=>c("description",d.target.value),rows:5,className:n.description?"border-destructive":""}),n.description&&e.jsx("p",{className:"text-sm text-destructive",children:n.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"raisedByType",children:["Raised By Type ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(ge,{value:r.raisedByType,onValueChange:d=>c("raisedByType",d),children:[e.jsx(fe,{className:n.raisedByType?"border-destructive":"",children:e.jsx(je,{placeholder:"Select who raised the dispute"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"RIDER",children:"Rider"}),e.jsx(A,{value:"DRIVER",children:"Driver"}),e.jsx(A,{value:"ADMIN",children:"Admin"}),e.jsx(A,{value:"OTHER",children:"Other"})]})]}),n.raisedByType&&e.jsx("p",{className:"text-sm text-destructive",children:n.raisedByType})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"raisedById",children:["Raised By ID ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(O,{id:"raisedById",type:"number",placeholder:"Enter user ID (rider/driver/admin ID)",value:r.raisedById,onChange:d=>c("raisedById",d.target.value),className:n.raisedById?"border-destructive":""}),n.raisedById&&e.jsx("p",{className:"text-sm text-destructive",children:n.raisedById})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"status",children:"Status"}),e.jsxs(ge,{value:r.status,onValueChange:d=>c("status",d),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"OPEN",children:"Open"}),e.jsx(A,{value:"IN_PROGRESS",children:"In Progress"}),e.jsx(A,{value:"RESOLVED",children:"Resolved"}),e.jsx(A,{value:"REJECTED",children:"Rejected"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"priority",children:"Priority"}),e.jsxs(ge,{value:r.priority,onValueChange:d=>c("priority",d),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select priority"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"LOW",children:"Low"}),e.jsx(A,{value:"MEDIUM",children:"Medium"}),e.jsx(A,{value:"HIGH",children:"High"}),e.jsx(A,{value:"CRITICAL",children:"Critical"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s("/admin/disputes"),disabled:o.isPending,children:"Cancel"}),e.jsx(E,{type:"submit",disabled:o.isPending,children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Create Dispute"]})})]})]})]})})]})},L2=[{month:"Jan",revenue:65e3,rides:1200,drivers:89},{month:"Feb",revenue:59e3,rides:1100,drivers:92},{month:"Mar",revenue:8e4,rides:1500,drivers:95},{month:"Apr",revenue:81e3,rides:1600,drivers:98},{month:"May",revenue:95e3,rides:1800,drivers:105},{month:"Jun",revenue:105e3,rides:2e3,drivers:112}],B2=[{hour:"00:00",rides:12,revenue:180},{hour:"04:00",rides:8,revenue:120},{hour:"08:00",rides:45,revenue:675},{hour:"12:00",rides:78,revenue:1170},{hour:"16:00",rides:92,revenue:1380},{hour:"20:00",rides:156,revenue:2340},{hour:"23:00",rides:89,revenue:1335}],$2=[{name:"Downtown",rides:2847,revenue:42705,color:"hsl(var(--chart-primary))"},{name:"Airport",rides:1234,revenue:24680,color:"hsl(var(--chart-secondary))"},{name:"University",rides:989,revenue:14835,color:"hsl(var(--chart-accent))"},{name:"Suburbs",rides:756,revenue:11340,color:"hsl(var(--chart-muted))"},{name:"Business District",rides:2156,revenue:32340,color:"hsl(var(--warning))"}],q2=[{name:"Top 10%",drivers:125,avgRating:4.9,avgEarnings:2850},{name:"Top 25%",drivers:312,avgRating:4.7,avgEarnings:2340},{name:"Average",drivers:624,avgRating:4.5,avgEarnings:1890},{name:"Below Average",drivers:186,avgRating:4.2,avgEarnings:1420}],_2=()=>e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Analytics & Reports"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive insights into your fleet performance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(we,{variant:"secondary",className:"animate-glow",children:[e.jsx(qt,{className:"w-3 h-3 mr-1"}),"Live Data"]}),e.jsxs(E,{className:"bg-gradient-primary hover:opacity-90",children:[e.jsx(tr,{className:"w-4 h-4 mr-2"}),"Export Report"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx(L,{className:"hover-lift interactive border-metrics-border bg-metrics-bg/50",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:"$485,231"}),e.jsxs("p",{className:"text-xs text-success flex items-center mt-1",children:[e.jsx(ir,{className:"w-3 h-3 mr-1"}),"+12.5% vs last month"]})]}),e.jsx(ps,{className:"h-8 w-8 text-chart-accent"})]})})}),e.jsx(L,{className:"hover-lift interactive border-metrics-border bg-metrics-bg/50",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Rides"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:"11,247"}),e.jsxs("p",{className:"text-xs text-success flex items-center mt-1",children:[e.jsx(ir,{className:"w-3 h-3 mr-1"}),"+8.3% vs last month"]})]}),e.jsx(os,{className:"h-8 w-8 text-chart-primary"})]})})}),e.jsx(L,{className:"hover-lift interactive border-metrics-border bg-metrics-bg/50",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Drivers"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:"1,247"}),e.jsxs("p",{className:"text-xs text-destructive flex items-center mt-1",children:[e.jsx(Nn,{className:"w-3 h-3 mr-1"}),"-2.1% vs last month"]})]}),e.jsx(fs,{className:"h-8 w-8 text-chart-secondary"})]})})}),e.jsx(L,{className:"hover-lift interactive border-metrics-border bg-metrics-bg/50",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Rating"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:"4.7"}),e.jsxs("p",{className:"text-xs text-success flex items-center mt-1",children:[e.jsx(nr,{className:"w-3 h-3 mr-1"}),"+0.2 vs last month"]})]}),e.jsx(nr,{className:"h-8 w-8 text-warning"})]})})}),e.jsx(L,{className:"hover-lift interactive border-metrics-border bg-metrics-bg/50",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Trip Time"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:"18.5m"}),e.jsxs("p",{className:"text-xs text-success flex items-center mt-1",children:[e.jsx(gs,{className:"w-3 h-3 mr-1"}),"-1.2m vs last month"]})]}),e.jsx(gs,{className:"h-8 w-8 text-chart-muted"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(L,{className:"hover-lift",children:[e.jsx(Y,{children:e.jsx(H,{className:"text-foreground",children:"Revenue & Rides Trend"})}),e.jsx(B,{children:e.jsx("div",{className:"h-80 chart-enter",children:e.jsx(Qr,{width:"100%",height:"100%",children:e.jsxs(Up,{data:L2,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--chart-primary))",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--chart-primary))",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorRides",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--chart-secondary))",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--chart-secondary))",stopOpacity:.1})]})]}),e.jsx(Xa,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(Ja,{dataKey:"month",stroke:"hsl(var(--muted-foreground))"}),e.jsx(ma,{stroke:"hsl(var(--muted-foreground))"}),e.jsx(Zr,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(Ic,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--chart-primary))",fillOpacity:1,fill:"url(#colorRevenue)"}),e.jsx(Ic,{type:"monotone",dataKey:"rides",stroke:"hsl(var(--chart-secondary))",fillOpacity:1,fill:"url(#colorRides)"})]})})})})]}),e.jsxs(L,{className:"hover-lift",children:[e.jsx(Y,{children:e.jsx(H,{className:"text-foreground",children:"Hourly Activity Pattern"})}),e.jsx(B,{children:e.jsx("div",{className:"h-80 chart-enter",children:e.jsx(Qr,{width:"100%",height:"100%",children:e.jsxs(Tl,{data:B2,children:[e.jsx(Xa,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(Ja,{dataKey:"hour",stroke:"hsl(var(--muted-foreground))"}),e.jsx(ma,{stroke:"hsl(var(--muted-foreground))"}),e.jsx(Zr,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(wi,{dataKey:"rides",fill:"hsl(var(--chart-primary))",radius:[4,4,0,0]})]})})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(L,{className:"hover-lift",children:[e.jsx(Y,{children:e.jsxs(H,{className:"text-foreground flex items-center",children:[e.jsx(Xe,{className:"w-5 h-5 mr-2"}),"Performance by City Zone"]})}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:$2.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.rides," rides"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",s.revenue.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"})]})]},s.name))})})]}),e.jsxs(L,{className:"hover-lift",children:[e.jsx(Y,{children:e.jsxs(H,{className:"text-foreground flex items-center",children:[e.jsx(pn,{className:"w-5 h-5 mr-2"}),"Driver Performance Tiers"]})}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:q2.map((s,t)=>e.jsxs("div",{className:"p-4 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs(we,{variant:"outline",children:[s.drivers," drivers"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Avg Rating"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(nr,{className:"w-3 h-3 text-warning mr-1"}),e.jsx("span",{className:"font-medium",children:s.avgRating})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Avg Earnings"}),e.jsxs("p",{className:"font-medium",children:["$",s.avgEarnings]})]})]})]},s.name))})})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{className:"text-foreground",children:"Quick Analytics Actions"})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(E,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2",children:[e.jsx(Ws,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Custom Date Range"})]}),e.jsxs(E,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2",children:[e.jsx(tr,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Export CSV"})]}),e.jsxs(E,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Zone Analysis"})]}),e.jsxs(E,{variant:"outline",className:"h-20 flex flex-col items-center justify-center space-y-2",children:[e.jsx(ir,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Forecast Report"})]})]})})]})]}),ia=cc;function la(){const s=nf();return s?{Authorization:`Bearer ${s}`}:{}}function W2(s,t={}){var n,i,o;const r={page:((n=s.pageable)==null?void 0:n.page)??0,size:((i=s.pageable)==null?void 0:i.size)??10};s.from&&(r.from=s.from),s.to&&(r.to=s.to),(o=s.pageable)!=null&&o.sort&&s.pageable.sort.length>0&&(r.sort=s.pageable.sort);const a=ls(ia,"/reports/ride-history",r);return Bs(a,{enabled:t.enabled!==!1,headers:la(),onSuccess:t.onSuccess,onError:t.onError})}function K2(s={}){return zt(async t=>{const r={};t.from&&(r.from=t.from),t.to&&(r.to=t.to);const a=ls(ia,"/reports/ride-history-export-pdf",r),n=await fetch(a,{method:"POST",headers:la()});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);return n.blob()},{onSuccess:(t,r)=>{var i;const a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`ride-history-${r.from||"all"}-${r.to||"all"}.pdf`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a),(i=s.onSuccess)==null||i.call(s)},onError:(t,r)=>{var a;(a=s.onError)==null||a.call(s,t)}})}function Y2(s={}){return zt(async t=>{const r={};t.from&&(r.from=t.from),t.to&&(r.to=t.to);const a=ls(ia,"/reports/ride-history-export-excel",r),n=await fetch(a,{method:"POST",headers:la()});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);return n.blob()},{onSuccess:(t,r)=>{var i;const a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`ride-history-${r.from||"all"}-${r.to||"all"}.xlsx`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a),(i=s.onSuccess)==null||i.call(s)},onError:(t,r)=>{var a;(a=s.onError)==null||a.call(s,t)}})}function z2(s={},t={}){const r={};s.from&&(r.from=s.from),s.to&&(r.to=s.to);const a=ls(ia,"/reports/ride-analysis",r);return Bs(a,{enabled:t.enabled!==!1,headers:la(),onSuccess:t.onSuccess,onError:t.onError})}function H2(s={}){const t=ls(ia,"/reports/revenue-ride-trend-last-six-months");return Bs(t,{enabled:s.enabled!==!1,headers:la(),onSuccess:s.onSuccess,onError:s.onError})}function G2(s={}){const t=ls(ia,"/reports/revenue-last-six-months");return Bs(t,{enabled:s.enabled!==!1,headers:la(),onSuccess:s.onSuccess,onError:s.onError})}function Q2(s={}){const t=ls(ia,"/reports/driver-performance-tiers");return Bs(t,{enabled:s.enabled!==!1,headers:la(),onSuccess:s.onSuccess,onError:s.onError})}function Z2(s,t={}){const a=ls(ia,"/reports/completed-rides-hourly-4-hours",{});return Bs(a,{enabled:t.enabled!==!1,headers:la(),onSuccess:t.onSuccess,onError:t.onError})}const qa=s=>s&&s.data?s.data:null,wu=s=>s==null?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),vi=s=>s==null?"0":new Intl.NumberFormat("en-US").format(s),X2=s=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate());switch(s){case"today":return{from:new Date(r).toISOString(),to:new Date(r.getTime()+24*60*60*1e3-1).toISOString()};case"week":const a=new Date(r);return a.setDate(r.getDate()-r.getDay()),{from:a.toISOString(),to:t.toISOString()};case"month":return{from:new Date(r.getFullYear(),r.getMonth(),1).toISOString(),to:t.toISOString()};case"quarter":return{from:new Date(r.getFullYear(),Math.floor(r.getMonth()/3)*3,1).toISOString(),to:t.toISOString()};case"year":return{from:new Date(r.getFullYear(),0,1).toISOString(),to:t.toISOString()};default:return{}}},J2=()=>{const[s,t]=h.useState(""),[r,a]=h.useState("all"),[n,i]=h.useState("week"),[o,l]=h.useState(1),[c,u]=h.useState(10),d=h.useMemo(()=>X2(n),[n]),{data:m,loading:x,error:g,refetch:p}=W2({...d,pageable:{page:o-1,size:c}}),{data:N,loading:f,error:S}=z2(d),{data:j,loading:w}=H2(),{data:C,loading:y}=G2(),{data:b,loading:v}=Q2(),{data:M,loading:P}=Z2(),V=K2({onSuccess:()=>{I.success("PDF report exported successfully")},onError:ce=>{I.error(`Failed to export PDF: ${ce.message}`)}}),R=Y2({onSuccess:()=>{I.success("Excel report exported successfully")},onError:ce=>{I.error(`Failed to export Excel: ${ce.message}`)}}),T=qa(m),q=(T==null?void 0:T.content)||[],_=(T==null?void 0:T.totalElements)||0,D=qa(N),X=qa(j)||[],ne=qa(C)||[],me=qa(b)||[],Q=qa(M)||[],be=h.useMemo(()=>q.filter(ce=>{const ae=!s||String(ce.rideId||"").toLowerCase().includes(s.toLowerCase())||(ce.riderName||"").toLowerCase().includes(s.toLowerCase())||(ce.driverName||"").toLowerCase().includes(s.toLowerCase()),W=r==="all"||(ce.status||"").toLowerCase()===r.toLowerCase();return ae&&W}),[q,s,r]),ke=h.useMemo(()=>{const ce=(D==null?void 0:D.totalRides)||_||0,ae=(D==null?void 0:D.completedRides)||0,W=(D==null?void 0:D.cancelledRides)||0,F=(D==null?void 0:D.averageDuration)||0;return{total:ce,completed:ae,cancelled:W,avgDuration:F}},[D,_]),K=ce=>{const ae=(ce||"").toLowerCase(),W={completed:{className:"bg-success text-success-foreground"},cancelled:{className:"bg-destructive text-destructive-foreground"},in_progress:{className:"bg-warning text-warning-foreground"},"in progress":{className:"bg-warning text-warning-foreground"}};return W[ae]||W.completed},G=async ce=>{ce==="Ride History"||ce==="All Reports"?await new Promise(W=>{W("pdf")})==="pdf"?V.mutate(d):R.mutate(d):I.info(`${ce} export coming soon`)};h.useEffect(()=>{l(1)},[s,r,n]),h.useEffect(()=>{p()},[n,o,c]);const ue=ce=>l(ce),de=ce=>{u(ce),l(1)},xe=g||S;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Reports & Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive reporting and data insights"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(ge,{value:n,onValueChange:i,children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{})}),e.jsxs(pe,{children:[e.jsx(A,{value:"today",children:"Today"}),e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"quarter",children:"This Quarter"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsxs(E,{onClick:()=>G("All Reports"),className:"bg-gradient-primary hover:opacity-90",disabled:V.loading||R.loading,children:[V.loading||R.loading?e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(tr,{className:"w-4 h-4 mr-2"}),"Export All"]})]})]}),xe&&e.jsx(L,{className:"border-destructive",children:e.jsx(B,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-2 text-destructive",children:[e.jsx(xt,{className:"h-5 w-5"}),e.jsx("p",{children:"Error loading reports data. Please try again later."})]})})}),e.jsxs(Ra,{defaultValue:"ride-history",className:"space-y-6",children:[e.jsxs(na,{className:"grid w-full grid-cols-3",children:[e.jsx(es,{value:"ride-history",children:"Ride History"}),e.jsx(es,{value:"financial",children:"Financial Reports"}),e.jsx(es,{value:"operational",children:"Operational Reports"})]}),e.jsxs(ss,{value:"ride-history",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(L,{className:"hover-lift interactive",children:e.jsx(B,{className:"p-6",children:f?e.jsx("div",{className:"flex items-center justify-center h-16",children:e.jsx(Fe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Rides"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:vi(ke.total)})]}),e.jsx(os,{className:"h-8 w-8 text-chart-primary"})]})})}),e.jsx(L,{className:"hover-lift interactive",children:e.jsx(B,{className:"p-6",children:f?e.jsx("div",{className:"flex items-center justify-center h-16",children:e.jsx(Fe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-success",children:vi(ke.completed)})]}),e.jsx(Ie,{className:"h-8 w-8 text-success"})]})})}),e.jsx(L,{className:"hover-lift interactive",children:e.jsx(B,{className:"p-6",children:f?e.jsx("div",{className:"flex items-center justify-center h-16",children:e.jsx(Fe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Cancelled"}),e.jsx("p",{className:"text-2xl font-bold text-destructive",children:vi(ke.cancelled)})]}),e.jsx(vt,{className:"h-8 w-8 text-destructive"})]})})}),e.jsx(L,{className:"hover-lift interactive",children:e.jsx(B,{className:"p-6",children:f?e.jsx("div",{className:"flex items-center justify-center h-16",children:e.jsx(Fe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Duration"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:ke.avgDuration?`${ke.avgDuration.toFixed(1)}m`:"0m"})]}),e.jsx(gs,{className:"h-8 w-8 text-chart-accent"})]})})})]}),e.jsx(L,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search by ride ID, passenger, or driver...",className:"pl-10",value:s,onChange:ce=>t(ce.target.value)})]}),e.jsxs(ge,{value:r,onValueChange:a,children:[e.jsx(fe,{className:"w-40",children:e.jsx(je,{placeholder:"All Status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"completed",children:"Completed"}),e.jsx(A,{value:"cancelled",children:"Cancelled"}),e.jsx(A,{value:"in_progress",children:"In Progress"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:()=>G("Ride History"),variant:"outline",disabled:V.loading,children:[V.loading?e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(tr,{className:"w-4 h-4 mr-2"}),"PDF"]}),e.jsxs(E,{onClick:()=>R.mutate(d),variant:"outline",disabled:R.loading,children:[R.loading?e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(tr,{className:"w-4 h-4 mr-2"}),"Excel"]})]})]})})}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{children:["Ride History (",be.length,")"]})}),e.jsx(B,{children:x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Fe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):be.length===0?e.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:e.jsx("p",{children:"No ride history found"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Ride ID"}),e.jsx(oe,{children:"Passenger"}),e.jsx(oe,{children:"Driver"}),e.jsx(oe,{children:"Route"}),e.jsx(oe,{children:"Distance"}),e.jsx(oe,{children:"Duration"}),e.jsx(oe,{children:"Fare"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{children:"Rating"}),e.jsx(oe,{children:"Time"})]})}),e.jsx(tt,{children:be.map(ce=>{const ae=K(ce.status),W=ce.fare||ce.totalFare||ce.amount||0,F=ce.riderName||`Rider #${ce.riderId||"N/A"}`,te=ce.driverName||`Driver #${ce.driverId||"N/A"}`,ye=ce.startTime||ce.completedAt||"";return e.jsxs(Ue,{className:"hover:bg-muted/50",children:[e.jsxs(re,{className:"font-medium",children:["#",ce.rideId||"N/A"]}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Kt,{className:"w-6 h-6",children:e.jsx(Yt,{className:"text-xs",children:F.split(" ").map(se=>se[0]).join("").slice(0,2).toUpperCase()})}),e.jsx("span",{className:"text-sm",children:F})]})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Kt,{className:"w-6 h-6",children:e.jsx(Yt,{className:"text-xs",children:te.split(" ").map(se=>se[0]).join("").slice(0,2).toUpperCase()})}),e.jsx("span",{className:"text-sm",children:te})]})}),e.jsx(re,{children:e.jsxs("div",{className:"max-w-48",children:[ce.pickupLocation&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Xe,{className:"w-3 h-3 mr-1 text-success"}),e.jsx("span",{className:"truncate",children:ce.pickupLocation})]}),ce.dropoffLocation&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Xe,{className:"w-3 h-3 mr-1 text-destructive"}),e.jsx("span",{className:"truncate",children:ce.dropoffLocation})]})]})}),e.jsx(re,{children:ce.distance?`${ce.distance.toFixed(1)} mi`:"-"}),e.jsx(re,{children:ce.duration?`${ce.duration} min`:"-"}),e.jsx(re,{children:wu(W)}),e.jsx(re,{children:e.jsx(we,{className:ae.className,children:(ce.status||"").charAt(0).toUpperCase()+(ce.status||"").slice(1)})}),e.jsx(re,{children:ce.rating?e.jsxs("div",{className:"flex items-center",children:[e.jsx(nr,{className:"w-3 h-3 text-warning mr-1 fill-warning"}),ce.rating.toFixed(1)]}):"-"}),e.jsx(re,{className:"text-sm",children:ye?e.jsxs(e.Fragment,{children:[new Date(ye).toLocaleDateString(),e.jsx("br",{}),new Date(ye).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):"-"})]},ce.rideId||Math.random())})})]})}),T&&T.totalElements>0&&e.jsx(dt,{currentPage:o,totalPages:T.totalPages||1,totalItems:T.totalElements,itemsPerPage:c,onPageChange:ue,onItemsPerPageChange:de,className:"mt-4"})]})})]})]}),e.jsxs(ss,{value:"financial",className:"space-y-6",children:[e.jsxs(L,{className:"hover-lift",children:[e.jsx(Y,{children:e.jsx(H,{children:"Revenue Breakdown (Last 6 Months)"})}),e.jsx(B,{children:y?e.jsx("div",{className:"flex items-center justify-center h-80",children:e.jsx(Fe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):ne.length===0?e.jsx("div",{className:"flex items-center justify-center h-80 text-muted-foreground",children:e.jsx("p",{children:"No revenue data available"})}):e.jsx("div",{className:"h-80 chart-enter",children:e.jsx(Qr,{width:"100%",height:"100%",children:e.jsxs(Tl,{data:ne,children:[e.jsx(Xa,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(Ja,{dataKey:"month",stroke:"hsl(var(--muted-foreground))"}),e.jsx(ma,{stroke:"hsl(var(--muted-foreground))"}),e.jsx(Zr,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(wi,{dataKey:"grossRevenue",fill:"hsl(var(--chart-primary))",name:"Gross Revenue"}),e.jsx(wi,{dataKey:"netRevenue",fill:"hsl(var(--chart-secondary))",name:"Net Revenue"})]})})})})]}),e.jsxs(L,{className:"hover-lift",children:[e.jsx(Y,{children:e.jsx(H,{children:"Revenue & Ride Trend (Last 6 Months)"})}),e.jsx(B,{children:w?e.jsx("div",{className:"flex items-center justify-center h-80",children:e.jsx(Fe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):X.length===0?e.jsx("div",{className:"flex items-center justify-center h-80 text-muted-foreground",children:e.jsx("p",{children:"No trend data available"})}):e.jsx("div",{className:"h-80 chart-enter",children:e.jsx(Qr,{width:"100%",height:"100%",children:e.jsxs(Tm,{data:X,children:[e.jsx(Xa,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(Ja,{dataKey:"month",stroke:"hsl(var(--muted-foreground))"}),e.jsx(ma,{yAxisId:"left",stroke:"hsl(var(--muted-foreground))"}),e.jsx(ma,{yAxisId:"right",orientation:"right",stroke:"hsl(var(--muted-foreground))"}),e.jsx(Zr,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(Ri,{yAxisId:"left",type:"monotone",dataKey:"revenue",stroke:"hsl(var(--chart-primary))",name:"Revenue"}),e.jsx(Ri,{yAxisId:"right",type:"monotone",dataKey:"rides",stroke:"hsl(var(--chart-secondary))",name:"Rides"})]})})})})]})]}),e.jsxs(ss,{value:"operational",className:"space-y-6",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Driver Performance Tiers"})}),e.jsx(B,{children:v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Fe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):me.length===0?e.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:e.jsx("p",{children:"No driver performance data available"})}):e.jsx("div",{className:"space-y-4",children:me.map((ce,ae)=>{var W;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:ce.tierName||ce.tier||`Tier ${ae+1}`}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[ce.driverCount||0," drivers"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Rating"}),e.jsx("p",{className:"font-semibold",children:((W=ce.averageRating)==null?void 0:W.toFixed(1))||"N/A"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Rides"}),e.jsx("p",{className:"font-semibold",children:vi(ce.totalRides)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"}),e.jsx("p",{className:"font-semibold",children:wu(ce.totalRevenue)})]})]},ae)})})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Completed Rides (4-Hour Intervals)"})}),e.jsx(B,{children:P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Fe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):Q.length===0?e.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:e.jsx("p",{children:"No hourly data available"})}):e.jsx("div",{className:"h-80 chart-enter",children:e.jsx(Qr,{width:"100%",height:"100%",children:e.jsxs(Tl,{data:Q,children:[e.jsx(Xa,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(Ja,{dataKey:"timeSlot",stroke:"hsl(var(--muted-foreground))"}),e.jsx(ma,{stroke:"hsl(var(--muted-foreground))"}),e.jsx(Zr,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(wi,{dataKey:"completedRides",fill:"hsl(var(--chart-primary))",name:"Completed Rides"})]})})})})]})]})]})]})},eP=({open:s,onOpenChange:t,title:r,description:a,confirmText:n="Confirm",cancelText:i="Cancel",variant:o="default",onConfirm:l,loading:c=!1,icon:u})=>{const d=async()=>{await l()},m=()=>{switch(o){case"destructive":return{confirmBg:"bg-red-600 hover:bg-red-700 text-white",textColor:"text-red-600",iconColor:"text-red-600"};case"warning":return{confirmBg:"bg-orange-500 hover:bg-orange-600 text-white",textColor:"text-orange-500",iconColor:"text-orange-500"};case"info":return{confirmBg:"bg-blue-500 hover:bg-blue-600 text-white",textColor:"text-blue-500",iconColor:"text-blue-500"};default:return{confirmBg:"bg-primary hover:bg-primary/90 text-primary-foreground",textColor:"text-green-600",iconColor:"text-green-600"}}},{confirmBg:x,textColor:g,iconColor:p}=m();return s?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>t(!1)}),e.jsxs("div",{className:"relative bg-background border rounded-lg shadow-lg max-w-md w-full mx-4 p-6",children:[e.jsxs("button",{onClick:()=>t(!1),className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(Wt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[u&&e.jsx("div",{className:p,children:u}),e.jsx("h3",{className:"text-lg font-semibold leading-none tracking-tight",children:r})]}),a&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx("button",{onClick:()=>t(!1),disabled:c,className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2",children:i}),e.jsx("button",{onClick:d,disabled:c,className:`inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2 ${x}`,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Processing..."]}):n})]})]})]})]}):null},Tn=()=>{const[s,t]=Ne.useState({open:!1,title:"",description:"",confirmText:"Confirm",cancelText:"Cancel",variant:"default",onConfirm:void 0,icon:void 0}),r=Ne.useCallback(i=>{t({...i,open:!0})},[]),a=Ne.useCallback(()=>{t(i=>({...i,open:!1}))},[]),n=Ne.useCallback(()=>e.jsx(eP,{open:s.open,onOpenChange:a,title:s.title,description:s.description,confirmText:s.confirmText,cancelText:s.cancelText,variant:s.variant,onConfirm:async()=>{var i;await((i=s.onConfirm)==null?void 0:i.call(s)),a()},icon:s.icon}),[s,a]);return{confirm:r,close:a,ConfirmDialog:n}},An=(s,t,r)=>({title:`Delete ${s}?`,description:r||`Are you sure you want to delete this ${s.toLowerCase()}? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"destructive",onConfirm:t}),fc=(s,t,r)=>({title:`${t?"Deactivate":"Activate"} ${s}?`,description:`Are you sure you want to ${t?"deactivate":"activate"} this ${s.toLowerCase()}?`,confirmText:t?"Deactivate":"Activate",cancelText:"Cancel",variant:"warning",onConfirm:r});function sP(s,t={}){var n;const r=ls(Ys,`/country/${s}`),a=Bs(r,{enabled:t.enabled,onSuccess:i=>{var o;i!=null&&i.data&&((o=t.onSuccess)==null||o.call(t,i.data))},onError:t.onError});return{data:((n=a.data)==null?void 0:n.data)||null,loading:a.loading,error:a.error,refetch:a.refetch}}function pc(s={},t={}){var n;const r=ls(Ys,"/country/list",{page:s.page||0,size:s.size||10,...s.sort&&{sort:s.sort},...s.search&&{search:s.search}}),a=Bs(r,{enabled:t.enabled,onSuccess:i=>{var o;i!=null&&i.data&&((o=t.onSuccess)==null||o.call(t,i.data))},onError:t.onError});return{data:((n=a.data)==null?void 0:n.data)||null,loading:a.loading,error:a.error,refetch:a.refetch}}function tP(s={}){return zt(async t=>{const r=ls(Ys,"/country");return Or(r,{method:"POST",body:JSON.stringify(t)})},s)}function rP(s={}){return zt(async({id:t,data:r})=>{const a=ls(Ys,`/country/${t}`);return Or(a,{method:"PUT",body:JSON.stringify(r)})},s)}function aP(s={}){return zt(async t=>{const r=ls(Ys,`/country/${t}`);return Or(r,{method:"DELETE"})},s)}let yi=null,Ni=null;async function sl(){return yi||Ni||(Ni=(async()=>{try{const t=await fetch("https://api.ipify.org?format=json",{method:"GET",headers:{Accept:"application/json"}});if(t.ok){const a=(await t.json()).ip||"";if(a)return yi=a,a}}catch{}try{const t=await fetch("https://api.ipapi.com/api/check?access_key=free",{method:"GET",headers:{Accept:"application/json"}});if(t.ok){const a=(await t.json()).ip||"";if(a)return yi=a,a}}catch{}return""})(),await Ni)}const gc=()=>new Date().toISOString(),jc=s=>(s==null?void 0:s.toLowerCase())==="active"?"active":"inactive",Va=s=>s==="active"?"ACTIVE":"INACTIVE",tl=s=>{const t=s.createdDate??s.modifiedDate??gc(),r=s.modifiedDate??s.createdDate??t;return{id:s.countryId!==void 0?String(s.countryId):"",name:s.countryName??"",code:s.code??"",status:jc(s.status),metadata:s.remarks?{remarks:s.remarks}:void 0,createdAt:t,updatedAt:r}},vc=s=>{var a;const t=s.createdDate??s.modifiedDate??gc(),r=s.modifiedDate??s.createdDate??t;return{id:s.stateId!==void 0?String(s.stateId):"",name:s.stateName??"",code:s.code??"",countryId:((a=s.country)==null?void 0:a.countryId)!==void 0?String(s.country.countryId):"",country:s.country?tl(s.country):void 0,status:jc(s.status),metadata:s.remarks?{remarks:s.remarks}:void 0,createdAt:t,updatedAt:r}},nP=s=>{const t=s.createdDate??s.modifiedDate??gc(),r=s.modifiedDate??s.createdDate??t,a=s.state?vc(s.state):void 0,n=a==null?void 0:a.country;return{id:s.cityId!==void 0?String(s.cityId):"",name:s.cityName??"",stateId:a==null?void 0:a.id,countryId:(n==null?void 0:n.id)??"",state:a,country:n,status:jc(s.status),metadata:s.remarks?{remarks:s.remarks}:void 0,createdAt:t,updatedAt:r}},Cu=async(s,t,r)=>{var i;const a=await sl(),n=t!==void 0&&r;return{countryId:t!==void 0?Number(t):void 0,countryName:s.name,code:s.code,status:Va(s.status),remarks:(i=s.metadata)==null?void 0:i.remarks,createdSystemIp:n&&r.createdSystemIp||a,modifiedSystemIp:a,...r&&{createdBy:r.createdBy,createdDate:r.createdDate,modifiedBy:r.modifiedBy,modifiedDate:r.modifiedDate,isDeletedValue:r.isDeletedValue,isActive:r.isActive}}},Su=async(s,t,r)=>{var i;const a=await sl(),n=t!==void 0&&r;return{stateId:t!==void 0?Number(t):void 0,stateName:s.name,code:s.code,status:Va(s.status),country:s.countryId?{countryId:Number(s.countryId),...(r==null?void 0:r.country)&&{createdSystemIp:r.country.createdSystemIp||a,modifiedSystemIp:a}}:void 0,remarks:(i=s.metadata)==null?void 0:i.remarks,createdSystemIp:n&&r.createdSystemIp||a,modifiedSystemIp:a,...r&&{createdBy:r.createdBy,createdDate:r.createdDate,modifiedBy:r.modifiedBy,modifiedDate:r.modifiedDate,isDeletedValue:r.isDeletedValue}}},iP=async(s,t)=>{var a;const r=await sl();return{stateId:s.id?Number(s.id):void 0,stateName:s.name,code:s.code,status:Va(s.status),country:s.countryId?{countryId:Number(s.countryId),...(t==null?void 0:t.country)&&{createdSystemIp:t.country.createdSystemIp||r,modifiedSystemIp:r}}:void 0,remarks:(a=s.metadata)==null?void 0:a.remarks,createdSystemIp:(t==null?void 0:t.createdSystemIp)||r,modifiedSystemIp:r,...t&&{createdBy:t.createdBy,createdDate:t.createdDate,modifiedBy:t.modifiedBy,modifiedDate:t.modifiedDate,isDeletedValue:t.isDeletedValue}}},Pu=async(s,t,r)=>{var i,o;const a=await sl(),n=t!==void 0&&r;return{cityId:t!==void 0?Number(t):void 0,cityName:s.name,status:Va(s.status),state:s.stateId&&s.stateId!=="no-state"?{stateId:Number(s.stateId),...(r==null?void 0:r.state)&&{createdSystemIp:r.state.createdSystemIp||a,modifiedSystemIp:a},country:s.countryId?{countryId:Number(s.countryId),...((i=r==null?void 0:r.state)==null?void 0:i.country)&&{createdSystemIp:r.state.country.createdSystemIp||a,modifiedSystemIp:a}}:void 0}:void 0,remarks:(o=s.metadata)==null?void 0:o.remarks,createdSystemIp:n&&r.createdSystemIp||a,modifiedSystemIp:a,...r&&{createdBy:r.createdBy,createdDate:r.createdDate,modifiedBy:r.modifiedBy,modifiedDate:r.modifiedDate,isDeletedValue:r.isDeletedValue}}},lP=s=>{var t;return{cityId:s.id?Number(s.id):void 0,cityName:s.name,status:Va(s.status),state:s.stateId&&s.stateId!=="no-state"?{stateId:Number(s.stateId),country:s.countryId?{countryId:Number(s.countryId)}:void 0}:void 0,remarks:(t=s.metadata)==null?void 0:t.remarks}},oP=()=>{const s=ze(),[t,r]=h.useState([]),[a,n]=h.useState([]),[i,o]=h.useState(!1),[l,c]=h.useState(null),[u,d]=h.useState(""),[m,x]=h.useState("all"),[g,p]=h.useState(1),[N,f]=h.useState(10),{confirm:S,ConfirmDialog:j}=Tn(),[w,C]=h.useState({name:"",code:"",status:"active"}),[y,b]=h.useState({}),v=()=>{const F={};return w.name.trim()?t.some(ye=>ye.name.toLowerCase()===w.name.toLowerCase()&&ye.id!==(l==null?void 0:l.id))&&(F.name="Country with this name already exists"):F.name="Country name is required",w.code.trim()?w.code.length!==2?F.code="Country code must be exactly 2 characters":t.some(ye=>ye.code.toLowerCase()===w.code.toLowerCase()&&ye.id!==(l==null?void 0:l.id))&&(F.code="Country with this code already exists"):F.code="Country code is required",w.status||(F.status="Status is required"),b(F),Object.keys(F).length===0},M=(F,te)=>{C(ye=>({...ye,[F]:te})),y[F]&&b(ye=>({...ye,[F]:void 0}))},P=h.useMemo(()=>({page:0,size:1e3}),[]),{data:V,loading:R,error:T,refetch:q}=pc(P),_=tP(),D=rP(),X=aP(),{data:ne}=sP(l?Number(l.id):0,{enabled:!!l&&!!l.id}),me=_.loading||D.loading||X.loading;h.useEffect(()=>{if(V!=null&&V.content){const F=V.content.map(tl);r(F)}else r([])},[V]),h.useEffect(()=>{T&&I.error(T.message)},[T]),h.useEffect(()=>{let F=t;u&&(F=F.filter(te=>te.name.toLowerCase().includes(u.toLowerCase())||te.code.toLowerCase().includes(u.toLowerCase()))),m!=="all"&&(F=F.filter(te=>te.status===m)),n(F),p(1)},[t,u,m]);const Q=a.length,be=Math.ceil(Q/N),ke=(g-1)*N,K=ke+N,G=a.slice(ke,K),ue=F=>{p(F)},de=F=>{f(F),p(1)},xe=()=>{C({name:"",code:"",status:"active"}),b({}),c(null)},ce=async F=>{if(F.preventDefault(),!v()){I.error("Please fix the validation errors");return}try{if(l){const te=await Cu(w,l.id,ne||void 0);await D.mutate({id:Number(l.id),data:te}),I.success("Country updated successfully!")}else{const te=await Cu(w);await _.mutate(te),I.success("Country created successfully!")}await q(),o(!1),xe()}catch(te){const ye=te instanceof Error?te.message:"Failed to save country";(ye.toLowerCase().includes("duplicate")||ye.toLowerCase().includes("already exists")||ye.toLowerCase().includes("unique"))&&(ye.toLowerCase().includes("name")?b(se=>({...se,name:"Country name already exists"})):ye.toLowerCase().includes("code")?b(se=>({...se,code:"Country code already exists"})):b(se=>({...se,name:"Duplicate country detected",code:"Duplicate country detected"}))),I.error(ye)}},ae=F=>{c(F),C({name:F.name,code:F.code,status:F.status,metadata:F.metadata||{}}),o(!0)},W=F=>{const te=F.name;S(An("Country",async()=>{try{await X.mutate(Number(F.id)),I.success(`${te} deleted successfully!`),await s.invalidateQueries({queryKey:["countries"]})}catch(ye){const se=ye instanceof Error?ye.message:"Failed to delete country";I.error(se)}},`Are you sure you want to delete ${te}? This will permanently remove the country and all associated data. This action cannot be undone.`))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Countries"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage countries and their configurations"})]}),e.jsxs(_t,{open:i,onOpenChange:o,children:[e.jsx(uc,{asChild:!0,children:e.jsxs(E,{onClick:xe,children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add Country"]})}),e.jsxs(Dt,{className:"max-w-2xl",children:[e.jsxs(It,{children:[e.jsx(Tt,{children:l?"Edit Country":"Add New Country"}),e.jsx(Fa,{children:l?"Update the country information below.":"Add a new country to the system."})]}),e.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Country Name *"}),e.jsx(O,{value:w.name,onChange:F=>M("name",F.target.value),onBlur:()=>{w.name.trim()&&t.some(te=>te.name.toLowerCase()===w.name.toLowerCase()&&te.id!==(l==null?void 0:l.id))&&b(te=>({...te,name:"Country with this name already exists"}))},placeholder:"United States",className:y.name?"border-red-500 focus:ring-red-500":"",required:!0},"country-name-input"),y.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"ISO Code (2-char) *"}),e.jsx(O,{value:w.code,onChange:F=>M("code",F.target.value.toUpperCase()),onBlur:()=>{w.code.trim()&&(w.code.length!==2?b(F=>({...F,code:"Country code must be exactly 2 characters"})):t.some(te=>te.code.toLowerCase()===w.code.toLowerCase()&&te.id!==(l==null?void 0:l.id))&&b(te=>({...te,code:"Country with this code already exists"})))},placeholder:"US",maxLength:2,className:y.code?"border-red-500 focus:ring-red-500":"",required:!0},"country-code-input"),y.code&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.code})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status *"}),e.jsxs(ge,{value:w.status,onValueChange:F=>{M("status",F)},children:[e.jsx(fe,{className:y.status?"border-red-500 focus:ring-red-500":"",children:e.jsx(je,{placeholder:"Select status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),y.status&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:y.status})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(E,{type:"submit",disabled:me,children:me?"Saving...":l?"Update":"Create"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Total Countries"}),e.jsx($t,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Active Countries"}),e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.filter(F=>F.status==="active").length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Inactive Countries"}),e.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.filter(F=>F.status==="inactive").length})})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Filters"})}),e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search countries...",value:u,onChange:F=>d(F.target.value),className:"pl-10"})]}),e.jsxs(ge,{value:m,onValueChange:x,children:[e.jsx(fe,{className:"w-full sm:w-[180px]",children:e.jsx(je,{placeholder:"Filter by status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]})]})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{children:["Countries (",a.length,")"]})}),e.jsxs(B,{children:[R&&e.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:"Loading countries..."}),e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Country Name"}),e.jsx(oe,{children:"Code"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:G.map(F=>e.jsxs(Ue,{children:[e.jsx(re,{children:e.jsx("div",{className:"font-medium",children:F.name})}),e.jsx(re,{children:e.jsx("div",{className:"text-sm font-mono uppercase",children:F.code})}),e.jsx(re,{children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${F.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:F.status==="active"?"Active":"Inactive"})}),e.jsx(re,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>ae(F),children:e.jsx(js,{className:"h-4 w-4"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>W(F),disabled:me,children:e.jsx(Zs,{className:"h-4 w-4"})})]})})]},F.id))})]}),!R&&a.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx($t,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No countries found"}),e.jsx("p",{className:"text-muted-foreground",children:u||m!=="all"?"Try adjusting your filters":"Get started by adding your first country"})]}),a.length>0&&e.jsx(dt,{currentPage:g,totalPages:be,totalItems:Q,itemsPerPage:N,onPageChange:ue,onItemsPerPageChange:de,className:"mt-4"})]})]}),e.jsx(j,{})]})};function cP(s,t={}){var n;const r=ls(Ys,`/state/${s}`),a=Bs(r,{enabled:t.enabled,onSuccess:i=>{var o;return(i==null?void 0:i.data)&&((o=t.onSuccess)==null?void 0:o.call(t,i.data))},onError:t.onError});return{data:((n=a.data)==null?void 0:n.data)||null,loading:a.loading,error:a.error,refetch:a.refetch}}function Pf(s={},t={}){var n;const r=ls(Ys,"/state/list",{page:s.page||0,size:s.size||10,...s.sort&&{sort:s.sort},...s.search&&{search:s.search}}),a=Bs(r,{enabled:t.enabled,onSuccess:i=>{var o;return(i==null?void 0:i.data)&&((o=t.onSuccess)==null?void 0:o.call(t,i.data))},onError:t.onError});return{data:((n=a.data)==null?void 0:n.data)||null,loading:a.loading,error:a.error,refetch:a.refetch}}function dP(s={}){return zt(async t=>{const r=ls(Ys,"/state");return Or(r,{method:"POST",body:JSON.stringify(t)})},s)}function uP(s={}){return zt(async({id:t,data:r})=>{const a=ls(Ys,`/state/${t}`);return Or(a,{method:"PUT",body:JSON.stringify(r)})},s)}function mP(s={}){return zt(async t=>{const r=ls(Ys,`/state/${t}`);return Or(r,{method:"DELETE"})},s)}const hP=()=>{const s=ze(),[t,r]=h.useState([]),[a,n]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState(!1),[u,d]=h.useState(null),[m,x]=h.useState(""),[g,p]=h.useState("all"),[N,f]=h.useState("all"),[S,j]=h.useState(1),[w,C]=h.useState(10),{confirm:y,ConfirmDialog:b}=Tn(),[v,M]=h.useState({name:"",code:"",countryId:"",status:"active"}),[P,V]=h.useState({}),R=()=>{const J={};return v.name.trim()?t.some(Ve=>Ve.name.toLowerCase()===v.name.toLowerCase()&&Ve.id!==(u==null?void 0:u.id))&&(J.name="State with this name already exists"):J.name="State name is required",v.code.trim()?v.code.length<2?J.code="State code must be at least 2 characters":v.code.length>5?J.code="State code must be no more than 5 characters":t.some(Ve=>Ve.code.toLowerCase()===v.code.toLowerCase()&&Ve.id!==(u==null?void 0:u.id))&&(J.code="State with this code already exists"):J.code="State code is required",v.countryId||(J.countryId="Country is required"),v.status||(J.status="Status is required"),V(J),Object.keys(J).length===0},T=(J,Ce)=>{M(Ve=>({...Ve,[J]:Ce})),P[J]&&V(Ve=>({...Ve,[J]:void 0}))},q=h.useMemo(()=>({page:0,size:1e3}),[]),_=h.useMemo(()=>({page:0,size:1e3}),[]),{data:D,loading:X,error:ne,refetch:me}=Pf(q),{data:Q,loading:be,error:ke}=pc(_),K=dP(),G=uP(),ue=mP(),{data:de}=cP(u?Number(u.id):0,{enabled:!!u&&!!u.id}),xe=K.loading||G.loading||ue.loading;h.useEffect(()=>{if(D!=null&&D.content){const J=D.content.map(vc);r(J)}else r([])},[D]),h.useEffect(()=>{if(Q!=null&&Q.content){const J=Q.content.map(tl);o(J)}else o([])},[Q]),h.useEffect(()=>{ne&&I.error(ne.message)},[ne]),h.useEffect(()=>{ke&&I.error(ke.message)},[ke]),h.useEffect(()=>{let J=t;m&&(J=J.filter(Ce=>Ce.name.toLowerCase().includes(m.toLowerCase())||Ce.code.toLowerCase().includes(m.toLowerCase()))),g!=="all"&&(J=J.filter(Ce=>Ce.status===g)),N!=="all"&&(J=J.filter(Ce=>Ce.countryId===N)),n(J),j(1)},[t,m,g,N]);const ce=a.length,ae=Math.ceil(ce/w),W=(S-1)*w,F=W+w,te=a.slice(W,F),ye=J=>{j(J)},se=J=>{C(J),j(1)},Z=()=>{M({name:"",code:"",countryId:"",status:"active"}),V({}),d(null)},U=async J=>{if(J.preventDefault(),!R()){I.error("Please fix the validation errors");return}try{if(u){const Ce=await Su(v,u.id,de||void 0);await G.mutate({id:Number(u.id),data:Ce}),I.success("State updated successfully!")}else{const Ce=await Su(v);await K.mutate(Ce),I.success("State created successfully!")}await me(),c(!1),Z()}catch(Ce){const Ve=Ce instanceof Error?Ce.message:"Failed to save state";(Ve.toLowerCase().includes("duplicate")||Ve.toLowerCase().includes("already exists")||Ve.toLowerCase().includes("unique"))&&(Ve.toLowerCase().includes("name")?V(hs=>({...hs,name:"State name already exists"})):Ve.toLowerCase().includes("code")?V(hs=>({...hs,code:"State code already exists"})):V(hs=>({...hs,name:"Duplicate state detected",code:"Duplicate state detected"}))),I.error(Ve)}},he=J=>{d(J),M({name:J.name,code:J.code,countryId:J.countryId,status:J.status,metadata:J.metadata||{}}),c(!0)},Te=J=>{if(xe)return;const Ce=J.name;y(An("State",async()=>{try{await ue.mutate(Number(J.id)),I.success(`${Ce} deleted successfully!`),await me()}catch(Ve){const hs=Ve instanceof Error?Ve.message:"Failed to delete state";I.error(hs)}},`Are you sure you want to delete ${Ce}? This will permanently remove the state and all associated data. This action cannot be undone.`))},ts=J=>{if(xe)return;const Ce=J.status==="active",Ve=J.name;y(fc("State",Ce,async()=>{try{const hs=Ce?"inactive":"active";s.setQueriesData({queryKey:["states"]},Ns=>{if(!(Ns!=null&&Ns.content))return Ns;const jr=Ns.content.map(Ht=>Ht.stateId===J.id?{...Ht,isActive:hs==="active"}:Ht);return{...Ns,content:jr}});let Rs;try{const Ns=await fetch(`${Ys}/state/${J.id}`);Ns.ok&&(Rs=(await Ns.json()).data)}catch{}const ut={...await iP(J,Rs),status:Va(hs)};await G.mutate({id:Number(J.id),data:ut}),I.success(`${Ve} ${hs==="active"?"activated":"deactivated"} successfully!`)}catch(hs){s.setQueriesData({queryKey:["states"]},Os=>{if(!(Os!=null&&Os.content))return Os;const ut=Os.content.map(Ns=>Ns.stateId===J.id?{...Ns,isActive:Ce}:Ns);return{...Os,content:ut}});const Rs=hs instanceof Error?hs.message:"Failed to update state status";I.error(Rs)}}))},z=J=>{const Ce=i.find(Ve=>Ve.id===J);return Ce?Ce.name:"Unknown"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"States"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage states and provinces"})]}),e.jsxs(_t,{open:l,onOpenChange:c,children:[e.jsx(uc,{asChild:!0,children:e.jsxs(E,{onClick:Z,children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add State"]})}),e.jsxs(Dt,{className:"max-w-2xl",children:[e.jsxs(It,{children:[e.jsx(Tt,{children:u?"Edit State":"Add New State"}),e.jsx(Fa,{children:u?"Update the state information below.":"Add a new state or province to the system."})]}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"State/Province Name *"}),e.jsx(O,{value:v.name,onChange:J=>T("name",J.target.value),onBlur:()=>{v.name.trim()&&t.some(Ce=>Ce.name.toLowerCase()===v.name.toLowerCase()&&Ce.id!==(u==null?void 0:u.id))&&V(Ce=>({...Ce,name:"State with this name already exists"}))},placeholder:"California",className:P.name?"border-red-500 focus:ring-red-500":"",required:!0},"state-name-input"),P.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:P.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Code *"}),e.jsx(O,{value:v.code,onChange:J=>T("code",J.target.value.toUpperCase()),onBlur:()=>{v.code.trim()&&(v.code.length<2?V(J=>({...J,code:"State code must be at least 2 characters"})):v.code.length>5?V(J=>({...J,code:"State code must be no more than 5 characters"})):t.some(Ce=>Ce.code.toLowerCase()===v.code.toLowerCase()&&Ce.id!==(u==null?void 0:u.id))&&V(Ce=>({...Ce,code:"State with this code already exists"})))},placeholder:"CA",maxLength:5,className:P.code?"border-red-500 focus:ring-red-500":"",required:!0},"state-code-input"),P.code&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:P.code})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Country *"}),e.jsxs(ge,{value:v.countryId,onValueChange:J=>{T("countryId",J)},children:[e.jsx(fe,{disabled:be||i.length===0,className:P.countryId?"border-red-500 focus:ring-red-500":"",children:e.jsx(je,{placeholder:"Select a country"})}),e.jsxs(pe,{children:[i.map(J=>e.jsxs(A,{value:J.id,children:[J.name," (",J.code,")"]},J.id)),!be&&i.length===0&&e.jsx(A,{value:"no-country",disabled:!0,children:"No countries available"})]})]}),P.countryId&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:P.countryId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status *"}),e.jsxs(ge,{value:v.status,onValueChange:J=>{T("status",J)},children:[e.jsx(fe,{className:P.status?"border-red-500 focus:ring-red-500":"",children:e.jsx(je,{placeholder:"Select status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),P.status&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:P.status})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(E,{type:"submit",disabled:xe,children:xe?"Saving...":u?"Update":"Create"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Total States"}),e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Active States"}),e.jsx($t,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.filter(J=>J.status==="active").length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Inactive States"}),e.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.filter(J=>J.status==="inactive").length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Countries"}),e.jsx($t,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:new Set(t.map(J=>J.countryId)).size})})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Filters"})}),e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search states...",value:m,onChange:J=>x(J.target.value),className:"pl-10"})]}),e.jsxs(ge,{value:N,onValueChange:f,children:[e.jsx(fe,{className:"w-full sm:w-[180px]",children:e.jsx(je,{placeholder:"Filter by country"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Countries"}),i.map(J=>e.jsx(A,{value:J.id,children:J.name},J.id))]})]}),e.jsxs(ge,{value:g,onValueChange:p,children:[e.jsx(fe,{className:"w-full sm:w-[180px]",children:e.jsx(je,{placeholder:"Filter by status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]})]})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{children:["States (",a.length,")"]})}),e.jsxs(B,{children:[X&&e.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:"Loading states..."}),e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"State/Province"}),e.jsx(oe,{children:"Code"}),e.jsx(oe,{children:"Country"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{children:"Created"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:te.map(J=>{var Ce;return e.jsxs(Ue,{children:[e.jsx(re,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:J.name}),((Ce=J.metadata)==null?void 0:Ce.capital)&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Capital: ",J.metadata.capital]})]})}),e.jsx(re,{children:e.jsx(we,{variant:"outline",children:J.code})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"h-4 w-4 text-muted-foreground"}),z(J.countryId)]})}),e.jsx(re,{children:e.jsx(we,{variant:J.status==="active"?"default":"secondary",className:"cursor-pointer",onClick:()=>ts(J),children:J.status})}),e.jsx(re,{children:e.jsx("div",{className:"text-sm text-muted-foreground",children:lr(J.createdAt)})}),e.jsx(re,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>he(J),children:e.jsx(js,{className:"h-4 w-4"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>Te(J),disabled:xe,children:e.jsx(Zs,{className:"h-4 w-4"})})]})})]},J.id)})})]}),!X&&a.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No states found"}),e.jsx("p",{className:"text-muted-foreground",children:m||g!=="all"||N!=="all"?"Try adjusting your filters":"Get started by adding your first state"})]}),a.length>0&&e.jsx(dt,{currentPage:S,totalPages:ae,totalItems:ce,itemsPerPage:w,onPageChange:ye,onItemsPerPageChange:se,className:"mt-4"})]})]}),e.jsx(b,{})]})};function xP(s,t={}){var n;const r=ls(Ys,`/city/${s}`),a=Bs(r,{enabled:t.enabled,onSuccess:i=>{var o;return(i==null?void 0:i.data)&&((o=t.onSuccess)==null?void 0:o.call(t,i.data))},onError:t.onError});return{data:((n=a.data)==null?void 0:n.data)||null,loading:a.loading,error:a.error,refetch:a.refetch}}function fP(s={},t={}){var n;const r=ls(Ys,"/city/list",{page:s.page||0,size:s.size||10,...s.sort&&{sort:s.sort},...s.search&&{search:s.search}}),a=Bs(r,{enabled:t.enabled,onSuccess:i=>{var o;return(i==null?void 0:i.data)&&((o=t.onSuccess)==null?void 0:o.call(t,i.data))},onError:t.onError});return{data:((n=a.data)==null?void 0:n.data)||null,loading:a.loading,error:a.error,refetch:a.refetch}}function pP(s={}){return zt(async t=>{const r=ls(Ys,"/city");return Or(r,{method:"POST",body:JSON.stringify(t)})},s)}function gP(s={}){return zt(async({id:t,data:r})=>{const a=ls(Ys,`/city/${t}`);return Or(a,{method:"PUT",body:JSON.stringify(r)})},s)}function jP(s={}){return zt(async t=>{const r=ls(Ys,`/city/${t}`);return Or(r,{method:"DELETE"})},s)}const vP=()=>{const s=ze(),[t,r]=h.useState([]),[a,n]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState([]),[u,d]=h.useState(!1),[m,x]=h.useState(null),[g,p]=h.useState(""),[N,f]=h.useState("all"),[S,j]=h.useState("all"),[w,C]=h.useState("all"),[y,b]=h.useState(""),[v,M]=h.useState(1),[P,V]=h.useState(10),{confirm:R,ConfirmDialog:T}=Tn(),[q,_]=h.useState({name:"",countryId:"",status:"active"}),[D,X]=h.useState({}),ne=()=>{const ie={};return q.name.trim()?t.some(us=>us.name.toLowerCase()===q.name.toLowerCase()&&us.id!==(m==null?void 0:m.id))&&(ie.name="City with this name already exists"):ie.name="City name is required",q.countryId||(ie.countryId="Country is required"),(!y||y==="no-state")&&(ie.stateId="State is required"),q.status||(ie.status="Status is required"),X(ie),Object.keys(ie).length===0},me=(ie,Be)=>{_(us=>({...us,[ie]:Be})),D[ie]&&X(us=>({...us,[ie]:void 0}))},Q=h.useMemo(()=>({page:0,size:1e3}),[]),be=h.useMemo(()=>({page:0,size:1e3}),[]),ke=h.useMemo(()=>({page:0,size:1e3}),[]),{data:K,loading:G,error:ue,refetch:de}=fP(Q),{data:xe,loading:ce,error:ae}=Pf(be),{data:W,loading:F,error:te}=pc(ke),ye=pP(),se=gP(),Z=jP(),{data:U}=xP(m?Number(m.id):0,{enabled:!!m&&!!m.id}),he=ye.loading||se.loading||Z.loading;h.useEffect(()=>{if(K!=null&&K.content){const ie=K.content.map(nP);r(ie)}else r([])},[K]),h.useEffect(()=>{if(xe!=null&&xe.content){const ie=xe.content.map(vc);o(ie)}else o([])},[xe]),h.useEffect(()=>{if(W!=null&&W.content){const ie=W.content.map(tl);c(ie)}else c([])},[W]),h.useEffect(()=>{ue&&I.error(ue.message)},[ue]),h.useEffect(()=>{ae&&I.error(ae.message)},[ae]),h.useEffect(()=>{te&&I.error(te.message)},[te]),h.useEffect(()=>{let ie=t;g&&(ie=ie.filter(Be=>Be.name.toLowerCase().includes(g.toLowerCase()))),N!=="all"&&(ie=ie.filter(Be=>Be.status===N)),S!=="all"&&(ie=ie.filter(Be=>Be.countryId===S)),w!=="all"&&(ie=ie.filter(Be=>(Be.stateId??"no-state")===w)),n(ie),M(1)},[t,g,N,S,w]),h.useEffect(()=>{C("all")},[S]),h.useEffect(()=>{if(!q.countryId){b("");return}i.some(Be=>Be.countryId===q.countryId&&Be.id===y)||b("")},[q.countryId,i,y]);const Te=a.length,ts=Math.ceil(Te/P),z=(v-1)*P,J=z+P,Ce=a.slice(z,J),Ve=ie=>M(ie),hs=ie=>{V(ie),M(1)},Rs=()=>{_({name:"",countryId:"",status:"active"}),X({}),b(""),x(null)},Os=async ie=>{if(ie.preventDefault(),!ne()){I.error("Please fix the validation errors");return}const Be={...q,stateId:y||void 0};try{if(m){const us=await Pu(Be,m.id,U||void 0);await se.mutate({id:Number(m.id),data:us}),I.success("City updated successfully!")}else{const us=await Pu(Be);await ye.mutate(us),I.success("City created successfully!")}await de(),d(!1),Rs()}catch(us){const $s=us instanceof Error?us.message:"Failed to save city";($s.toLowerCase().includes("duplicate")||$s.toLowerCase().includes("already exists")||$s.toLowerCase().includes("unique"))&&($s.toLowerCase().includes("name")?X(Gt=>({...Gt,name:"City with this name already exists"})):X(Gt=>({...Gt,name:"Duplicate city detected"}))),I.error($s)}},ut=ie=>{x(ie),_({name:ie.name,countryId:ie.countryId,status:ie.status,metadata:ie.metadata||{}}),b(ie.stateId||""),d(!0)},Ns=ie=>{if(he)return;const Be=ie.name;R(An("City",async()=>{try{await Z.mutate(Number(ie.id)),I.success(`${Be} deleted successfully!`),await de()}catch(us){const $s=us instanceof Error?us.message:"Failed to delete city";I.error($s)}},`Are you sure you want to delete ${Be}? This will permanently remove the city and all associated data. This action cannot be undone.`))},jr=ie=>{if(he)return;const Be=ie.status==="active",us=ie.name;R(fc("City",Be,async()=>{try{const $s=Be?"inactive":"active";s.setQueriesData({queryKey:["cities"]},Ke=>{if(!(Ke!=null&&Ke.content))return Ke;const Oe=Ke.content.map(as=>as.cityId===ie.id?{...as,isActive:$s==="active"}:as);return{...Ke,content:Oe}});let Gt;try{const Ke=await fetch(`${Ys}/city/${ie.id}`);Ke.ok&&(Gt=(await Ke.json()).data)}catch{}const qe={...await lP(ie,Gt),status:Va($s)};await se.mutate({id:Number(ie.id),data:qe}),I.success(`${us} ${$s==="active"?"activated":"deactivated"} successfully!`)}catch($s){s.setQueriesData({queryKey:["cities"]},Qt=>{if(!(Qt!=null&&Qt.content))return Qt;const qe=Qt.content.map(Ke=>Ke.cityId===ie.id?{...Ke,isActive:Be}:Ke);return{...Qt,content:qe}});const Gt=$s instanceof Error?$s.message:"Failed to update city status";I.error(Gt)}}))},Ht=ie=>{const Be=l.find(us=>us.id===ie);return Be?Be.name:"Unknown"},Ua=ie=>{if(!ie)return"N/A";const Be=i.find(us=>us.id===ie);return Be?Be.name:"Unknown"},oa=q.countryId?i.filter(ie=>ie.countryId===q.countryId):[],La=S==="all"?i:i.filter(ie=>ie.countryId===S);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Cities"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage cities and municipalities"})]}),e.jsxs(_t,{open:u,onOpenChange:ie=>{ie||Rs(),d(ie)},children:[e.jsx(uc,{asChild:!0,children:e.jsxs(E,{onClick:()=>{Rs(),d(!0)},children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add City"]})}),e.jsxs(Dt,{className:"max-w-2xl",children:[e.jsxs(It,{children:[e.jsx(Tt,{children:m?"Edit City":"Add New City"}),e.jsx(Fa,{children:m?"Update the city information below.":"Add a new city to the system."})]}),e.jsxs("form",{onSubmit:Os,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"City Name *"}),e.jsx(O,{value:q.name,onChange:ie=>me("name",ie.target.value),onBlur:()=>{q.name.trim()&&t.some(Be=>Be.name.toLowerCase()===q.name.toLowerCase()&&Be.id!==(m==null?void 0:m.id))&&X(Be=>({...Be,name:"City with this name already exists"}))},placeholder:"Los Angeles",className:D.name?"border-red-500 focus:ring-red-500":"",required:!0},"city-name-input"),D.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:D.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Country *"}),e.jsxs(ge,{value:q.countryId,onValueChange:ie=>{me("countryId",ie)},children:[e.jsx(fe,{disabled:F||l.length===0,className:D.countryId?"border-red-500 focus:ring-red-500":"",children:e.jsx(je,{placeholder:"Select a country"})}),e.jsxs(pe,{children:[l.map(ie=>e.jsxs(A,{value:ie.id,children:[ie.name," (",ie.code,")"]},ie.id)),!F&&l.length===0&&e.jsx(A,{value:"no-country",disabled:!0,children:"No countries available"})]})]}),D.countryId&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:D.countryId})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"State / Province *"}),e.jsxs(ge,{value:y,onValueChange:b,children:[e.jsx(fe,{disabled:ce||!q.countryId,className:D.stateId?"border-red-500 focus:ring-red-500":"",children:e.jsx(je,{placeholder:"Select a state"})}),e.jsxs(pe,{children:[oa.map(ie=>e.jsx(A,{value:ie.id,children:ie.name},ie.id)),!ce&&oa.length===0&&e.jsx(A,{value:"no-state",disabled:!0,children:"No states available. Please select a country first."})]})]}),D.stateId&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:D.stateId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status *"}),e.jsxs(ge,{value:q.status,onValueChange:ie=>{me("status",ie)},children:[e.jsx(fe,{className:D.status?"border-red-500 focus:ring-red-500":"",children:e.jsx(je,{placeholder:"Select status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),D.status&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:D.status})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>{d(!1),Rs()},children:"Cancel"}),e.jsx(E,{type:"submit",disabled:he,children:he?"Saving...":m?"Update":"Create"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Total Cities"}),e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Active Cities"}),e.jsx($t,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.filter(ie=>ie.status==="active").length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Inactive Cities"}),e.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.filter(ie=>ie.status==="inactive").length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"States"}),e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:new Set(t.map(ie=>ie.stateId).filter(Boolean)).size})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Countries"}),e.jsx($t,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:new Set(t.map(ie=>ie.countryId)).size})})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Filters"})}),e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search cities...",value:g,onChange:ie=>p(ie.target.value),className:"pl-10"})]}),e.jsxs(ge,{value:S,onValueChange:j,children:[e.jsx(fe,{className:"w-full md:w-[180px]",children:e.jsx(je,{placeholder:"Filter by country"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Countries"}),l.map(ie=>e.jsx(A,{value:ie.id,children:ie.name},ie.id))]})]}),e.jsxs(ge,{value:w,onValueChange:C,children:[e.jsx(fe,{className:"w-full md:w-[180px]",children:e.jsx(je,{placeholder:"Filter by state"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All States"}),e.jsx(A,{value:"no-state",children:"No state"}),La.map(ie=>e.jsx(A,{value:ie.id,children:ie.name},ie.id))]})]}),e.jsxs(ge,{value:N,onValueChange:f,children:[e.jsx(fe,{className:"w-full md:w-[180px]",children:e.jsx(je,{placeholder:"Filter by status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]})]})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{children:["Cities (",a.length,")"]})}),e.jsxs(B,{children:[G&&e.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:"Loading cities..."}),e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Country"}),e.jsx(oe,{children:"State"}),e.jsx(oe,{children:"City"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{children:"Created"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:Ce.map(ie=>{var Be;return e.jsxs(Ue,{children:[e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"h-4 w-4 text-muted-foreground"}),Ht(ie.countryId)]})}),e.jsx(re,{children:Ua(ie.stateId)}),e.jsx(re,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:ie.name}),((Be=ie.metadata)==null?void 0:Be.timezone)&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Timezone: ",ie.metadata.timezone]})]})}),e.jsx(re,{children:e.jsx(we,{variant:ie.status==="active"?"default":"secondary",className:"cursor-pointer",onClick:()=>jr(ie),children:ie.status})}),e.jsx(re,{children:e.jsx("div",{className:"text-sm text-muted-foreground",children:lr(ie.createdAt)})}),e.jsx(re,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>ut(ie),children:e.jsx(js,{className:"h-4 w-4"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>Ns(ie),disabled:he,children:e.jsx(Zs,{className:"h-4 w-4"})})]})})]},ie.id)})})]}),!G&&a.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No cities found"}),e.jsx("p",{className:"text-muted-foreground",children:g||N!=="all"||S!=="all"||w!=="all"?"Try adjusting your filters":"Get started by adding your first city"})]}),a.length>0&&e.jsx(dt,{currentPage:v,totalPages:ts,totalItems:Te,itemsPerPage:P,onPageChange:Ve,onItemsPerPageChange:hs,className:"mt-4"})]})]}),e.jsx(T,{})]})},yP=({open:s,onOpenChange:t,userId:r,userName:a,userEmail:n,onSuccess:i})=>{const[o,l]=h.useState(!1),[c,u]=h.useState(!1),d=n,m=MC({onSuccess:()=>{I.success(`Password has been reset to email address for ${a}`),p(),i==null||i()},onError:N=>{I.error(N.message||`Failed to reset password for ${a}`)}}),x=()=>{m.mutate({userId:r,existingPassword:"",newPassword:d,confirmPassword:d})},g=()=>{navigator.clipboard.writeText(d).then(()=>{u(!0),I.success("Password copied to clipboard"),setTimeout(()=>u(!1),2e3)})},p=()=>{l(!1),u(!1),t(!1)};return e.jsx(_t,{open:s,onOpenChange:p,children:e.jsxs(Dt,{className:"sm:max-w-[500px]",children:[e.jsxs(It,{children:[e.jsxs(Tt,{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"h-5 w-5"}),"Reset Password"]}),e.jsxs(Fa,{children:["Reset password for ",e.jsx("strong",{children:a})," (",n,")"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-muted p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qs,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"User Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{className:"text-sm font-medium",children:"Suggested Default Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{type:o?"text":"password",value:d,readOnly:!0,className:"pr-20 bg-muted/50"}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>l(!o),children:o?e.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsx(E,{type:"button",variant:"outline",onClick:g,className:"w-full",children:c?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"mr-2 h-4 w-4 text-green-600"}),"Copied to Clipboard!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Qs,{className:"mr-2 h-4 w-4"}),"Copy Email to Clipboard"]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Important:"})," The password will be reset to the user's email address: ",e.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded text-xs",children:d}),". The user can then use this email address to log in and change their password."]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx(E,{type:"button",variant:"outline",onClick:p,disabled:m.loading,children:"Cancel"}),e.jsx(E,{onClick:x,disabled:m.loading,className:"bg-primary hover:bg-primary/90",children:m.loading?"Resetting...":"Reset Password"})]})]})]})})},NP=({user:s,onUpdate:t,showEditButton:r=!0,compact:a=!1})=>{var C;const[n,i]=h.useState(!1),[o,l]=h.useState(s),[c,u]=h.useState(!1),d=(y,b)=>!y||!b?"U":`${y.charAt(0)}${b.charAt(0)}`.toUpperCase(),m=y=>y?y.replace("_"," ").replace(/\b\w/g,b=>b.toUpperCase()):"User",x=y=>{switch(y){case"super_admin":return"bg-gradient-to-r from-purple-500 to-pink-500 text-white";case"admin":return"bg-gradient-to-r from-blue-500 to-cyan-500 text-white";case"driver":return"bg-gradient-to-r from-green-500 to-emerald-500 text-white";case"passenger":return"bg-gradient-to-r from-orange-500 to-yellow-500 text-white";default:return"bg-muted text-muted-foreground"}},g=y=>{switch(y){case"active":return"bg-success/10 text-success border-success/20";case"inactive":return"bg-muted/10 text-muted-foreground border-muted/20";case"suspended":return"bg-destructive/10 text-destructive border-destructive/20";case"pending":return"bg-warning/10 text-warning border-warning/20";default:return"bg-muted/10 text-muted-foreground border-muted/20"}},p=y=>{switch(y){case"active":return e.jsx(Ie,{className:"w-3 h-3"});case"suspended":return e.jsx(Ts,{className:"w-3 h-3"});case"pending":return e.jsx(gs,{className:"w-3 h-3"});default:return e.jsx(qt,{className:"w-3 h-3"})}},N=()=>{l(s),i(!0)},f=()=>{l(s),i(!1)},S=async()=>{u(!0);try{await new Promise(y=>setTimeout(y,1e3)),t&&t(o),i(!1),I.success("Profile updated successfully!")}catch{I.error("Failed to update profile")}finally{u(!1)}},j=(y,b)=>{l(v=>({...v,[y]:b}))},w=y=>{var v;const b=(v=y.target.files)==null?void 0:v[0];if(b){const M=new FileReader;M.onloadend=()=>{l(P=>({...P,profilePicture:M.result}))},M.readAsDataURL(b)}};return a?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Kt,{className:"w-10 h-10",children:[e.jsx(Kn,{src:s.profilePicture,alt:s.firstName}),e.jsx(Yt,{className:"bg-primary text-primary-foreground",children:d(s.firstName,s.lastName)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("p",{className:"text-sm font-medium text-foreground truncate",children:[s.firstName," ",s.lastName]}),e.jsx(we,{className:`text-xs ${x(s.role)}`,children:m(s.role)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.email}),e.jsxs(we,{variant:"outline",className:`text-xs ${g(s.status)}`,children:[p(s.status),s.status]})]})]})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs(L,{className:"border-border/50 shadow-elegant",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Kt,{className:"w-20 h-20",children:[e.jsx(Kn,{src:s.profilePicture,alt:s.firstName}),e.jsx(Yt,{className:"bg-primary text-primary-foreground text-xl",children:d(s.firstName,s.lastName)})]}),n&&e.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full p-1 cursor-pointer hover:bg-primary/90 transition-colors",children:[e.jsx(Ip,{className:"w-4 h-4"}),e.jsx("input",{type:"file",accept:"image/*",onChange:w,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("h2",{className:"text-2xl font-bold text-foreground",children:[n?e.jsx(O,{value:o.firstName,onChange:y=>j("firstName",y.target.value),className:"w-32"}):s.firstName," ",n?e.jsx(O,{value:o.lastName,onChange:y=>j("lastName",y.target.value),className:"w-32"}):s.lastName]}),e.jsxs(we,{className:`${x(s.role)}`,children:[e.jsx(Ze,{className:"w-3 h-3 mr-1"}),m(s.role)]}),e.jsxs(we,{variant:"outline",className:g(s.status),children:[p(s.status),s.status]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Qs,{className:"w-4 h-4"}),n?e.jsx(O,{value:o.email,onChange:y=>j("email",y.target.value),className:"w-48",type:"email"}):s.email]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Joined ",new Date(s.createdAt).toLocaleDateString()]})]})]})]}),r&&e.jsx("div",{className:"flex items-center space-x-2",children:n?e.jsxs(e.Fragment,{children:[e.jsxs(E,{onClick:S,disabled:c,size:"sm",children:[c?e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}):e.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Save"]}),e.jsxs(E,{onClick:f,variant:"outline",size:"sm",children:[e.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Cancel"]})]}):e.jsxs(E,{onClick:N,size:"sm",children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]})}),e.jsx(B,{children:e.jsxs(Ra,{defaultValue:"overview",className:"w-full",children:[e.jsxs(na,{className:"grid w-full grid-cols-4",children:[e.jsx(es,{value:"overview",children:"Overview"}),e.jsx(es,{value:"contact",children:"Contact Info"}),e.jsx(es,{value:"security",children:"Security"}),e.jsx(es,{value:"activity",children:"Activity"})]}),e.jsx(ss,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{className:"text-sm font-medium",children:"Phone Number"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ra,{className:"w-4 h-4 text-muted-foreground"}),n?e.jsx(O,{value:o.phoneNumber||"",onChange:y=>j("phoneNumber",y.target.value),placeholder:"Enter phone number"}):e.jsx("span",{className:"text-sm",children:s.phoneNumber||"Not provided"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{className:"text-sm font-medium",children:"Date of Birth"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ws,{className:"w-4 h-4 text-muted-foreground"}),n?e.jsx(kr,{value:o.dateOfBirth?new Date(o.dateOfBirth):void 0,onChange:y=>j("dateOfBirth",y?St(y):""),placeholder:"Select date of birth"}):e.jsx("span",{className:"text-sm",children:s.dateOfBirth?new Date(s.dateOfBirth).toLocaleDateString():"Not provided"})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(k,{className:"text-sm font-medium",children:"Address"}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),n?e.jsx(yt,{value:o.address||"",onChange:y=>j("address",y.target.value),placeholder:"Enter address",className:"min-h-20"}):e.jsx("span",{className:"text-sm",children:s.address||"Not provided"})]})]})]})}),e.jsx(ss,{value:"contact",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{className:"text-lg",children:"Primary Contact"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]}),e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.phoneNumber||"Not provided"})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{className:"text-lg",children:"Location"})}),e.jsx(B,{className:"space-y-3",children:e.jsxs("div",{children:[e.jsx(k,{className:"text-sm font-medium",children:"Address"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.address||"Not provided"})]})})]})]})}),e.jsx(ss,{value:"security",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{className:"text-lg",children:"Account Security"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Two-Factor Authentication"}),e.jsx(we,{variant:"outline",children:"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Password Strength"}),e.jsx(we,{className:"bg-green-500/10 text-green-600 border-green-500/20",children:"Strong"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Last Password Change"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"30 days ago"})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{className:"text-lg",children:"Permissions"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Role"}),e.jsx(we,{className:x(s.role),children:m(s.role)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Permissions Count"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:((C=s.permissions)==null?void 0:C.length)||0})]})]})]})]})}),e.jsxs(ss,{value:"activity",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(L,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(H,{className:"text-sm font-medium",children:"Total Activity"})}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"247"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 30 days"})]})]}),e.jsxs(L,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(H,{className:"text-sm font-medium",children:"Success Rate"})}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold text-success",children:"98.5%"}),e.jsx(Aa,{value:98.5,className:"mt-2 h-1"})]})]}),e.jsxs(L,{children:[e.jsx(Y,{className:"pb-2",children:e.jsx(H,{className:"text-sm font-medium",children:"Last Active"})}),e.jsxs(B,{children:[e.jsx("div",{className:"text-lg font-bold text-foreground",children:"2h ago"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Today at 2:30 PM"})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{className:"text-lg",children:"Recent Activity"})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Updated profile information"}),e.jsx("span",{className:"text-muted-foreground ml-auto",children:"2 hours ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Changed password"}),e.jsx("span",{className:"text-muted-foreground ml-auto",children:"3 days ago"})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{children:"Role updated to Admin"}),e.jsx("span",{className:"text-muted-foreground ml-auto",children:"1 week ago"})]})]})})]})]})]})})]})})};function kf(s={},t={}){const{enabled:r=!0,onSuccess:a,onError:n}=t,i=h.useCallback(async()=>{const o={};o.page=s.page??0,o.size=s.size??10,s.sort&&s.sort.length>0&&(o.sort=s.sort),s.search&&(o.search=s.search),s.status&&(o.status=s.status),s.role&&(o.role=s.role);const l=await Me.get("/api/admin/list",o);return l&&l.data?l.data:l&&typeof l=="object"&&"content"in l?l:{content:[],page:{size:s.size??10,number:s.page??0,totalElements:0,totalPages:0},first:!0,last:!0,empty:!0}},[s.page,s.size,s.sort,s.search,s.status,s.role]);return oc(i,{enabled:r,onSuccess:o=>{a==null||a(o)},onError:o=>{n==null||n(o)}})}function bP(s={}){return Rt(async t=>await Me.post("/api/admin",t),{onSuccess:s.onSuccess,onError:s.onError})}function wP(s={}){return Rt(async({id:t,data:r})=>await Me.put(`/api/admin/${t}`,r),{onSuccess:s.onSuccess,onError:s.onError})}function CP(s={}){return Rt(async t=>{var a,n,i,o;const r=await Me.delete(`/api/admin/${t.userId}`);if(t.email)try{const l=await Me.get(`/drivers?email=${encodeURIComponent(t.email)}`);if(((n=(a=l.data)==null?void 0:a.content)==null?void 0:n.length)>0){const c=l.data.content[0];c.driverId&&await Me.delete(`/drivers/${c.driverId}`)}}catch(l){console.warn("Failed to delete corresponding driver:",l)}if(t.email)try{const l=await Me.get(`/riders?email=${encodeURIComponent(t.email)}`);if(((o=(i=l.data)==null?void 0:i.content)==null?void 0:o.length)>0){const c=l.data.content[0];c.riderId&&await Me.delete(`/riders/${c.riderId}`)}}catch(l){console.warn("Failed to delete corresponding rider:",l)}return r},{onSuccess:s.onSuccess,onError:s.onError})}function SP(s={}){return Rt(async t=>await Me.delete(`/api/admin/active/${t}`),{onSuccess:s.onSuccess,onError:s.onError})}function PP(s={}){return Rt(async t=>await Me.delete(`/api/admin/inactive/${t}`),{onSuccess:s.onSuccess,onError:s.onError})}const kP=()=>{var he,Te,ts;const s=Ye(),[t,r]=h.useState(""),[a,n]=h.useState(""),[i,o]=h.useState("all"),[l,c]=h.useState("all"),[u,d]=h.useState(0),[m,x]=h.useState(10),[g,p]=h.useState(!1),[N,f]=h.useState(null),[S,j]=h.useState(!1),[w,C]=h.useState(null),[y,b]=h.useState(new Map),{confirm:v,ConfirmDialog:M}=Tn();h.useEffect(()=>{const z=setTimeout(()=>{n(t)},300);return()=>{clearTimeout(z)}},[t]);const V=(z=>{const J=z.trim();return/[\d+\-\s().]/.test(J)?J.replace(/[^\d+]/g,""):J})(a);h.useEffect(()=>{d(0)},[a,i,l]);const R=a.trim().length>2,T=kf({page:u,size:m,...R&&{search:V},...i!=="all"&&{status:i},...l!=="all"&&{role:l}},{onError:z=>{I.error(`Failed to load users: ${z.message}`)}}),q=h.useCallback(z=>{const J=z.firstName&&z.lastName?`${z.firstName} ${z.lastName}`:z.userName||z.email||"Unknown User";let Ce=[];if(z.roles&&z.roles.length>0)Ce=z.roles;else if(z.rolesAssigned)try{z.rolesAssigned.startsWith("[")?Ce=JSON.parse(z.rolesAssigned):Ce=z.rolesAssigned.split(",").map(Ns=>Ns.trim())}catch{Ce=[z.rolesAssigned]}else z.permissionsRoles&&z.permissionsRoles.length>0&&(Ce=z.permissionsRoles);const Ve=Ce[0]||"",Rs={ROLE_SUPER_ADMIN:"super_admin",ROLE_ADMIN:"admin",ROLE_DRIVER:"driver",ROLE_PASSENGER:"passenger",ROLE_USER:"user"}[Ve]||Ve.toLowerCase().replace("role_","");let Os="pending";z.activated===!0?Os="active":z.activated===!1?Os="inactive":z.status&&(Os=z.status.toLowerCase());const ut=z.companyUserId||z.id;return!ut||ut===0?null:{id:String(ut),companyUserId:z.companyUserId,name:J,userName:z.userName,firstName:z.firstName,lastName:z.lastName,email:z.email||"",phone:z.mobile,phoneNumber:z.mobile,role:Rs,roleId:String(ut),roles:Ce,status:Os,activated:z.activated,emailVerified:!0,phoneVerified:!!z.mobile,lastLoginAt:z.lastLoginDate,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),type:z.type}},[]),_=h.useMemo(()=>{const z=T.data;return z!=null&&z.content?z.content.map(q).filter(Ce=>Ce!==null).map(Ce=>{const Ve=y.get(Ce.id);return Ve?{...Ce,status:Ve,activated:Ve==="active"}:Ce}):[]},[T.data,q,y]),D=T.data,X=((he=D==null?void 0:D.page)==null?void 0:he.totalElements)??0,ne=((Te=D==null?void 0:D.page)==null?void 0:Te.totalPages)??0,me=_,Q=z=>{d(z-1)},be=z=>{x(z),d(0)},ke=z=>!z||z.length===0?"User":{ROLE_SUPER_ADMIN:"Super Admin",ROLE_ADMIN:"Admin",ROLE_DRIVER:"Driver",ROLE_PASSENGER:"Passenger",ROLE_USER:"User"}[z[0]]||z[0].replace("ROLE_","").replace("_"," ")||"User",K=z=>{if(!z||z.length===0)return e.jsx(Za,{className:"h-4 w-4"});switch(z[0]){case"ROLE_SUPER_ADMIN":case"super_admin":return e.jsx(Ze,{className:"h-4 w-4"});case"ROLE_ADMIN":case"admin":return e.jsx(Bt,{className:"h-4 w-4"});case"ROLE_DRIVER":case"driver":return e.jsx(os,{className:"h-4 w-4"});case"ROLE_PASSENGER":case"passenger":return e.jsx(fs,{className:"h-4 w-4"});case"ROLE_USER":case"user":return e.jsx(Za,{className:"h-4 w-4"});default:return e.jsx(Za,{className:"h-4 w-4"})}},G=z=>{switch(z){case"active":return"default";case"inactive":return"secondary";case"suspended":return"destructive";case"pending":return"outline";default:return"default"}},ue=CP({onSuccess:(z,J)=>{I.success("User deleted successfully! Corresponding driver and rider accounts have also been removed."),T.refetch()},onError:(z,J)=>{I.error(`Failed to delete user: ${z.message}`)}}),de=SP({onSuccess:(z,J)=>{I.success("User activated successfully!")},onError:(z,J)=>{I.error(`Failed to activate user: ${z.message}`),b(Ce=>{const Ve=new Map(Ce);return Ve.delete(String(J)),Ve})}}),xe=PP({onSuccess:(z,J)=>{I.success("User deactivated successfully!")},onError:(z,J)=>{I.error(`Failed to deactivate user: ${z.message}`),b(Ce=>{const Ve=new Map(Ce);return Ve.delete(String(J)),Ve})}}),ce=z=>{const J=z.status==="active";z.name||z.userName||z.email;const Ce=parseInt(z.id,10);if(isNaN(Ce)){I.error("Invalid user ID");return}v(fc("User",J,async()=>{const Ve=J?"inactive":"active";b(hs=>{const Rs=new Map(hs);return Rs.set(z.id,Ve),Rs}),J?await xe.mutate(Ce):await de.mutate(Ce)}))},ae=z=>{f(z),p(!0)},W=()=>{T.refetch()},F=z=>{const J=z.name||z.userName||z.email,Ce=parseInt(z.id,10);if(isNaN(Ce)){I.error("Invalid user ID");return}v(An("User",async()=>{await ue.mutate({userId:Ce,email:z.email})},`Are you sure you want to delete ${J}? This will permanently remove the user and all associated data, including corresponding driver and rider accounts. This action cannot be undone.`))},te=()=>{s("/admin/users/add")},ye=z=>{C(z),j(!0)},se=z=>{if(console.log("Editing user with ID:",z),!z||z==="undefined"||z==="null"){I.error("User ID is missing. Cannot edit user.");return}const J=_.find(Ce=>Ce.id===z);s(`/admin/users/edit/${z}`,{state:{user:J}})},Z=z=>z?new Date(z).toLocaleDateString():"Never",U=z=>z?z.split(" ").map(J=>J[0]).join("").toUpperCase():"U";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Users"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user accounts, roles, and permissions"})]}),e.jsxs(E,{onClick:te,children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:T.loading?"...":X})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(Ie,{className:"h-4 w-4 text-green-600"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:T.loading?"...":_.filter(z=>z.status==="active").length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Pending Users"}),e.jsx(gs,{className:"h-4 w-4 text-orange-500"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:T.loading?"...":_.filter(z=>z.status==="pending").length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Inactive Users"}),e.jsx(Ms,{className:"h-4 w-4 text-gray-600"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:T.loading?"...":_.filter(z=>z.status==="inactive").length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Suspended Users"}),e.jsx(Wt,{className:"h-4 w-4 text-red-600"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:T.loading?"...":_.filter(z=>z.status==="suspended").length})})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Filters"})}),e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search by name, email, or contact number... (min 3 characters)",value:t,onChange:z=>r(z.target.value),className:"pl-10"})]}),e.jsxs(ge,{value:i,onValueChange:o,children:[e.jsx(fe,{className:"w-full sm:w-[180px]",children:e.jsx(je,{placeholder:"Filter by status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"}),e.jsx(A,{value:"suspended",children:"Suspended"}),e.jsx(A,{value:"pending",children:"Pending"})]})]}),e.jsxs(ge,{value:l,onValueChange:c,children:[e.jsx(fe,{className:"w-full sm:w-[180px]",children:e.jsx(je,{placeholder:"Filter by role"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Roles"}),e.jsx(A,{value:"super_admin",children:"Super Admin"}),e.jsx(A,{value:"admin",children:"Admin"}),e.jsx(A,{value:"driver",children:"Driver"}),e.jsx(A,{value:"passenger",children:"Passenger"})]})]})]})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{children:["Users (",T.loading?"...":i!=="all"||l!=="all"?`${X} filtered`:X>0?X:((ts=D==null?void 0:D.content)==null?void 0:ts.length)??0,")"]})}),e.jsxs(B,{children:[e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"User"}),e.jsx(oe,{children:"Contact"}),e.jsx(oe,{children:"Role"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{children:"Last Login"}),e.jsx(oe,{children:"Created"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:T.loading?e.jsx(Ue,{children:e.jsx(re,{colSpan:7,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading users..."})]})})}):me.length===0?e.jsx(Ue,{children:e.jsxs(re,{colSpan:7,className:"text-center py-8",children:[e.jsx(fs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No users found"}),e.jsx("p",{className:"text-muted-foreground",children:t||i!=="all"||l!=="all"?"Try adjusting your filters":"Get started by adding your first user"})]})}):me.map(z=>e.jsxs(Ue,{children:[e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kt,{className:"h-8 w-8",children:e.jsx(Yt,{className:"bg-primary text-primary-foreground text-sm",children:U(z.name)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:z.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",z.id.slice(0,8)]})]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Qs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground truncate max-w-[200px]",children:z.email}),z.emailVerified&&e.jsx(Ie,{className:"h-4 w-4 text-green-500"})]}),z.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:z.phone}),z.phoneVerified&&e.jsx(Ie,{className:"h-4 w-4 text-green-500"})]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[K(z.roles),e.jsx("span",{children:ke(z.roles)})]})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${z.status==="active"?"bg-green-500":z.status==="inactive"?"bg-gray-500":z.status==="suspended"?"bg-red-500":"bg-orange-500"}`}),e.jsx(we,{variant:G(z.status),children:z.status})]})}),e.jsx(re,{children:e.jsx("div",{className:"text-sm text-muted-foreground",children:Z(z.lastLoginAt)})}),e.jsx(re,{children:e.jsx("div",{className:"text-sm text-muted-foreground",children:Z(z.createdAt)})}),e.jsx(re,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsx(E,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(Mr,{className:"h-4 w-4"})})}),e.jsxs(Ss,{align:"end",children:[e.jsxs(Pe,{onClick:()=>ye(z),children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),"View Details"]}),e.jsxs(Pe,{onClick:()=>se(z.id),children:[e.jsx(js,{className:"mr-2 h-4 w-4"}),"Edit User"]}),e.jsxs(Pe,{onClick:()=>ae(z),children:[e.jsx(sr,{className:"mr-2 h-4 w-4"}),"Reset Password"]}),e.jsx(ka,{}),e.jsx(Pe,{onClick:()=>ce(z),disabled:de.loading||xe.loading,children:z.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(Ms,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),"Activate"]})}),e.jsxs(Pe,{onClick:()=>F(z),className:"text-red-600",disabled:ue.loading,children:[e.jsx(Zs,{className:"mr-2 h-4 w-4"}),"Delete User"]})]})]})})]},z.id))})]}),!T.loading&&me.length>0&&ne>0&&e.jsx(dt,{currentPage:u+1,totalPages:ne,totalItems:X,itemsPerPage:m,onPageChange:Q,onItemsPerPageChange:be,className:"mt-4"})]})]}),e.jsx(M,{}),N&&e.jsx(yP,{open:g,onOpenChange:p,userId:N.id,userName:N.name||N.userName||"",userEmail:N.email,onSuccess:W}),e.jsx(_t,{open:S,onOpenChange:j,children:e.jsxs(Dt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(It,{children:e.jsx(Tt,{children:"User Details"})}),w&&e.jsx(NP,{user:w,showEditButton:!1,compact:!1})]})})]})},DP=[{id:"1",name:"Super Admin",description:"Full system access with all permissions",isSystemRole:!0,permissions:[],createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"2",name:"Admin",description:"Administrative access to most features",isSystemRole:!0,permissions:[],createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"3",name:"Driver",description:"Driver role with limited access",isSystemRole:!0,permissions:[],createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"4",name:"Passenger",description:"Passenger role with ride-related access",isSystemRole:!0,permissions:[],createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}],ku={"Super Admin":"ROLE_SUPER_ADMIN",Admin:"ROLE_ADMIN",Driver:"ROLE_DRIVER",Passenger:"ROLE_PASSENGER"},IP=()=>{const s=Ye(),[t,r]=h.useState(!1),[a,n]=h.useState(!1),[i,o]=h.useState({}),[l,c]=h.useState({userName:"",firstName:"",lastName:"",email:"",mobile:"",password:"",confirmPassword:"",roles:[],status:"active",activated:!0}),u=bP({onSuccess:f=>{console.log("User created successfully:",f),I.success("User created successfully!"),s("/admin/users/list")},onError:f=>{console.error("Failed to create user:",f);const S=(f==null?void 0:f.message)||(f==null?void 0:f.toString())||"";S.toLowerCase().includes("email")&&S.toLowerCase().includes("unique")?(o({email:"This email is already in use. Please use a different email."}),I.error("Email address is already registered")):S.toLowerCase().includes("username")&&S.toLowerCase().includes("unique")?(o({userName:"This username is already taken. Please choose a different one."}),I.error("Username is already taken")):S.toLowerCase().includes("phone")&&S.toLowerCase().includes("unique")?(o({mobile:"This phone number is already in use."}),I.error("Phone number is already registered")):I.error(`Failed to create user: ${S}`)}}),d=()=>{const f={};return l.userName.trim()||(f.userName="Username is required"),l.firstName.trim()||(f.firstName="First name is required"),l.lastName.trim()||(f.lastName="Last name is required"),l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(f.email="Invalid email format"):f.email="Email is required",l.mobile.trim()?/^\+?[\d\s\-\(\)]+$/.test(l.mobile)||(f.mobile="Invalid phone number format"):f.mobile="Phone number is required",l.password?l.password.length<8&&(f.password="Password must be at least 8 characters long"):f.password="Password is required",l.confirmPassword?l.password!==l.confirmPassword&&(f.confirmPassword="Passwords do not match"):f.confirmPassword="Please confirm password",(!l.roles||l.roles.length===0)&&(f.roles="At least one role is required"),o(f),Object.keys(f).length===0},m=async f=>{if(f.preventDefault(),!d())return;const S={userName:l.userName,firstName:l.firstName,lastName:l.lastName,email:l.email,mobile:l.mobile,password:l.password,roles:l.roles,status:l.status,activated:l.activated};console.log("Creating user with data:",S),u.mutate(S)},x=(f,S)=>{c(j=>({...j,[f]:S})),i[f]&&o(j=>({...j,[f]:""}))},g=f=>{const S=ku[f];S&&(c(j=>({...j,roles:[S]})),i.roles&&o(j=>({...j,roles:""})))},p=()=>{var j;if(!l.roles||l.roles.length===0)return"";const f=l.roles[0];return((j=Object.entries(ku).find(([w,C])=>C===f))==null?void 0:j[0])||""},N=u.loading;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>s("/admin/users/list"),className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Back to Users"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Add New User"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new user account with specified role and permissions"})]})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"User Information"}),e.jsx($e,{children:"Enter the basic information for the new user account"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"userName",className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),"Username *"]}),e.jsx(O,{id:"userName",value:l.userName,onChange:f=>x("userName",f.target.value),placeholder:"Enter username",className:i.userName?"border-red-500":""}),i.userName&&e.jsx("p",{className:"text-sm text-red-500",children:i.userName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"firstName",className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),"First Name *"]}),e.jsx(O,{id:"firstName",value:l.firstName,onChange:f=>x("firstName",f.target.value),placeholder:"Enter first name",className:i.firstName?"border-red-500":""}),i.firstName&&e.jsx("p",{className:"text-sm text-red-500",children:i.firstName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"lastName",className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),"Last Name *"]}),e.jsx(O,{id:"lastName",value:l.lastName,onChange:f=>x("lastName",f.target.value),placeholder:"Enter last name",className:i.lastName?"border-red-500":""}),i.lastName&&e.jsx("p",{className:"text-sm text-red-500",children:i.lastName})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"h-4 w-4"}),"Email Address *"]}),e.jsx(O,{id:"email",type:"email",value:l.email,onChange:f=>x("email",f.target.value),placeholder:"user@example.com",className:i.email?"border-red-500":""}),i.email&&e.jsx("p",{className:"text-sm text-red-500",children:i.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"mobile",className:"flex items-center gap-2",children:[e.jsx(ra,{className:"h-4 w-4"}),"Phone Number *"]}),e.jsx(O,{id:"mobile",value:l.mobile,onChange:f=>x("mobile",f.target.value),placeholder:"+1234567890",className:i.mobile?"border-red-500":""}),i.mobile&&e.jsx("p",{className:"text-sm text-red-500",children:i.mobile})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"role",className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Role *"]}),e.jsxs(ge,{value:p(),onValueChange:g,children:[e.jsx(fe,{className:i.roles?"border-red-500":"",children:e.jsx(je,{placeholder:"Select user role"})}),e.jsx(pe,{children:DP.map(f=>e.jsx(A,{value:f.name,children:f.name},f.id))})]}),i.roles&&e.jsx("p",{className:"text-sm text-red-500",children:i.roles})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"password",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{id:"password",type:t?"text":"password",value:l.password,onChange:f=>x("password",f.target.value),placeholder:"Enter password",className:i.password?"border-red-500 pr-10":"pr-10"}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>r(!t),children:t?e.jsx(Ms,{className:"h-4 w-4"}):e.jsx(Je,{className:"h-4 w-4"})})]}),i.password&&e.jsx("p",{className:"text-sm text-red-500",children:i.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{id:"confirmPassword",type:a?"text":"password",value:l.confirmPassword,onChange:f=>x("confirmPassword",f.target.value),placeholder:"Confirm password",className:i.confirmPassword?"border-red-500 pr-10":"pr-10"}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>n(!a),children:a?e.jsx(Ms,{className:"h-4 w-4"}):e.jsx(Je,{className:"h-4 w-4"})})]}),i.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500",children:i.confirmPassword})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"status",children:"Account Status"}),e.jsxs(ge,{value:l.status,onValueChange:f=>x("status",f),children:[e.jsx(fe,{children:e.jsx(je,{})}),e.jsxs(pe,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"}),e.jsx(A,{value:"pending",children:"Pending"})]})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx(We,{id:"activated",checked:l.activated,onCheckedChange:f=>x("activated",f===!0)}),e.jsxs(k,{htmlFor:"activated",className:"flex items-center gap-2",children:[l.activated?e.jsx(Ar,{className:"h-4 w-4 text-green-500"}):e.jsx(Wt,{className:"h-4 w-4 text-gray-400"}),"Account Activated"]})]})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s("/admin/users/list"),disabled:N,children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:N,children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),N?"Creating User...":"Create User"]})]})]})]})},TP=[{id:"1",name:"Super Admin",description:"Full system access with all permissions",isSystemRole:!0,permissions:[],createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"2",name:"Admin",description:"Administrative access to most features",isSystemRole:!0,permissions:[],createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"3",name:"Driver",description:"Driver role with limited access",isSystemRole:!0,permissions:[],createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"4",name:"Passenger",description:"Passenger role with ride-related access",isSystemRole:!0,permissions:[],createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}],AP={"Super Admin":"ROLE_SUPER_ADMIN",Admin:"ROLE_ADMIN",Driver:"ROLE_DRIVER",Passenger:"ROLE_PASSENGER"},RP={ROLE_SUPER_ADMIN:"Super Admin",ROLE_ADMIN:"Admin",ROLE_DRIVER:"Driver",ROLE_PASSENGER:"Passenger",ROLE_USER:"Passenger"},FP=()=>{var V;const s=Ye(),t=_i(),{userId:r}=Js(),[a,n]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState({}),[u,d]=h.useState(null),[m,x]=h.useState(!0),[g,p]=h.useState({userName:"",firstName:"",lastName:"",email:"",mobile:"",password:"",confirmPassword:"",roles:[],status:"active",activated:!0}),N=(V=t.state)==null?void 0:V.user,f=R=>{const T=R.companyUserId||parseInt(R.id);return{id:T,companyUserId:T,userName:R.userName||R.email.split("@")[0],firstName:R.firstName,lastName:R.lastName,email:R.email,mobile:R.phone||R.phoneNumber,roles:R.roles,status:R.status,activated:R.activated}};kf({page:0,size:1e3},{enabled:!N&&!!r,onSuccess:R=>{console.log("Fetched users data:",R);const T=R.content.find(q=>String(q.id)===r||String(q.companyUserId)===r);T?(console.log("Found user:",T),d(T),p({userName:T.userName||"",firstName:T.firstName||"",lastName:T.lastName||"",email:T.email||"",mobile:T.mobile||"",password:"",confirmPassword:"",roles:T.roles||[],status:T.status||"active",activated:T.activated!==void 0?T.activated:!0}),x(!1)):(console.error("User not found in list"),I.error("User not found"),s("/admin/users/list"))},onError:R=>{console.error("Failed to fetch users:",R),I.error("Failed to fetch user details"),s("/admin/users/list")}}),h.useEffect(()=>{if(N){console.log("Using passed user data:",N);const R=f(N);d(R),p({userName:R.userName||"",firstName:R.firstName||"",lastName:R.lastName||"",email:R.email||"",mobile:R.mobile||"",password:"",confirmPassword:"",roles:R.roles||[],status:R.status||"active",activated:R.activated!==void 0?R.activated:!0}),x(!1)}},[N]);const S=wP({onSuccess:R=>{console.log("User updated successfully:",R),I.success("User updated successfully!"),s("/admin/users/list")},onError:R=>{console.error("Failed to update user:",R),I.error("Failed to update user")}}),j=()=>{const R={};return g.userName.trim()||(R.userName="Username is required"),g.firstName.trim()||(R.firstName="First name is required"),g.lastName.trim()||(R.lastName="Last name is required"),g.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)||(R.email="Invalid email format"):R.email="Email is required",g.mobile.trim()?/^\+?[\d\s\-\(\)]+$/.test(g.mobile)||(R.mobile="Invalid phone number format"):R.mobile="Phone number is required",(g.password||g.confirmPassword)&&(g.password&&g.password.length<8&&(R.password="Password must be at least 8 characters long"),g.password&&!g.confirmPassword?R.confirmPassword="Please confirm new password":g.password!==g.confirmPassword&&(R.confirmPassword="Passwords do not match")),(!g.roles||g.roles.length===0)&&(R.roles="At least one role is required"),c(R),Object.keys(R).length===0},w=async R=>{if(R.preventDefault(),!j())return;if(!r||!u){I.error("User ID is missing");return}const T={...u,userName:g.userName,firstName:g.firstName,lastName:g.lastName,email:g.email,mobile:g.mobile,roles:g.roles,status:g.status,activated:g.activated};g.password&&(T.password=g.password),console.log("Updating user with data:",T),S.mutate({id:parseInt(r),data:T})},C=(R,T)=>{p(q=>({...q,[R]:T})),l[R]&&c(q=>({...q,[R]:""}))},y=R=>{const T=AP[R];T&&(p(q=>({...q,roles:[T]})),l.roles&&c(q=>({...q,roles:""})))},b=()=>{if(!g.roles||g.roles.length===0)return"";const R=g.roles[0];return RP[R]||""},v=R=>R?new Date(R).toLocaleDateString():"Never",M=R=>{switch(R){case"active":return"default";case"inactive":return"secondary";case"suspended":return"destructive";case"pending":return"outline";default:return"default"}},P=S.loading;return m?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>s("/admin/users/list"),className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Back to Users"]}),e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold",children:"Loading User..."})})]})}):u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>s("/admin/users/list"),className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Back to Users"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Edit User"}),e.jsx("p",{className:"text-muted-foreground",children:"Update user account information and permissions"})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"User Summary"}),e.jsx(we,{variant:M(g.status),children:g.activated?"Active":"Inactive"})]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"User ID:"}),e.jsx("p",{className:"font-mono",children:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Username:"}),e.jsx("p",{children:u.userName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Login:"}),e.jsx("p",{children:v(u.lastLoginDate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Created By:"}),e.jsx("p",{children:u.createdBy||"System"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Modified By:"}),e.jsx("p",{children:u.modifiedBy||"N/A"})]})]})})]}),e.jsxs("form",{onSubmit:w,children:[e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"User Information"}),e.jsx($e,{children:"Update the basic information for the user account"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"userName",className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),"Username *"]}),e.jsx(O,{id:"userName",value:g.userName,onChange:R=>C("userName",R.target.value),placeholder:"Enter username",className:l.userName?"border-red-500":""}),l.userName&&e.jsx("p",{className:"text-sm text-red-500",children:l.userName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"firstName",className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),"First Name *"]}),e.jsx(O,{id:"firstName",value:g.firstName,onChange:R=>C("firstName",R.target.value),placeholder:"Enter first name",className:l.firstName?"border-red-500":""}),l.firstName&&e.jsx("p",{className:"text-sm text-red-500",children:l.firstName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"lastName",className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),"Last Name *"]}),e.jsx(O,{id:"lastName",value:g.lastName,onChange:R=>C("lastName",R.target.value),placeholder:"Enter last name",className:l.lastName?"border-red-500":""}),l.lastName&&e.jsx("p",{className:"text-sm text-red-500",children:l.lastName})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"h-4 w-4"}),"Email Address *"]}),e.jsx(O,{id:"email",type:"email",value:g.email,onChange:R=>C("email",R.target.value),placeholder:"user@example.com",className:l.email?"border-red-500":""}),l.email&&e.jsx("p",{className:"text-sm text-red-500",children:l.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"mobile",className:"flex items-center gap-2",children:[e.jsx(ra,{className:"h-4 w-4"}),"Phone Number *"]}),e.jsx(O,{id:"mobile",value:g.mobile,onChange:R=>C("mobile",R.target.value),placeholder:"+1234567890",className:l.mobile?"border-red-500":""}),l.mobile&&e.jsx("p",{className:"text-sm text-red-500",children:l.mobile})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{htmlFor:"role",className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Role *"]}),e.jsxs(ge,{value:b(),onValueChange:y,children:[e.jsx(fe,{className:l.roles?"border-red-500":"",children:e.jsx(je,{placeholder:"Select user role"})}),e.jsx(pe,{children:TP.map(R=>e.jsx(A,{value:R.name,children:R.name},R.id))})]}),l.roles&&e.jsx("p",{className:"text-sm text-red-500",children:l.roles})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Leave password fields empty to keep the current password unchanged"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{id:"password",type:a?"text":"password",value:g.password,onChange:R=>C("password",R.target.value),placeholder:"Enter new password (optional)",className:l.password?"border-red-500 pr-10":"pr-10"}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>n(!a),children:a?e.jsx(Ms,{className:"h-4 w-4"}):e.jsx(Je,{className:"h-4 w-4"})})]}),l.password&&e.jsx("p",{className:"text-sm text-red-500",children:l.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{id:"confirmPassword",type:i?"text":"password",value:g.confirmPassword,onChange:R=>C("confirmPassword",R.target.value),placeholder:"Confirm new password",className:l.confirmPassword?"border-red-500 pr-10":"pr-10"}),e.jsx(E,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!i),children:i?e.jsx(Ms,{className:"h-4 w-4"}):e.jsx(Je,{className:"h-4 w-4"})})]}),l.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500",children:l.confirmPassword})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"status",children:"Account Status"}),e.jsxs(ge,{value:g.status,onValueChange:R=>C("status",R),children:[e.jsx(fe,{children:e.jsx(je,{})}),e.jsxs(pe,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"}),e.jsx(A,{value:"suspended",children:"Suspended"}),e.jsx(A,{value:"pending",children:"Pending"})]})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx(We,{id:"activated",checked:g.activated,onCheckedChange:R=>C("activated",R===!0)}),e.jsxs(k,{htmlFor:"activated",className:"flex items-center gap-2",children:[g.activated?e.jsx(Ar,{className:"h-4 w-4 text-green-500"}):e.jsx(Wt,{className:"h-4 w-4 text-gray-400"}),"Account Activated"]})]})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s("/admin/users/list"),disabled:P,children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:P,children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),P?"Updating User...":"Update User"]})]})]})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>s("/admin/users/list"),className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Back to Users"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"User Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The user you're trying to edit doesn't exist."})]})]})})};function Df(s={}){const{search:t,pageable:r,enabled:a=!0,onSuccess:n,onError:i}=s,o=h.useMemo(()=>async()=>{const c={};t&&(c.search=t),r?(c.page=r.page??0,c.size=r.size??10,r.sort&&r.sort.length>0&&(c.sort=r.sort)):(c.page=0,c.size=10);const u=await Me.get("/roles/list",c);if(u&&u.data&&Array.isArray(u.data)){const d=u.data;return{content:d,totalElements:d.length,totalPages:1,size:d.length,number:0,first:!0,last:!0,empty:d.length===0}}if(u&&Array.isArray(u)){const d=u;return{content:d,totalElements:d.length,totalPages:1,size:d.length,number:0,first:!0,last:!0,empty:d.length===0}}return u&&u.data&&typeof u.data=="object"&&"content"in u.data?u.data:u&&typeof u=="object"&&"content"in u&&Array.isArray(u.content)?u:{content:[],totalElements:0,totalPages:0,size:0,number:0,first:!0,last:!0,empty:!0}},[t,r==null?void 0:r.page,r==null?void 0:r.size,JSON.stringify((r==null?void 0:r.sort)||[])]);return oc(o,{enabled:a,onSuccess:c=>{n==null||n(c)},onError:c=>{i==null||i(c)}})}function EP(s,t={}){const{enabled:r=!0,onSuccess:a,onError:n}=t,i=h.useMemo(()=>async()=>{const l=await Me.get(`/roles/${s}`);return l.data?l.data:l},[s]);return oc(i,{enabled:r&&!!s,onSuccess:l=>{a==null||a(l)},onError:l=>{n==null||n(l)}})}function MP(s={}){const{onSuccess:t,onError:r}=s;return Rt(async n=>await Me.post("/roles",n),{onSuccess:(n,i)=>{t==null||t(n,i)},onError:(n,i)=>{r==null||r(n,i)}})}function OP(s={}){const{onSuccess:t,onError:r}=s;return Rt(async n=>{const{id:i,...o}=n;return await Me.put(`/roles/${i}`,o)},{onSuccess:(n,i)=>{t==null||t(n,i)},onError:(n,i)=>{r==null||r(n,i)}})}function VP(s={}){const{onSuccess:t,onError:r}=s;return Rt(async n=>await Me.delete(`/roles/${n}`),{onSuccess:(n,i)=>{t==null||t(n,i)},onError:(n,i)=>{r==null||r(n,i)}})}function If(s={}){const{enabled:t=!0,onSuccess:r,onError:a}=s,n=h.useMemo(()=>[{id:"1",name:"Create User",resource:"users",action:"create",description:"Create new users",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"2",name:"Read User",resource:"users",action:"read",description:"View user information",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"3",name:"Update User",resource:"users",action:"update",description:"Update user information",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"4",name:"Delete User",resource:"users",action:"delete",description:"Delete users",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"5",name:"Create Role",resource:"roles",action:"create",description:"Create new roles",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"6",name:"Read Role",resource:"roles",action:"read",description:"View role information",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"7",name:"Update Role",resource:"roles",action:"update",description:"Update role information",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"8",name:"Delete Role",resource:"roles",action:"delete",description:"Delete roles",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"9",name:"Manage Drivers",resource:"drivers",action:"manage",description:"Full access to driver management",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"10",name:"View Drivers",resource:"drivers",action:"read",description:"View driver information",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"11",name:"Manage Riders",resource:"riders",action:"manage",description:"Full access to rider management",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"12",name:"View Riders",resource:"riders",action:"read",description:"View rider information",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"13",name:"Manage Fares",resource:"fares",action:"manage",description:"Manage fare rates and pricing",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"14",name:"View Analytics",resource:"analytics",action:"read",description:"View analytics and reports",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"15",name:"Manage Disputes",resource:"disputes",action:"manage",description:"Handle and resolve disputes",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"16",name:"View Reports",resource:"reports",action:"read",description:"View and generate reports",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"17",name:"Manage Configuration",resource:"configuration",action:"manage",description:"Manage system configuration",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"18",name:"View Dashboard",resource:"dashboard",action:"read",description:"View dashboard and statistics",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],[]);return h.useEffect(()=>{if(!t)return;const i=setTimeout(()=>{r==null||r(n)},0);return()=>clearTimeout(i)},[t,n,r]),{data:n,loading:!1,error:null,refetch:async()=>{}}}const UP=()=>{const[s,t]=h.useState(!1),[r,a]=h.useState(null),[n,i]=h.useState(""),[o,l]=h.useState("all"),[c,u]=h.useState(1),[d,m]=h.useState(10),x=Ye(),g=h.useCallback(K=>{I.error(`Failed to load roles: ${K.message}`)},[]),p=h.useCallback(K=>{I.error(`Failed to load permissions: ${K.message}`)},[]),N=h.useMemo(()=>({page:c-1,size:d}),[c,d]),f=Df({pageable:N,onError:g}),S=If({onError:p}),j=VP({onSuccess:()=>{I.success("Role deleted successfully!"),f.refetch()},onError:K=>{I.error(`Failed to delete role: ${K.message}`)}}),w=K=>{const G=K.roleId??K.id,de={id:G!=null?String(G):"",name:K.roleName||K.name||"",description:K.roleDescription||K.description||"",isSystemRole:K.isSystemRole||!1,permissions:Array.isArray(K.permissions)?K.permissions.map(xe=>typeof xe=="string"?{id:"",name:xe,resource:"",action:"",description:""}:xe):[],createdAt:K.createdAt||new Date().toISOString(),updatedAt:K.updatedAt||new Date().toISOString()};return de.roleId=G!=null?typeof G=="number"?G:parseInt(String(G),10):null,de.status=K.status||"",de.rolePermissions=K.rolePermissions||"",de.restricted=Array.isArray(K.restricted)?K.restricted:[],de.isDeletedValue=K.isDeletedValue||!1,de.remarks=K.remarks||"",de},C=K=>({id:String(K.id),name:K.name,resource:K.resource,action:K.action,description:K.description,createdAt:K.createdAt||new Date().toISOString(),updatedAt:K.updatedAt||new Date().toISOString()}),y=h.useMemo(()=>{var ue;return(((ue=f.data)==null?void 0:ue.content)||[]).map(w)},[f.data]),b=h.useMemo(()=>(S.data||[]).map(C),[S.data]),[v,M]=h.useState([]),{confirm:P,ConfirmDialog:V}=Tn();h.useEffect(()=>{let K=y;if(n.trim()){const G=n.toLowerCase().trim();K=K.filter(ue=>{var ce,ae;const de=(ce=ue.name)==null?void 0:ce.toLowerCase().includes(G),xe=(ae=ue.description)==null?void 0:ae.toLowerCase().includes(G);return de||xe})}o!=="all"&&(K=K.filter(G=>o==="system"?G.isSystemRole:!G.isSystemRole)),M(K)},[y,o,n]),h.useEffect(()=>{u(1)},[o,n]);const R=v.length,T=Math.ceil(R/d),q=(c-1)*d,_=q+d,D=v.slice(q,_),X=K=>{u(K)},ne=K=>{m(K),u(1)},me=K=>{a(K),t(!0)},Q=K=>{const ue=K.roleId??K.id;x(`/admin/users/roles/edit/${ue}`)},be=K=>{if(K.isSystemRole){I.error("Cannot delete system roles");return}const G=K.name,ue=K;let de;ue.roleId!==void 0&&ue.roleId!==null?de=typeof ue.roleId=="number"?ue.roleId:parseInt(String(ue.roleId),10):typeof K.id=="string"?de=parseInt(K.id,10):de=K.id,P(An("Role",async()=>{await j.mutate(de)},`Are you sure you want to delete ${G}? This will remove the role from all users who currently have it assigned. This action cannot be undone.`))};h.useCallback(()=>{const K=b.reduce((G,ue)=>(G[ue.resource]||(G[ue.resource]=[]),G[ue.resource].push(ue),G),{});return Object.entries(K)},[b]);const ke=K=>{switch(K){case"create":return e.jsx(ct,{className:"h-4 w-4"});case"read":return e.jsx(fs,{className:"h-4 w-4"});case"update":return e.jsx(js,{className:"h-4 w-4"});case"delete":return e.jsx(Zs,{className:"h-4 w-4"});case"manage":return e.jsx(Bt,{className:"h-4 w-4"});default:return e.jsx(sr,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Roles & Permissions"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user roles and their associated permissions"})]}),e.jsxs(E,{onClick:()=>x("/admin/users/roles/add"),children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add Role"]})]}),e.jsx(_t,{open:s,onOpenChange:t,children:e.jsxs(Dt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(It,{children:[e.jsxs(Tt,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(Ze,{className:"w-5 h-5 text-primary"})}),r==null?void 0:r.name]}),e.jsx(Fa,{children:"View detailed information about this role and its associated permissions."})]}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(L,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(H,{className:"text-lg",children:"Role Information"})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Role ID:"}),e.jsx("span",{className:"font-mono text-sm",children:r.id})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),(()=>{var ue;const K=((ue=r.status)==null?void 0:ue.toLowerCase())||"";if(!K)return e.jsx(we,{variant:"secondary",children:"Not Set"});const G={active:{variant:"default",className:"bg-green-500 text-white hover:bg-green-600"},inactive:{variant:"secondary",className:"bg-gray-500 text-white hover:bg-gray-600"},pending:{variant:"secondary",className:"bg-yellow-500 text-white hover:bg-yellow-600"}}[K]||{variant:"secondary",className:""};return e.jsx(we,{variant:G.variant,className:G.className,children:K.charAt(0).toUpperCase()+K.slice(1)})})()]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Type:"}),e.jsx(we,{variant:r.isSystemRole?"secondary":"default",children:r.isSystemRole?"Systems Role":"Custom Role"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Permissions Count:"}),e.jsxs(we,{variant:"outline",children:[r.permissions.length," permissions"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"text-sm",children:lr(r.createdAt)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Last Updated:"}),e.jsx("span",{className:"text-sm",children:lr(r.updatedAt)})]})]})]}),e.jsxs(L,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(H,{className:"text-lg",children:"Description"})}),e.jsx(B,{children:e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:r.description})})]})]}),e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(sr,{className:"w-5 h-5"}),"Associated Permissions"]}),e.jsxs($e,{children:["This role has access to ",r.permissions.length," permissions across different resources."]})]}),e.jsxs(B,{children:[e.jsx("div",{className:"space-y-6",children:Object.entries(r.permissions.reduce((K,G)=>(K[G.resource]||(K[G.resource]=[]),K[G.resource].push(G),K),{})).map(([K,G])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ze,{className:"h-5 w-5 text-primary"}),e.jsx("h4",{className:"font-semibold text-lg",children:K.charAt(0).toUpperCase()+K.slice(1)}),e.jsxs(we,{variant:"secondary",className:"ml-2",children:[G.length," permissions"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:G.map(ue=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary/10 rounded",children:ke(ue.action)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:ue.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ue.description})]})]}),e.jsx(we,{variant:"outline",className:"capitalize",children:ue.action})]},ue.id))})]},K))}),r.permissions.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(sr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium mb-2",children:"No Permissions Assigned"}),e.jsx("p",{className:"text-muted-foreground",children:"This role doesn't have any permissions assigned to it."})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(E,{variant:"outline",onClick:()=>t(!1),children:"Close"}),!r.isSystemRole&&e.jsxs(E,{onClick:()=>{t(!1),Q(r)},children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Edit Role"]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Total Roles"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:y.length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Systems Roles"}),e.jsx(Bt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:y.filter(K=>K.isSystemRole).length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Custom Roles"}),e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:y.filter(K=>!K.isSystemRole).length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Total Permissions"}),e.jsx(sr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:b.length})})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Filters"})}),e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search roles by name or description...",value:n,onChange:K=>i(K.target.value),className:"pl-10"})]}),e.jsxs(ge,{value:o,onValueChange:l,children:[e.jsx(fe,{className:"w-full sm:w-[180px]",children:e.jsx(je,{placeholder:"Filter by type"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"system",children:"Systems Roles"}),e.jsx(A,{value:"custom",children:"Custom Roles"})]})]})]})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{children:["Roles (",f.loading?"...":n.trim()||o!=="all"?`${v.length} filtered`:y.length,")"]})}),e.jsxs(B,{children:[e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Role"}),e.jsx(oe,{children:"Description"}),e.jsx(oe,{children:"Permissions"}),e.jsx(oe,{children:"Status"}),e.jsx(oe,{children:"Type"}),e.jsx(oe,{children:"Created"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:f.loading||S.loading?e.jsx(Ue,{children:e.jsx(re,{colSpan:7,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading roles..."})]})})}):D.length===0?e.jsx(Ue,{children:e.jsxs(re,{colSpan:7,className:"text-center py-8",children:[e.jsx(Ze,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No roles found"}),e.jsx("p",{className:"text-muted-foreground",children:n||o!=="all"?"Try adjusting your filters":"Get started by creating your first role"})]})}):D.map(K=>e.jsxs(Ue,{children:[e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(Ze,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:K.name}),K.isSystemRole&&e.jsx(we,{variant:"secondary",className:"text-xs",children:"Systems"})]})]})}),e.jsx(re,{children:e.jsx("div",{className:"text-sm text-muted-foreground max-w-xs",children:K.description})}),e.jsx(re,{children:e.jsx("div",{className:"text-sm",children:e.jsxs(we,{variant:"outline",children:[K.permissions.length," permissions"]})})}),e.jsx(re,{children:(()=>{var de;const G=((de=K.status)==null?void 0:de.toLowerCase())||"";if(!G)return e.jsx(we,{variant:"secondary",children:"Not Set"});const ue={active:{variant:"default",className:"bg-green-500 text-white hover:bg-green-600"},inactive:{variant:"secondary",className:"bg-gray-500 text-white hover:bg-gray-600"},pending:{variant:"secondary",className:"bg-yellow-500 text-white hover:bg-yellow-600"}}[G]||{variant:"secondary",className:""};return e.jsx(we,{variant:ue.variant,className:ue.className,children:G.charAt(0).toUpperCase()+G.slice(1)})})()}),e.jsx(re,{children:e.jsx(we,{variant:K.isSystemRole?"secondary":"default",children:K.isSystemRole?"Systems":"Custom"})}),e.jsx(re,{children:e.jsx("div",{className:"text-sm text-muted-foreground",children:lr(K.createdAt)})}),e.jsx(re,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>me(K),children:e.jsx(Je,{className:"h-4 w-4"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>Q(K),children:e.jsx(js,{className:"h-4 w-4"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>be(K),disabled:j.loading||K.isSystemRole,children:e.jsx(Zs,{className:"h-4 w-4"})})]})})]},K.id))})]}),!f.loading&&!0&&v.length>0&&e.jsx(dt,{currentPage:c,totalPages:T,totalItems:R,itemsPerPage:d,onPageChange:X,onItemsPerPageChange:ne,className:"mt-4"})]})]}),e.jsx(V,{})]})},Du=()=>{var b,v,M;const s=Ye(),{id:t}=Js(),r=!!t,a=t?parseInt(t,10):void 0,[n,i]=h.useState({roleName:"",roleDescription:"",rolePermissions:"",permissions:[],restricted:[],remarks:"",status:""}),[o,l]=h.useState(""),c=Df({pageable:{page:0,size:1e3}}),u=If({}),{data:d,isLoading:m}=EP(a||0,{enabled:r&&!!a}),x=MP({onSuccess:()=>{I.success("Role created successfully!"),s("/admin/users/roles")},onError:P=>{I.error(`Failed to create role: ${P.message}`)}}),g=OP({onSuccess:()=>{I.success("Role updated successfully!"),s("/admin/users/roles")},onError:P=>{I.error(`Failed to update role: ${P.message}`)}}),p=P=>{const V=P.roleId??P.id,T={id:V!=null?String(V):"",name:P.roleName||P.name||"",description:P.roleDescription||P.description||"",isSystemRole:P.isSystemRole||!1,permissions:Array.isArray(P.permissions)?P.permissions.map(q=>typeof q=="string"?{id:"",name:q,resource:"",action:"",description:""}:q):[],createdAt:P.createdAt||new Date().toISOString(),updatedAt:P.updatedAt||new Date().toISOString()};return T.roleId=V!=null?typeof V=="number"?V:parseInt(String(V),10):null,T.status=P.status||"",T.rolePermissions=P.rolePermissions||"",T.restricted=Array.isArray(P.restricted)?P.restricted:[],T.isDeletedValue=P.isDeletedValue||!1,T.remarks=P.remarks||"",T},N=((v=(b=c.data)==null?void 0:b.content)==null?void 0:v.map(p))||[],f=((M=u.data)==null?void 0:M.map(P=>({id:String(P.id),name:P.name,resource:P.resource,action:P.action,description:P.description,createdAt:P.createdAt||new Date().toISOString(),updatedAt:P.updatedAt||new Date().toISOString()})))||[];h.useEffect(()=>{if(d&&r){const P=p(d),V=P.name||"",R=P.description||"",T=P.permissions.map(_=>_.name),q=P;i({roleName:V,roleDescription:R,rolePermissions:q.rolePermissions||"",permissions:T,restricted:Array.isArray(q.restricted)?q.restricted:[],remarks:q.remarks||"",status:q.status||""})}},[d,r]);const S=async P=>{P.preventDefault();const V=n.roleName.trim().toLowerCase();if(N.find(T=>{const q=(T.name||"").trim().toLowerCase();if(r&&d){const _=p(d),X=_.roleId??_.id,ne=T.roleId??T.id;return q===V&&ne!==X}return q===V})){l(`Role name "${n.roleName}" already exists. Please use a unique name.`),I.error(`Role name "${n.roleName}" already exists.`);return}if(l(""),r&&a){const T={roleId:a,roleName:n.roleName,roleDescription:n.roleDescription,rolePermissions:n.rolePermissions||void 0,permissions:n.permissions.length>0?n.permissions:void 0,restricted:n.restricted.length>0?n.restricted:void 0,remarks:n.remarks||void 0,status:n.status||void 0};await g.mutate({id:a,...T})}else{const T={roleName:n.roleName,roleDescription:n.roleDescription,rolePermissions:n.rolePermissions||void 0,permissions:n.permissions.length>0?n.permissions:void 0,restricted:n.restricted.length>0?n.restricted:void 0,remarks:n.remarks||void 0,status:n.status||void 0};await x.mutate(T)}},j=(P,V)=>{i(R=>({...R,permissions:V?[...R.permissions,P.name]:R.permissions.filter(T=>T!==P.name)}))},w=(P,V)=>{i(R=>({...R,restricted:V?[...R.restricted,P.name]:R.restricted.filter(T=>T!==P.name)}))},C=h.useCallback(()=>{const P=f.reduce((V,R)=>(V[R.resource]||(V[R.resource]=[]),V[R.resource].push(R),V),{});return Object.entries(P)},[f]),y=P=>e.jsx(sr,{className:"h-4 w-4"});return m?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading role..."})]})}):e.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:()=>s("/admin/users/roles"),children:e.jsx(Ee,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:r?"Edit Role":"Add New Role"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:r?"Update the role information and permissions below.":"Create a new role with specific permissions."})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",onClick:()=>s("/admin/users/roles"),children:"Cancel"}),e.jsxs(E,{onClick:S,disabled:x.isPending||g.isPending||!!o,children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),x.isPending||g.isPending?"Saving...":r?"Update Role":"Create Role"]})]})]}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsx(H,{children:"Basic Information"}),e.jsx($e,{children:"Enter the role name and description"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Role Name *"}),e.jsx(O,{value:n.roleName,onChange:P=>{const V=P.target.value;if(i(R=>({...R,roleName:V})),o&&l(""),V.trim()){const R=V.trim().toLowerCase();N.find(q=>{const _=(q.name||"").trim().toLowerCase();if(r&&d){const D=p(d),ne=D.roleId??D.id,me=q.roleId??q.id;return _===R&&me!==ne}return _===R})&&l(`Role name "${V.trim()}" already exists.`)}},placeholder:"Driver Manager",required:!0,className:o?"border-red-500 focus-visible:ring-red-500":""}),o&&e.jsxs("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[e.jsx("span",{className:"text-red-500",children:""}),o]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(ge,{value:n.status,onValueChange:P=>i(V=>({...V,status:P})),children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"Select status"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"}),e.jsx(A,{value:"pending",children:"Pending"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Role Description *"}),e.jsx("textarea",{value:n.roleDescription,onChange:P=>i(V=>({...V,roleDescription:P.target.value})),placeholder:"Describe the role and its responsibilities...",className:"mt-1 min-h-[100px] w-full px-3 py-2 border border-border rounded-md bg-background",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Role Permissions (Optional)"}),e.jsx(O,{value:n.rolePermissions,onChange:P=>i(V=>({...V,rolePermissions:P.target.value})),placeholder:"Enter role permissions (comma-separated)",className:"mt-1"})]})]})]}),e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Permissions"]}),e.jsx($e,{children:"Select the permissions this role should have"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-6",children:C().map(([P,V])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium text-lg mb-4",children:[e.jsx(Ze,{className:"h-5 w-5 text-primary"}),P.charAt(0).toUpperCase()+P.slice(1)]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:V.map(R=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{id:`perm-${R.id}`,checked:n.permissions.includes(R.name),onCheckedChange:T=>j(R,T===!0)}),e.jsxs("label",{htmlFor:`perm-${R.id}`,className:"text-sm cursor-pointer",children:[e.jsx("div",{className:"font-medium",children:R.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:R.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y(R.action),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:R.action})]})]},R.id))})]},P))})})]}),e.jsxs(L,{children:[e.jsxs(Y,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Restricted Permissions"]}),e.jsx($e,{children:"Select permissions that should be restricted for this role"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-6",children:C().map(([P,V])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium text-lg mb-4",children:[e.jsx(Ze,{className:"h-5 w-5 text-primary"}),P.charAt(0).toUpperCase()+P.slice(1)]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:V.map(R=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded hover:bg-muted/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{id:`restricted-${R.id}`,checked:n.restricted.includes(R.name),onCheckedChange:T=>w(R,T===!0)}),e.jsxs("label",{htmlFor:`restricted-${R.id}`,className:"text-sm cursor-pointer",children:[e.jsx("div",{className:"font-medium",children:R.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:R.description})]})]})},R.id))})]},P))})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Additional Settings"})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Remarks"}),e.jsx("textarea",{value:n.remarks,onChange:P=>i(V=>({...V,remarks:P.target.value})),placeholder:"Additional remarks or notes...",className:"mt-1 min-h-[80px] w-full px-3 py-2 border border-border rounded-md bg-background"})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(E,{type:"button",variant:"outline",onClick:()=>s("/admin/users/roles"),children:"Cancel"}),e.jsxs(E,{type:"submit",disabled:x.isPending||g.isPending||!!o,children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),x.isPending||g.isPending?"Saving...":r?"Update Role":"Create Role"]})]})]})]})},Iu=[{id:"1",name:"Create Users",resource:"users",action:"create",description:"Create new user accounts",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"2",name:"View Users",resource:"users",action:"read",description:"View user accounts and details",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"3",name:"Edit Users",resource:"users",action:"update",description:"Edit user account information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"4",name:"Delete Users",resource:"users",action:"delete",description:"Delete user accounts",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"5",name:"Manage User Roles",resource:"users",action:"manage_roles",description:"Assign and manage user roles",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"6",name:"Create Countries",resource:"geography",action:"create_country",description:"Create new countries",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"7",name:"View Countries",resource:"geography",action:"read_country",description:"View country information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"8",name:"Edit Countries",resource:"geography",action:"update_country",description:"Edit country information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"9",name:"Delete Countries",resource:"geography",action:"delete_country",description:"Delete countries",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"10",name:"Create States",resource:"geography",action:"create_state",description:"Create new states",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"11",name:"View States",resource:"geography",action:"read_state",description:"View state information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"12",name:"Edit States",resource:"geography",action:"update_state",description:"Edit state information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"13",name:"Delete States",resource:"geography",action:"delete_state",description:"Delete states",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"14",name:"Create Cities",resource:"geography",action:"create_city",description:"Create new cities",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"15",name:"View Cities",resource:"geography",action:"read_city",description:"View city information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"16",name:"Edit Cities",resource:"geography",action:"update_city",description:"Edit city information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"17",name:"Delete Cities",resource:"geography",action:"delete_city",description:"Delete cities",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"18",name:"Create Bookings",resource:"bookings",action:"create",description:"Create new bookings",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"19",name:"View Bookings",resource:"bookings",action:"read",description:"View booking information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"20",name:"Edit Bookings",resource:"bookings",action:"update",description:"Edit booking information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"21",name:"Delete Bookings",resource:"bookings",action:"delete",description:"Delete bookings",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"22",name:"Assign Drivers",resource:"bookings",action:"assign_driver",description:"Assign drivers to bookings",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"23",name:"Cancel Bookings",resource:"bookings",action:"cancel",description:"Cancel bookings",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"24",name:"View Fares",resource:"financial",action:"read_fares",description:"View fare information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"25",name:"Edit Fares",resource:"financial",action:"update_fares",description:"Edit fare information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"26",name:"View Transactions",resource:"financial",action:"read_transactions",description:"View transaction information",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"27",name:"Process Refunds",resource:"financial",action:"process_refunds",description:"Process refunds",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"28",name:"View Analytics",resource:"analytics",action:"read_analytics",description:"View analytics data",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"29",name:"View Reports",resource:"analytics",action:"read_reports",description:"View reports",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"30",name:"Export Data",resource:"analytics",action:"export_data",description:"Export data",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"31",name:"System Settings",resource:"system",action:"system_settings",description:"Access system settings",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"32",name:"View Logs",resource:"system",action:"view_logs",description:"View system logs",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"33",name:"Manage Permissions",resource:"system",action:"manage_permissions",description:"Manage user permissions",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"}],LP=()=>{const[s,t]=h.useState(Iu),[r,a]=h.useState(Iu),[n,i]=h.useState(!1),[o,l]=h.useState(""),[c,u]=h.useState("all"),[d,m]=h.useState(!1),[x,g]=h.useState(!1),[p,N]=h.useState(null),[f,S]=h.useState(1),[j,w]=h.useState(10),{confirm:C,ConfirmDialog:y}=Tn(),[b,v]=h.useState({name:"",resource:"",action:"",description:""});h.useEffect(()=>{let G=s;o&&(G=G.filter(ue=>ue.name.toLowerCase().includes(o.toLowerCase())||ue.description.toLowerCase().includes(o.toLowerCase())||ue.resource.toLowerCase().includes(o.toLowerCase())||ue.action.toLowerCase().includes(o.toLowerCase()))),c!=="all"&&(G=G.filter(ue=>ue.resource===c)),a(G),S(1)},[s,o,c]);const M=r.length,P=Math.ceil(M/j),V=(f-1)*j,R=V+j,T=r.slice(V,R),q=G=>S(G),_=G=>{w(G),S(1)},D=G=>{switch(G){case"users":return e.jsx(fs,{className:"h-4 w-4"});case"geography":return e.jsx(Pc,{className:"h-4 w-4"});case"bookings":return e.jsx(os,{className:"h-4 w-4"});case"financial":return e.jsx(ps,{className:"h-4 w-4"});case"analytics":return e.jsx(ea,{className:"h-4 w-4"});case"system":return e.jsx(Bt,{className:"h-4 w-4"});default:return e.jsx(Bt,{className:"h-4 w-4"})}},X=G=>{switch(G){case"users":return"Users";case"geography":return"Config Management";case"bookings":return"Bookings";case"financial":return"Financial";case"analytics":return"Analytics";case"system":return"System";default:return G}},ne=G=>{switch(G){case"create":return"default";case"read":return"secondary";case"update":return"outline";case"delete":return"destructive";default:return"default"}},me=()=>{N(null),v({name:"",resource:"",action:"",description:""}),m(!0)},Q=G=>{N(G),v({name:G.name,resource:G.resource,action:G.action,description:G.description}),g(!0)},be=async()=>{if(!b.name||!b.resource||!b.action||!b.description){I.error("Please fill in all fields");return}i(!0);try{if(await new Promise(G=>setTimeout(G,500)),p)t(G=>G.map(ue=>ue.id===p.id?{...ue,name:b.name,resource:b.resource,action:b.action,description:b.description,updatedAt:new Date().toISOString()}:ue)),I.success("Permission updated successfully!"),g(!1);else{const G={id:Date.now().toString(),name:b.name,resource:b.resource,action:b.action,description:b.description,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t(ue=>[...ue,G]),I.success("Permission created successfully!"),m(!1)}}catch{I.error("Failed to save permission")}finally{i(!1)}},ke=G=>{C(An("Permission",async()=>{i(!0);try{await new Promise(ue=>setTimeout(ue,500)),t(ue=>ue.filter(de=>de.id!==G.id)),I.success("Permission deleted successfully!")}catch{I.error("Failed to delete permission")}finally{i(!1)}},`Are you sure you want to delete the permission "${G.name}"? This will remove it from all roles that currently have this permission.`))},K=Array.from(new Set(s.map(G=>G.resource)));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Permissions"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage system permissions and access control"})]}),e.jsxs(E,{onClick:me,children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Add Permission"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Total Permissions"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"User Permissions"}),e.jsx(fs,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.filter(G=>G.resource==="users").length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Config Management Permissions"}),e.jsx(Pc,{className:"h-4 w-4 text-green-600"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.filter(G=>G.resource==="geography").length})})]}),e.jsxs(L,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"System Permissions"}),e.jsx(Bt,{className:"h-4 w-4 text-orange-600"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:s.filter(G=>G.resource==="system").length})})]})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsx(H,{children:"Filters"})}),e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(O,{placeholder:"Search permissions by name, description, or action...",value:o,onChange:G=>l(G.target.value),className:"pl-10"})]}),e.jsxs(ge,{value:c,onValueChange:u,children:[e.jsx(fe,{className:"w-full sm:w-[180px]",children:e.jsx(je,{placeholder:"Filter by resource"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"all",children:"All Resources"}),K.map(G=>e.jsx(A,{value:G,children:X(G)},G))]})]})]})})]}),e.jsxs(L,{children:[e.jsx(Y,{children:e.jsxs(H,{children:["Permissions (",r.length,")"]})}),e.jsxs(B,{children:[e.jsxs(et,{children:[e.jsx(st,{children:e.jsxs(Ue,{children:[e.jsx(oe,{children:"Permission"}),e.jsx(oe,{children:"Resource"}),e.jsx(oe,{children:"Action"}),e.jsx(oe,{children:"Description"}),e.jsx(oe,{className:"text-right",children:"Actions"})]})}),e.jsx(tt,{children:T.map(G=>e.jsxs(Ue,{children:[e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-primary/10",children:e.jsx(Ze,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:G.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",G.id.slice(0,8)]})]})]})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[D(G.resource),e.jsx("span",{children:X(G.resource)})]})}),e.jsx(re,{children:e.jsx(we,{variant:ne(G.action),children:G.action})}),e.jsx(re,{children:e.jsx("div",{className:"text-sm text-muted-foreground max-w-[300px] truncate",children:G.description})}),e.jsx(re,{className:"text-right",children:e.jsxs(ks,{children:[e.jsx(Ds,{asChild:!0,children:e.jsx(E,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})}),e.jsxs(Ss,{align:"end",children:[e.jsxs(Pe,{onSelect:()=>Q(G),children:[e.jsx(js,{className:"mr-2 h-4 w-4"}),"Edit Permission"]}),e.jsx(ka,{}),e.jsxs(Pe,{onSelect:()=>ke(G),className:"text-red-600",children:[e.jsx(Zs,{className:"mr-2 h-4 w-4"}),"Delete Permission"]})]})]})})]},G.id))})]}),r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ze,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No permissions found"}),e.jsx("p",{className:"text-muted-foreground",children:o||c!=="all"?"Try adjusting your filters":"Get started by adding your first permission"})]}):e.jsx("div",{className:"mt-4",children:e.jsx(dt,{currentPage:f,totalPages:P,totalItems:M,itemsPerPage:j,onPageChange:q,onItemsPerPageChange:_,className:"mt-4"})})]})]}),(d||x)&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>{m(!1),g(!1)}}),e.jsxs("div",{className:"relative bg-background border rounded-lg shadow-lg max-w-md w-full mx-4 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:p?"Edit Permission":"Create Permission"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Permission Name"}),e.jsx(O,{value:b.name,onChange:G=>v(ue=>({...ue,name:G.target.value})),placeholder:"e.g., Create Users",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Resource"}),e.jsxs(ge,{value:b.resource,onValueChange:G=>v(ue=>({...ue,resource:G})),children:[e.jsx(fe,{className:"mt-1",children:e.jsx(je,{placeholder:"Select resource"})}),e.jsxs(pe,{children:[e.jsx(A,{value:"users",children:"Users"}),e.jsx(A,{value:"geography",children:"Config Management"}),e.jsx(A,{value:"bookings",children:"Bookings"}),e.jsx(A,{value:"financial",children:"Financial"}),e.jsx(A,{value:"analytics",children:"Analytics"}),e.jsx(A,{value:"system",children:"System"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Action"}),e.jsx(O,{value:b.action,onChange:G=>v(ue=>({...ue,action:G.target.value})),placeholder:"e.g., create, read, update, delete",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx(O,{value:b.description,onChange:G=>v(ue=>({...ue,description:G.target.value})),placeholder:"Brief description of what this permission allows",className:"mt-1"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx(E,{variant:"outline",onClick:()=>{m(!1),g(!1)},disabled:n,children:"Cancel"}),e.jsx(E,{onClick:be,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),p?"Updating...":"Creating..."]}):p?"Update Permission":"Create Permission"})]})]})]}),e.jsx(y,{})]})},BP={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},$P=()=>{const s=[{name:"Starter POS",price:"499 / month",gstNote:"+ GST",description:"Single-store retailers & kirana shops",icon:Tp,terminals:"1 Terminal Included",features:["POS Billing & Invoicing","Barcode Scanning","Offline Billing Mode","Basic Inventory Management","Daily Sales Reports"],addons:["Extra Terminal: Contact Sales","Delivery Integration: Contact Sales"],cta:"Get Started"},{name:"Growth Retail",price:"699 / month",gstNote:"+ GST",description:"Supermarkets & growing retail chains",icon:Ap,highlight:!0,terminals:"Up to 5 Terminals Included",features:["Everything in Starter","Multi-Store Management","Online Ordering Integration","Customer Loyalty & Offers","Advanced Reports & Analytics"],addons:["Extra Terminal: Contact Sales","ERP Integration: Contact Sales"],cta:"Request Demo"},{name:"Enterprise POS",price:"Custom Pricing",gstNote:"GST as applicable",description:"Large enterprises & franchises",icon:kc,terminals:"Unlimited Terminals",features:["Everything in Growth","Unlimited Stores & Terminals","On-Premise / Private Cloud","ERP & Accounting Integration","Custom Workflows & APIs","Dedicated Account Manager"],addons:["Extra Terminals: Contact Sales","Custom Add-ons: Contact Sales"],cta:"Talk to Sales"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/30",children:[e.jsx("nav",{className:"sticky top-0 z-50 border-b bg-background/80 backdrop-blur",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-1 flex h-16 items-center justify-between",children:[e.jsx("img",{src:"/assets/logo/rnb-logo.png",alt:"RetailNextBox",className:"h-60 w-80"}),e.jsx("div",{className:"flex gap-3",children:e.jsx(Ge,{to:"/requestdemo",children:e.jsx(E,{className:"bg-gradient-primary",children:"Request Demo"})})})]})}),e.jsxs("section",{className:"py-20 text-center",children:[e.jsx(we,{className:"bg-primary/10 text-primary",children:"Pricing"}),e.jsx("h1",{className:"text-4xl font-bold mt-4",children:"Enterprise-Ready POS Pricing"}),e.jsx("p",{className:"mt-3 text-muted-foreground max-w-2xl mx-auto",children:"Simple, transparent pricing for Indian retailers. Scales from kirana shops to enterprise chains. All prices exclusive of GST."})]}),e.jsx("section",{className:"pb-24",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 grid lg:grid-cols-3 gap-8",children:s.map((t,r)=>e.jsx(za.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:BP,transition:{duration:.5,delay:r*.1},children:e.jsxs(L,{className:`relative h-full ${t.highlight?"shadow-xl scale-[1.02] border-primary":""}`,children:[t.highlight&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:e.jsx(we,{className:"bg-primary text-primary-foreground",children:"Most Popular"})}),e.jsxs(B,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center text-primary",children:e.jsx(t.icon,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-xl font-semibold",children:t.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold",children:t.price}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.gstNote}),t.terminals&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.terminals})]}),e.jsx("p",{className:"text-muted-foreground",children:t.description}),e.jsx("ul",{className:"space-y-3 pt-2",children:t.features.map((a,n)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary"})," ",a]},n))}),t.addons&&e.jsxs("div",{className:"pt-4",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"Add-ons"}),e.jsx("ul",{className:"space-y-2",children:t.addons.map((a,n)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-primary",children:[e.jsx(Gi,{className:"w-4 h-4"})," ",a]},n))})]}),e.jsx("div",{className:"pt-4",children:e.jsx(Ge,{to:"/requestdemo",children:e.jsx(E,{className:`w-full ${t.highlight?"bg-gradient-primary":""}`,variant:t.highlight?"default":"outline",children:t.cta})})})]})]})},r))})}),e.jsx("section",{className:"py-16 bg-muted/40",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-6 text-center space-y-6",children:[e.jsx(Rp,{className:"w-10 h-10 mx-auto text-primary"}),e.jsx("h3",{className:"text-2xl font-semibold",children:"GST-Ready & Compliant"}),e.jsx("p",{className:"text-muted-foreground",children:"Retailnextbox pricing follows Indian GST regulations. All invoices, daily sales reports, and taxation are fully GST-compliant."})]})}),e.jsxs("section",{className:"py-20 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Deployment Options"}),e.jsx("p",{className:"mt-3 text-muted-foreground",children:"Flexible options to suit your business size and IT setup."}),e.jsxs("div",{className:"max-w-5xl mx-auto mt-10 grid md:grid-cols-2 gap-8",children:[e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Fp,{className:"w-6 h-6 text-primary"}),e.jsx("h3",{className:"font-semibold text-lg",children:"Cloud"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Managed cloud deployment with 99.9% uptime. Access your POS & reports anywhere."}),e.jsxs("ul",{className:"mt-3 space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary"})," Automatic Backups"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary"})," No IT Setup Required"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary"})," Instant Updates"]})]})]}),e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(kc,{className:"w-6 h-6 text-primary"}),e.jsx("h3",{className:"font-semibold text-lg",children:"On-Premise / Private Cloud"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Full control over your infrastructure with private cloud or on-premise installation."}),e.jsxs("ul",{className:"mt-3 space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary"})," Custom Integrations"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary"})," Dedicated Support & SLA"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-primary"})," On-Prem Security"]})]})]})]})]}),e.jsxs("section",{className:"py-20 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Custom Plans & Add-ons"}),e.jsx("p",{className:"mt-3 text-muted-foreground",children:"Large retail chains, franchises, and enterprises  lets create a plan that fits your business perfectly."}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsx(Ge,{to:"/requestdemo",children:e.jsx(E,{size:"lg",className:"bg-gradient-primary",children:"Contact Sales"})}),e.jsx(Ge,{to:"/",children:e.jsx(E,{size:"lg",variant:"outline",children:"Back to Home"})})]})]}),e.jsx("footer",{className:"border-t py-8 text-center text-sm text-muted-foreground",children:" 2025 RetailNextBox. Prices exclusive of applicable GST."})]})},qP={hidden:{opacity:0,y:30},visible:{opacity:1,y:0}},_P=()=>{const[s,t]=h.useState({name:"",email:"",company:"",phone:"",message:""}),[r,a]=h.useState(!1),[n,i]=h.useState(""),o=c=>{t({...s,[c.target.name]:c.target.value})},l=async c=>{c.preventDefault(),i("");try{if(!(await fetch("/api/request-demo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw new Error("Failed to send request");a(!0),t({name:"",email:"",company:"",phone:"",message:""})}catch(u){i(u.message||"Something went wrong")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background to-muted/30",children:[e.jsx("nav",{className:"sticky top-0 z-50 border-b bg-background/80 backdrop-blur",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-1 flex h-16 items-center justify-between",children:[e.jsx("img",{src:"/assets/logo/rnb-logo.png",alt:"RetailNextBox",className:"h-60 w-80"}),e.jsx("div",{className:"flex gap-3",children:e.jsx(Ge,{to:"/pricing",children:e.jsx(E,{className:"bg-gradient-primary",children:"View Pricing"})})})]})}),e.jsxs("section",{className:"max-w-4xl mx-auto px-6 py-20",children:[e.jsxs(za.div,{variants:qP,initial:"hidden",animate:"visible",transition:{duration:.6},className:"text-center mb-12",children:[e.jsxs(we,{className:"bg-primary/10 text-primary inline-flex items-center gap-2",children:[e.jsx(Tr,{className:"w-4 h-4"}),"Personalized Demo"]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-blue-600 mt-4",children:"Get Your Personalized Demo"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Fill out the form below and our team will contact you with a tailored demo for your retail business."})]}),e.jsx(L,{className:"shadow-xl",children:e.jsxs(B,{className:"p-8 space-y-6",children:[r?e.jsx("div",{className:"text-green-600 font-semibold text-center",children:" Your demo request has been sent! We will contact you shortly."}):e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(O,{name:"name",placeholder:"Full Name",value:s.name,onChange:o,required:!0}),e.jsx(O,{name:"email",type:"email",placeholder:"Email",value:s.email,onChange:o,required:!0}),e.jsx(O,{name:"company",placeholder:"Company Name",value:s.company,onChange:o,required:!0}),e.jsx(O,{name:"phone",type:"tel",placeholder:"Phone Number",value:s.phone,onChange:o,required:!0})]}),e.jsx(yt,{name:"message",placeholder:"Message (optional)",value:s.message,onChange:o,rows:4}),n&&e.jsx("p",{className:"text-red-600",children:n}),e.jsx(E,{type:"submit",className:"bg-blue-600 text-white w-full",children:"Request Demo"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(Ge,{to:"/",children:e.jsxs(E,{variant:"outline",className:"inline-flex items-center gap-2",children:[e.jsx(vo,{className:"w-4 h-4"}),"Back to Home"]})})})]})})]}),e.jsx("footer",{className:"border-t py-8 text-center text-sm text-muted-foreground",children:" 2025 RetailNextBox. Built for the future of retail."})]})},WP=new lg({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:5*60*1e3},mutations:{retry:1}}}),KP=()=>e.jsx(og,{client:WP,children:e.jsx(Pg,{defaultTheme:"dark",storageKey:"aboosto-theme",children:e.jsx(Ig,{children:e.jsx(Rg,{children:e.jsx(lp,{children:e.jsxs("div",{className:"min-h-screen bg-background text-foreground transition-colors",children:[e.jsxs(op,{children:[e.jsx(ve,{path:"/",element:e.jsx(vb,{})}),e.jsx(ve,{path:"/login",element:e.jsx(Nb,{})}),e.jsx(ve,{path:"/pricing",element:e.jsx($P,{})}),e.jsx(ve,{path:"/requestdemo",element:e.jsx(_P,{})}),e.jsx(ve,{path:"/register/driver",element:e.jsx(DC,{})}),e.jsx(ve,{path:"/register/passenger",element:e.jsx(IC,{})}),e.jsx(ve,{path:"/register/admin",element:e.jsx(TC,{})}),e.jsx(ve,{path:"/forgot-password",element:e.jsx(OC,{})}),e.jsx(ve,{path:"/reset-password",element:e.jsx(VC,{})}),e.jsxs(ve,{path:"/admin/config",element:e.jsx(Ft,{children:e.jsx(Kc,{})}),children:[e.jsx(ve,{index:!0,element:e.jsx(qs,{to:"/admin/config/countries",replace:!0})}),e.jsx(ve,{path:"countries",element:e.jsx(oP,{})}),e.jsx(ve,{path:"states",element:e.jsx(hP,{})}),e.jsx(ve,{path:"cities",element:e.jsx(vP,{})})]}),e.jsxs(ve,{path:"/admin",element:e.jsx(Ft,{requiredRole:"ROLE_SUPER_ADMIN",children:e.jsx(Kc,{})}),children:[e.jsx(ve,{index:!0,element:e.jsx(qs,{to:"/admin/dashboard",replace:!0})}),e.jsx(ve,{path:"dashboard",element:e.jsx(KC,{})}),e.jsxs(ve,{path:"drivers",children:[e.jsx(ve,{index:!0,element:e.jsx(dS,{})}),e.jsx(ve,{path:"add",element:e.jsx(hS,{})}),e.jsx(ve,{path:"create",element:e.jsx(NS,{})}),e.jsx(ve,{path:"edit/:driverId",element:e.jsx(fS,{})}),e.jsx(ve,{path:":id",element:e.jsx(CS,{})})]}),e.jsxs(ve,{path:"riders",children:[e.jsx(ve,{index:!0,element:e.jsx(RS,{})}),e.jsx(ve,{path:"add",element:e.jsx(ES,{})}),e.jsx(ve,{path:"edit/:riderId",element:e.jsx(OS,{})})]}),e.jsxs(ve,{path:"base-pricing",children:[e.jsx(ve,{index:!0,element:e.jsx(_S,{})}),e.jsx(ve,{path:"add",element:e.jsx(vu,{})}),e.jsx(ve,{path:"edit/:pricingId",element:e.jsx(vu,{})}),e.jsx(ve,{path:"view/:pricingId",element:e.jsx(KS,{})}),e.jsx(ve,{path:"analytics",element:e.jsx(YS,{})})]}),e.jsxs(ve,{path:"vehicle-categories",children:[e.jsx(ve,{index:!0,element:e.jsx(P2,{})}),e.jsx(ve,{path:"add",element:e.jsx(bu,{})}),e.jsx(ve,{path:"edit/:categoryId",element:e.jsx(bu,{})}),e.jsx(ve,{path:"view/:categoryId",element:e.jsx(D2,{})})]}),e.jsxs(ve,{path:"surge-pricing",children:[e.jsx(ve,{index:!0,element:e.jsx(ZS,{})}),e.jsx(ve,{path:"add",element:e.jsx(JS,{})}),e.jsx(ve,{path:"view/:id",element:e.jsx(e2,{})}),e.jsx(ve,{path:"edit/:id",element:e.jsx(s2,{})})]}),e.jsxs(ve,{path:"promotions",children:[e.jsx(ve,{index:!0,element:e.jsx(c2,{})}),e.jsx(ve,{path:"add",element:e.jsx(yu,{})}),e.jsx(ve,{path:"view/:id",element:e.jsx(d2,{})}),e.jsx(ve,{path:"edit/:id",element:e.jsx(yu,{})})]}),e.jsxs(ve,{path:"referral-campaigns",children:[e.jsx(ve,{index:!0,element:e.jsx(g2,{})}),e.jsx(ve,{path:"add",element:e.jsx(Nu,{})}),e.jsx(ve,{path:"view/:id",element:e.jsx(j2,{})}),e.jsx(ve,{path:"edit/:id",element:e.jsx(Nu,{})})]}),e.jsxs(ve,{path:"disputes",children:[e.jsx(ve,{index:!0,element:e.jsx(V2,{})}),e.jsx(ve,{path:"add",element:e.jsx(U2,{})})]}),e.jsx(ve,{path:"analytics",element:e.jsx(_2,{})}),e.jsx(ve,{path:"reports",element:e.jsx(J2,{})}),e.jsxs(ve,{path:"users",children:[e.jsx(ve,{index:!0,element:e.jsx(qs,{to:"/admin/users/list",replace:!0})}),e.jsx(ve,{path:"list",element:e.jsx(Ft,{requiredPermission:{resource:"user",action:"read"},children:e.jsx(kP,{})})}),e.jsx(ve,{path:"add",element:e.jsx(Ft,{requiredPermission:{resource:"user",action:"create"},children:e.jsx(IP,{})})}),e.jsx(ve,{path:"edit/:userId",element:e.jsx(Ft,{requiredPermission:{resource:"user",action:"update"},children:e.jsx(FP,{})})}),e.jsx(ve,{path:"roles",element:e.jsx(Ft,{requiredPermission:{resource:"system",action:"manage_permissions"},children:e.jsx(UP,{})})}),e.jsx(ve,{path:"roles/add",element:e.jsx(Ft,{requiredPermission:{resource:"system",action:"manage_permissions"},children:e.jsx(Du,{})})}),e.jsx(ve,{path:"roles/edit/:id",element:e.jsx(Ft,{requiredPermission:{resource:"system",action:"manage_permissions"},children:e.jsx(Du,{})})}),e.jsx(ve,{path:"permissions",element:e.jsx(Ft,{requiredPermission:{resource:"system",action:"manage_permissions"},children:e.jsx(LP,{})})})]}),e.jsxs(ve,{path:"security",children:[e.jsx(ve,{index:!0,element:e.jsx(qs,{to:"/admin/security/change-password",replace:!0})}),e.jsx(ve,{path:"change-password",element:e.jsx(UC,{})})]})]}),e.jsxs(ve,{path:"/driver",element:e.jsx(Ft,{requiredRole:"driver",fallbackPath:"/login",children:e.jsx("div",{children:"Driver Dashboard - Coming Soon"})}),children:[e.jsx(ve,{index:!0,element:e.jsx(qs,{to:"/driver/dashboard",replace:!0})}),e.jsx(ve,{path:"dashboard",element:e.jsx("div",{children:"Driver Dashboard - Coming Soon"})})]}),e.jsxs(ve,{path:"/passenger",element:e.jsx(Ft,{requiredRole:"passenger",fallbackPath:"/login",children:e.jsx("div",{children:"Passenger Dashboard - Coming Soon"})}),children:[e.jsx(ve,{index:!0,element:e.jsx(qs,{to:"/passenger/dashboard",replace:!0})}),e.jsx(ve,{path:"dashboard",element:e.jsx("div",{children:"Passenger Dashboard - Coming Soon"})})]}),e.jsx(ve,{path:"/register/rider",element:e.jsx(qs,{to:"/register/passenger",replace:!0})}),e.jsx(ve,{path:"/dashboard",element:e.jsx(qs,{to:"/admin/dashboard",replace:!0})}),e.jsx(ve,{path:"/drivers",element:e.jsx(qs,{to:"/admin/drivers",replace:!0})}),e.jsx(ve,{path:"/passengers",element:e.jsx(qs,{to:"/admin/riders",replace:!0})}),e.jsx(ve,{path:"/riders",element:e.jsx(qs,{to:"/admin/riders",replace:!0})}),e.jsx(ve,{path:"/fares",element:e.jsx(qs,{to:"/admin/base-pricing",replace:!0})}),e.jsx(ve,{path:"/pricing",element:e.jsx(qs,{to:"/admin/base-pricing",replace:!0})}),e.jsx(ve,{path:"/disputes",element:e.jsx(qs,{to:"/admin/disputes",replace:!0})}),e.jsx(ve,{path:"/analytics",element:e.jsx(qs,{to:"/admin/analytics",replace:!0})}),e.jsx(ve,{path:"/reports",element:e.jsx(qs,{to:"/admin/reports",replace:!0})}),e.jsx(ve,{path:"*",element:e.jsx($g,{})})]}),e.jsx(Cg,{})]})})})})})}),YP=Al.createRoot(document.getElementById("root"));YP.render(e.jsx(Ne.StrictMode,{children:e.jsx(KP,{})}));
//# sourceMappingURL=index-CLuGm47r.js.map
